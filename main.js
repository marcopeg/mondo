/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

"use strict";var L1=Object.create;var jd=Object.defineProperty;var R1=Object.getOwnPropertyDescriptor;var O1=Object.getOwnPropertyNames;var F1=Object.getPrototypeOf,_1=Object.prototype.hasOwnProperty;var Mo=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ah=(e,t)=>{for(var n in t)jd(e,n,{get:t[n],enumerable:!0})},Yw=(e,t,n,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of O1(t))!_1.call(e,o)&&o!==n&&jd(e,o,{get:()=>t[o],enumerable:!(i=R1(t,o))||i.enumerable});return e};var O=(e,t,n)=>(n=e!=null?L1(F1(e)):{},Yw(t||!e||!e.__esModule?jd(n,"default",{value:e,enumerable:!0}):n,e)),B1=e=>Yw(jd({},"__esModule",{value:!0}),e);var tT=Mo(Dt=>{"use strict";function Oh(e,t){var n=e.length;e.push(t);e:for(;0<n;){var i=n-1>>>1,o=e[i];if(0<Yd(o,t))e[i]=t,e[n]=o,n=i;else break e}}function xo(e){return e.length===0?null:e[0]}function Gd(e){if(e.length===0)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var i=0,o=e.length,a=o>>>1;i<a;){var r=2*(i+1)-1,s=e[r],l=r+1,c=e[l];if(0>Yd(s,n))l<o&&0>Yd(c,s)?(e[i]=c,e[l]=n,i=l):(e[i]=s,e[r]=n,i=r);else if(l<o&&0>Yd(c,n))e[i]=c,e[l]=n,i=l;else break e}}return t}function Yd(e,t){var n=e.sortIndex-t.sortIndex;return n!==0?n:e.id-t.id}Dt.unstable_now=void 0;typeof performance=="object"&&typeof performance.now=="function"?(qw=performance,Dt.unstable_now=function(){return qw.now()}):(Dh=Date,Gw=Dh.now(),Dt.unstable_now=function(){return Dh.now()-Gw});var qw,Dh,Gw,ta=[],$a=[],I1=1,Fi=null,On=3,Fh=!1,zc=!1,Hc=!1,_h=!1,Xw=typeof setTimeout=="function"?setTimeout:null,Jw=typeof clearTimeout=="function"?clearTimeout:null,Kw=typeof setImmediate!="undefined"?setImmediate:null;function qd(e){for(var t=xo($a);t!==null;){if(t.callback===null)Gd($a);else if(t.startTime<=e)Gd($a),t.sortIndex=t.expirationTime,Oh(ta,t);else break;t=xo($a)}}function Bh(e){if(Hc=!1,qd(e),!zc)if(xo(ta)!==null)zc=!0,el||(el=!0,Zs());else{var t=xo($a);t!==null&&Ih(Bh,t.startTime-e)}}var el=!1,Vc=-1,Ww=5,Zw=-1;function eT(){return _h?!0:!(Dt.unstable_now()-Zw<Ww)}function Lh(){if(_h=!1,el){var e=Dt.unstable_now();Zw=e;var t=!0;try{e:{zc=!1,Hc&&(Hc=!1,Jw(Vc),Vc=-1),Fh=!0;var n=On;try{t:{for(qd(e),Fi=xo(ta);Fi!==null&&!(Fi.expirationTime>e&&eT());){var i=Fi.callback;if(typeof i=="function"){Fi.callback=null,On=Fi.priorityLevel;var o=i(Fi.expirationTime<=e);if(e=Dt.unstable_now(),typeof o=="function"){Fi.callback=o,qd(e),t=!0;break t}Fi===xo(ta)&&Gd(ta),qd(e)}else Gd(ta);Fi=xo(ta)}if(Fi!==null)t=!0;else{var a=xo($a);a!==null&&Ih(Bh,a.startTime-e),t=!1}}break e}finally{Fi=null,On=n,Fh=!1}t=void 0}}finally{t?Zs():el=!1}}}var Zs;typeof Kw=="function"?Zs=function(){Kw(Lh)}:typeof MessageChannel!="undefined"?(Rh=new MessageChannel,Qw=Rh.port2,Rh.port1.onmessage=Lh,Zs=function(){Qw.postMessage(null)}):Zs=function(){Xw(Lh,0)};var Rh,Qw;function Ih(e,t){Vc=Xw(function(){e(Dt.unstable_now())},t)}Dt.unstable_IdlePriority=5;Dt.unstable_ImmediatePriority=1;Dt.unstable_LowPriority=4;Dt.unstable_NormalPriority=3;Dt.unstable_Profiling=null;Dt.unstable_UserBlockingPriority=2;Dt.unstable_cancelCallback=function(e){e.callback=null};Dt.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ww=0<e?Math.floor(1e3/e):5};Dt.unstable_getCurrentPriorityLevel=function(){return On};Dt.unstable_next=function(e){switch(On){case 1:case 2:case 3:var t=3;break;default:t=On}var n=On;On=t;try{return e()}finally{On=n}};Dt.unstable_requestPaint=function(){_h=!0};Dt.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=On;On=e;try{return t()}finally{On=n}};Dt.unstable_scheduleCallback=function(e,t,n){var i=Dt.unstable_now();switch(typeof n=="object"&&n!==null?(n=n.delay,n=typeof n=="number"&&0<n?i+n:i):n=i,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return o=n+o,e={id:I1++,callback:t,priorityLevel:e,startTime:n,expirationTime:o,sortIndex:-1},n>i?(e.sortIndex=n,Oh($a,e),xo(ta)===null&&e===xo($a)&&(Hc?(Jw(Vc),Vc=-1):Hc=!0,Ih(Bh,n-i))):(e.sortIndex=o,Oh(ta,e),zc||Fh||(zc=!0,el||(el=!0,Zs()))),e};Dt.unstable_shouldYield=eT;Dt.unstable_wrapCallback=function(e){var t=On;return function(){var n=On;On=t;try{return e.apply(this,arguments)}finally{On=n}}}});var iT=Mo((uP,nT)=>{"use strict";nT.exports=tT()});var mT=Mo(Fe=>{"use strict";var Hh=Symbol.for("react.transitional.element"),P1=Symbol.for("react.portal"),z1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),V1=Symbol.for("react.profiler"),U1=Symbol.for("react.consumer"),$1=Symbol.for("react.context"),j1=Symbol.for("react.forward_ref"),Y1=Symbol.for("react.suspense"),q1=Symbol.for("react.memo"),lT=Symbol.for("react.lazy"),G1=Symbol.for("react.activity"),oT=Symbol.iterator;function K1(e){return e===null||typeof e!="object"?null:(e=oT&&e[oT]||e["@@iterator"],typeof e=="function"?e:null)}var cT={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uT=Object.assign,dT={};function nl(e,t,n){this.props=e,this.context=t,this.refs=dT,this.updater=n||cT}nl.prototype.isReactComponent={};nl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};nl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function fT(){}fT.prototype=nl.prototype;function Vh(e,t,n){this.props=e,this.context=t,this.refs=dT,this.updater=n||cT}var Uh=Vh.prototype=new fT;Uh.constructor=Vh;uT(Uh,nl.prototype);Uh.isPureReactComponent=!0;var aT=Array.isArray;function zh(){}var St={H:null,A:null,T:null,S:null},pT=Object.prototype.hasOwnProperty;function $h(e,t,n){var i=n.ref;return{$$typeof:Hh,type:e,key:t,ref:i!==void 0?i:null,props:n}}function Q1(e,t){return $h(e.type,t,e.props)}function jh(e){return typeof e=="object"&&e!==null&&e.$$typeof===Hh}function X1(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var rT=/\/+/g;function Ph(e,t){return typeof e=="object"&&e!==null&&e.key!=null?X1(""+e.key):t.toString(36)}function J1(e){switch(e.status){case"fulfilled":return e.value;case"rejected":throw e.reason;default:switch(typeof e.status=="string"?e.then(zh,zh):(e.status="pending",e.then(function(t){e.status==="pending"&&(e.status="fulfilled",e.value=t)},function(t){e.status==="pending"&&(e.status="rejected",e.reason=t)})),e.status){case"fulfilled":return e.value;case"rejected":throw e.reason}}throw e}function tl(e,t,n,i,o){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var r=!1;if(e===null)r=!0;else switch(a){case"bigint":case"string":case"number":r=!0;break;case"object":switch(e.$$typeof){case Hh:case P1:r=!0;break;case lT:return r=e._init,tl(r(e._payload),t,n,i,o)}}if(r)return o=o(e),r=i===""?"."+Ph(e,0):i,aT(o)?(n="",r!=null&&(n=r.replace(rT,"$&/")+"/"),tl(o,t,n,"",function(c){return c})):o!=null&&(jh(o)&&(o=Q1(o,n+(o.key==null||e&&e.key===o.key?"":(""+o.key).replace(rT,"$&/")+"/")+r)),t.push(o)),1;r=0;var s=i===""?".":i+":";if(aT(e))for(var l=0;l<e.length;l++)i=e[l],a=s+Ph(i,l),r+=tl(i,t,n,a,o);else if(l=K1(e),typeof l=="function")for(e=l.call(e),l=0;!(i=e.next()).done;)i=i.value,a=s+Ph(i,l++),r+=tl(i,t,n,a,o);else if(a==="object"){if(typeof e.then=="function")return tl(J1(e),t,n,i,o);throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.")}return r}function Kd(e,t,n){if(e==null)return e;var i=[],o=0;return tl(e,i,"","",function(a){return t.call(n,a,o++)}),i}function W1(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var sT=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Z1={map:Kd,forEach:function(e,t,n){Kd(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Kd(e,function(){t++}),t},toArray:function(e){return Kd(e,function(t){return t})||[]},only:function(e){if(!jh(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Fe.Activity=G1;Fe.Children=Z1;Fe.Component=nl;Fe.Fragment=z1;Fe.Profiler=V1;Fe.PureComponent=Vh;Fe.StrictMode=H1;Fe.Suspense=Y1;Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=St;Fe.__COMPILER_RUNTIME={__proto__:null,c:function(e){return St.H.useMemoCache(e)}};Fe.cache=function(e){return function(){return e.apply(null,arguments)}};Fe.cacheSignal=function(){return null};Fe.cloneElement=function(e,t,n){if(e==null)throw Error("The argument must be a React element, but you passed "+e+".");var i=uT({},e.props),o=e.key;if(t!=null)for(a in t.key!==void 0&&(o=""+t.key),t)!pT.call(t,a)||a==="key"||a==="__self"||a==="__source"||a==="ref"&&t.ref===void 0||(i[a]=t[a]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var r=Array(a),s=0;s<a;s++)r[s]=arguments[s+2];i.children=r}return $h(e.type,o,i)};Fe.createContext=function(e){return e={$$typeof:$1,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null},e.Provider=e,e.Consumer={$$typeof:U1,_context:e},e};Fe.createElement=function(e,t,n){var i,o={},a=null;if(t!=null)for(i in t.key!==void 0&&(a=""+t.key),t)pT.call(t,i)&&i!=="key"&&i!=="__self"&&i!=="__source"&&(o[i]=t[i]);var r=arguments.length-2;if(r===1)o.children=n;else if(1<r){for(var s=Array(r),l=0;l<r;l++)s[l]=arguments[l+2];o.children=s}if(e&&e.defaultProps)for(i in r=e.defaultProps,r)o[i]===void 0&&(o[i]=r[i]);return $h(e,a,o)};Fe.createRef=function(){return{current:null}};Fe.forwardRef=function(e){return{$$typeof:j1,render:e}};Fe.isValidElement=jh;Fe.lazy=function(e){return{$$typeof:lT,_payload:{_status:-1,_result:e},_init:W1}};Fe.memo=function(e,t){return{$$typeof:q1,type:e,compare:t===void 0?null:t}};Fe.startTransition=function(e){var t=St.T,n={};St.T=n;try{var i=e(),o=St.S;o!==null&&o(n,i),typeof i=="object"&&i!==null&&typeof i.then=="function"&&i.then(zh,sT)}catch(a){sT(a)}finally{t!==null&&n.types!==null&&(t.types=n.types),St.T=t}};Fe.unstable_useCacheRefresh=function(){return St.H.useCacheRefresh()};Fe.use=function(e){return St.H.use(e)};Fe.useActionState=function(e,t,n){return St.H.useActionState(e,t,n)};Fe.useCallback=function(e,t){return St.H.useCallback(e,t)};Fe.useContext=function(e){return St.H.useContext(e)};Fe.useDebugValue=function(){};Fe.useDeferredValue=function(e,t){return St.H.useDeferredValue(e,t)};Fe.useEffect=function(e,t){return St.H.useEffect(e,t)};Fe.useEffectEvent=function(e){return St.H.useEffectEvent(e)};Fe.useId=function(){return St.H.useId()};Fe.useImperativeHandle=function(e,t,n){return St.H.useImperativeHandle(e,t,n)};Fe.useInsertionEffect=function(e,t){return St.H.useInsertionEffect(e,t)};Fe.useLayoutEffect=function(e,t){return St.H.useLayoutEffect(e,t)};Fe.useMemo=function(e,t){return St.H.useMemo(e,t)};Fe.useOptimistic=function(e,t){return St.H.useOptimistic(e,t)};Fe.useReducer=function(e,t,n){return St.H.useReducer(e,t,n)};Fe.useRef=function(e){return St.H.useRef(e)};Fe.useState=function(e){return St.H.useState(e)};Fe.useSyncExternalStore=function(e,t,n){return St.H.useSyncExternalStore(e,t,n)};Fe.useTransition=function(){return St.H.useTransition()};Fe.version="19.2.0"});var fe=Mo((fP,hT)=>{"use strict";hT.exports=mT()});var yT=Mo(jn=>{"use strict";var eD=fe();function gT(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function ja(){}var $n={d:{f:ja,r:function(){throw Error(gT(522))},D:ja,C:ja,L:ja,m:ja,X:ja,S:ja,M:ja},p:0,findDOMNode:null},tD=Symbol.for("react.portal");function nD(e,t,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:tD,key:i==null?null:""+i,children:e,containerInfo:t,implementation:n}}var Uc=eD.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function Qd(e,t){if(e==="font")return"";if(typeof t=="string")return t==="use-credentials"?t:""}jn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$n;jn.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)throw Error(gT(299));return nD(e,t,null,n)};jn.flushSync=function(e){var t=Uc.T,n=$n.p;try{if(Uc.T=null,$n.p=2,e)return e()}finally{Uc.T=t,$n.p=n,$n.d.f()}};jn.preconnect=function(e,t){typeof e=="string"&&(t?(t=t.crossOrigin,t=typeof t=="string"?t==="use-credentials"?t:"":void 0):t=null,$n.d.C(e,t))};jn.prefetchDNS=function(e){typeof e=="string"&&$n.d.D(e)};jn.preinit=function(e,t){if(typeof e=="string"&&t&&typeof t.as=="string"){var n=t.as,i=Qd(n,t.crossOrigin),o=typeof t.integrity=="string"?t.integrity:void 0,a=typeof t.fetchPriority=="string"?t.fetchPriority:void 0;n==="style"?$n.d.S(e,typeof t.precedence=="string"?t.precedence:void 0,{crossOrigin:i,integrity:o,fetchPriority:a}):n==="script"&&$n.d.X(e,{crossOrigin:i,integrity:o,fetchPriority:a,nonce:typeof t.nonce=="string"?t.nonce:void 0})}};jn.preinitModule=function(e,t){if(typeof e=="string")if(typeof t=="object"&&t!==null){if(t.as==null||t.as==="script"){var n=Qd(t.as,t.crossOrigin);$n.d.M(e,{crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0})}}else t==null&&$n.d.M(e)};jn.preload=function(e,t){if(typeof e=="string"&&typeof t=="object"&&t!==null&&typeof t.as=="string"){var n=t.as,i=Qd(n,t.crossOrigin);$n.d.L(e,n,{crossOrigin:i,integrity:typeof t.integrity=="string"?t.integrity:void 0,nonce:typeof t.nonce=="string"?t.nonce:void 0,type:typeof t.type=="string"?t.type:void 0,fetchPriority:typeof t.fetchPriority=="string"?t.fetchPriority:void 0,referrerPolicy:typeof t.referrerPolicy=="string"?t.referrerPolicy:void 0,imageSrcSet:typeof t.imageSrcSet=="string"?t.imageSrcSet:void 0,imageSizes:typeof t.imageSizes=="string"?t.imageSizes:void 0,media:typeof t.media=="string"?t.media:void 0})}};jn.preloadModule=function(e,t){if(typeof e=="string")if(t){var n=Qd(t.as,t.crossOrigin);$n.d.m(e,{as:typeof t.as=="string"&&t.as!=="script"?t.as:void 0,crossOrigin:n,integrity:typeof t.integrity=="string"?t.integrity:void 0})}else $n.d.m(e)};jn.requestFormReset=function(e){$n.d.r(e)};jn.unstable_batchedUpdates=function(e,t){return e(t)};jn.useFormState=function(e,t,n){return Uc.H.useFormState(e,t,n)};jn.useFormStatus=function(){return Uc.H.useHostTransitionStatus()};jn.version="19.2.0"});var Yh=Mo((mP,vT)=>{"use strict";function bT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(bT)}catch(e){console.error(e)}}bT(),vT.exports=yT()});var L0=Mo(Tp=>{"use strict";var ln=iT(),YS=fe(),iD=Yh();function q(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var n=2;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function qS(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Nu(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function GS(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function KS(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function wT(e){if(Nu(e)!==e)throw Error(q(188))}function oD(e){var t=e.alternate;if(!t){if(t=Nu(e),t===null)throw Error(q(188));return t!==e?null:e}for(var n=e,i=t;;){var o=n.return;if(o===null)break;var a=o.alternate;if(a===null){if(i=o.return,i!==null){n=i;continue}break}if(o.child===a.child){for(a=o.child;a;){if(a===n)return wT(o),e;if(a===i)return wT(o),t;a=a.sibling}throw Error(q(188))}if(n.return!==i.return)n=o,i=a;else{for(var r=!1,s=o.child;s;){if(s===n){r=!0,n=o,i=a;break}if(s===i){r=!0,i=o,n=a;break}s=s.sibling}if(!r){for(s=a.child;s;){if(s===n){r=!0,n=a,i=o;break}if(s===i){r=!0,i=a,n=o;break}s=s.sibling}if(!r)throw Error(q(189))}}if(n.alternate!==i)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?e:t}function QS(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=QS(e),t!==null)return t;e=e.sibling}return null}var Ct=Object.assign,aD=Symbol.for("react.element"),Xd=Symbol.for("react.transitional.element"),Xc=Symbol.for("react.portal"),ll=Symbol.for("react.fragment"),XS=Symbol.for("react.strict_mode"),Cg=Symbol.for("react.profiler"),JS=Symbol.for("react.consumer"),ca=Symbol.for("react.context"),wy=Symbol.for("react.forward_ref"),Mg=Symbol.for("react.suspense"),xg=Symbol.for("react.suspense_list"),Ty=Symbol.for("react.memo"),Ya=Symbol.for("react.lazy");Symbol.for("react.scope");var Ng=Symbol.for("react.activity");Symbol.for("react.legacy_hidden");Symbol.for("react.tracing_marker");var rD=Symbol.for("react.memo_cache_sentinel");Symbol.for("react.view_transition");var TT=Symbol.iterator;function $c(e){return e===null||typeof e!="object"?null:(e=TT&&e[TT]||e["@@iterator"],typeof e=="function"?e:null)}var sD=Symbol.for("react.client.reference");function Ag(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===sD?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ll:return"Fragment";case Cg:return"Profiler";case XS:return"StrictMode";case Mg:return"Suspense";case xg:return"SuspenseList";case Ng:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case Xc:return"Portal";case ca:return e.displayName||"Context";case JS:return(e._context.displayName||"Context")+".Consumer";case wy:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ty:return t=e.displayName||null,t!==null?t:Ag(e.type)||"Memo";case Ya:t=e._payload,e=e._init;try{return Ag(e(t))}catch(n){}}return null}var Jc=Array.isArray,Ae=YS.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct=iD.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,is={pending:!1,data:null,method:null,action:null},Dg=[],cl=-1;function Ro(e){return{current:e}}function bn(e){0>cl||(e.current=Dg[cl],Dg[cl]=null,cl--)}function Tt(e,t){cl++,Dg[cl]=e.current,e.current=t}var Lo=Ro(null),mu=Ro(null),nr=Ro(null),Df=Ro(null);function Lf(e,t){switch(Tt(nr,t),Tt(mu,e),Tt(Lo,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?NS(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=NS(t),e=y0(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}bn(Lo),Tt(Lo,e)}function xl(){bn(Lo),bn(mu),bn(nr)}function Lg(e){e.memoizedState!==null&&Tt(Df,e);var t=Lo.current,n=y0(t,e.type);t!==n&&(Tt(mu,e),Tt(Lo,n))}function Rf(e){mu.current===e&&(bn(Lo),bn(mu)),Df.current===e&&(bn(Df),Cu._currentValue=is)}var qh,ST;function Zr(e){if(qh===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);qh=t&&t[1]||"",ST=-1<n.stack.indexOf(`
    at`)?" (<anonymous>)":-1<n.stack.indexOf("@")?"@unknown:0:0":""}return`
`+qh+e+ST}var Gh=!1;function Kh(e,t){if(!e||Gh)return"";Gh=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var i={DetermineComponentFrameRoot:function(){try{if(t){var f=function(){throw Error()};if(Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(d){var p=d}Reflect.construct(e,[],f)}else{try{f.call()}catch(d){p=d}e.call(f.prototype)}}else{try{throw Error()}catch(d){p=d}(f=e())&&typeof f.catch=="function"&&f.catch(function(){})}}catch(d){if(d&&p&&typeof d.stack=="string")return[d.stack,p.stack]}return[null,null]}};i.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var o=Object.getOwnPropertyDescriptor(i.DetermineComponentFrameRoot,"name");o&&o.configurable&&Object.defineProperty(i.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=i.DetermineComponentFrameRoot(),r=a[0],s=a[1];if(r&&s){var l=r.split(`
`),c=s.split(`
`);for(o=i=0;i<l.length&&!l[i].includes("DetermineComponentFrameRoot");)i++;for(;o<c.length&&!c[o].includes("DetermineComponentFrameRoot");)o++;if(i===l.length||o===c.length)for(i=l.length-1,o=c.length-1;1<=i&&0<=o&&l[i]!==c[o];)o--;for(;1<=i&&0<=o;i--,o--)if(l[i]!==c[o]){if(i!==1||o!==1)do if(i--,o--,0>o||l[i]!==c[o]){var u=`
`+l[i].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=i&&0<=o);break}}}finally{Gh=!1,Error.prepareStackTrace=n}return(n=e?e.displayName||e.name:"")?Zr(n):""}function lD(e,t){switch(e.tag){case 26:case 27:case 5:return Zr(e.type);case 16:return Zr("Lazy");case 13:return e.child!==t&&t!==null?Zr("Suspense Fallback"):Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 15:return Kh(e.type,!1);case 11:return Kh(e.type.render,!1);case 1:return Kh(e.type,!0);case 31:return Zr("Activity");default:return""}}function kT(e){try{var t="",n=null;do t+=lD(e,n),n=e,e=e.return;while(e);return t}catch(i){return`
Error generating stack: `+i.message+`
`+i.stack}}var Rg=Object.prototype.hasOwnProperty,Sy=ln.unstable_scheduleCallback,Qh=ln.unstable_cancelCallback,cD=ln.unstable_shouldYield,uD=ln.unstable_requestPaint,wi=ln.unstable_now,dD=ln.unstable_getCurrentPriorityLevel,WS=ln.unstable_ImmediatePriority,ZS=ln.unstable_UserBlockingPriority,Of=ln.unstable_NormalPriority,fD=ln.unstable_LowPriority,ek=ln.unstable_IdlePriority,pD=ln.log,mD=ln.unstable_setDisableYieldValue,Au=null,Ti=null;function Ja(e){if(typeof pD=="function"&&mD(e),Ti&&typeof Ti.setStrictMode=="function")try{Ti.setStrictMode(Au,e)}catch(t){}}var Si=Math.clz32?Math.clz32:yD,hD=Math.log,gD=Math.LN2;function yD(e){return e>>>=0,e===0?32:31-(hD(e)/gD|0)|0}var Jd=256,Wd=262144,Zd=4194304;function es(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function ap(e,t,n){var i=e.pendingLanes;if(i===0)return 0;var o=0,a=e.suspendedLanes,r=e.pingedLanes;e=e.warmLanes;var s=i&134217727;return s!==0?(i=s&~a,i!==0?o=es(i):(r&=s,r!==0?o=es(r):n||(n=s&~e,n!==0&&(o=es(n))))):(s=i&~a,s!==0?o=es(s):r!==0?o=es(r):n||(n=i&~e,n!==0&&(o=es(n)))),o===0?0:t!==0&&t!==o&&!(t&a)&&(a=o&-o,n=t&-t,a>=n||a===32&&(n&4194048)!==0)?t:o}function Du(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function bD(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tk(){var e=Zd;return Zd<<=1,!(Zd&62914560)&&(Zd=4194304),e}function Xh(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function Lu(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function vD(e,t,n,i,o,a){var r=e.pendingLanes;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=n,e.entangledLanes&=n,e.errorRecoveryDisabledLanes&=n,e.shellSuspendCounter=0;var s=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(n=r&~n;0<n;){var u=31-Si(n),f=1<<u;s[u]=0,l[u]=-1;var p=c[u];if(p!==null)for(c[u]=null,u=0;u<p.length;u++){var d=p[u];d!==null&&(d.lane&=-536870913)}n&=~f}i!==0&&nk(e,i,0),a!==0&&o===0&&e.tag!==0&&(e.suspendedLanes|=a&~(r&~t))}function nk(e,t,n){e.pendingLanes|=t,e.suspendedLanes&=~t;var i=31-Si(t);e.entangledLanes|=t,e.entanglements[i]=e.entanglements[i]|1073741824|n&261930}function ik(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var i=31-Si(n),o=1<<i;o&t|e[i]&t&&(e[i]|=t),n&=~o}}function ok(e,t){var n=t&-t;return n=n&42?1:ky(n),n&(e.suspendedLanes|t)?0:n}function ky(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ey(e){return e&=-e,2<e?8<e?e&134217727?32:268435456:8:2}function ak(){var e=ct.p;return e!==0?e:(e=window.event,e===void 0?32:N0(e.type))}function ET(e,t){var n=ct.p;try{return ct.p=e,t()}finally{ct.p=n}}var hr=Math.random().toString(36).slice(2),En="__reactFiber$"+hr,ii="__reactProps$"+hr,Pl="__reactContainer$"+hr,Og="__reactEvents$"+hr,wD="__reactListeners$"+hr,TD="__reactHandles$"+hr,CT="__reactResources$"+hr,Ru="__reactMarker$"+hr;function Cy(e){delete e[En],delete e[ii],delete e[Og],delete e[wD],delete e[TD]}function ul(e){var t=e[En];if(t)return t;for(var n=e.parentNode;n;){if(t=n[Pl]||n[En]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=OS(e);e!==null;){if(n=e[En])return n;e=OS(e)}return t}e=n,n=e.parentNode}return null}function zl(e){if(e=e[En]||e[Pl]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Wc(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(q(33))}function wl(e){var t=e[CT];return t||(t=e[CT]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function yn(e){e[Ru]=!0}var rk=new Set,sk={};function ps(e,t){Nl(e,t),Nl(e+"Capture",t)}function Nl(e,t){for(sk[e]=t,e=0;e<t.length;e++)rk.add(t[e])}var SD=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),MT={},xT={};function kD(e){return Rg.call(xT,e)?!0:Rg.call(MT,e)?!1:SD.test(e)?xT[e]=!0:(MT[e]=!0,!1)}function hf(e,t,n){if(kD(t))if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var i=t.toLowerCase().slice(0,5);if(i!=="data-"&&i!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+n)}}function ef(e,t,n){if(n===null)e.removeAttribute(t);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+n)}}function na(e,t,n,i){if(i===null)e.removeAttribute(n);else{switch(typeof i){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttributeNS(t,n,""+i)}}function Bi(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function lk(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function ED(e,t,n){var i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof i!="undefined"&&typeof i.get=="function"&&typeof i.set=="function"){var o=i.get,a=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return o.call(this)},set:function(r){n=""+r,a.call(this,r)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(r){n=""+r},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Fg(e){if(!e._valueTracker){var t=lk(e)?"checked":"value";e._valueTracker=ED(e,t,""+e[t])}}function ck(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),i="";return e&&(i=lk(e)?e.checked?"true":"false":e.value),e=i,e!==n?(t.setValue(e),!0):!1}function Ff(e){if(e=e||(typeof document!="undefined"?document:void 0),typeof e=="undefined")return null;try{return e.activeElement||e.body}catch(t){return e.body}}var CD=/[\n"\\]/g;function zi(e){return e.replace(CD,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function _g(e,t,n,i,o,a,r,s){e.name="",r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"?e.type=r:e.removeAttribute("type"),t!=null?r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Bi(t)):e.value!==""+Bi(t)&&(e.value=""+Bi(t)):r!=="submit"&&r!=="reset"||e.removeAttribute("value"),t!=null?Bg(e,r,Bi(t)):n!=null?Bg(e,r,Bi(n)):i!=null&&e.removeAttribute("value"),o==null&&a!=null&&(e.defaultChecked=!!a),o!=null&&(e.checked=o&&typeof o!="function"&&typeof o!="symbol"),s!=null&&typeof s!="function"&&typeof s!="symbol"&&typeof s!="boolean"?e.name=""+Bi(s):e.removeAttribute("name")}function uk(e,t,n,i,o,a,r,s){if(a!=null&&typeof a!="function"&&typeof a!="symbol"&&typeof a!="boolean"&&(e.type=a),t!=null||n!=null){if(!(a!=="submit"&&a!=="reset"||t!=null)){Fg(e);return}n=n!=null?""+Bi(n):"",t=t!=null?""+Bi(t):n,s||t===e.value||(e.value=t),e.defaultValue=t}i=i!=null?i:o,i=typeof i!="function"&&typeof i!="symbol"&&!!i,e.checked=s?e.checked:!!i,e.defaultChecked=!!i,r!=null&&typeof r!="function"&&typeof r!="symbol"&&typeof r!="boolean"&&(e.name=r),Fg(e)}function Bg(e,t,n){t==="number"&&Ff(e.ownerDocument)===e||e.defaultValue===""+n||(e.defaultValue=""+n)}function Tl(e,t,n,i){if(e=e.options,t){t={};for(var o=0;o<n.length;o++)t["$"+n[o]]=!0;for(n=0;n<e.length;n++)o=t.hasOwnProperty("$"+e[n].value),e[n].selected!==o&&(e[n].selected=o),o&&i&&(e[n].defaultSelected=!0)}else{for(n=""+Bi(n),t=null,o=0;o<e.length;o++){if(e[o].value===n){e[o].selected=!0,i&&(e[o].defaultSelected=!0);return}t!==null||e[o].disabled||(t=e[o])}t!==null&&(t.selected=!0)}}function dk(e,t,n){if(t!=null&&(t=""+Bi(t),t!==e.value&&(e.value=t),n==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=n!=null?""+Bi(n):""}function fk(e,t,n,i){if(t==null){if(i!=null){if(n!=null)throw Error(q(92));if(Jc(i)){if(1<i.length)throw Error(q(93));i=i[0]}n=i}n==null&&(n=""),t=n}n=Bi(t),e.defaultValue=n,i=e.textContent,i===n&&i!==""&&i!==null&&(e.value=i),Fg(e)}function Al(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var MD=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function NT(e,t,n){var i=t.indexOf("--")===0;n==null||typeof n=="boolean"||n===""?i?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":i?e.setProperty(t,n):typeof n!="number"||n===0||MD.has(t)?t==="float"?e.cssFloat=n:e[t]=(""+n).trim():e[t]=n+"px"}function pk(e,t,n){if(t!=null&&typeof t!="object")throw Error(q(62));if(e=e.style,n!=null){for(var i in n)!n.hasOwnProperty(i)||t!=null&&t.hasOwnProperty(i)||(i.indexOf("--")===0?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="");for(var o in t)i=t[o],t.hasOwnProperty(o)&&n[o]!==i&&NT(e,o,i)}else for(var a in t)t.hasOwnProperty(a)&&NT(e,a,t[a])}function My(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xD=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ND=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gf(e){return ND.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function ua(){}var Ig=null;function xy(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var dl=null,Sl=null;function AT(e){var t=zl(e);if(t&&(e=t.stateNode)){var n=e[ii]||null;e:switch(e=t.stateNode,t.type){case"input":if(_g(e,n.value,n.defaultValue,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll('input[name="'+zi(""+t)+'"][type="radio"]'),t=0;t<n.length;t++){var i=n[t];if(i!==e&&i.form===e.form){var o=i[ii]||null;if(!o)throw Error(q(90));_g(i,o.value,o.defaultValue,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name)}}for(t=0;t<n.length;t++)i=n[t],i.form===e.form&&ck(i)}break e;case"textarea":dk(e,n.value,n.defaultValue);break e;case"select":t=n.value,t!=null&&Tl(e,!!n.multiple,t,!1)}}}var Jh=!1;function mk(e,t,n){if(Jh)return e(t,n);Jh=!0;try{var i=e(t);return i}finally{if(Jh=!1,(dl!==null||Sl!==null)&&(yp(),dl&&(t=dl,e=Sl,Sl=dl=null,AT(t),e)))for(t=0;t<e.length;t++)AT(e[t])}}function hu(e,t){var n=e.stateNode;if(n===null)return null;var i=n[ii]||null;if(i===null)return null;n=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(q(231,t,typeof n));return n}var ha=!(typeof window=="undefined"||typeof window.document=="undefined"||typeof window.document.createElement=="undefined"),Pg=!1;if(ha)try{il={},Object.defineProperty(il,"passive",{get:function(){Pg=!0}}),window.addEventListener("test",il,il),window.removeEventListener("test",il,il)}catch(e){Pg=!1}var il,Wa=null,Ny=null,yf=null;function hk(){if(yf)return yf;var e,t=Ny,n=t.length,i,o="value"in Wa?Wa.value:Wa.textContent,a=o.length;for(e=0;e<n&&t[e]===o[e];e++);var r=n-e;for(i=1;i<=r&&t[n-i]===o[a-i];i++);return yf=o.slice(e,1<i?1-i:void 0)}function bf(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function tf(){return!0}function DT(){return!1}function oi(e){function t(n,i,o,a,r){this._reactName=n,this._targetInst=o,this.type=i,this.nativeEvent=a,this.target=r,this.currentTarget=null;for(var s in e)e.hasOwnProperty(s)&&(n=e[s],this[s]=n?n(a):a[s]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?tf:DT,this.isPropagationStopped=DT,this}return Ct(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=tf)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=tf)},persist:function(){},isPersistent:tf}),t}var ms={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rp=oi(ms),Ou=Ct({},ms,{view:0,detail:0}),AD=oi(Ou),Wh,Zh,jc,sp=Ct({},Ou,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ay,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==jc&&(jc&&e.type==="mousemove"?(Wh=e.screenX-jc.screenX,Zh=e.screenY-jc.screenY):Zh=Wh=0,jc=e),Wh)},movementY:function(e){return"movementY"in e?e.movementY:Zh}}),LT=oi(sp),DD=Ct({},sp,{dataTransfer:0}),LD=oi(DD),RD=Ct({},Ou,{relatedTarget:0}),eg=oi(RD),OD=Ct({},ms,{animationName:0,elapsedTime:0,pseudoElement:0}),FD=oi(OD),_D=Ct({},ms,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),BD=oi(_D),ID=Ct({},ms,{data:0}),RT=oi(ID),PD={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zD={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},HD={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VD(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=HD[e])?!!t[e]:!1}function Ay(){return VD}var UD=Ct({},Ou,{key:function(e){if(e.key){var t=PD[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=bf(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zD[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ay,charCode:function(e){return e.type==="keypress"?bf(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?bf(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),$D=oi(UD),jD=Ct({},sp,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),OT=oi(jD),YD=Ct({},Ou,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ay}),qD=oi(YD),GD=Ct({},ms,{propertyName:0,elapsedTime:0,pseudoElement:0}),KD=oi(GD),QD=Ct({},sp,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),XD=oi(QD),JD=Ct({},ms,{newState:0,oldState:0}),WD=oi(JD),ZD=[9,13,27,32],Dy=ha&&"CompositionEvent"in window,tu=null;ha&&"documentMode"in document&&(tu=document.documentMode);var eL=ha&&"TextEvent"in window&&!tu,gk=ha&&(!Dy||tu&&8<tu&&11>=tu),FT=String.fromCharCode(32),_T=!1;function yk(e,t){switch(e){case"keyup":return ZD.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function bk(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var fl=!1;function tL(e,t){switch(e){case"compositionend":return bk(t);case"keypress":return t.which!==32?null:(_T=!0,FT);case"textInput":return e=t.data,e===FT&&_T?null:e;default:return null}}function nL(e,t){if(fl)return e==="compositionend"||!Dy&&yk(e,t)?(e=hk(),yf=Ny=Wa=null,fl=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return gk&&t.locale!=="ko"?null:t.data;default:return null}}var iL={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function BT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!iL[e.type]:t==="textarea"}function vk(e,t,n,i){dl?Sl?Sl.push(i):Sl=[i]:dl=i,t=Wf(t,"onChange"),0<t.length&&(n=new rp("onChange","change",null,n,i),e.push({event:n,listeners:t}))}var nu=null,gu=null;function oL(e){m0(e,0)}function lp(e){var t=Wc(e);if(ck(t))return e}function IT(e,t){if(e==="change")return t}var wk=!1;ha&&(ha?(of="oninput"in document,of||(tg=document.createElement("div"),tg.setAttribute("oninput","return;"),of=typeof tg.oninput=="function"),nf=of):nf=!1,wk=nf&&(!document.documentMode||9<document.documentMode));var nf,of,tg;function PT(){nu&&(nu.detachEvent("onpropertychange",Tk),gu=nu=null)}function Tk(e){if(e.propertyName==="value"&&lp(gu)){var t=[];vk(t,gu,e,xy(e)),mk(oL,t)}}function aL(e,t,n){e==="focusin"?(PT(),nu=t,gu=n,nu.attachEvent("onpropertychange",Tk)):e==="focusout"&&PT()}function rL(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return lp(gu)}function sL(e,t){if(e==="click")return lp(t)}function lL(e,t){if(e==="input"||e==="change")return lp(t)}function cL(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ei=typeof Object.is=="function"?Object.is:cL;function yu(e,t){if(Ei(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var o=n[i];if(!Rg.call(t,o)||!Ei(e[o],t[o]))return!1}return!0}function zT(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function HT(e,t){var n=zT(e);e=0;for(var i;n;){if(n.nodeType===3){if(i=e+n.textContent.length,e<=t&&i>=t)return{node:n,offset:t-e};e=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=zT(n)}}function Sk(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Sk(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function kk(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=Ff(e.document);t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch(i){n=!1}if(n)e=t.contentWindow;else break;t=Ff(e.document)}return t}function Ly(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var uL=ha&&"documentMode"in document&&11>=document.documentMode,pl=null,zg=null,iu=null,Hg=!1;function VT(e,t,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Hg||pl==null||pl!==Ff(i)||(i=pl,"selectionStart"in i&&Ly(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),iu&&yu(iu,i)||(iu=i,i=Wf(zg,"onSelect"),0<i.length&&(t=new rp("onSelect","select",null,t,n),e.push({event:t,listeners:i}),t.target=pl)))}function Wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var ml={animationend:Wr("Animation","AnimationEnd"),animationiteration:Wr("Animation","AnimationIteration"),animationstart:Wr("Animation","AnimationStart"),transitionrun:Wr("Transition","TransitionRun"),transitionstart:Wr("Transition","TransitionStart"),transitioncancel:Wr("Transition","TransitionCancel"),transitionend:Wr("Transition","TransitionEnd")},ng={},Ek={};ha&&(Ek=document.createElement("div").style,"AnimationEvent"in window||(delete ml.animationend.animation,delete ml.animationiteration.animation,delete ml.animationstart.animation),"TransitionEvent"in window||delete ml.transitionend.transition);function hs(e){if(ng[e])return ng[e];if(!ml[e])return e;var t=ml[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ek)return ng[e]=t[n];return e}var Ck=hs("animationend"),Mk=hs("animationiteration"),xk=hs("animationstart"),dL=hs("transitionrun"),fL=hs("transitionstart"),pL=hs("transitioncancel"),Nk=hs("transitionend"),Ak=new Map,Vg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Vg.push("scrollEnd");function oo(e,t){Ak.set(e,t),ps(t,[e])}var _f=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},_i=[],hl=0,Ry=0;function cp(){for(var e=hl,t=Ry=hl=0;t<e;){var n=_i[t];_i[t++]=null;var i=_i[t];_i[t++]=null;var o=_i[t];_i[t++]=null;var a=_i[t];if(_i[t++]=null,i!==null&&o!==null){var r=i.pending;r===null?o.next=o:(o.next=r.next,r.next=o),i.pending=o}a!==0&&Dk(n,o,a)}}function up(e,t,n,i){_i[hl++]=e,_i[hl++]=t,_i[hl++]=n,_i[hl++]=i,Ry|=i,e.lanes|=i,e=e.alternate,e!==null&&(e.lanes|=i)}function Oy(e,t,n,i){return up(e,t,n,i),Bf(e)}function gs(e,t){return up(e,null,null,t),Bf(e)}function Dk(e,t,n){e.lanes|=n;var i=e.alternate;i!==null&&(i.lanes|=n);for(var o=!1,a=e.return;a!==null;)a.childLanes|=n,i=a.alternate,i!==null&&(i.childLanes|=n),a.tag===22&&(e=a.stateNode,e===null||e._visibility&1||(o=!0)),e=a,a=a.return;return e.tag===3?(a=e.stateNode,o&&t!==null&&(o=31-Si(n),e=a.hiddenUpdates,i=e[o],i===null?e[o]=[t]:i.push(t),t.lane=n|536870912),a):null}function Bf(e){if(50<fu)throw fu=0,ly=null,Error(q(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var gl={};function mL(e,t,n,i){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bi(e,t,n,i){return new mL(e,t,n,i)}function Fy(e){return e=e.prototype,!(!e||!e.isReactComponent)}function fa(e,t){var n=e.alternate;return n===null?(n=bi(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&65011712,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n.refCleanup=e.refCleanup,n}function Lk(e,t){e.flags&=65011714;var n=e.alternate;return n===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=n.childLanes,e.lanes=n.lanes,e.child=n.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=n.memoizedProps,e.memoizedState=n.memoizedState,e.updateQueue=n.updateQueue,e.type=n.type,t=n.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function vf(e,t,n,i,o,a){var r=0;if(i=e,typeof e=="function")Fy(e)&&(r=1);else if(typeof e=="string")r=yR(e,n,Lo.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case Ng:return e=bi(31,n,t,o),e.elementType=Ng,e.lanes=a,e;case ll:return os(n.children,o,a,t);case XS:r=8,o|=24;break;case Cg:return e=bi(12,n,t,o|2),e.elementType=Cg,e.lanes=a,e;case Mg:return e=bi(13,n,t,o),e.elementType=Mg,e.lanes=a,e;case xg:return e=bi(19,n,t,o),e.elementType=xg,e.lanes=a,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ca:r=10;break e;case JS:r=9;break e;case wy:r=11;break e;case Ty:r=14;break e;case Ya:r=16,i=null;break e}r=29,n=Error(q(130,e===null?"null":typeof e,"")),i=null}return t=bi(r,n,t,o),t.elementType=e,t.type=i,t.lanes=a,t}function os(e,t,n,i){return e=bi(7,e,i,t),e.lanes=n,e}function ig(e,t,n){return e=bi(6,e,null,t),e.lanes=n,e}function Rk(e){var t=bi(18,null,null,0);return t.stateNode=e,t}function og(e,t,n){return t=bi(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var UT=new WeakMap;function Hi(e,t){if(typeof e=="object"&&e!==null){var n=UT.get(e);return n!==void 0?n:(t={value:e,source:t,stack:kT(t)},UT.set(e,t),t)}return{value:e,source:t,stack:kT(t)}}var yl=[],bl=0,If=null,bu=0,Ii=[],Pi=0,dr=null,No=1,Ao="";function sa(e,t){yl[bl++]=bu,yl[bl++]=If,If=e,bu=t}function Ok(e,t,n){Ii[Pi++]=No,Ii[Pi++]=Ao,Ii[Pi++]=dr,dr=e;var i=No;e=Ao;var o=32-Si(i)-1;i&=~(1<<o),n+=1;var a=32-Si(t)+o;if(30<a){var r=o-o%5;a=(i&(1<<r)-1).toString(32),i>>=r,o-=r,No=1<<32-Si(t)+o|n<<o|i,Ao=a+e}else No=1<<a|n<<o|i,Ao=e}function _y(e){e.return!==null&&(sa(e,1),Ok(e,1,0))}function By(e){for(;e===If;)If=yl[--bl],yl[bl]=null,bu=yl[--bl],yl[bl]=null;for(;e===dr;)dr=Ii[--Pi],Ii[Pi]=null,Ao=Ii[--Pi],Ii[Pi]=null,No=Ii[--Pi],Ii[Pi]=null}function Fk(e,t){Ii[Pi++]=No,Ii[Pi++]=Ao,Ii[Pi++]=dr,No=t.id,Ao=t.overflow,dr=e}var Cn=null,Et=null,We=!1,ir=null,Vi=!1,Ug=Error(q(519));function fr(e){var t=Error(q(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw vu(Hi(t,e)),Ug}function $T(e){var t=e.stateNode,n=e.type,i=e.memoizedProps;switch(t[En]=e,t[ii]=i,n){case"dialog":je("cancel",t),je("close",t);break;case"iframe":case"object":case"embed":je("load",t);break;case"video":case"audio":for(n=0;n<ku.length;n++)je(ku[n],t);break;case"source":je("error",t);break;case"img":case"image":case"link":je("error",t),je("load",t);break;case"details":je("toggle",t);break;case"input":je("invalid",t),uk(t,i.value,i.defaultValue,i.checked,i.defaultChecked,i.type,i.name,!0);break;case"select":je("invalid",t);break;case"textarea":je("invalid",t),fk(t,i.value,i.defaultValue,i.children)}n=i.children,typeof n!="string"&&typeof n!="number"&&typeof n!="bigint"||t.textContent===""+n||i.suppressHydrationWarning===!0||g0(t.textContent,n)?(i.popover!=null&&(je("beforetoggle",t),je("toggle",t)),i.onScroll!=null&&je("scroll",t),i.onScrollEnd!=null&&je("scrollend",t),i.onClick!=null&&(t.onclick=ua),t=!0):t=!1,t||fr(e,!0)}function jT(e){for(Cn=e.return;Cn;)switch(Cn.tag){case 5:case 31:case 13:Vi=!1;return;case 27:case 3:Vi=!0;return;default:Cn=Cn.return}}function ol(e){if(e!==Cn)return!1;if(!We)return jT(e),We=!0,!1;var t=e.tag,n;if((n=t!==3&&t!==27)&&((n=t===5)&&(n=e.type,n=!(n!=="form"&&n!=="button")||py(e.type,e.memoizedProps)),n=!n),n&&Et&&fr(e),jT(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));Et=RS(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(317));Et=RS(e)}else t===27?(t=Et,gr(e.type)?(e=yy,yy=null,Et=e):Et=t):Et=Cn?$i(e.stateNode.nextSibling):null;return!0}function ls(){Et=Cn=null,We=!1}function ag(){var e=ir;return e!==null&&(ti===null?ti=e:ti.push.apply(ti,e),ir=null),e}function vu(e){ir===null?ir=[e]:ir.push(e)}var $g=Ro(null),ys=null,da=null;function Ga(e,t,n){Tt($g,t._currentValue),t._currentValue=n}function pa(e){e._currentValue=$g.current,bn($g)}function jg(e,t,n){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===n)break;e=e.return}}function Yg(e,t,n,i){var o=e.child;for(o!==null&&(o.return=e);o!==null;){var a=o.dependencies;if(a!==null){var r=o.child;a=a.firstContext;e:for(;a!==null;){var s=a;a=o;for(var l=0;l<t.length;l++)if(s.context===t[l]){a.lanes|=n,s=a.alternate,s!==null&&(s.lanes|=n),jg(a.return,n,e),i||(r=null);break e}a=s.next}}else if(o.tag===18){if(r=o.return,r===null)throw Error(q(341));r.lanes|=n,a=r.alternate,a!==null&&(a.lanes|=n),jg(r,n,e),r=null}else r=o.child;if(r!==null)r.return=o;else for(r=o;r!==null;){if(r===e){r=null;break}if(o=r.sibling,o!==null){o.return=r.return,r=o;break}r=r.return}o=r}}function Hl(e,t,n,i){e=null;for(var o=t,a=!1;o!==null;){if(!a){if(o.flags&524288)a=!0;else if(o.flags&262144)break}if(o.tag===10){var r=o.alternate;if(r===null)throw Error(q(387));if(r=r.memoizedProps,r!==null){var s=o.type;Ei(o.pendingProps.value,r.value)||(e!==null?e.push(s):e=[s])}}else if(o===Df.current){if(r=o.alternate,r===null)throw Error(q(387));r.memoizedState.memoizedState!==o.memoizedState.memoizedState&&(e!==null?e.push(Cu):e=[Cu])}o=o.return}e!==null&&Yg(t,e,n,i),t.flags|=262144}function Pf(e){for(e=e.firstContext;e!==null;){if(!Ei(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function cs(e){ys=e,da=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Mn(e){return _k(ys,e)}function af(e,t){return ys===null&&cs(e),_k(e,t)}function _k(e,t){var n=t._currentValue;if(t={context:t,memoizedValue:n,next:null},da===null){if(e===null)throw Error(q(308));da=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else da=da.next=t;return n}var hL=typeof AbortController!="undefined"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(n,i){e.push(i)}};this.abort=function(){t.aborted=!0,e.forEach(function(n){return n()})}},gL=ln.unstable_scheduleCallback,yL=ln.unstable_NormalPriority,Jt={$$typeof:ca,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Iy(){return{controller:new hL,data:new Map,refCount:0}}function Fu(e){e.refCount--,e.refCount===0&&gL(yL,function(){e.controller.abort()})}var ou=null,qg=0,Dl=0,kl=null;function bL(e,t){if(ou===null){var n=ou=[];qg=0,Dl=lb(),kl={status:"pending",value:void 0,then:function(i){n.push(i)}}}return qg++,t.then(YT,YT),t}function YT(){if(--qg===0&&ou!==null){kl!==null&&(kl.status="fulfilled");var e=ou;ou=null,Dl=0,kl=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function vL(e,t){var n=[],i={status:"pending",value:null,reason:null,then:function(o){n.push(o)}};return e.then(function(){i.status="fulfilled",i.value=t;for(var o=0;o<n.length;o++)(0,n[o])(t)},function(o){for(i.status="rejected",i.reason=o,o=0;o<n.length;o++)(0,n[o])(void 0)}),i}var qT=Ae.S;Ae.S=function(e,t){QE=wi(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&bL(e,t),qT!==null&&qT(e,t)};var as=Ro(null);function Py(){var e=as.current;return e!==null?e:wt.pooledCache}function wf(e,t){t===null?Tt(as,as.current):Tt(as,t.pool)}function Bk(){var e=Py();return e===null?null:{parent:Jt._currentValue,pool:e}}var Vl=Error(q(460)),zy=Error(q(474)),dp=Error(q(542)),zf={then:function(){}};function GT(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ik(e,t,n){switch(n=e[n],n===void 0?e.push(t):n!==t&&(t.then(ua,ua),t=n),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,QT(e),e;default:if(typeof t.status=="string")t.then(ua,ua);else{if(e=wt,e!==null&&100<e.shellSuspendCounter)throw Error(q(482));e=t,e.status="pending",e.then(function(i){if(t.status==="pending"){var o=t;o.status="fulfilled",o.value=i}},function(i){if(t.status==="pending"){var o=t;o.status="rejected",o.reason=i}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,QT(e),e}throw rs=t,Vl}}function ts(e){try{var t=e._init;return t(e._payload)}catch(n){throw n!==null&&typeof n=="object"&&typeof n.then=="function"?(rs=n,Vl):n}}var rs=null;function KT(){if(rs===null)throw Error(q(459));var e=rs;return rs=null,e}function QT(e){if(e===Vl||e===dp)throw Error(q(483))}var El=null,wu=0;function rf(e){var t=wu;return wu+=1,El===null&&(El=[]),Ik(El,e,t)}function Yc(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function sf(e,t){throw t.$$typeof===aD?Error(q(525)):(e=Object.prototype.toString.call(t),Error(q(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Pk(e){function t(y,g){if(e){var v=y.deletions;v===null?(y.deletions=[g],y.flags|=16):v.push(g)}}function n(y,g){if(!e)return null;for(;g!==null;)t(y,g),g=g.sibling;return null}function i(y){for(var g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function o(y,g){return y=fa(y,g),y.index=0,y.sibling=null,y}function a(y,g,v){return y.index=v,e?(v=y.alternate,v!==null?(v=v.index,v<g?(y.flags|=67108866,g):v):(y.flags|=67108866,g)):(y.flags|=1048576,g)}function r(y){return e&&y.alternate===null&&(y.flags|=67108866),y}function s(y,g,v,w){return g===null||g.tag!==6?(g=ig(v,y.mode,w),g.return=y,g):(g=o(g,v),g.return=y,g)}function l(y,g,v,w){var T=v.type;return T===ll?u(y,g,v.props.children,w,v.key):g!==null&&(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ya&&ts(T)===g.type)?(g=o(g,v.props),Yc(g,v),g.return=y,g):(g=vf(v.type,v.key,v.props,null,y.mode,w),Yc(g,v),g.return=y,g)}function c(y,g,v,w){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=og(v,y.mode,w),g.return=y,g):(g=o(g,v.children||[]),g.return=y,g)}function u(y,g,v,w,T){return g===null||g.tag!==7?(g=os(v,y.mode,w,T),g.return=y,g):(g=o(g,v),g.return=y,g)}function f(y,g,v){if(typeof g=="string"&&g!==""||typeof g=="number"||typeof g=="bigint")return g=ig(""+g,y.mode,v),g.return=y,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Xd:return v=vf(g.type,g.key,g.props,null,y.mode,v),Yc(v,g),v.return=y,v;case Xc:return g=og(g,y.mode,v),g.return=y,g;case Ya:return g=ts(g),f(y,g,v)}if(Jc(g)||$c(g))return g=os(g,y.mode,v,null),g.return=y,g;if(typeof g.then=="function")return f(y,rf(g),v);if(g.$$typeof===ca)return f(y,af(y,g),v);sf(y,g)}return null}function p(y,g,v,w){var T=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint")return T!==null?null:s(y,g,""+v,w);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Xd:return v.key===T?l(y,g,v,w):null;case Xc:return v.key===T?c(y,g,v,w):null;case Ya:return v=ts(v),p(y,g,v,w)}if(Jc(v)||$c(v))return T!==null?null:u(y,g,v,w,null);if(typeof v.then=="function")return p(y,g,rf(v),w);if(v.$$typeof===ca)return p(y,g,af(y,v),w);sf(y,v)}return null}function d(y,g,v,w,T){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return y=y.get(v)||null,s(g,y,""+w,T);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Xd:return y=y.get(w.key===null?v:w.key)||null,l(g,y,w,T);case Xc:return y=y.get(w.key===null?v:w.key)||null,c(g,y,w,T);case Ya:return w=ts(w),d(y,g,v,w,T)}if(Jc(w)||$c(w))return y=y.get(v)||null,u(g,y,w,T,null);if(typeof w.then=="function")return d(y,g,v,rf(w),T);if(w.$$typeof===ca)return d(y,g,v,af(g,w),T);sf(g,w)}return null}function h(y,g,v,w){for(var T=null,k=null,E=g,C=g=0,L=null;E!==null&&C<v.length;C++){E.index>C?(L=E,E=null):L=E.sibling;var F=p(y,E,v[C],w);if(F===null){E===null&&(E=L);break}e&&E&&F.alternate===null&&t(y,E),g=a(F,g,C),k===null?T=F:k.sibling=F,k=F,E=L}if(C===v.length)return n(y,E),We&&sa(y,C),T;if(E===null){for(;C<v.length;C++)E=f(y,v[C],w),E!==null&&(g=a(E,g,C),k===null?T=E:k.sibling=E,k=E);return We&&sa(y,C),T}for(E=i(E);C<v.length;C++)L=d(E,y,C,v[C],w),L!==null&&(e&&L.alternate!==null&&E.delete(L.key===null?C:L.key),g=a(L,g,C),k===null?T=L:k.sibling=L,k=L);return e&&E.forEach(function(N){return t(y,N)}),We&&sa(y,C),T}function m(y,g,v,w){if(v==null)throw Error(q(151));for(var T=null,k=null,E=g,C=g=0,L=null,F=v.next();E!==null&&!F.done;C++,F=v.next()){E.index>C?(L=E,E=null):L=E.sibling;var N=p(y,E,F.value,w);if(N===null){E===null&&(E=L);break}e&&E&&N.alternate===null&&t(y,E),g=a(N,g,C),k===null?T=N:k.sibling=N,k=N,E=L}if(F.done)return n(y,E),We&&sa(y,C),T;if(E===null){for(;!F.done;C++,F=v.next())F=f(y,F.value,w),F!==null&&(g=a(F,g,C),k===null?T=F:k.sibling=F,k=F);return We&&sa(y,C),T}for(E=i(E);!F.done;C++,F=v.next())F=d(E,y,C,F.value,w),F!==null&&(e&&F.alternate!==null&&E.delete(F.key===null?C:F.key),g=a(F,g,C),k===null?T=F:k.sibling=F,k=F);return e&&E.forEach(function(_){return t(y,_)}),We&&sa(y,C),T}function b(y,g,v,w){if(typeof v=="object"&&v!==null&&v.type===ll&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Xd:e:{for(var T=v.key;g!==null;){if(g.key===T){if(T=v.type,T===ll){if(g.tag===7){n(y,g.sibling),w=o(g,v.props.children),w.return=y,y=w;break e}}else if(g.elementType===T||typeof T=="object"&&T!==null&&T.$$typeof===Ya&&ts(T)===g.type){n(y,g.sibling),w=o(g,v.props),Yc(w,v),w.return=y,y=w;break e}n(y,g);break}else t(y,g);g=g.sibling}v.type===ll?(w=os(v.props.children,y.mode,w,v.key),w.return=y,y=w):(w=vf(v.type,v.key,v.props,null,y.mode,w),Yc(w,v),w.return=y,y=w)}return r(y);case Xc:e:{for(T=v.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){n(y,g.sibling),w=o(g,v.children||[]),w.return=y,y=w;break e}else{n(y,g);break}else t(y,g);g=g.sibling}w=og(v,y.mode,w),w.return=y,y=w}return r(y);case Ya:return v=ts(v),b(y,g,v,w)}if(Jc(v))return h(y,g,v,w);if($c(v)){if(T=$c(v),typeof T!="function")throw Error(q(150));return v=T.call(v),m(y,g,v,w)}if(typeof v.then=="function")return b(y,g,rf(v),w);if(v.$$typeof===ca)return b(y,g,af(y,v),w);sf(y,v)}return typeof v=="string"&&v!==""||typeof v=="number"||typeof v=="bigint"?(v=""+v,g!==null&&g.tag===6?(n(y,g.sibling),w=o(g,v),w.return=y,y=w):(n(y,g),w=ig(v,y.mode,w),w.return=y,y=w),r(y)):n(y,g)}return function(y,g,v,w){try{wu=0;var T=b(y,g,v,w);return El=null,T}catch(E){if(E===Vl||E===dp)throw E;var k=bi(29,E,null,y.mode);return k.lanes=w,k.return=y,k}finally{}}}var us=Pk(!0),zk=Pk(!1),qa=!1;function Hy(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Gg(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function or(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ar(e,t,n){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,lt&2){var o=i.pending;return o===null?t.next=t:(t.next=o.next,o.next=t),i.pending=t,t=Bf(e),Dk(e,null,n),t}return up(e,i,t,n),Bf(e)}function au(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194048)!==0)){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ik(e,n)}}function rg(e,t){var n=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var o=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var r={lane:n.lane,tag:n.tag,payload:n.payload,callback:null,next:null};a===null?o=a=r:a=a.next=r,n=n.next}while(n!==null);a===null?o=a=t:a=a.next=t}else o=a=t;n={baseState:i.baseState,firstBaseUpdate:o,lastBaseUpdate:a,shared:i.shared,callbacks:i.callbacks},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}var Kg=!1;function ru(){if(Kg){var e=kl;if(e!==null)throw e}}function su(e,t,n,i){Kg=!1;var o=e.updateQueue;qa=!1;var a=o.firstBaseUpdate,r=o.lastBaseUpdate,s=o.shared.pending;if(s!==null){o.shared.pending=null;var l=s,c=l.next;l.next=null,r===null?a=c:r.next=c,r=l;var u=e.alternate;u!==null&&(u=u.updateQueue,s=u.lastBaseUpdate,s!==r&&(s===null?u.firstBaseUpdate=c:s.next=c,u.lastBaseUpdate=l))}if(a!==null){var f=o.baseState;r=0,u=c=l=null,s=a;do{var p=s.lane&-536870913,d=p!==s.lane;if(d?(Ke&p)===p:(i&p)===p){p!==0&&p===Dl&&(Kg=!0),u!==null&&(u=u.next={lane:0,tag:s.tag,payload:s.payload,callback:null,next:null});e:{var h=e,m=s;p=t;var b=n;switch(m.tag){case 1:if(h=m.payload,typeof h=="function"){f=h.call(b,f,p);break e}f=h;break e;case 3:h.flags=h.flags&-65537|128;case 0:if(h=m.payload,p=typeof h=="function"?h.call(b,f,p):h,p==null)break e;f=Ct({},f,p);break e;case 2:qa=!0}}p=s.callback,p!==null&&(e.flags|=64,d&&(e.flags|=8192),d=o.callbacks,d===null?o.callbacks=[p]:d.push(p))}else d={lane:p,tag:s.tag,payload:s.payload,callback:s.callback,next:null},u===null?(c=u=d,l=f):u=u.next=d,r|=p;if(s=s.next,s===null){if(s=o.shared.pending,s===null)break;d=s,s=d.next,d.next=null,o.lastBaseUpdate=d,o.shared.pending=null}}while(1);u===null&&(l=f),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,a===null&&(o.shared.lanes=0),mr|=r,e.lanes=r,e.memoizedState=f}}function Hk(e,t){if(typeof e!="function")throw Error(q(191,e));e.call(t)}function Vk(e,t){var n=e.callbacks;if(n!==null)for(e.callbacks=null,e=0;e<n.length;e++)Hk(n[e],t)}var Ll=Ro(null),Hf=Ro(0);function XT(e,t){e=va,Tt(Hf,e),Tt(Ll,t),va=e|t.baseLanes}function Qg(){Tt(Hf,va),Tt(Ll,Ll.current)}function Vy(){va=Hf.current,bn(Ll),bn(Hf)}var Ci=Ro(null),Ui=null;function Ka(e){var t=e.alternate;Tt(Vt,Vt.current&1),Tt(Ci,e),Ui===null&&(t===null||Ll.current!==null||t.memoizedState!==null)&&(Ui=e)}function Xg(e){Tt(Vt,Vt.current),Tt(Ci,e),Ui===null&&(Ui=e)}function Uk(e){e.tag===22?(Tt(Vt,Vt.current),Tt(Ci,e),Ui===null&&(Ui=e)):Qa(e)}function Qa(){Tt(Vt,Vt.current),Tt(Ci,Ci.current)}function yi(e){bn(Ci),Ui===e&&(Ui=null),bn(Vt)}var Vt=Ro(0);function Vf(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||hy(n)||gy(n)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ga=0,Pe=null,ht=null,Qt=null,Uf=!1,Cl=!1,ds=!1,$f=0,Tu=0,Ml=null,wL=0;function _t(){throw Error(q(321))}function Uy(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Ei(e[n],t[n]))return!1;return!0}function $y(e,t,n,i,o,a){return ga=a,Pe=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ae.H=e===null||e.memoizedState===null?vE:eb,ds=!1,a=n(i,o),ds=!1,Cl&&(a=jk(t,n,i,o)),$k(e),a}function $k(e){Ae.H=Su;var t=ht!==null&&ht.next!==null;if(ga=0,Qt=ht=Pe=null,Uf=!1,Tu=0,Ml=null,t)throw Error(q(300));e===null||Wt||(e=e.dependencies,e!==null&&Pf(e)&&(Wt=!0))}function jk(e,t,n,i){Pe=e;var o=0;do{if(Cl&&(Ml=null),Tu=0,Cl=!1,25<=o)throw Error(q(301));if(o+=1,Qt=ht=null,e.updateQueue!=null){var a=e.updateQueue;a.lastEffect=null,a.events=null,a.stores=null,a.memoCache!=null&&(a.memoCache.index=0)}Ae.H=wE,a=t(n,i)}while(Cl);return a}function TL(){var e=Ae.H,t=e.useState()[0];return t=typeof t.then=="function"?_u(t):t,e=e.useState()[0],(ht!==null?ht.memoizedState:null)!==e&&(Pe.flags|=1024),t}function jy(){var e=$f!==0;return $f=0,e}function Yy(e,t,n){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~n}function qy(e){if(Uf){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}Uf=!1}ga=0,Qt=ht=Pe=null,Cl=!1,Tu=$f=0,Ml=null}function Yn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Qt===null?Pe.memoizedState=Qt=e:Qt=Qt.next=e,Qt}function Ut(){if(ht===null){var e=Pe.alternate;e=e!==null?e.memoizedState:null}else e=ht.next;var t=Qt===null?Pe.memoizedState:Qt.next;if(t!==null)Qt=t,ht=e;else{if(e===null)throw Pe.alternate===null?Error(q(467)):Error(q(310));ht=e,e={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},Qt===null?Pe.memoizedState=Qt=e:Qt=Qt.next=e}return Qt}function fp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function _u(e){var t=Tu;return Tu+=1,Ml===null&&(Ml=[]),e=Ik(Ml,e,t),t=Pe,(Qt===null?t.memoizedState:Qt.next)===null&&(t=t.alternate,Ae.H=t===null||t.memoizedState===null?vE:eb),e}function pp(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return _u(e);if(e.$$typeof===ca)return Mn(e)}throw Error(q(438,String(e)))}function Gy(e){var t=null,n=Pe.updateQueue;if(n!==null&&(t=n.memoCache),t==null){var i=Pe.alternate;i!==null&&(i=i.updateQueue,i!==null&&(i=i.memoCache,i!=null&&(t={data:i.data.map(function(o){return o.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),n===null&&(n=fp(),Pe.updateQueue=n),n.memoCache=t,n=t.data[t.index],n===void 0)for(n=t.data[t.index]=Array(e),i=0;i<e;i++)n[i]=rD;return t.index++,n}function ya(e,t){return typeof t=="function"?t(e):t}function Tf(e){var t=Ut();return Ky(t,ht,e)}function Ky(e,t,n){var i=e.queue;if(i===null)throw Error(q(311));i.lastRenderedReducer=n;var o=e.baseQueue,a=i.pending;if(a!==null){if(o!==null){var r=o.next;o.next=a.next,a.next=r}t.baseQueue=o=a,i.pending=null}if(a=e.baseState,o===null)e.memoizedState=a;else{t=o.next;var s=r=null,l=null,c=t,u=!1;do{var f=c.lane&-536870913;if(f!==c.lane?(Ke&f)===f:(ga&f)===f){var p=c.revertLane;if(p===0)l!==null&&(l=l.next={lane:0,revertLane:0,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),f===Dl&&(u=!0);else if((ga&p)===p){c=c.next,p===Dl&&(u=!0);continue}else f={lane:0,revertLane:c.revertLane,gesture:null,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(s=l=f,r=a):l=l.next=f,Pe.lanes|=p,mr|=p;f=c.action,ds&&n(a,f),a=c.hasEagerState?c.eagerState:n(a,f)}else p={lane:f,revertLane:c.revertLane,gesture:c.gesture,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null},l===null?(s=l=p,r=a):l=l.next=p,Pe.lanes|=f,mr|=f;c=c.next}while(c!==null&&c!==t);if(l===null?r=a:l.next=s,!Ei(a,e.memoizedState)&&(Wt=!0,u&&(n=kl,n!==null)))throw n;e.memoizedState=a,e.baseState=r,e.baseQueue=l,i.lastRenderedState=a}return o===null&&(i.lanes=0),[e.memoizedState,i.dispatch]}function sg(e){var t=Ut(),n=t.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=e;var i=n.dispatch,o=n.pending,a=t.memoizedState;if(o!==null){n.pending=null;var r=o=o.next;do a=e(a,r.action),r=r.next;while(r!==o);Ei(a,t.memoizedState)||(Wt=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,i]}function Yk(e,t,n){var i=Pe,o=Ut(),a=We;if(a){if(n===void 0)throw Error(q(407));n=n()}else n=t();var r=!Ei((ht||o).memoizedState,n);if(r&&(o.memoizedState=n,Wt=!0),o=o.queue,Qy(Kk.bind(null,i,o,e),[e]),o.getSnapshot!==t||r||Qt!==null&&Qt.memoizedState.tag&1){if(i.flags|=2048,Rl(9,{destroy:void 0},Gk.bind(null,i,o,n,t),null),wt===null)throw Error(q(349));a||ga&127||qk(i,t,n)}return n}function qk(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pe.updateQueue,t===null?(t=fp(),Pe.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function Gk(e,t,n,i){t.value=n,t.getSnapshot=i,Qk(t)&&Xk(e)}function Kk(e,t,n){return n(function(){Qk(t)&&Xk(e)})}function Qk(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Ei(e,n)}catch(i){return!0}}function Xk(e){var t=gs(e,2);t!==null&&ni(t,e,2)}function Jg(e){var t=Yn();if(typeof e=="function"){var n=e;if(e=n(),ds){Ja(!0);try{n()}finally{Ja(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:e},t}function Jk(e,t,n,i){return e.baseState=n,Ky(e,ht,typeof i=="function"?i:ya)}function SL(e,t,n,i,o){if(hp(e))throw Error(q(485));if(e=t.action,e!==null){var a={payload:o,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(r){a.listeners.push(r)}};Ae.T!==null?n(!0):a.isTransition=!1,i(a),n=t.pending,n===null?(a.next=t.pending=a,Wk(t,a)):(a.next=n.next,t.pending=n.next=a)}}function Wk(e,t){var n=t.action,i=t.payload,o=e.state;if(t.isTransition){var a=Ae.T,r={};Ae.T=r;try{var s=n(o,i),l=Ae.S;l!==null&&l(r,s),JT(e,t,s)}catch(c){Wg(e,t,c)}finally{a!==null&&r.types!==null&&(a.types=r.types),Ae.T=a}}else try{a=n(o,i),JT(e,t,a)}catch(c){Wg(e,t,c)}}function JT(e,t,n){n!==null&&typeof n=="object"&&typeof n.then=="function"?n.then(function(i){WT(e,t,i)},function(i){return Wg(e,t,i)}):WT(e,t,n)}function WT(e,t,n){t.status="fulfilled",t.value=n,Zk(t),e.state=n,t=e.pending,t!==null&&(n=t.next,n===t?e.pending=null:(n=n.next,t.next=n,Wk(e,n)))}function Wg(e,t,n){var i=e.pending;if(e.pending=null,i!==null){i=i.next;do t.status="rejected",t.reason=n,Zk(t),t=t.next;while(t!==i)}e.action=null}function Zk(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function eE(e,t){return t}function ZT(e,t){if(We){var n=wt.formState;if(n!==null){e:{var i=Pe;if(We){if(Et){t:{for(var o=Et,a=Vi;o.nodeType!==8;){if(!a){o=null;break t}if(o=$i(o.nextSibling),o===null){o=null;break t}}a=o.data,o=a==="F!"||a==="F"?o:null}if(o){Et=$i(o.nextSibling),i=o.data==="F!";break e}}fr(i)}i=!1}i&&(t=n[0])}}return n=Yn(),n.memoizedState=n.baseState=t,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:eE,lastRenderedState:t},n.queue=i,n=gE.bind(null,Pe,i),i.dispatch=n,i=Jg(!1),a=Zy.bind(null,Pe,!1,i.queue),i=Yn(),o={state:t,dispatch:null,action:e,pending:null},i.queue=o,n=SL.bind(null,Pe,o,a,n),o.dispatch=n,i.memoizedState=e,[t,n,!1]}function eS(e){var t=Ut();return tE(t,ht,e)}function tE(e,t,n){if(t=Ky(e,t,eE)[0],e=Tf(ya)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var i=_u(t)}catch(r){throw r===Vl?dp:r}else i=t;t=Ut();var o=t.queue,a=o.dispatch;return n!==t.memoizedState&&(Pe.flags|=2048,Rl(9,{destroy:void 0},kL.bind(null,o,n),null)),[i,a,e]}function kL(e,t){e.action=t}function tS(e){var t=Ut(),n=ht;if(n!==null)return tE(t,n,e);Ut(),t=t.memoizedState,n=Ut();var i=n.queue.dispatch;return n.memoizedState=e,[t,i,!1]}function Rl(e,t,n,i){return e={tag:e,create:n,deps:i,inst:t,next:null},t=Pe.updateQueue,t===null&&(t=fp(),Pe.updateQueue=t),n=t.lastEffect,n===null?t.lastEffect=e.next=e:(i=n.next,n.next=e,e.next=i,t.lastEffect=e),e}function nE(){return Ut().memoizedState}function Sf(e,t,n,i){var o=Yn();Pe.flags|=e,o.memoizedState=Rl(1|t,{destroy:void 0},n,i===void 0?null:i)}function mp(e,t,n,i){var o=Ut();i=i===void 0?null:i;var a=o.memoizedState.inst;ht!==null&&i!==null&&Uy(i,ht.memoizedState.deps)?o.memoizedState=Rl(t,a,n,i):(Pe.flags|=e,o.memoizedState=Rl(1|t,a,n,i))}function nS(e,t){Sf(8390656,8,e,t)}function Qy(e,t){mp(2048,8,e,t)}function EL(e){Pe.flags|=4;var t=Pe.updateQueue;if(t===null)t=fp(),Pe.updateQueue=t,t.events=[e];else{var n=t.events;n===null?t.events=[e]:n.push(e)}}function iE(e){var t=Ut().memoizedState;return EL({ref:t,nextImpl:e}),function(){if(lt&2)throw Error(q(440));return t.impl.apply(void 0,arguments)}}function oE(e,t){return mp(4,2,e,t)}function aE(e,t){return mp(4,4,e,t)}function rE(e,t){if(typeof t=="function"){e=e();var n=t(e);return function(){typeof n=="function"?n():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sE(e,t,n){n=n!=null?n.concat([e]):null,mp(4,4,rE.bind(null,t,e),n)}function Xy(){}function lE(e,t){var n=Ut();t=t===void 0?null:t;var i=n.memoizedState;return t!==null&&Uy(t,i[1])?i[0]:(n.memoizedState=[e,t],e)}function cE(e,t){var n=Ut();t=t===void 0?null:t;var i=n.memoizedState;if(t!==null&&Uy(t,i[1]))return i[0];if(i=e(),ds){Ja(!0);try{e()}finally{Ja(!1)}}return n.memoizedState=[i,t],i}function Jy(e,t,n){return n===void 0||ga&1073741824&&!(Ke&261930)?e.memoizedState=t:(e.memoizedState=n,e=JE(),Pe.lanes|=e,mr|=e,n)}function uE(e,t,n,i){return Ei(n,t)?n:Ll.current!==null?(e=Jy(e,n,i),Ei(e,t)||(Wt=!0),e):!(ga&42)||ga&1073741824&&!(Ke&261930)?(Wt=!0,e.memoizedState=n):(e=JE(),Pe.lanes|=e,mr|=e,t)}function dE(e,t,n,i,o){var a=ct.p;ct.p=a!==0&&8>a?a:8;var r=Ae.T,s={};Ae.T=s,Zy(e,!1,t,n);try{var l=o(),c=Ae.S;if(c!==null&&c(s,l),l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=vL(l,i);lu(e,t,u,ki(e))}else lu(e,t,i,ki(e))}catch(f){lu(e,t,{then:function(){},status:"rejected",reason:f},ki())}finally{ct.p=a,r!==null&&s.types!==null&&(r.types=s.types),Ae.T=r}}function CL(){}function Zg(e,t,n,i){if(e.tag!==5)throw Error(q(476));var o=fE(e).queue;dE(e,o,t,is,n===null?CL:function(){return pE(e),n(i)})}function fE(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:is,baseState:is,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:is},next:null};var n={};return t.next={memoizedState:n,baseState:n,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ya,lastRenderedState:n},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function pE(e){var t=fE(e);t.next===null&&(t=e.alternate.memoizedState),lu(e,t.next.queue,{},ki())}function Wy(){return Mn(Cu)}function mE(){return Ut().memoizedState}function hE(){return Ut().memoizedState}function ML(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var n=ki();e=or(n);var i=ar(t,e,n);i!==null&&(ni(i,t,n),au(i,t,n)),t={cache:Iy()},e.payload=t;return}t=t.return}}function xL(e,t,n){var i=ki();n={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null},hp(e)?yE(t,n):(n=Oy(e,t,n,i),n!==null&&(ni(n,e,i),bE(n,t,i)))}function gE(e,t,n){var i=ki();lu(e,t,n,i)}function lu(e,t,n,i){var o={lane:i,revertLane:0,gesture:null,action:n,hasEagerState:!1,eagerState:null,next:null};if(hp(e))yE(t,o);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var r=t.lastRenderedState,s=a(r,n);if(o.hasEagerState=!0,o.eagerState=s,Ei(s,r))return up(e,t,o,0),wt===null&&cp(),!1}catch(l){}finally{}if(n=Oy(e,t,o,i),n!==null)return ni(n,e,i),bE(n,t,i),!0}return!1}function Zy(e,t,n,i){if(i={lane:2,revertLane:lb(),gesture:null,action:i,hasEagerState:!1,eagerState:null,next:null},hp(e)){if(t)throw Error(q(479))}else t=Oy(e,n,i,2),t!==null&&ni(t,e,2)}function hp(e){var t=e.alternate;return e===Pe||t!==null&&t===Pe}function yE(e,t){Cl=Uf=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function bE(e,t,n){if(n&4194048){var i=t.lanes;i&=e.pendingLanes,n|=i,t.lanes=n,ik(e,n)}}var Su={readContext:Mn,use:pp,useCallback:_t,useContext:_t,useEffect:_t,useImperativeHandle:_t,useLayoutEffect:_t,useInsertionEffect:_t,useMemo:_t,useReducer:_t,useRef:_t,useState:_t,useDebugValue:_t,useDeferredValue:_t,useTransition:_t,useSyncExternalStore:_t,useId:_t,useHostTransitionStatus:_t,useFormState:_t,useActionState:_t,useOptimistic:_t,useMemoCache:_t,useCacheRefresh:_t};Su.useEffectEvent=_t;var vE={readContext:Mn,use:pp,useCallback:function(e,t){return Yn().memoizedState=[e,t===void 0?null:t],e},useContext:Mn,useEffect:nS,useImperativeHandle:function(e,t,n){n=n!=null?n.concat([e]):null,Sf(4194308,4,rE.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Sf(4194308,4,e,t)},useInsertionEffect:function(e,t){Sf(4,2,e,t)},useMemo:function(e,t){var n=Yn();t=t===void 0?null:t;var i=e();if(ds){Ja(!0);try{e()}finally{Ja(!1)}}return n.memoizedState=[i,t],i},useReducer:function(e,t,n){var i=Yn();if(n!==void 0){var o=n(t);if(ds){Ja(!0);try{n(t)}finally{Ja(!1)}}}else o=t;return i.memoizedState=i.baseState=o,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:o},i.queue=e,e=e.dispatch=xL.bind(null,Pe,e),[i.memoizedState,e]},useRef:function(e){var t=Yn();return e={current:e},t.memoizedState=e},useState:function(e){e=Jg(e);var t=e.queue,n=gE.bind(null,Pe,t);return t.dispatch=n,[e.memoizedState,n]},useDebugValue:Xy,useDeferredValue:function(e,t){var n=Yn();return Jy(n,e,t)},useTransition:function(){var e=Jg(!1);return e=dE.bind(null,Pe,e.queue,!0,!1),Yn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,n){var i=Pe,o=Yn();if(We){if(n===void 0)throw Error(q(407));n=n()}else{if(n=t(),wt===null)throw Error(q(349));Ke&127||qk(i,t,n)}o.memoizedState=n;var a={value:n,getSnapshot:t};return o.queue=a,nS(Kk.bind(null,i,a,e),[e]),i.flags|=2048,Rl(9,{destroy:void 0},Gk.bind(null,i,a,n,t),null),n},useId:function(){var e=Yn(),t=wt.identifierPrefix;if(We){var n=Ao,i=No;n=(i&~(1<<32-Si(i)-1)).toString(32)+n,t="_"+t+"R_"+n,n=$f++,0<n&&(t+="H"+n.toString(32)),t+="_"}else n=wL++,t="_"+t+"r_"+n.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Wy,useFormState:ZT,useActionState:ZT,useOptimistic:function(e){var t=Yn();t.memoizedState=t.baseState=e;var n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=n,t=Zy.bind(null,Pe,!0,n),n.dispatch=t,[e,t]},useMemoCache:Gy,useCacheRefresh:function(){return Yn().memoizedState=ML.bind(null,Pe)},useEffectEvent:function(e){var t=Yn(),n={impl:e};return t.memoizedState=n,function(){if(lt&2)throw Error(q(440));return n.impl.apply(void 0,arguments)}}},eb={readContext:Mn,use:pp,useCallback:lE,useContext:Mn,useEffect:Qy,useImperativeHandle:sE,useInsertionEffect:oE,useLayoutEffect:aE,useMemo:cE,useReducer:Tf,useRef:nE,useState:function(){return Tf(ya)},useDebugValue:Xy,useDeferredValue:function(e,t){var n=Ut();return uE(n,ht.memoizedState,e,t)},useTransition:function(){var e=Tf(ya)[0],t=Ut().memoizedState;return[typeof e=="boolean"?e:_u(e),t]},useSyncExternalStore:Yk,useId:mE,useHostTransitionStatus:Wy,useFormState:eS,useActionState:eS,useOptimistic:function(e,t){var n=Ut();return Jk(n,ht,e,t)},useMemoCache:Gy,useCacheRefresh:hE};eb.useEffectEvent=iE;var wE={readContext:Mn,use:pp,useCallback:lE,useContext:Mn,useEffect:Qy,useImperativeHandle:sE,useInsertionEffect:oE,useLayoutEffect:aE,useMemo:cE,useReducer:sg,useRef:nE,useState:function(){return sg(ya)},useDebugValue:Xy,useDeferredValue:function(e,t){var n=Ut();return ht===null?Jy(n,e,t):uE(n,ht.memoizedState,e,t)},useTransition:function(){var e=sg(ya)[0],t=Ut().memoizedState;return[typeof e=="boolean"?e:_u(e),t]},useSyncExternalStore:Yk,useId:mE,useHostTransitionStatus:Wy,useFormState:tS,useActionState:tS,useOptimistic:function(e,t){var n=Ut();return ht!==null?Jk(n,ht,e,t):(n.baseState=e,[e,n.queue.dispatch])},useMemoCache:Gy,useCacheRefresh:hE};wE.useEffectEvent=iE;function lg(e,t,n,i){t=e.memoizedState,n=n(i,t),n=n==null?t:Ct({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var ey={enqueueSetState:function(e,t,n){e=e._reactInternals;var i=ki(),o=or(i);o.payload=t,n!=null&&(o.callback=n),t=ar(e,o,i),t!==null&&(ni(t,e,i),au(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var i=ki(),o=or(i);o.tag=1,o.payload=t,n!=null&&(o.callback=n),t=ar(e,o,i),t!==null&&(ni(t,e,i),au(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ki(),i=or(n);i.tag=2,t!=null&&(i.callback=t),t=ar(e,i,n),t!==null&&(ni(t,e,n),au(t,e,n))}};function iS(e,t,n,i,o,a,r){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,a,r):t.prototype&&t.prototype.isPureReactComponent?!yu(n,i)||!yu(o,a):!0}function oS(e,t,n,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,i),t.state!==e&&ey.enqueueReplaceState(t,t.state,null)}function fs(e,t){var n=t;if("ref"in t){n={};for(var i in t)i!=="ref"&&(n[i]=t[i])}if(e=e.defaultProps){n===t&&(n=Ct({},n));for(var o in e)n[o]===void 0&&(n[o]=e[o])}return n}function TE(e){_f(e)}function SE(e){console.error(e)}function kE(e){_f(e)}function jf(e,t){try{var n=e.onUncaughtError;n(t.value,{componentStack:t.stack})}catch(i){setTimeout(function(){throw i})}}function aS(e,t,n){try{var i=e.onCaughtError;i(n.value,{componentStack:n.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(o){setTimeout(function(){throw o})}}function ty(e,t,n){return n=or(n),n.tag=3,n.payload={element:null},n.callback=function(){jf(e,t)},n}function EE(e){return e=or(e),e.tag=3,e}function CE(e,t,n,i){var o=n.type.getDerivedStateFromError;if(typeof o=="function"){var a=i.value;e.payload=function(){return o(a)},e.callback=function(){aS(t,n,i)}}var r=n.stateNode;r!==null&&typeof r.componentDidCatch=="function"&&(e.callback=function(){aS(t,n,i),typeof o!="function"&&(rr===null?rr=new Set([this]):rr.add(this));var s=i.stack;this.componentDidCatch(i.value,{componentStack:s!==null?s:""})})}function NL(e,t,n,i,o){if(n.flags|=32768,i!==null&&typeof i=="object"&&typeof i.then=="function"){if(t=n.alternate,t!==null&&Hl(t,n,o,!0),n=Ci.current,n!==null){switch(n.tag){case 31:case 13:return Ui===null?Qf():n.alternate===null&&Bt===0&&(Bt=3),n.flags&=-257,n.flags|=65536,n.lanes=o,i===zf?n.flags|=16384:(t=n.updateQueue,t===null?n.updateQueue=new Set([i]):t.add(i),vg(e,i,o)),!1;case 22:return n.flags|=65536,i===zf?n.flags|=16384:(t=n.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([i])},n.updateQueue=t):(n=t.retryQueue,n===null?t.retryQueue=new Set([i]):n.add(i)),vg(e,i,o)),!1}throw Error(q(435,n.tag))}return vg(e,i,o),Qf(),!1}if(We)return t=Ci.current,t!==null?(!(t.flags&65536)&&(t.flags|=256),t.flags|=65536,t.lanes=o,i!==Ug&&(e=Error(q(422),{cause:i}),vu(Hi(e,n)))):(i!==Ug&&(t=Error(q(423),{cause:i}),vu(Hi(t,n))),e=e.current.alternate,e.flags|=65536,o&=-o,e.lanes|=o,i=Hi(i,n),o=ty(e.stateNode,i,o),rg(e,o),Bt!==4&&(Bt=2)),!1;var a=Error(q(520),{cause:i});if(a=Hi(a,n),du===null?du=[a]:du.push(a),Bt!==4&&(Bt=2),t===null)return!0;i=Hi(i,n),n=t;do{switch(n.tag){case 3:return n.flags|=65536,e=o&-o,n.lanes|=e,e=ty(n.stateNode,i,e),rg(n,e),!1;case 1:if(t=n.type,a=n.stateNode,(n.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||a!==null&&typeof a.componentDidCatch=="function"&&(rr===null||!rr.has(a))))return n.flags|=65536,o&=-o,n.lanes|=o,o=EE(o),CE(o,e,n,i),rg(n,o),!1}n=n.return}while(n!==null);return!1}var tb=Error(q(461)),Wt=!1;function kn(e,t,n,i){t.child=e===null?zk(t,null,n,i):us(t,e.child,n,i)}function rS(e,t,n,i,o){n=n.render;var a=t.ref;if("ref"in i){var r={};for(var s in i)s!=="ref"&&(r[s]=i[s])}else r=i;return cs(t),i=$y(e,t,n,r,a,o),s=jy(),e!==null&&!Wt?(Yy(e,t,o),ba(e,t,o)):(We&&s&&_y(t),t.flags|=1,kn(e,t,i,o),t.child)}function sS(e,t,n,i,o){if(e===null){var a=n.type;return typeof a=="function"&&!Fy(a)&&a.defaultProps===void 0&&n.compare===null?(t.tag=15,t.type=a,ME(e,t,a,i,o)):(e=vf(n.type,null,i,t,t.mode,o),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!nb(e,o)){var r=a.memoizedProps;if(n=n.compare,n=n!==null?n:yu,n(r,i)&&e.ref===t.ref)return ba(e,t,o)}return t.flags|=1,e=fa(a,i),e.ref=t.ref,e.return=t,t.child=e}function ME(e,t,n,i,o){if(e!==null){var a=e.memoizedProps;if(yu(a,i)&&e.ref===t.ref)if(Wt=!1,t.pendingProps=i=a,nb(e,o))e.flags&131072&&(Wt=!0);else return t.lanes=e.lanes,ba(e,t,o)}return ny(e,t,n,i,o)}function xE(e,t,n,i){var o=i.children,a=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.mode==="hidden"){if(t.flags&128){if(a=a!==null?a.baseLanes|n:n,e!==null){for(i=t.child=e.child,o=0;i!==null;)o=o|i.lanes|i.childLanes,i=i.sibling;i=o&~a}else i=0,t.child=null;return lS(e,t,a,n,i)}if(n&536870912)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&wf(t,a!==null?a.cachePool:null),a!==null?XT(t,a):Qg(),Uk(t);else return i=t.lanes=536870912,lS(e,t,a!==null?a.baseLanes|n:n,n,i)}else a!==null?(wf(t,a.cachePool),XT(t,a),Qa(t),t.memoizedState=null):(e!==null&&wf(t,null),Qg(),Qa(t));return kn(e,t,o,n),t.child}function Zc(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function lS(e,t,n,i,o){var a=Py();return a=a===null?null:{parent:Jt._currentValue,pool:a},t.memoizedState={baseLanes:n,cachePool:a},e!==null&&wf(t,null),Qg(),Uk(t),e!==null&&Hl(e,t,i,!0),t.childLanes=o,null}function kf(e,t){return t=Yf({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function cS(e,t,n){return us(t,e.child,null,n),e=kf(t,t.pendingProps),e.flags|=2,yi(t),t.memoizedState=null,e}function AL(e,t,n){var i=t.pendingProps,o=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(We){if(i.mode==="hidden")return e=kf(t,i),t.lanes=536870912,Zc(null,e);if(Xg(t),(e=Et)?(e=v0(e,Vi),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:dr!==null?{id:No,overflow:Ao}:null,retryLane:536870912,hydrationErrors:null},n=Rk(e),n.return=t,t.child=n,Cn=t,Et=null)):e=null,e===null)throw fr(t);return t.lanes=536870912,null}return kf(t,i)}var a=e.memoizedState;if(a!==null){var r=a.dehydrated;if(Xg(t),o)if(t.flags&256)t.flags&=-257,t=cS(e,t,n);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(q(558));else if(Wt||Hl(e,t,n,!1),o=(n&e.childLanes)!==0,Wt||o){if(i=wt,i!==null&&(r=ok(i,n),r!==0&&r!==a.retryLane))throw a.retryLane=r,gs(e,r),ni(i,e,r),tb;Qf(),t=cS(e,t,n)}else e=a.treeContext,Et=$i(r.nextSibling),Cn=t,We=!0,ir=null,Vi=!1,e!==null&&Fk(t,e),t=kf(t,i),t.flags|=4096;return t}return e=fa(e.child,{mode:i.mode,children:i.children}),e.ref=t.ref,t.child=e,e.return=t,e}function Ef(e,t){var n=t.ref;if(n===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof n!="function"&&typeof n!="object")throw Error(q(284));(e===null||e.ref!==n)&&(t.flags|=4194816)}}function ny(e,t,n,i,o){return cs(t),n=$y(e,t,n,i,void 0,o),i=jy(),e!==null&&!Wt?(Yy(e,t,o),ba(e,t,o)):(We&&i&&_y(t),t.flags|=1,kn(e,t,n,o),t.child)}function uS(e,t,n,i,o,a){return cs(t),t.updateQueue=null,n=jk(t,i,n,o),$k(e),i=jy(),e!==null&&!Wt?(Yy(e,t,a),ba(e,t,a)):(We&&i&&_y(t),t.flags|=1,kn(e,t,n,a),t.child)}function dS(e,t,n,i,o){if(cs(t),t.stateNode===null){var a=gl,r=n.contextType;typeof r=="object"&&r!==null&&(a=Mn(r)),a=new n(i,a),t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,a.updater=ey,t.stateNode=a,a._reactInternals=t,a=t.stateNode,a.props=i,a.state=t.memoizedState,a.refs={},Hy(t),r=n.contextType,a.context=typeof r=="object"&&r!==null?Mn(r):gl,a.state=t.memoizedState,r=n.getDerivedStateFromProps,typeof r=="function"&&(lg(t,n,r,i),a.state=t.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(r=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),r!==a.state&&ey.enqueueReplaceState(a,a.state,null),su(t,i,a,o),ru(),a.state=t.memoizedState),typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!0}else if(e===null){a=t.stateNode;var s=t.memoizedProps,l=fs(n,s);a.props=l;var c=a.context,u=n.contextType;r=gl,typeof u=="object"&&u!==null&&(r=Mn(u));var f=n.getDerivedStateFromProps;u=typeof f=="function"||typeof a.getSnapshotBeforeUpdate=="function",s=t.pendingProps!==s,u||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(s||c!==r)&&oS(t,a,i,r),qa=!1;var p=t.memoizedState;a.state=p,su(t,i,a,o),ru(),c=t.memoizedState,s||p!==c||qa?(typeof f=="function"&&(lg(t,n,f,i),c=t.memoizedState),(l=qa||iS(t,n,l,i,p,c,r))?(u||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(t.flags|=4194308)):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=c),a.props=i,a.state=c,a.context=r,i=l):(typeof a.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{a=t.stateNode,Gg(e,t),r=t.memoizedProps,u=fs(n,r),a.props=u,f=t.pendingProps,p=a.context,c=n.contextType,l=gl,typeof c=="object"&&c!==null&&(l=Mn(c)),s=n.getDerivedStateFromProps,(c=typeof s=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(r!==f||p!==l)&&oS(t,a,i,l),qa=!1,p=t.memoizedState,a.state=p,su(t,i,a,o),ru();var d=t.memoizedState;r!==f||p!==d||qa||e!==null&&e.dependencies!==null&&Pf(e.dependencies)?(typeof s=="function"&&(lg(t,n,s,i),d=t.memoizedState),(u=qa||iS(t,n,u,i,p,d,l)||e!==null&&e.dependencies!==null&&Pf(e.dependencies))?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(i,d,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(i,d,l)),typeof a.componentDidUpdate=="function"&&(t.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof a.componentDidUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=d),a.props=i,a.state=d,a.context=l,i=u):(typeof a.componentDidUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||r===e.memoizedProps&&p===e.memoizedState||(t.flags|=1024),i=!1)}return a=i,Ef(e,t),i=(t.flags&128)!==0,a||i?(a=t.stateNode,n=i&&typeof n.getDerivedStateFromError!="function"?null:a.render(),t.flags|=1,e!==null&&i?(t.child=us(t,e.child,null,o),t.child=us(t,null,n,o)):kn(e,t,n,o),t.memoizedState=a.state,e=t.child):e=ba(e,t,o),e}function fS(e,t,n,i){return ls(),t.flags|=256,kn(e,t,n,i),t.child}var cg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function ug(e){return{baseLanes:e,cachePool:Bk()}}function dg(e,t,n){return e=e!==null?e.childLanes&~n:0,t&&(e|=vi),e}function NE(e,t,n){var i=t.pendingProps,o=!1,a=(t.flags&128)!==0,r;if((r=a)||(r=e!==null&&e.memoizedState===null?!1:(Vt.current&2)!==0),r&&(o=!0,t.flags&=-129),r=(t.flags&32)!==0,t.flags&=-33,e===null){if(We){if(o?Ka(t):Qa(t),(e=Et)?(e=v0(e,Vi),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:dr!==null?{id:No,overflow:Ao}:null,retryLane:536870912,hydrationErrors:null},n=Rk(e),n.return=t,t.child=n,Cn=t,Et=null)):e=null,e===null)throw fr(t);return gy(e)?t.lanes=32:t.lanes=536870912,null}var s=i.children;return i=i.fallback,o?(Qa(t),o=t.mode,s=Yf({mode:"hidden",children:s},o),i=os(i,o,n,null),s.return=t,i.return=t,s.sibling=i,t.child=s,i=t.child,i.memoizedState=ug(n),i.childLanes=dg(e,r,n),t.memoizedState=cg,Zc(null,i)):(Ka(t),iy(t,s))}var l=e.memoizedState;if(l!==null&&(s=l.dehydrated,s!==null)){if(a)t.flags&256?(Ka(t),t.flags&=-257,t=fg(e,t,n)):t.memoizedState!==null?(Qa(t),t.child=e.child,t.flags|=128,t=null):(Qa(t),s=i.fallback,o=t.mode,i=Yf({mode:"visible",children:i.children},o),s=os(s,o,n,null),s.flags|=2,i.return=t,s.return=t,i.sibling=s,t.child=i,us(t,e.child,null,n),i=t.child,i.memoizedState=ug(n),i.childLanes=dg(e,r,n),t.memoizedState=cg,t=Zc(null,i));else if(Ka(t),gy(s)){if(r=s.nextSibling&&s.nextSibling.dataset,r)var c=r.dgst;r=c,i=Error(q(419)),i.stack="",i.digest=r,vu({value:i,source:null,stack:null}),t=fg(e,t,n)}else if(Wt||Hl(e,t,n,!1),r=(n&e.childLanes)!==0,Wt||r){if(r=wt,r!==null&&(i=ok(r,n),i!==0&&i!==l.retryLane))throw l.retryLane=i,gs(e,i),ni(r,e,i),tb;hy(s)||Qf(),t=fg(e,t,n)}else hy(s)?(t.flags|=192,t.child=e.child,t=null):(e=l.treeContext,Et=$i(s.nextSibling),Cn=t,We=!0,ir=null,Vi=!1,e!==null&&Fk(t,e),t=iy(t,i.children),t.flags|=4096);return t}return o?(Qa(t),s=i.fallback,o=t.mode,l=e.child,c=l.sibling,i=fa(l,{mode:"hidden",children:i.children}),i.subtreeFlags=l.subtreeFlags&65011712,c!==null?s=fa(c,s):(s=os(s,o,n,null),s.flags|=2),s.return=t,i.return=t,i.sibling=s,t.child=i,Zc(null,i),i=t.child,s=e.child.memoizedState,s===null?s=ug(n):(o=s.cachePool,o!==null?(l=Jt._currentValue,o=o.parent!==l?{parent:l,pool:l}:o):o=Bk(),s={baseLanes:s.baseLanes|n,cachePool:o}),i.memoizedState=s,i.childLanes=dg(e,r,n),t.memoizedState=cg,Zc(e.child,i)):(Ka(t),n=e.child,e=n.sibling,n=fa(n,{mode:"visible",children:i.children}),n.return=t,n.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n,t.memoizedState=null,n)}function iy(e,t){return t=Yf({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function Yf(e,t){return e=bi(22,e,null,t),e.lanes=0,e}function fg(e,t,n){return us(t,e.child,null,n),e=iy(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function pS(e,t,n){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),jg(e.return,t,n)}function pg(e,t,n,i,o,a){var r=e.memoizedState;r===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:o,treeForkCount:a}:(r.isBackwards=t,r.rendering=null,r.renderingStartTime=0,r.last=i,r.tail=n,r.tailMode=o,r.treeForkCount=a)}function AE(e,t,n){var i=t.pendingProps,o=i.revealOrder,a=i.tail;i=i.children;var r=Vt.current,s=(r&2)!==0;if(s?(r=r&1|2,t.flags|=128):r&=1,Tt(Vt,r),kn(e,t,i,n),i=We?bu:0,!s&&e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&pS(e,n,t);else if(e.tag===19)pS(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(o){case"forwards":for(n=t.child,o=null;n!==null;)e=n.alternate,e!==null&&Vf(e)===null&&(o=n),n=n.sibling;n=o,n===null?(o=t.child,t.child=null):(o=n.sibling,n.sibling=null),pg(t,!1,o,n,a,i);break;case"backwards":case"unstable_legacy-backwards":for(n=null,o=t.child,t.child=null;o!==null;){if(e=o.alternate,e!==null&&Vf(e)===null){t.child=o;break}e=o.sibling,o.sibling=n,n=o,o=e}pg(t,!0,n,null,a,i);break;case"together":pg(t,!1,null,null,void 0,i);break;default:t.memoizedState=null}return t.child}function ba(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),mr|=t.lanes,!(n&t.childLanes))if(e!==null){if(Hl(e,t,n,!1),(n&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(q(153));if(t.child!==null){for(e=t.child,n=fa(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=fa(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function nb(e,t){return e.lanes&t?!0:(e=e.dependencies,!!(e!==null&&Pf(e)))}function DL(e,t,n){switch(t.tag){case 3:Lf(t,t.stateNode.containerInfo),Ga(t,Jt,e.memoizedState.cache),ls();break;case 27:case 5:Lg(t);break;case 4:Lf(t,t.stateNode.containerInfo);break;case 10:Ga(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Xg(t),null;break;case 13:var i=t.memoizedState;if(i!==null)return i.dehydrated!==null?(Ka(t),t.flags|=128,null):n&t.child.childLanes?NE(e,t,n):(Ka(t),e=ba(e,t,n),e!==null?e.sibling:null);Ka(t);break;case 19:var o=(e.flags&128)!==0;if(i=(n&t.childLanes)!==0,i||(Hl(e,t,n,!1),i=(n&t.childLanes)!==0),o){if(i)return AE(e,t,n);t.flags|=128}if(o=t.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Tt(Vt,Vt.current),i)break;return null;case 22:return t.lanes=0,xE(e,t,n,t.pendingProps);case 24:Ga(t,Jt,e.memoizedState.cache)}return ba(e,t,n)}function DE(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps)Wt=!0;else{if(!nb(e,n)&&!(t.flags&128))return Wt=!1,DL(e,t,n);Wt=!!(e.flags&131072)}else Wt=!1,We&&t.flags&1048576&&Ok(t,bu,t.index);switch(t.lanes=0,t.tag){case 16:e:{var i=t.pendingProps;if(e=ts(t.elementType),t.type=e,typeof e=="function")Fy(e)?(i=fs(e,i),t.tag=1,t=dS(null,t,e,i,n)):(t.tag=0,t=ny(null,t,e,i,n));else{if(e!=null){var o=e.$$typeof;if(o===wy){t.tag=11,t=rS(null,t,e,i,n);break e}else if(o===Ty){t.tag=14,t=sS(null,t,e,i,n);break e}}throw t=Ag(e)||e,Error(q(306,t,""))}}return t;case 0:return ny(e,t,t.type,t.pendingProps,n);case 1:return i=t.type,o=fs(i,t.pendingProps),dS(e,t,i,o,n);case 3:e:{if(Lf(t,t.stateNode.containerInfo),e===null)throw Error(q(387));i=t.pendingProps;var a=t.memoizedState;o=a.element,Gg(e,t),su(t,i,null,n);var r=t.memoizedState;if(i=r.cache,Ga(t,Jt,i),i!==a.cache&&Yg(t,[Jt],n,!0),ru(),i=r.element,a.isDehydrated)if(a={element:i,isDehydrated:!1,cache:r.cache},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){t=fS(e,t,i,n);break e}else if(i!==o){o=Hi(Error(q(424)),t),vu(o),t=fS(e,t,i,n);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(Et=$i(e.firstChild),Cn=t,We=!0,ir=null,Vi=!0,n=zk(t,null,i,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling}else{if(ls(),i===o){t=ba(e,t,n);break e}kn(e,t,i,n)}t=t.child}return t;case 26:return Ef(e,t),e===null?(n=_S(t.type,null,t.pendingProps,null))?t.memoizedState=n:We||(n=t.type,e=t.pendingProps,i=Zf(nr.current).createElement(n),i[En]=t,i[ii]=e,xn(i,n,e),yn(i),t.stateNode=i):t.memoizedState=_S(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Lg(t),e===null&&We&&(i=t.stateNode=w0(t.type,t.pendingProps,nr.current),Cn=t,Vi=!0,o=Et,gr(t.type)?(yy=o,Et=$i(i.firstChild)):Et=o),kn(e,t,t.pendingProps.children,n),Ef(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&We&&((o=i=Et)&&(i=oR(i,t.type,t.pendingProps,Vi),i!==null?(t.stateNode=i,Cn=t,Et=$i(i.firstChild),Vi=!1,o=!0):o=!1),o||fr(t)),Lg(t),o=t.type,a=t.pendingProps,r=e!==null?e.memoizedProps:null,i=a.children,py(o,a)?i=null:r!==null&&py(o,r)&&(t.flags|=32),t.memoizedState!==null&&(o=$y(e,t,TL,null,null,n),Cu._currentValue=o),Ef(e,t),kn(e,t,i,n),t.child;case 6:return e===null&&We&&((e=n=Et)&&(n=aR(n,t.pendingProps,Vi),n!==null?(t.stateNode=n,Cn=t,Et=null,e=!0):e=!1),e||fr(t)),null;case 13:return NE(e,t,n);case 4:return Lf(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=us(t,null,i,n):kn(e,t,i,n),t.child;case 11:return rS(e,t,t.type,t.pendingProps,n);case 7:return kn(e,t,t.pendingProps,n),t.child;case 8:return kn(e,t,t.pendingProps.children,n),t.child;case 12:return kn(e,t,t.pendingProps.children,n),t.child;case 10:return i=t.pendingProps,Ga(t,t.type,i.value),kn(e,t,i.children,n),t.child;case 9:return o=t.type._context,i=t.pendingProps.children,cs(t),o=Mn(o),i=i(o),t.flags|=1,kn(e,t,i,n),t.child;case 14:return sS(e,t,t.type,t.pendingProps,n);case 15:return ME(e,t,t.type,t.pendingProps,n);case 19:return AE(e,t,n);case 31:return AL(e,t,n);case 22:return xE(e,t,n,t.pendingProps);case 24:return cs(t),i=Mn(Jt),e===null?(o=Py(),o===null&&(o=wt,a=Iy(),o.pooledCache=a,a.refCount++,a!==null&&(o.pooledCacheLanes|=n),o=a),t.memoizedState={parent:i,cache:o},Hy(t),Ga(t,Jt,o)):(e.lanes&n&&(Gg(e,t),su(t,null,null,n),ru()),o=e.memoizedState,a=t.memoizedState,o.parent!==i?(o={parent:i,cache:i},t.memoizedState=o,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=o),Ga(t,Jt,i)):(i=a.cache,Ga(t,Jt,i),i!==o.cache&&Yg(t,[Jt],n,!0))),kn(e,t,t.pendingProps.children,n),t.child;case 29:throw t.pendingProps}throw Error(q(156,t.tag))}function ia(e){e.flags|=4}function mg(e,t,n,i,o){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(o&335544128)===o)if(e.stateNode.complete)e.flags|=8192;else if(e0())e.flags|=8192;else throw rs=zf,zy}else e.flags&=-16777217}function mS(e,t){if(t.type!=="stylesheet"||t.state.loading&4)e.flags&=-16777217;else if(e.flags|=16777216,!k0(t))if(e0())e.flags|=8192;else throw rs=zf,zy}function lf(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?tk():536870912,e.lanes|=t,Ol|=t)}function qc(e,t){if(!We)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,i=0;if(t)for(var o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags&65011712,i|=o.flags&65011712,o.return=e,o=o.sibling;else for(o=e.child;o!==null;)n|=o.lanes|o.childLanes,i|=o.subtreeFlags,i|=o.flags,o.return=e,o=o.sibling;return e.subtreeFlags|=i,e.childLanes=n,t}function LL(e,t,n){var i=t.pendingProps;switch(By(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(t),null;case 1:return kt(t),null;case 3:return n=t.stateNode,i=null,e!==null&&(i=e.memoizedState.cache),t.memoizedState.cache!==i&&(t.flags|=2048),pa(Jt),xl(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(ol(t)?ia(t):e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,ag())),kt(t),null;case 26:var o=t.type,a=t.memoizedState;return e===null?(ia(t),a!==null?(kt(t),mS(t,a)):(kt(t),mg(t,o,null,i,n))):a?a!==e.memoizedState?(ia(t),kt(t),mS(t,a)):(kt(t),t.flags&=-16777217):(e=e.memoizedProps,e!==i&&ia(t),kt(t),mg(t,o,e,i,n)),null;case 27:if(Rf(t),n=nr.current,o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ia(t);else{if(!i){if(t.stateNode===null)throw Error(q(166));return kt(t),null}e=Lo.current,ol(t)?$T(t,e):(e=w0(o,i,n),t.stateNode=e,ia(t))}return kt(t),null;case 5:if(Rf(t),o=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==i&&ia(t);else{if(!i){if(t.stateNode===null)throw Error(q(166));return kt(t),null}if(a=Lo.current,ol(t))$T(t,a);else{var r=Zf(nr.current);switch(a){case 1:a=r.createElementNS("http://www.w3.org/2000/svg",o);break;case 2:a=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;default:switch(o){case"svg":a=r.createElementNS("http://www.w3.org/2000/svg",o);break;case"math":a=r.createElementNS("http://www.w3.org/1998/Math/MathML",o);break;case"script":a=r.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof i.is=="string"?r.createElement("select",{is:i.is}):r.createElement("select"),i.multiple?a.multiple=!0:i.size&&(a.size=i.size);break;default:a=typeof i.is=="string"?r.createElement(o,{is:i.is}):r.createElement(o)}}a[En]=t,a[ii]=i;e:for(r=t.child;r!==null;){if(r.tag===5||r.tag===6)a.appendChild(r.stateNode);else if(r.tag!==4&&r.tag!==27&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}t.stateNode=a;e:switch(xn(a,o,i),o){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}i&&ia(t)}}return kt(t),mg(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,n),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==i&&ia(t);else{if(typeof i!="string"&&t.stateNode===null)throw Error(q(166));if(e=nr.current,ol(t)){if(e=t.stateNode,n=t.memoizedProps,i=null,o=Cn,o!==null)switch(o.tag){case 27:case 5:i=o.memoizedProps}e[En]=t,e=!!(e.nodeValue===n||i!==null&&i.suppressHydrationWarning===!0||g0(e.nodeValue,n)),e||fr(t,!0)}else e=Zf(e).createTextNode(i),e[En]=t,t.stateNode=e}return kt(t),null;case 31:if(n=t.memoizedState,e===null||e.memoizedState!==null){if(i=ol(t),n!==null){if(e===null){if(!i)throw Error(q(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(q(557));e[En]=t}else ls(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),e=!1}else n=ag(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=n),e=!0;if(!e)return t.flags&256?(yi(t),t):(yi(t),null);if(t.flags&128)throw Error(q(558))}return kt(t),null;case 13:if(i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(o=ol(t),i!==null&&i.dehydrated!==null){if(e===null){if(!o)throw Error(q(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(q(317));o[En]=t}else ls(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;kt(t),o=!1}else o=ag(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=o),o=!0;if(!o)return t.flags&256?(yi(t),t):(yi(t),null)}return yi(t),t.flags&128?(t.lanes=n,t):(n=i!==null,e=e!==null&&e.memoizedState!==null,n&&(i=t.child,o=null,i.alternate!==null&&i.alternate.memoizedState!==null&&i.alternate.memoizedState.cachePool!==null&&(o=i.alternate.memoizedState.cachePool.pool),a=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(a=i.memoizedState.cachePool.pool),a!==o&&(i.flags|=2048)),n!==e&&n&&(t.child.flags|=8192),lf(t,t.updateQueue),kt(t),null);case 4:return xl(),e===null&&cb(t.stateNode.containerInfo),kt(t),null;case 10:return pa(t.type),kt(t),null;case 19:if(bn(Vt),i=t.memoizedState,i===null)return kt(t),null;if(o=(t.flags&128)!==0,a=i.rendering,a===null)if(o)qc(i,!1);else{if(Bt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(a=Vf(e),a!==null){for(t.flags|=128,qc(i,!1),e=a.updateQueue,t.updateQueue=e,lf(t,e),t.subtreeFlags=0,e=n,n=t.child;n!==null;)Lk(n,e),n=n.sibling;return Tt(Vt,Vt.current&1|2),We&&sa(t,i.treeForkCount),t.child}e=e.sibling}i.tail!==null&&wi()>Gf&&(t.flags|=128,o=!0,qc(i,!1),t.lanes=4194304)}else{if(!o)if(e=Vf(a),e!==null){if(t.flags|=128,o=!0,e=e.updateQueue,t.updateQueue=e,lf(t,e),qc(i,!0),i.tail===null&&i.tailMode==="hidden"&&!a.alternate&&!We)return kt(t),null}else 2*wi()-i.renderingStartTime>Gf&&n!==536870912&&(t.flags|=128,o=!0,qc(i,!1),t.lanes=4194304);i.isBackwards?(a.sibling=t.child,t.child=a):(e=i.last,e!==null?e.sibling=a:t.child=a,i.last=a)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=wi(),e.sibling=null,n=Vt.current,Tt(Vt,o?n&1|2:n&1),We&&sa(t,i.treeForkCount),e):(kt(t),null);case 22:case 23:return yi(t),Vy(),i=t.memoizedState!==null,e!==null?e.memoizedState!==null!==i&&(t.flags|=8192):i&&(t.flags|=8192),i?n&536870912&&!(t.flags&128)&&(kt(t),t.subtreeFlags&6&&(t.flags|=8192)):kt(t),n=t.updateQueue,n!==null&&lf(t,n.retryQueue),n=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),i=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(i=t.memoizedState.cachePool.pool),i!==n&&(t.flags|=2048),e!==null&&bn(as),null;case 24:return n=null,e!==null&&(n=e.memoizedState.cache),t.memoizedState.cache!==n&&(t.flags|=2048),pa(Jt),kt(t),null;case 25:return null;case 30:return null}throw Error(q(156,t.tag))}function RL(e,t){switch(By(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return pa(Jt),xl(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Rf(t),null;case 31:if(t.memoizedState!==null){if(yi(t),t.alternate===null)throw Error(q(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(yi(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(q(340));ls()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return bn(Vt),null;case 4:return xl(),null;case 10:return pa(t.type),null;case 22:case 23:return yi(t),Vy(),e!==null&&bn(as),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return pa(Jt),null;case 25:return null;default:return null}}function LE(e,t){switch(By(t),t.tag){case 3:pa(Jt),xl();break;case 26:case 27:case 5:Rf(t);break;case 4:xl();break;case 31:t.memoizedState!==null&&yi(t);break;case 13:yi(t);break;case 19:bn(Vt);break;case 10:pa(t.type);break;case 22:case 23:yi(t),Vy(),e!==null&&bn(as);break;case 24:pa(Jt)}}function Bu(e,t){try{var n=t.updateQueue,i=n!==null?n.lastEffect:null;if(i!==null){var o=i.next;n=o;do{if((n.tag&e)===e){i=void 0;var a=n.create,r=n.inst;i=a(),r.destroy=i}n=n.next}while(n!==o)}}catch(s){ft(t,t.return,s)}}function pr(e,t,n){try{var i=t.updateQueue,o=i!==null?i.lastEffect:null;if(o!==null){var a=o.next;i=a;do{if((i.tag&e)===e){var r=i.inst,s=r.destroy;if(s!==void 0){r.destroy=void 0,o=t;var l=n,c=s;try{c()}catch(u){ft(o,l,u)}}}i=i.next}while(i!==a)}}catch(u){ft(t,t.return,u)}}function RE(e){var t=e.updateQueue;if(t!==null){var n=e.stateNode;try{Vk(t,n)}catch(i){ft(e,e.return,i)}}}function OE(e,t,n){n.props=fs(e.type,e.memoizedProps),n.state=e.memoizedState;try{n.componentWillUnmount()}catch(i){ft(e,t,i)}}function cu(e,t){try{var n=e.ref;if(n!==null){switch(e.tag){case 26:case 27:case 5:var i=e.stateNode;break;case 30:i=e.stateNode;break;default:i=e.stateNode}typeof n=="function"?e.refCleanup=n(i):n.current=i}}catch(o){ft(e,t,o)}}function Do(e,t){var n=e.ref,i=e.refCleanup;if(n!==null)if(typeof i=="function")try{i()}catch(o){ft(e,t,o)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof n=="function")try{n(null)}catch(o){ft(e,t,o)}else n.current=null}function FE(e){var t=e.type,n=e.memoizedProps,i=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":n.autoFocus&&i.focus();break e;case"img":n.src?i.src=n.src:n.srcSet&&(i.srcset=n.srcSet)}}catch(o){ft(e,e.return,o)}}function hg(e,t,n){try{var i=e.stateNode;WL(i,e.type,n,t),i[ii]=t}catch(o){ft(e,e.return,o)}}function _E(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&gr(e.type)||e.tag===4}function gg(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||_E(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&gr(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function oy(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?(n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n).insertBefore(e,t):(t=n.nodeType===9?n.body:n.nodeName==="HTML"?n.ownerDocument.body:n,t.appendChild(e),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ua));else if(i!==4&&(i===27&&gr(e.type)&&(n=e.stateNode,t=null),e=e.child,e!==null))for(oy(e,t,n),e=e.sibling;e!==null;)oy(e,t,n),e=e.sibling}function qf(e,t,n){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(i!==4&&(i===27&&gr(e.type)&&(n=e.stateNode),e=e.child,e!==null))for(qf(e,t,n),e=e.sibling;e!==null;)qf(e,t,n),e=e.sibling}function BE(e){var t=e.stateNode,n=e.memoizedProps;try{for(var i=e.type,o=t.attributes;o.length;)t.removeAttributeNode(o[0]);xn(t,i,n),t[En]=e,t[ii]=n}catch(a){ft(e,e.return,a)}}var la=!1,Xt=!1,yg=!1,hS=typeof WeakSet=="function"?WeakSet:Set,gn=null;function OL(e,t){if(e=e.containerInfo,dy=ip,e=kk(e),Ly(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var o=i.anchorOffset,a=i.focusNode;i=i.focusOffset;try{n.nodeType,a.nodeType}catch(m){n=null;break e}var r=0,s=-1,l=-1,c=0,u=0,f=e,p=null;t:for(;;){for(var d;f!==n||o!==0&&f.nodeType!==3||(s=r+o),f!==a||i!==0&&f.nodeType!==3||(l=r+i),f.nodeType===3&&(r+=f.nodeValue.length),(d=f.firstChild)!==null;)p=f,f=d;for(;;){if(f===e)break t;if(p===n&&++c===o&&(s=r),p===a&&++u===i&&(l=r),(d=f.nextSibling)!==null)break;f=p,p=f.parentNode}f=d}n=s===-1||l===-1?null:{start:s,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(fy={focusedElem:e,selectionRange:n},ip=!1,gn=t;gn!==null;)if(t=gn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,gn=e;else for(;gn!==null;){switch(t=gn,a=t.alternate,e=t.flags,t.tag){case 0:if(e&4&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(n=0;n<e.length;n++)o=e[n],o.ref.impl=o.nextImpl;break;case 11:case 15:break;case 1:if(e&1024&&a!==null){e=void 0,n=t,o=a.memoizedProps,a=a.memoizedState,i=n.stateNode;try{var h=fs(n.type,o);e=i.getSnapshotBeforeUpdate(h,a),i.__reactInternalSnapshotBeforeUpdate=e}catch(m){ft(n,n.return,m)}}break;case 3:if(e&1024){if(e=t.stateNode.containerInfo,n=e.nodeType,n===9)my(e);else if(n===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":my(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if(e&1024)throw Error(q(163))}if(e=t.sibling,e!==null){e.return=t.return,gn=e;break}gn=t.return}}function IE(e,t,n){var i=n.flags;switch(n.tag){case 0:case 11:case 15:aa(e,n),i&4&&Bu(5,n);break;case 1:if(aa(e,n),i&4)if(e=n.stateNode,t===null)try{e.componentDidMount()}catch(r){ft(n,n.return,r)}else{var o=fs(n.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(o,t,e.__reactInternalSnapshotBeforeUpdate)}catch(r){ft(n,n.return,r)}}i&64&&RE(n),i&512&&cu(n,n.return);break;case 3:if(aa(e,n),i&64&&(e=n.updateQueue,e!==null)){if(t=null,n.child!==null)switch(n.child.tag){case 27:case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}try{Vk(e,t)}catch(r){ft(n,n.return,r)}}break;case 27:t===null&&i&4&&BE(n);case 26:case 5:aa(e,n),t===null&&i&4&&FE(n),i&512&&cu(n,n.return);break;case 12:aa(e,n);break;case 31:aa(e,n),i&4&&HE(e,n);break;case 13:aa(e,n),i&4&&VE(e,n),i&64&&(e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(n=UL.bind(null,n),rR(e,n))));break;case 22:if(i=n.memoizedState!==null||la,!i){t=t!==null&&t.memoizedState!==null||Xt,o=la;var a=Xt;la=i,(Xt=t)&&!a?ra(e,n,(n.subtreeFlags&8772)!==0):aa(e,n),la=o,Xt=a}break;case 30:break;default:aa(e,n)}}function PE(e){var t=e.alternate;t!==null&&(e.alternate=null,PE(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Cy(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Lt=null,ei=!1;function oa(e,t,n){for(n=n.child;n!==null;)zE(e,t,n),n=n.sibling}function zE(e,t,n){if(Ti&&typeof Ti.onCommitFiberUnmount=="function")try{Ti.onCommitFiberUnmount(Au,n)}catch(a){}switch(n.tag){case 26:Xt||Do(n,t),oa(e,t,n),n.memoizedState?n.memoizedState.count--:n.stateNode&&(n=n.stateNode,n.parentNode.removeChild(n));break;case 27:Xt||Do(n,t);var i=Lt,o=ei;gr(n.type)&&(Lt=n.stateNode,ei=!1),oa(e,t,n),pu(n.stateNode),Lt=i,ei=o;break;case 5:Xt||Do(n,t);case 6:if(i=Lt,o=ei,Lt=null,oa(e,t,n),Lt=i,ei=o,Lt!==null)if(ei)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(n.stateNode)}catch(a){ft(n,t,a)}else try{Lt.removeChild(n.stateNode)}catch(a){ft(n,t,a)}break;case 18:Lt!==null&&(ei?(e=Lt,DS(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,n.stateNode),Il(e)):DS(Lt,n.stateNode));break;case 4:i=Lt,o=ei,Lt=n.stateNode.containerInfo,ei=!0,oa(e,t,n),Lt=i,ei=o;break;case 0:case 11:case 14:case 15:pr(2,n,t),Xt||pr(4,n,t),oa(e,t,n);break;case 1:Xt||(Do(n,t),i=n.stateNode,typeof i.componentWillUnmount=="function"&&OE(n,t,i)),oa(e,t,n);break;case 21:oa(e,t,n);break;case 22:Xt=(i=Xt)||n.memoizedState!==null,oa(e,t,n),Xt=i;break;default:oa(e,t,n)}}function HE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Il(e)}catch(n){ft(t,t.return,n)}}}function VE(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Il(e)}catch(n){ft(t,t.return,n)}}function FL(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new hS),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new hS),t;default:throw Error(q(435,e.tag))}}function cf(e,t){var n=FL(e);t.forEach(function(i){if(!n.has(i)){n.add(i);var o=$L.bind(null,e,i);i.then(o,o)}})}function Wn(e,t){var n=t.deletions;if(n!==null)for(var i=0;i<n.length;i++){var o=n[i],a=e,r=t,s=r;e:for(;s!==null;){switch(s.tag){case 27:if(gr(s.type)){Lt=s.stateNode,ei=!1;break e}break;case 5:Lt=s.stateNode,ei=!1;break e;case 3:case 4:Lt=s.stateNode.containerInfo,ei=!0;break e}s=s.return}if(Lt===null)throw Error(q(160));zE(a,r,o),Lt=null,ei=!1,a=o.alternate,a!==null&&(a.return=null),o.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)UE(t,e),t=t.sibling}var io=null;function UE(e,t){var n=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Wn(t,e),Zn(e),i&4&&(pr(3,e,e.return),Bu(3,e),pr(5,e,e.return));break;case 1:Wn(t,e),Zn(e),i&512&&(Xt||n===null||Do(n,n.return)),i&64&&la&&(e=e.updateQueue,e!==null&&(i=e.callbacks,i!==null&&(n=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=n===null?i:n.concat(i))));break;case 26:var o=io;if(Wn(t,e),Zn(e),i&512&&(Xt||n===null||Do(n,n.return)),i&4){var a=n!==null?n.memoizedState:null;if(i=e.memoizedState,n===null)if(i===null)if(e.stateNode===null){e:{i=e.type,n=e.memoizedProps,o=o.ownerDocument||o;t:switch(i){case"title":a=o.getElementsByTagName("title")[0],(!a||a[Ru]||a[En]||a.namespaceURI==="http://www.w3.org/2000/svg"||a.hasAttribute("itemprop"))&&(a=o.createElement(i),o.head.insertBefore(a,o.querySelector("head > title"))),xn(a,i,n),a[En]=e,yn(a),i=a;break e;case"link":var r=IS("link","href",o).get(i+(n.href||""));if(r){for(var s=0;s<r.length;s++)if(a=r[s],a.getAttribute("href")===(n.href==null||n.href===""?null:n.href)&&a.getAttribute("rel")===(n.rel==null?null:n.rel)&&a.getAttribute("title")===(n.title==null?null:n.title)&&a.getAttribute("crossorigin")===(n.crossOrigin==null?null:n.crossOrigin)){r.splice(s,1);break t}}a=o.createElement(i),xn(a,i,n),o.head.appendChild(a);break;case"meta":if(r=IS("meta","content",o).get(i+(n.content||""))){for(s=0;s<r.length;s++)if(a=r[s],a.getAttribute("content")===(n.content==null?null:""+n.content)&&a.getAttribute("name")===(n.name==null?null:n.name)&&a.getAttribute("property")===(n.property==null?null:n.property)&&a.getAttribute("http-equiv")===(n.httpEquiv==null?null:n.httpEquiv)&&a.getAttribute("charset")===(n.charSet==null?null:n.charSet)){r.splice(s,1);break t}}a=o.createElement(i),xn(a,i,n),o.head.appendChild(a);break;default:throw Error(q(468,i))}a[En]=e,yn(a),i=a}e.stateNode=i}else PS(o,e.type,e.stateNode);else e.stateNode=BS(o,i,e.memoizedProps);else a!==i?(a===null?n.stateNode!==null&&(n=n.stateNode,n.parentNode.removeChild(n)):a.count--,i===null?PS(o,e.type,e.stateNode):BS(o,i,e.memoizedProps)):i===null&&e.stateNode!==null&&hg(e,e.memoizedProps,n.memoizedProps)}break;case 27:Wn(t,e),Zn(e),i&512&&(Xt||n===null||Do(n,n.return)),n!==null&&i&4&&hg(e,e.memoizedProps,n.memoizedProps);break;case 5:if(Wn(t,e),Zn(e),i&512&&(Xt||n===null||Do(n,n.return)),e.flags&32){o=e.stateNode;try{Al(o,"")}catch(h){ft(e,e.return,h)}}i&4&&e.stateNode!=null&&(o=e.memoizedProps,hg(e,o,n!==null?n.memoizedProps:o)),i&1024&&(yg=!0);break;case 6:if(Wn(t,e),Zn(e),i&4){if(e.stateNode===null)throw Error(q(162));i=e.memoizedProps,n=e.stateNode;try{n.nodeValue=i}catch(h){ft(e,e.return,h)}}break;case 3:if(xf=null,o=io,io=ep(t.containerInfo),Wn(t,e),io=o,Zn(e),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Il(t.containerInfo)}catch(h){ft(e,e.return,h)}yg&&(yg=!1,$E(e));break;case 4:i=io,io=ep(e.stateNode.containerInfo),Wn(t,e),Zn(e),io=i;break;case 12:Wn(t,e),Zn(e);break;case 31:Wn(t,e),Zn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,cf(e,i)));break;case 13:Wn(t,e),Zn(e),e.child.flags&8192&&e.memoizedState!==null!=(n!==null&&n.memoizedState!==null)&&(gp=wi()),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,cf(e,i)));break;case 22:o=e.memoizedState!==null;var l=n!==null&&n.memoizedState!==null,c=la,u=Xt;if(la=c||o,Xt=u||l,Wn(t,e),Xt=u,la=c,Zn(e),i&8192)e:for(t=e.stateNode,t._visibility=o?t._visibility&-2:t._visibility|1,o&&(n===null||l||la||Xt||ns(e)),n=null,t=e;;){if(t.tag===5||t.tag===26){if(n===null){l=n=t;try{if(a=l.stateNode,o)r=a.style,typeof r.setProperty=="function"?r.setProperty("display","none","important"):r.display="none";else{s=l.stateNode;var f=l.memoizedProps.style,p=f!=null&&f.hasOwnProperty("display")?f.display:null;s.style.display=p==null||typeof p=="boolean"?"":(""+p).trim()}}catch(h){ft(l,l.return,h)}}}else if(t.tag===6){if(n===null){l=t;try{l.stateNode.nodeValue=o?"":l.memoizedProps}catch(h){ft(l,l.return,h)}}}else if(t.tag===18){if(n===null){l=t;try{var d=l.stateNode;o?LS(d,!0):LS(l.stateNode,!1)}catch(h){ft(l,l.return,h)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;n===t&&(n=null),t=t.return}n===t&&(n=null),t.sibling.return=t.return,t=t.sibling}i&4&&(i=e.updateQueue,i!==null&&(n=i.retryQueue,n!==null&&(i.retryQueue=null,cf(e,n))));break;case 19:Wn(t,e),Zn(e),i&4&&(i=e.updateQueue,i!==null&&(e.updateQueue=null,cf(e,i)));break;case 30:break;case 21:break;default:Wn(t,e),Zn(e)}}function Zn(e){var t=e.flags;if(t&2){try{for(var n,i=e.return;i!==null;){if(_E(i)){n=i;break}i=i.return}if(n==null)throw Error(q(160));switch(n.tag){case 27:var o=n.stateNode,a=gg(e);qf(e,a,o);break;case 5:var r=n.stateNode;n.flags&32&&(Al(r,""),n.flags&=-33);var s=gg(e);qf(e,s,r);break;case 3:case 4:var l=n.stateNode.containerInfo,c=gg(e);oy(e,c,l);break;default:throw Error(q(161))}}catch(u){ft(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function $E(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;$E(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function aa(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)IE(e,t.alternate,t),t=t.sibling}function ns(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:pr(4,t,t.return),ns(t);break;case 1:Do(t,t.return);var n=t.stateNode;typeof n.componentWillUnmount=="function"&&OE(t,t.return,n),ns(t);break;case 27:pu(t.stateNode);case 26:case 5:Do(t,t.return),ns(t);break;case 22:t.memoizedState===null&&ns(t);break;case 30:ns(t);break;default:ns(t)}e=e.sibling}}function ra(e,t,n){for(n=n&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var i=t.alternate,o=e,a=t,r=a.flags;switch(a.tag){case 0:case 11:case 15:ra(o,a,n),Bu(4,a);break;case 1:if(ra(o,a,n),i=a,o=i.stateNode,typeof o.componentDidMount=="function")try{o.componentDidMount()}catch(c){ft(i,i.return,c)}if(i=a,o=i.updateQueue,o!==null){var s=i.stateNode;try{var l=o.shared.hiddenCallbacks;if(l!==null)for(o.shared.hiddenCallbacks=null,o=0;o<l.length;o++)Hk(l[o],s)}catch(c){ft(i,i.return,c)}}n&&r&64&&RE(a),cu(a,a.return);break;case 27:BE(a);case 26:case 5:ra(o,a,n),n&&i===null&&r&4&&FE(a),cu(a,a.return);break;case 12:ra(o,a,n);break;case 31:ra(o,a,n),n&&r&4&&HE(o,a);break;case 13:ra(o,a,n),n&&r&4&&VE(o,a);break;case 22:a.memoizedState===null&&ra(o,a,n),cu(a,a.return);break;case 30:break;default:ra(o,a,n)}t=t.sibling}}function ib(e,t){var n=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(n=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==n&&(e!=null&&e.refCount++,n!=null&&Fu(n))}function ob(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Fu(e))}function no(e,t,n,i){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)jE(e,t,n,i),t=t.sibling}function jE(e,t,n,i){var o=t.flags;switch(t.tag){case 0:case 11:case 15:no(e,t,n,i),o&2048&&Bu(9,t);break;case 1:no(e,t,n,i);break;case 3:no(e,t,n,i),o&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Fu(e)));break;case 12:if(o&2048){no(e,t,n,i),e=t.stateNode;try{var a=t.memoizedProps,r=a.id,s=a.onPostCommit;typeof s=="function"&&s(r,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(l){ft(t,t.return,l)}}else no(e,t,n,i);break;case 31:no(e,t,n,i);break;case 13:no(e,t,n,i);break;case 23:break;case 22:a=t.stateNode,r=t.alternate,t.memoizedState!==null?a._visibility&2?no(e,t,n,i):uu(e,t):a._visibility&2?no(e,t,n,i):(a._visibility|=2,rl(e,t,n,i,(t.subtreeFlags&10256)!==0||!1)),o&2048&&ib(r,t);break;case 24:no(e,t,n,i),o&2048&&ob(t.alternate,t);break;default:no(e,t,n,i)}}function rl(e,t,n,i,o){for(o=o&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var a=e,r=t,s=n,l=i,c=r.flags;switch(r.tag){case 0:case 11:case 15:rl(a,r,s,l,o),Bu(8,r);break;case 23:break;case 22:var u=r.stateNode;r.memoizedState!==null?u._visibility&2?rl(a,r,s,l,o):uu(a,r):(u._visibility|=2,rl(a,r,s,l,o)),o&&c&2048&&ib(r.alternate,r);break;case 24:rl(a,r,s,l,o),o&&c&2048&&ob(r.alternate,r);break;default:rl(a,r,s,l,o)}t=t.sibling}}function uu(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var n=e,i=t,o=i.flags;switch(i.tag){case 22:uu(n,i),o&2048&&ib(i.alternate,i);break;case 24:uu(n,i),o&2048&&ob(i.alternate,i);break;default:uu(n,i)}t=t.sibling}}var eu=8192;function al(e,t,n){if(e.subtreeFlags&eu)for(e=e.child;e!==null;)YE(e,t,n),e=e.sibling}function YE(e,t,n){switch(e.tag){case 26:al(e,t,n),e.flags&eu&&e.memoizedState!==null&&bR(n,io,e.memoizedState,e.memoizedProps);break;case 5:al(e,t,n);break;case 3:case 4:var i=io;io=ep(e.stateNode.containerInfo),al(e,t,n),io=i;break;case 22:e.memoizedState===null&&(i=e.alternate,i!==null&&i.memoizedState!==null?(i=eu,eu=16777216,al(e,t,n),eu=i):al(e,t,n));break;default:al(e,t,n)}}function qE(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Gc(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];gn=i,KE(i,e)}qE(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)GE(e),e=e.sibling}function GE(e){switch(e.tag){case 0:case 11:case 15:Gc(e),e.flags&2048&&pr(9,e,e.return);break;case 3:Gc(e);break;case 12:Gc(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,Cf(e)):Gc(e);break;default:Gc(e)}}function Cf(e){var t=e.deletions;if(e.flags&16){if(t!==null)for(var n=0;n<t.length;n++){var i=t[n];gn=i,KE(i,e)}qE(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:pr(8,t,t.return),Cf(t);break;case 22:n=t.stateNode,n._visibility&2&&(n._visibility&=-3,Cf(t));break;default:Cf(t)}e=e.sibling}}function KE(e,t){for(;gn!==null;){var n=gn;switch(n.tag){case 0:case 11:case 15:pr(8,n,t);break;case 23:case 22:if(n.memoizedState!==null&&n.memoizedState.cachePool!==null){var i=n.memoizedState.cachePool.pool;i!=null&&i.refCount++}break;case 24:Fu(n.memoizedState.cache)}if(i=n.child,i!==null)i.return=n,gn=i;else e:for(n=e;gn!==null;){i=gn;var o=i.sibling,a=i.return;if(PE(i),i===n){gn=null;break e}if(o!==null){o.return=a,gn=o;break e}gn=a}}}var _L={getCacheForType:function(e){var t=Mn(Jt),n=t.data.get(e);return n===void 0&&(n=e(),t.data.set(e,n)),n},cacheSignal:function(){return Mn(Jt).controller.signal}},BL=typeof WeakMap=="function"?WeakMap:Map,lt=0,wt=null,Ye=null,Ke=0,dt=0,gi=null,Za=!1,Ul=!1,ab=!1,va=0,Bt=0,mr=0,ss=0,rb=0,vi=0,Ol=0,du=null,ti=null,ay=!1,gp=0,QE=0,Gf=1/0,Kf=null,rr=null,sn=0,sr=null,Fl=null,ma=0,ry=0,sy=null,XE=null,fu=0,ly=null;function ki(){return lt&2&&Ke!==0?Ke&-Ke:Ae.T!==null?lb():ak()}function JE(){if(vi===0)if(!(Ke&536870912)||We){var e=Wd;Wd<<=1,!(Wd&3932160)&&(Wd=262144),vi=e}else vi=536870912;return e=Ci.current,e!==null&&(e.flags|=32),vi}function ni(e,t,n){(e===wt&&(dt===2||dt===9)||e.cancelPendingCommit!==null)&&(_l(e,0),er(e,Ke,vi,!1)),Lu(e,n),(!(lt&2)||e!==wt)&&(e===wt&&(!(lt&2)&&(ss|=n),Bt===4&&er(e,Ke,vi,!1)),Oo(e))}function WE(e,t,n){if(lt&6)throw Error(q(327));var i=!n&&(t&127)===0&&(t&e.expiredLanes)===0||Du(e,t),o=i?zL(e,t):bg(e,t,!0),a=i;do{if(o===0){Ul&&!i&&er(e,t,0,!1);break}else{if(n=e.current.alternate,a&&!IL(n)){o=bg(e,t,!1),a=!1;continue}if(o===2){if(a=t,e.errorRecoveryDisabledLanes&a)var r=0;else r=e.pendingLanes&-536870913,r=r!==0?r:r&536870912?536870912:0;if(r!==0){t=r;e:{var s=e;o=du;var l=s.current.memoizedState.isDehydrated;if(l&&(_l(s,r).flags|=256),r=bg(s,r,!1),r!==2){if(ab&&!l){s.errorRecoveryDisabledLanes|=a,ss|=a,o=4;break e}a=ti,ti=o,a!==null&&(ti===null?ti=a:ti.push.apply(ti,a))}o=r}if(a=!1,o!==2)continue}}if(o===1){_l(e,0),er(e,t,0,!0);break}e:{switch(i=e,a=o,a){case 0:case 1:throw Error(q(345));case 4:if((t&4194048)!==t)break;case 6:er(i,t,vi,!Za);break e;case 2:ti=null;break;case 3:case 5:break;default:throw Error(q(329))}if((t&62914560)===t&&(o=gp+300-wi(),10<o)){if(er(i,t,vi,!Za),ap(i,0,!0)!==0)break e;ma=t,i.timeoutHandle=b0(gS.bind(null,i,n,ti,Kf,ay,t,vi,ss,Ol,Za,a,"Throttled",-0,0),o);break e}gS(i,n,ti,Kf,ay,t,vi,ss,Ol,Za,a,null,-0,0)}}break}while(1);Oo(e)}function gS(e,t,n,i,o,a,r,s,l,c,u,f,p,d){if(e.timeoutHandle=-1,f=t.subtreeFlags,f&8192||(f&16785408)===16785408){f={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:ua},YE(t,a,f);var h=(a&62914560)===a?gp-wi():(a&4194048)===a?QE-wi():0;if(h=vR(f,h),h!==null){ma=a,e.cancelPendingCommit=h(bS.bind(null,e,t,a,n,i,o,r,s,l,u,f,null,p,d)),er(e,a,r,!c);return}}bS(e,t,a,n,i,o,r,s,l)}function IL(e){for(var t=e;;){var n=t.tag;if((n===0||n===11||n===15)&&t.flags&16384&&(n=t.updateQueue,n!==null&&(n=n.stores,n!==null)))for(var i=0;i<n.length;i++){var o=n[i],a=o.getSnapshot;o=o.value;try{if(!Ei(a(),o))return!1}catch(r){return!1}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function er(e,t,n,i){t&=~rb,t&=~ss,e.suspendedLanes|=t,e.pingedLanes&=~t,i&&(e.warmLanes|=t),i=e.expirationTimes;for(var o=t;0<o;){var a=31-Si(o),r=1<<a;i[a]=-1,o&=~r}n!==0&&nk(e,n,t)}function yp(){return lt&6?!0:(Iu(0,!1),!1)}function sb(){if(Ye!==null){if(dt===0)var e=Ye.return;else e=Ye,da=ys=null,qy(e),El=null,wu=0,e=Ye;for(;e!==null;)LE(e.alternate,e),e=e.return;Ye=null}}function _l(e,t){var n=e.timeoutHandle;n!==-1&&(e.timeoutHandle=-1,tR(n)),n=e.cancelPendingCommit,n!==null&&(e.cancelPendingCommit=null,n()),ma=0,sb(),wt=e,Ye=n=fa(e.current,null),Ke=t,dt=0,gi=null,Za=!1,Ul=Du(e,t),ab=!1,Ol=vi=rb=ss=mr=Bt=0,ti=du=null,ay=!1,t&8&&(t|=t&32);var i=e.entangledLanes;if(i!==0)for(e=e.entanglements,i&=t;0<i;){var o=31-Si(i),a=1<<o;t|=e[o],i&=~a}return va=t,cp(),n}function ZE(e,t){Pe=null,Ae.H=Su,t===Vl||t===dp?(t=KT(),dt=3):t===zy?(t=KT(),dt=4):dt=t===tb?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,gi=t,Ye===null&&(Bt=1,jf(e,Hi(t,e.current)))}function e0(){var e=Ci.current;return e===null?!0:(Ke&4194048)===Ke?Ui===null:(Ke&62914560)===Ke||Ke&536870912?e===Ui:!1}function t0(){var e=Ae.H;return Ae.H=Su,e===null?Su:e}function n0(){var e=Ae.A;return Ae.A=_L,e}function Qf(){Bt=4,Za||(Ke&4194048)!==Ke&&Ci.current!==null||(Ul=!0),!(mr&134217727)&&!(ss&134217727)||wt===null||er(wt,Ke,vi,!1)}function bg(e,t,n){var i=lt;lt|=2;var o=t0(),a=n0();(wt!==e||Ke!==t)&&(Kf=null,_l(e,t)),t=!1;var r=Bt;e:do try{if(dt!==0&&Ye!==null){var s=Ye,l=gi;switch(dt){case 8:sb(),r=6;break e;case 3:case 2:case 9:case 6:Ci.current===null&&(t=!0);var c=dt;if(dt=0,gi=null,vl(e,s,l,c),n&&Ul){r=0;break e}break;default:c=dt,dt=0,gi=null,vl(e,s,l,c)}}PL(),r=Bt;break}catch(u){ZE(e,u)}while(1);return t&&e.shellSuspendCounter++,da=ys=null,lt=i,Ae.H=o,Ae.A=a,Ye===null&&(wt=null,Ke=0,cp()),r}function PL(){for(;Ye!==null;)i0(Ye)}function zL(e,t){var n=lt;lt|=2;var i=t0(),o=n0();wt!==e||Ke!==t?(Kf=null,Gf=wi()+500,_l(e,t)):Ul=Du(e,t);e:do try{if(dt!==0&&Ye!==null){t=Ye;var a=gi;t:switch(dt){case 1:dt=0,gi=null,vl(e,t,a,1);break;case 2:case 9:if(GT(a)){dt=0,gi=null,yS(t);break}t=function(){dt!==2&&dt!==9||wt!==e||(dt=7),Oo(e)},a.then(t,t);break e;case 3:dt=7;break e;case 4:dt=5;break e;case 7:GT(a)?(dt=0,gi=null,yS(t)):(dt=0,gi=null,vl(e,t,a,7));break;case 5:var r=null;switch(Ye.tag){case 26:r=Ye.memoizedState;case 5:case 27:var s=Ye;if(r?k0(r):s.stateNode.complete){dt=0,gi=null;var l=s.sibling;if(l!==null)Ye=l;else{var c=s.return;c!==null?(Ye=c,bp(c)):Ye=null}break t}}dt=0,gi=null,vl(e,t,a,5);break;case 6:dt=0,gi=null,vl(e,t,a,6);break;case 8:sb(),Bt=6;break e;default:throw Error(q(462))}}HL();break}catch(u){ZE(e,u)}while(1);return da=ys=null,Ae.H=i,Ae.A=o,lt=n,Ye!==null?0:(wt=null,Ke=0,cp(),Bt)}function HL(){for(;Ye!==null&&!cD();)i0(Ye)}function i0(e){var t=DE(e.alternate,e,va);e.memoizedProps=e.pendingProps,t===null?bp(e):Ye=t}function yS(e){var t=e,n=t.alternate;switch(t.tag){case 15:case 0:t=uS(n,t,t.pendingProps,t.type,void 0,Ke);break;case 11:t=uS(n,t,t.pendingProps,t.type.render,t.ref,Ke);break;case 5:qy(t);default:LE(n,t),t=Ye=Lk(t,va),t=DE(n,t,va)}e.memoizedProps=e.pendingProps,t===null?bp(e):Ye=t}function vl(e,t,n,i){da=ys=null,qy(t),El=null,wu=0;var o=t.return;try{if(NL(e,o,t,n,Ke)){Bt=1,jf(e,Hi(n,e.current)),Ye=null;return}}catch(a){if(o!==null)throw Ye=o,a;Bt=1,jf(e,Hi(n,e.current)),Ye=null;return}t.flags&32768?(We||i===1?e=!0:Ul||Ke&536870912?e=!1:(Za=e=!0,(i===2||i===9||i===3||i===6)&&(i=Ci.current,i!==null&&i.tag===13&&(i.flags|=16384))),o0(t,e)):bp(t)}function bp(e){var t=e;do{if(t.flags&32768){o0(t,Za);return}e=t.return;var n=LL(t.alternate,t,va);if(n!==null){Ye=n;return}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);Bt===0&&(Bt=5)}function o0(e,t){do{var n=RL(e.alternate,e);if(n!==null){n.flags&=32767,Ye=n;return}if(n=e.return,n!==null&&(n.flags|=32768,n.subtreeFlags=0,n.deletions=null),!t&&(e=e.sibling,e!==null)){Ye=e;return}Ye=e=n}while(e!==null);Bt=6,Ye=null}function bS(e,t,n,i,o,a,r,s,l){e.cancelPendingCommit=null;do vp();while(sn!==0);if(lt&6)throw Error(q(327));if(t!==null){if(t===e.current)throw Error(q(177));if(a=t.lanes|t.childLanes,a|=Ry,vD(e,n,a,r,s,l),e===wt&&(Ye=wt=null,Ke=0),Fl=t,sr=e,ma=n,ry=a,sy=o,XE=i,t.subtreeFlags&10256||t.flags&10256?(e.callbackNode=null,e.callbackPriority=0,jL(Of,function(){return c0(),null})):(e.callbackNode=null,e.callbackPriority=0),i=(t.flags&13878)!==0,t.subtreeFlags&13878||i){i=Ae.T,Ae.T=null,o=ct.p,ct.p=2,r=lt,lt|=4;try{OL(e,t,n)}finally{lt=r,ct.p=o,Ae.T=i}}sn=1,a0(),r0(),s0()}}function a0(){if(sn===1){sn=0;var e=sr,t=Fl,n=(t.flags&13878)!==0;if(t.subtreeFlags&13878||n){n=Ae.T,Ae.T=null;var i=ct.p;ct.p=2;var o=lt;lt|=4;try{UE(t,e);var a=fy,r=kk(e.containerInfo),s=a.focusedElem,l=a.selectionRange;if(r!==s&&s&&s.ownerDocument&&Sk(s.ownerDocument.documentElement,s)){if(l!==null&&Ly(s)){var c=l.start,u=l.end;if(u===void 0&&(u=c),"selectionStart"in s)s.selectionStart=c,s.selectionEnd=Math.min(u,s.value.length);else{var f=s.ownerDocument||document,p=f&&f.defaultView||window;if(p.getSelection){var d=p.getSelection(),h=s.textContent.length,m=Math.min(l.start,h),b=l.end===void 0?m:Math.min(l.end,h);!d.extend&&m>b&&(r=b,b=m,m=r);var y=HT(s,m),g=HT(s,b);if(y&&g&&(d.rangeCount!==1||d.anchorNode!==y.node||d.anchorOffset!==y.offset||d.focusNode!==g.node||d.focusOffset!==g.offset)){var v=f.createRange();v.setStart(y.node,y.offset),d.removeAllRanges(),m>b?(d.addRange(v),d.extend(g.node,g.offset)):(v.setEnd(g.node,g.offset),d.addRange(v))}}}}for(f=[],d=s;d=d.parentNode;)d.nodeType===1&&f.push({element:d,left:d.scrollLeft,top:d.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<f.length;s++){var w=f[s];w.element.scrollLeft=w.left,w.element.scrollTop=w.top}}ip=!!dy,fy=dy=null}finally{lt=o,ct.p=i,Ae.T=n}}e.current=t,sn=2}}function r0(){if(sn===2){sn=0;var e=sr,t=Fl,n=(t.flags&8772)!==0;if(t.subtreeFlags&8772||n){n=Ae.T,Ae.T=null;var i=ct.p;ct.p=2;var o=lt;lt|=4;try{IE(e,t.alternate,t)}finally{lt=o,ct.p=i,Ae.T=n}}sn=3}}function s0(){if(sn===4||sn===3){sn=0,uD();var e=sr,t=Fl,n=ma,i=XE;t.subtreeFlags&10256||t.flags&10256?sn=5:(sn=0,Fl=sr=null,l0(e,e.pendingLanes));var o=e.pendingLanes;if(o===0&&(rr=null),Ey(n),t=t.stateNode,Ti&&typeof Ti.onCommitFiberRoot=="function")try{Ti.onCommitFiberRoot(Au,t,void 0,(t.current.flags&128)===128)}catch(l){}if(i!==null){t=Ae.T,o=ct.p,ct.p=2,Ae.T=null;try{for(var a=e.onRecoverableError,r=0;r<i.length;r++){var s=i[r];a(s.value,{componentStack:s.stack})}}finally{Ae.T=t,ct.p=o}}ma&3&&vp(),Oo(e),o=e.pendingLanes,n&261930&&o&42?e===ly?fu++:(fu=0,ly=e):fu=0,Iu(0,!1)}}function l0(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Fu(t)))}function vp(){return a0(),r0(),s0(),c0()}function c0(){if(sn!==5)return!1;var e=sr,t=ry;ry=0;var n=Ey(ma),i=Ae.T,o=ct.p;try{ct.p=32>n?32:n,Ae.T=null,n=sy,sy=null;var a=sr,r=ma;if(sn=0,Fl=sr=null,ma=0,lt&6)throw Error(q(331));var s=lt;if(lt|=4,GE(a.current),jE(a,a.current,r,n),lt=s,Iu(0,!1),Ti&&typeof Ti.onPostCommitFiberRoot=="function")try{Ti.onPostCommitFiberRoot(Au,a)}catch(l){}return!0}finally{ct.p=o,Ae.T=i,l0(e,t)}}function vS(e,t,n){t=Hi(n,t),t=ty(e.stateNode,t,2),e=ar(e,t,2),e!==null&&(Lu(e,2),Oo(e))}function ft(e,t,n){if(e.tag===3)vS(e,e,n);else for(;t!==null;){if(t.tag===3){vS(t,e,n);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(rr===null||!rr.has(i))){e=Hi(n,e),n=EE(2),i=ar(t,n,2),i!==null&&(CE(n,i,t,e),Lu(i,2),Oo(i));break}}t=t.return}}function vg(e,t,n){var i=e.pingCache;if(i===null){i=e.pingCache=new BL;var o=new Set;i.set(t,o)}else o=i.get(t),o===void 0&&(o=new Set,i.set(t,o));o.has(n)||(ab=!0,o.add(n),e=VL.bind(null,e,t,n),t.then(e,e))}function VL(e,t,n){var i=e.pingCache;i!==null&&i.delete(t),e.pingedLanes|=e.suspendedLanes&n,e.warmLanes&=~n,wt===e&&(Ke&n)===n&&(Bt===4||Bt===3&&(Ke&62914560)===Ke&&300>wi()-gp?!(lt&2)&&_l(e,0):rb|=n,Ol===Ke&&(Ol=0)),Oo(e)}function u0(e,t){t===0&&(t=tk()),e=gs(e,t),e!==null&&(Lu(e,t),Oo(e))}function UL(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),u0(e,n)}function $L(e,t){var n=0;switch(e.tag){case 31:case 13:var i=e.stateNode,o=e.memoizedState;o!==null&&(n=o.retryLane);break;case 19:i=e.stateNode;break;case 22:i=e.stateNode._retryCache;break;default:throw Error(q(314))}i!==null&&i.delete(t),u0(e,n)}function jL(e,t){return Sy(e,t)}var Xf=null,sl=null,cy=!1,Jf=!1,wg=!1,tr=0;function Oo(e){e!==sl&&e.next===null&&(sl===null?Xf=sl=e:sl=sl.next=e),Jf=!0,cy||(cy=!0,qL())}function Iu(e,t){if(!wg&&Jf){wg=!0;do for(var n=!1,i=Xf;i!==null;){if(!t)if(e!==0){var o=i.pendingLanes;if(o===0)var a=0;else{var r=i.suspendedLanes,s=i.pingedLanes;a=(1<<31-Si(42|e)+1)-1,a&=o&~(r&~s),a=a&201326741?a&201326741|1:a?a|2:0}a!==0&&(n=!0,wS(i,a))}else a=Ke,a=ap(i,i===wt?a:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),!(a&3)||Du(i,a)||(n=!0,wS(i,a));i=i.next}while(n);wg=!1}}function YL(){d0()}function d0(){Jf=cy=!1;var e=0;tr!==0&&eR()&&(e=tr);for(var t=wi(),n=null,i=Xf;i!==null;){var o=i.next,a=f0(i,t);a===0?(i.next=null,n===null?Xf=o:n.next=o,o===null&&(sl=n)):(n=i,(e!==0||a&3)&&(Jf=!0)),i=o}sn!==0&&sn!==5||Iu(e,!1),tr!==0&&(tr=0)}function f0(e,t){for(var n=e.suspendedLanes,i=e.pingedLanes,o=e.expirationTimes,a=e.pendingLanes&-62914561;0<a;){var r=31-Si(a),s=1<<r,l=o[r];l===-1?(!(s&n)||s&i)&&(o[r]=bD(s,t)):l<=t&&(e.expiredLanes|=s),a&=~s}if(t=wt,n=Ke,n=ap(e,e===t?n:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i=e.callbackNode,n===0||e===t&&(dt===2||dt===9)||e.cancelPendingCommit!==null)return i!==null&&i!==null&&Qh(i),e.callbackNode=null,e.callbackPriority=0;if(!(n&3)||Du(e,n)){if(t=n&-n,t===e.callbackPriority)return t;switch(i!==null&&Qh(i),Ey(n)){case 2:case 8:n=ZS;break;case 32:n=Of;break;case 268435456:n=ek;break;default:n=Of}return i=p0.bind(null,e),n=Sy(n,i),e.callbackPriority=t,e.callbackNode=n,t}return i!==null&&i!==null&&Qh(i),e.callbackPriority=2,e.callbackNode=null,2}function p0(e,t){if(sn!==0&&sn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var n=e.callbackNode;if(vp()&&e.callbackNode!==n)return null;var i=Ke;return i=ap(e,e===wt?i:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),i===0?null:(WE(e,i,t),f0(e,wi()),e.callbackNode!=null&&e.callbackNode===n?p0.bind(null,e):null)}function wS(e,t){if(vp())return null;WE(e,t,!0)}function qL(){nR(function(){lt&6?Sy(WS,YL):d0()})}function lb(){if(tr===0){var e=Dl;e===0&&(e=Jd,Jd<<=1,!(Jd&261888)&&(Jd=256)),tr=e}return tr}function TS(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:gf(""+e)}function SS(e,t){var n=t.ownerDocument.createElement("input");return n.name=t.name,n.value=t.value,e.id&&n.setAttribute("form",e.id),t.parentNode.insertBefore(n,t),e=new FormData(e),n.parentNode.removeChild(n),e}function GL(e,t,n,i,o){if(t==="submit"&&n&&n.stateNode===o){var a=TS((o[ii]||null).action),r=i.submitter;r&&(t=(t=r[ii]||null)?TS(t.formAction):r.getAttribute("formAction"),t!==null&&(a=t,r=null));var s=new rp("action","action",null,i,o);e.push({event:s,listeners:[{instance:null,listener:function(){if(i.defaultPrevented){if(tr!==0){var l=r?SS(o,r):new FormData(o);Zg(n,{pending:!0,data:l,method:o.method,action:a},null,l)}}else typeof a=="function"&&(s.preventDefault(),l=r?SS(o,r):new FormData(o),Zg(n,{pending:!0,data:l,method:o.method,action:a},a,l))},currentTarget:o}]})}}for(uf=0;uf<Vg.length;uf++)df=Vg[uf],kS=df.toLowerCase(),ES=df[0].toUpperCase()+df.slice(1),oo(kS,"on"+ES);var df,kS,ES,uf;oo(Ck,"onAnimationEnd");oo(Mk,"onAnimationIteration");oo(xk,"onAnimationStart");oo("dblclick","onDoubleClick");oo("focusin","onFocus");oo("focusout","onBlur");oo(dL,"onTransitionRun");oo(fL,"onTransitionStart");oo(pL,"onTransitionCancel");oo(Nk,"onTransitionEnd");Nl("onMouseEnter",["mouseout","mouseover"]);Nl("onMouseLeave",["mouseout","mouseover"]);Nl("onPointerEnter",["pointerout","pointerover"]);Nl("onPointerLeave",["pointerout","pointerover"]);ps("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ps("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ps("onBeforeInput",["compositionend","keypress","textInput","paste"]);ps("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ps("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),KL=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(ku));function m0(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var i=e[n],o=i.event;i=i.listeners;e:{var a=void 0;if(t)for(var r=i.length-1;0<=r;r--){var s=i[r],l=s.instance,c=s.currentTarget;if(s=s.listener,l!==a&&o.isPropagationStopped())break e;a=s,o.currentTarget=c;try{a(o)}catch(u){_f(u)}o.currentTarget=null,a=l}else for(r=0;r<i.length;r++){if(s=i[r],l=s.instance,c=s.currentTarget,s=s.listener,l!==a&&o.isPropagationStopped())break e;a=s,o.currentTarget=c;try{a(o)}catch(u){_f(u)}o.currentTarget=null,a=l}}}}function je(e,t){var n=t[Og];n===void 0&&(n=t[Og]=new Set);var i=e+"__bubble";n.has(i)||(h0(t,e,2,!1),n.add(i))}function Tg(e,t,n){var i=0;t&&(i|=4),h0(n,e,i,t)}var ff="_reactListening"+Math.random().toString(36).slice(2);function cb(e){if(!e[ff]){e[ff]=!0,rk.forEach(function(n){n!=="selectionchange"&&(KL.has(n)||Tg(n,!1,e),Tg(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[ff]||(t[ff]=!0,Tg("selectionchange",!1,t))}}function h0(e,t,n,i){switch(N0(t)){case 2:var o=SR;break;case 8:o=kR;break;default:o=pb}n=o.bind(null,t,n,e),o=void 0,!Pg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(o=!0),i?o!==void 0?e.addEventListener(t,n,{capture:!0,passive:o}):e.addEventListener(t,n,!0):o!==void 0?e.addEventListener(t,n,{passive:o}):e.addEventListener(t,n,!1)}function Sg(e,t,n,i,o){var a=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var r=i.tag;if(r===3||r===4){var s=i.stateNode.containerInfo;if(s===o)break;if(r===4)for(r=i.return;r!==null;){var l=r.tag;if((l===3||l===4)&&r.stateNode.containerInfo===o)return;r=r.return}for(;s!==null;){if(r=ul(s),r===null)return;if(l=r.tag,l===5||l===6||l===26||l===27){i=a=r;continue e}s=s.parentNode}}i=i.return}mk(function(){var c=a,u=xy(n),f=[];e:{var p=Ak.get(e);if(p!==void 0){var d=rp,h=e;switch(e){case"keypress":if(bf(n)===0)break e;case"keydown":case"keyup":d=$D;break;case"focusin":h="focus",d=eg;break;case"focusout":h="blur",d=eg;break;case"beforeblur":case"afterblur":d=eg;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=LT;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=LD;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=qD;break;case Ck:case Mk:case xk:d=FD;break;case Nk:d=KD;break;case"scroll":case"scrollend":d=AD;break;case"wheel":d=XD;break;case"copy":case"cut":case"paste":d=BD;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=OT;break;case"toggle":case"beforetoggle":d=WD}var m=(t&4)!==0,b=!m&&(e==="scroll"||e==="scrollend"),y=m?p!==null?p+"Capture":null:p;m=[];for(var g=c,v;g!==null;){var w=g;if(v=w.stateNode,w=w.tag,w!==5&&w!==26&&w!==27||v===null||y===null||(w=hu(g,y),w!=null&&m.push(Eu(g,w,v))),b)break;g=g.return}0<m.length&&(p=new d(p,h,null,n,u),f.push({event:p,listeners:m}))}}if(!(t&7)){e:{if(p=e==="mouseover"||e==="pointerover",d=e==="mouseout"||e==="pointerout",p&&n!==Ig&&(h=n.relatedTarget||n.fromElement)&&(ul(h)||h[Pl]))break e;if((d||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,d?(h=n.relatedTarget||n.toElement,d=c,h=h?ul(h):null,h!==null&&(b=Nu(h),m=h.tag,h!==b||m!==5&&m!==27&&m!==6)&&(h=null)):(d=null,h=c),d!==h)){if(m=LT,w="onMouseLeave",y="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(m=OT,w="onPointerLeave",y="onPointerEnter",g="pointer"),b=d==null?p:Wc(d),v=h==null?p:Wc(h),p=new m(w,g+"leave",d,n,u),p.target=b,p.relatedTarget=v,w=null,ul(u)===c&&(m=new m(y,g+"enter",h,n,u),m.target=v,m.relatedTarget=b,w=m),b=w,d&&h)t:{for(m=QL,y=d,g=h,v=0,w=y;w;w=m(w))v++;w=0;for(var T=g;T;T=m(T))w++;for(;0<v-w;)y=m(y),v--;for(;0<w-v;)g=m(g),w--;for(;v--;){if(y===g||g!==null&&y===g.alternate){m=y;break t}y=m(y),g=m(g)}m=null}else m=null;d!==null&&CS(f,p,d,m,!1),h!==null&&b!==null&&CS(f,b,h,m,!0)}}e:{if(p=c?Wc(c):window,d=p.nodeName&&p.nodeName.toLowerCase(),d==="select"||d==="input"&&p.type==="file")var k=IT;else if(BT(p))if(wk)k=lL;else{k=rL;var E=aL}else d=p.nodeName,!d||d.toLowerCase()!=="input"||p.type!=="checkbox"&&p.type!=="radio"?c&&My(c.elementType)&&(k=IT):k=sL;if(k&&(k=k(e,c))){vk(f,k,n,u);break e}E&&E(e,p,c),e==="focusout"&&c&&p.type==="number"&&c.memoizedProps.value!=null&&Bg(p,"number",p.value)}switch(E=c?Wc(c):window,e){case"focusin":(BT(E)||E.contentEditable==="true")&&(pl=E,zg=c,iu=null);break;case"focusout":iu=zg=pl=null;break;case"mousedown":Hg=!0;break;case"contextmenu":case"mouseup":case"dragend":Hg=!1,VT(f,n,u);break;case"selectionchange":if(uL)break;case"keydown":case"keyup":VT(f,n,u)}var C;if(Dy)e:{switch(e){case"compositionstart":var L="onCompositionStart";break e;case"compositionend":L="onCompositionEnd";break e;case"compositionupdate":L="onCompositionUpdate";break e}L=void 0}else fl?yk(e,n)&&(L="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(L="onCompositionStart");L&&(gk&&n.locale!=="ko"&&(fl||L!=="onCompositionStart"?L==="onCompositionEnd"&&fl&&(C=hk()):(Wa=u,Ny="value"in Wa?Wa.value:Wa.textContent,fl=!0)),E=Wf(c,L),0<E.length&&(L=new RT(L,e,null,n,u),f.push({event:L,listeners:E}),C?L.data=C:(C=bk(n),C!==null&&(L.data=C)))),(C=eL?tL(e,n):nL(e,n))&&(L=Wf(c,"onBeforeInput"),0<L.length&&(E=new RT("onBeforeInput","beforeinput",null,n,u),f.push({event:E,listeners:L}),E.data=C)),GL(f,e,c,n,u)}m0(f,t)})}function Eu(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wf(e,t){for(var n=t+"Capture",i=[];e!==null;){var o=e,a=o.stateNode;if(o=o.tag,o!==5&&o!==26&&o!==27||a===null||(o=hu(e,n),o!=null&&i.unshift(Eu(e,o,a)),o=hu(e,t),o!=null&&i.push(Eu(e,o,a))),e.tag===3)return i;e=e.return}return[]}function QL(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function CS(e,t,n,i,o){for(var a=t._reactName,r=[];n!==null&&n!==i;){var s=n,l=s.alternate,c=s.stateNode;if(s=s.tag,l!==null&&l===i)break;s!==5&&s!==26&&s!==27||c===null||(l=c,o?(c=hu(n,a),c!=null&&r.unshift(Eu(n,c,l))):o||(c=hu(n,a),c!=null&&r.push(Eu(n,c,l)))),n=n.return}r.length!==0&&e.push({event:t,listeners:r})}var XL=/\r\n?/g,JL=/\u0000|\uFFFD/g;function MS(e){return(typeof e=="string"?e:""+e).replace(XL,`
`).replace(JL,"")}function g0(e,t){return t=MS(t),MS(e)===t}function mt(e,t,n,i,o,a){switch(n){case"children":typeof i=="string"?t==="body"||t==="textarea"&&i===""||Al(e,i):(typeof i=="number"||typeof i=="bigint")&&t!=="body"&&Al(e,""+i);break;case"className":ef(e,"class",i);break;case"tabIndex":ef(e,"tabindex",i);break;case"dir":case"role":case"viewBox":case"width":case"height":ef(e,n,i);break;case"style":pk(e,i,a);break;case"data":if(t!=="object"){ef(e,"data",i);break}case"src":case"href":if(i===""&&(t!=="a"||n!=="href")){e.removeAttribute(n);break}if(i==null||typeof i=="function"||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=gf(""+i),e.setAttribute(n,i);break;case"action":case"formAction":if(typeof i=="function"){e.setAttribute(n,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof a=="function"&&(n==="formAction"?(t!=="input"&&mt(e,t,"name",o.name,o,null),mt(e,t,"formEncType",o.formEncType,o,null),mt(e,t,"formMethod",o.formMethod,o,null),mt(e,t,"formTarget",o.formTarget,o,null)):(mt(e,t,"encType",o.encType,o,null),mt(e,t,"method",o.method,o,null),mt(e,t,"target",o.target,o,null)));if(i==null||typeof i=="symbol"||typeof i=="boolean"){e.removeAttribute(n);break}i=gf(""+i),e.setAttribute(n,i);break;case"onClick":i!=null&&(e.onclick=ua);break;case"onScroll":i!=null&&je("scroll",e);break;case"onScrollEnd":i!=null&&je("scrollend",e);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(q(60));e.innerHTML=n}}break;case"multiple":e.multiple=i&&typeof i!="function"&&typeof i!="symbol";break;case"muted":e.muted=i&&typeof i!="function"&&typeof i!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(i==null||typeof i=="function"||typeof i=="boolean"||typeof i=="symbol"){e.removeAttribute("xlink:href");break}n=gf(""+i),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",n);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""+i):e.removeAttribute(n);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":i&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,""):e.removeAttribute(n);break;case"capture":case"download":i===!0?e.setAttribute(n,""):i!==!1&&i!=null&&typeof i!="function"&&typeof i!="symbol"?e.setAttribute(n,i):e.removeAttribute(n);break;case"cols":case"rows":case"size":case"span":i!=null&&typeof i!="function"&&typeof i!="symbol"&&!isNaN(i)&&1<=i?e.setAttribute(n,i):e.removeAttribute(n);break;case"rowSpan":case"start":i==null||typeof i=="function"||typeof i=="symbol"||isNaN(i)?e.removeAttribute(n):e.setAttribute(n,i);break;case"popover":je("beforetoggle",e),je("toggle",e),hf(e,"popover",i);break;case"xlinkActuate":na(e,"http://www.w3.org/1999/xlink","xlink:actuate",i);break;case"xlinkArcrole":na(e,"http://www.w3.org/1999/xlink","xlink:arcrole",i);break;case"xlinkRole":na(e,"http://www.w3.org/1999/xlink","xlink:role",i);break;case"xlinkShow":na(e,"http://www.w3.org/1999/xlink","xlink:show",i);break;case"xlinkTitle":na(e,"http://www.w3.org/1999/xlink","xlink:title",i);break;case"xlinkType":na(e,"http://www.w3.org/1999/xlink","xlink:type",i);break;case"xmlBase":na(e,"http://www.w3.org/XML/1998/namespace","xml:base",i);break;case"xmlLang":na(e,"http://www.w3.org/XML/1998/namespace","xml:lang",i);break;case"xmlSpace":na(e,"http://www.w3.org/XML/1998/namespace","xml:space",i);break;case"is":hf(e,"is",i);break;case"innerText":case"textContent":break;default:(!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(n=xD.get(n)||n,hf(e,n,i))}}function uy(e,t,n,i,o,a){switch(n){case"style":pk(e,i,a);break;case"dangerouslySetInnerHTML":if(i!=null){if(typeof i!="object"||!("__html"in i))throw Error(q(61));if(n=i.__html,n!=null){if(o.children!=null)throw Error(q(60));e.innerHTML=n}}break;case"children":typeof i=="string"?Al(e,i):(typeof i=="number"||typeof i=="bigint")&&Al(e,""+i);break;case"onScroll":i!=null&&je("scroll",e);break;case"onScrollEnd":i!=null&&je("scrollend",e);break;case"onClick":i!=null&&(e.onclick=ua);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!sk.hasOwnProperty(n))e:{if(n[0]==="o"&&n[1]==="n"&&(o=n.endsWith("Capture"),t=n.slice(2,o?n.length-7:void 0),a=e[ii]||null,a=a!=null?a[n]:null,typeof a=="function"&&e.removeEventListener(t,a,o),typeof i=="function")){typeof a!="function"&&a!==null&&(n in e?e[n]=null:e.hasAttribute(n)&&e.removeAttribute(n)),e.addEventListener(t,i,o);break e}n in e?e[n]=i:i===!0?e.setAttribute(n,""):hf(e,n,i)}}}function xn(e,t,n){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":je("error",e),je("load",e);var i=!1,o=!1,a;for(a in n)if(n.hasOwnProperty(a)){var r=n[a];if(r!=null)switch(a){case"src":i=!0;break;case"srcSet":o=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(q(137,t));default:mt(e,t,a,r,n,null)}}o&&mt(e,t,"srcSet",n.srcSet,n,null),i&&mt(e,t,"src",n.src,n,null);return;case"input":je("invalid",e);var s=a=r=o=null,l=null,c=null;for(i in n)if(n.hasOwnProperty(i)){var u=n[i];if(u!=null)switch(i){case"name":o=u;break;case"type":r=u;break;case"checked":l=u;break;case"defaultChecked":c=u;break;case"value":a=u;break;case"defaultValue":s=u;break;case"children":case"dangerouslySetInnerHTML":if(u!=null)throw Error(q(137,t));break;default:mt(e,t,i,u,n,null)}}uk(e,a,s,l,c,r,o,!1);return;case"select":je("invalid",e),i=r=a=null;for(o in n)if(n.hasOwnProperty(o)&&(s=n[o],s!=null))switch(o){case"value":a=s;break;case"defaultValue":r=s;break;case"multiple":i=s;default:mt(e,t,o,s,n,null)}t=a,n=r,e.multiple=!!i,t!=null?Tl(e,!!i,t,!1):n!=null&&Tl(e,!!i,n,!0);return;case"textarea":je("invalid",e),a=o=i=null;for(r in n)if(n.hasOwnProperty(r)&&(s=n[r],s!=null))switch(r){case"value":i=s;break;case"defaultValue":o=s;break;case"children":a=s;break;case"dangerouslySetInnerHTML":if(s!=null)throw Error(q(91));break;default:mt(e,t,r,s,n,null)}fk(e,i,o,a);return;case"option":for(l in n)if(n.hasOwnProperty(l)&&(i=n[l],i!=null))switch(l){case"selected":e.selected=i&&typeof i!="function"&&typeof i!="symbol";break;default:mt(e,t,l,i,n,null)}return;case"dialog":je("beforetoggle",e),je("toggle",e),je("cancel",e),je("close",e);break;case"iframe":case"object":je("load",e);break;case"video":case"audio":for(i=0;i<ku.length;i++)je(ku[i],e);break;case"image":je("error",e),je("load",e);break;case"details":je("toggle",e);break;case"embed":case"source":case"link":je("error",e),je("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(c in n)if(n.hasOwnProperty(c)&&(i=n[c],i!=null))switch(c){case"children":case"dangerouslySetInnerHTML":throw Error(q(137,t));default:mt(e,t,c,i,n,null)}return;default:if(My(t)){for(u in n)n.hasOwnProperty(u)&&(i=n[u],i!==void 0&&uy(e,t,u,i,n,void 0));return}}for(s in n)n.hasOwnProperty(s)&&(i=n[s],i!=null&&mt(e,t,s,i,n,null))}function WL(e,t,n,i){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var o=null,a=null,r=null,s=null,l=null,c=null,u=null;for(d in n){var f=n[d];if(n.hasOwnProperty(d)&&f!=null)switch(d){case"checked":break;case"value":break;case"defaultValue":l=f;default:i.hasOwnProperty(d)||mt(e,t,d,null,i,f)}}for(var p in i){var d=i[p];if(f=n[p],i.hasOwnProperty(p)&&(d!=null||f!=null))switch(p){case"type":a=d;break;case"name":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":r=d;break;case"defaultValue":s=d;break;case"children":case"dangerouslySetInnerHTML":if(d!=null)throw Error(q(137,t));break;default:d!==f&&mt(e,t,p,d,i,f)}}_g(e,r,s,l,c,u,a,o);return;case"select":d=r=s=p=null;for(a in n)if(l=n[a],n.hasOwnProperty(a)&&l!=null)switch(a){case"value":break;case"multiple":d=l;default:i.hasOwnProperty(a)||mt(e,t,a,null,i,l)}for(o in i)if(a=i[o],l=n[o],i.hasOwnProperty(o)&&(a!=null||l!=null))switch(o){case"value":p=a;break;case"defaultValue":s=a;break;case"multiple":r=a;default:a!==l&&mt(e,t,o,a,i,l)}t=s,n=r,i=d,p!=null?Tl(e,!!n,p,!1):!!i!=!!n&&(t!=null?Tl(e,!!n,t,!0):Tl(e,!!n,n?[]:"",!1));return;case"textarea":d=p=null;for(s in n)if(o=n[s],n.hasOwnProperty(s)&&o!=null&&!i.hasOwnProperty(s))switch(s){case"value":break;case"children":break;default:mt(e,t,s,null,i,o)}for(r in i)if(o=i[r],a=n[r],i.hasOwnProperty(r)&&(o!=null||a!=null))switch(r){case"value":p=o;break;case"defaultValue":d=o;break;case"children":break;case"dangerouslySetInnerHTML":if(o!=null)throw Error(q(91));break;default:o!==a&&mt(e,t,r,o,i,a)}dk(e,p,d);return;case"option":for(var h in n)if(p=n[h],n.hasOwnProperty(h)&&p!=null&&!i.hasOwnProperty(h))switch(h){case"selected":e.selected=!1;break;default:mt(e,t,h,null,i,p)}for(l in i)if(p=i[l],d=n[l],i.hasOwnProperty(l)&&p!==d&&(p!=null||d!=null))switch(l){case"selected":e.selected=p&&typeof p!="function"&&typeof p!="symbol";break;default:mt(e,t,l,p,i,d)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var m in n)p=n[m],n.hasOwnProperty(m)&&p!=null&&!i.hasOwnProperty(m)&&mt(e,t,m,null,i,p);for(c in i)if(p=i[c],d=n[c],i.hasOwnProperty(c)&&p!==d&&(p!=null||d!=null))switch(c){case"children":case"dangerouslySetInnerHTML":if(p!=null)throw Error(q(137,t));break;default:mt(e,t,c,p,i,d)}return;default:if(My(t)){for(var b in n)p=n[b],n.hasOwnProperty(b)&&p!==void 0&&!i.hasOwnProperty(b)&&uy(e,t,b,void 0,i,p);for(u in i)p=i[u],d=n[u],!i.hasOwnProperty(u)||p===d||p===void 0&&d===void 0||uy(e,t,u,p,i,d);return}}for(var y in n)p=n[y],n.hasOwnProperty(y)&&p!=null&&!i.hasOwnProperty(y)&&mt(e,t,y,null,i,p);for(f in i)p=i[f],d=n[f],!i.hasOwnProperty(f)||p===d||p==null&&d==null||mt(e,t,f,p,i,d)}function xS(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function ZL(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,n=performance.getEntriesByType("resource"),i=0;i<n.length;i++){var o=n[i],a=o.transferSize,r=o.initiatorType,s=o.duration;if(a&&s&&xS(r)){for(r=0,s=o.responseEnd,i+=1;i<n.length;i++){var l=n[i],c=l.startTime;if(c>s)break;var u=l.transferSize,f=l.initiatorType;u&&xS(f)&&(l=l.responseEnd,r+=u*(l<s?1:(s-c)/(l-c)))}if(--i,t+=8*(a+r)/(o.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var dy=null,fy=null;function Zf(e){return e.nodeType===9?e:e.ownerDocument}function NS(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function y0(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function py(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var kg=null;function eR(){var e=window.event;return e&&e.type==="popstate"?e===kg?!1:(kg=e,!0):(kg=null,!1)}var b0=typeof setTimeout=="function"?setTimeout:void 0,tR=typeof clearTimeout=="function"?clearTimeout:void 0,AS=typeof Promise=="function"?Promise:void 0,nR=typeof queueMicrotask=="function"?queueMicrotask:typeof AS!="undefined"?function(e){return AS.resolve(null).then(e).catch(iR)}:b0;function iR(e){setTimeout(function(){throw e})}function gr(e){return e==="head"}function DS(e,t){var n=t,i=0;do{var o=n.nextSibling;if(e.removeChild(n),o&&o.nodeType===8)if(n=o.data,n==="/$"||n==="/&"){if(i===0){e.removeChild(o),Il(t);return}i--}else if(n==="$"||n==="$?"||n==="$~"||n==="$!"||n==="&")i++;else if(n==="html")pu(e.ownerDocument.documentElement);else if(n==="head"){n=e.ownerDocument.head,pu(n);for(var a=n.firstChild;a;){var r=a.nextSibling,s=a.nodeName;a[Ru]||s==="SCRIPT"||s==="STYLE"||s==="LINK"&&a.rel.toLowerCase()==="stylesheet"||n.removeChild(a),a=r}}else n==="body"&&pu(e.ownerDocument.body);n=o}while(n);Il(t)}function LS(e,t){var n=e;e=0;do{var i=n.nextSibling;if(n.nodeType===1?t?(n._stashedDisplay=n.style.display,n.style.display="none"):(n.style.display=n._stashedDisplay||"",n.getAttribute("style")===""&&n.removeAttribute("style")):n.nodeType===3&&(t?(n._stashedText=n.nodeValue,n.nodeValue=""):n.nodeValue=n._stashedText||""),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(e===0)break;e--}else n!=="$"&&n!=="$?"&&n!=="$~"&&n!=="$!"||e++;n=i}while(n)}function my(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var n=t;switch(t=t.nextSibling,n.nodeName){case"HTML":case"HEAD":case"BODY":my(n),Cy(n);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(n.rel.toLowerCase()==="stylesheet")continue}e.removeChild(n)}}function oR(e,t,n,i){for(;e.nodeType===1;){var o=n;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!i&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(i){if(!e[Ru])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(a=e.getAttribute("rel"),a==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(a!==o.rel||e.getAttribute("href")!==(o.href==null||o.href===""?null:o.href)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin)||e.getAttribute("title")!==(o.title==null?null:o.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(a=e.getAttribute("src"),(a!==(o.src==null?null:o.src)||e.getAttribute("type")!==(o.type==null?null:o.type)||e.getAttribute("crossorigin")!==(o.crossOrigin==null?null:o.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var a=o.name==null?null:""+o.name;if(o.type==="hidden"&&e.getAttribute("name")===a)return e}else return e;if(e=$i(e.nextSibling),e===null)break}return null}function aR(e,t,n){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=$i(e.nextSibling),e===null))return null;return e}function v0(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=$i(e.nextSibling),e===null))return null;return e}function hy(e){return e.data==="$?"||e.data==="$~"}function gy(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function rR(e,t){var n=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||n.readyState!=="loading")t();else{var i=function(){t(),n.removeEventListener("DOMContentLoaded",i)};n.addEventListener("DOMContentLoaded",i),e._reactRetry=i}}function $i(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var yy=null;function RS(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"||n==="/&"){if(t===0)return $i(e.nextSibling);t--}else n!=="$"&&n!=="$!"&&n!=="$?"&&n!=="$~"&&n!=="&"||t++}e=e.nextSibling}return null}function OS(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"){if(t===0)return e;t--}else n!=="/$"&&n!=="/&"||t++}e=e.previousSibling}return null}function w0(e,t,n){switch(t=Zf(n),e){case"html":if(e=t.documentElement,!e)throw Error(q(452));return e;case"head":if(e=t.head,!e)throw Error(q(453));return e;case"body":if(e=t.body,!e)throw Error(q(454));return e;default:throw Error(q(451))}}function pu(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Cy(e)}var ji=new Map,FS=new Set;function ep(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var wa=ct.d;ct.d={f:sR,r:lR,D:cR,C:uR,L:dR,m:fR,X:mR,S:pR,M:hR};function sR(){var e=wa.f(),t=yp();return e||t}function lR(e){var t=zl(e);t!==null&&t.tag===5&&t.type==="form"?pE(t):wa.r(e)}var $l=typeof document=="undefined"?null:document;function T0(e,t,n){var i=$l;if(i&&typeof t=="string"&&t){var o=zi(t);o='link[rel="'+e+'"][href="'+o+'"]',typeof n=="string"&&(o+='[crossorigin="'+n+'"]'),FS.has(o)||(FS.add(o),e={rel:e,crossOrigin:n,href:t},i.querySelector(o)===null&&(t=i.createElement("link"),xn(t,"link",e),yn(t),i.head.appendChild(t)))}}function cR(e){wa.D(e),T0("dns-prefetch",e,null)}function uR(e,t){wa.C(e,t),T0("preconnect",e,t)}function dR(e,t,n){wa.L(e,t,n);var i=$l;if(i&&e&&t){var o='link[rel="preload"][as="'+zi(t)+'"]';t==="image"&&n&&n.imageSrcSet?(o+='[imagesrcset="'+zi(n.imageSrcSet)+'"]',typeof n.imageSizes=="string"&&(o+='[imagesizes="'+zi(n.imageSizes)+'"]')):o+='[href="'+zi(e)+'"]';var a=o;switch(t){case"style":a=Bl(e);break;case"script":a=jl(e)}ji.has(a)||(e=Ct({rel:"preload",href:t==="image"&&n&&n.imageSrcSet?void 0:e,as:t},n),ji.set(a,e),i.querySelector(o)!==null||t==="style"&&i.querySelector(Pu(a))||t==="script"&&i.querySelector(zu(a))||(t=i.createElement("link"),xn(t,"link",e),yn(t),i.head.appendChild(t)))}}function fR(e,t){wa.m(e,t);var n=$l;if(n&&e){var i=t&&typeof t.as=="string"?t.as:"script",o='link[rel="modulepreload"][as="'+zi(i)+'"][href="'+zi(e)+'"]',a=o;switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=jl(e)}if(!ji.has(a)&&(e=Ct({rel:"modulepreload",href:e},t),ji.set(a,e),n.querySelector(o)===null)){switch(i){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(n.querySelector(zu(a)))return}i=n.createElement("link"),xn(i,"link",e),yn(i),n.head.appendChild(i)}}}function pR(e,t,n){wa.S(e,t,n);var i=$l;if(i&&e){var o=wl(i).hoistableStyles,a=Bl(e);t=t||"default";var r=o.get(a);if(!r){var s={loading:0,preload:null};if(r=i.querySelector(Pu(a)))s.loading=5;else{e=Ct({rel:"stylesheet",href:e,"data-precedence":t},n),(n=ji.get(a))&&ub(e,n);var l=r=i.createElement("link");yn(l),xn(l,"link",e),l._p=new Promise(function(c,u){l.onload=c,l.onerror=u}),l.addEventListener("load",function(){s.loading|=1}),l.addEventListener("error",function(){s.loading|=2}),s.loading|=4,Mf(r,t,i)}r={type:"stylesheet",instance:r,count:1,state:s},o.set(a,r)}}}function mR(e,t){wa.X(e,t);var n=$l;if(n&&e){var i=wl(n).hoistableScripts,o=jl(e),a=i.get(o);a||(a=n.querySelector(zu(o)),a||(e=Ct({src:e,async:!0},t),(t=ji.get(o))&&db(e,t),a=n.createElement("script"),yn(a),xn(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(o,a))}}function hR(e,t){wa.M(e,t);var n=$l;if(n&&e){var i=wl(n).hoistableScripts,o=jl(e),a=i.get(o);a||(a=n.querySelector(zu(o)),a||(e=Ct({src:e,async:!0,type:"module"},t),(t=ji.get(o))&&db(e,t),a=n.createElement("script"),yn(a),xn(a,"link",e),n.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},i.set(o,a))}}function _S(e,t,n,i){var o=(o=nr.current)?ep(o):null;if(!o)throw Error(q(446));switch(e){case"meta":case"title":return null;case"style":return typeof n.precedence=="string"&&typeof n.href=="string"?(t=Bl(n.href),n=wl(o).hoistableStyles,i=n.get(t),i||(i={type:"style",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};case"link":if(n.rel==="stylesheet"&&typeof n.href=="string"&&typeof n.precedence=="string"){e=Bl(n.href);var a=wl(o).hoistableStyles,r=a.get(e);if(r||(o=o.ownerDocument||o,r={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},a.set(e,r),(a=o.querySelector(Pu(e)))&&!a._p&&(r.instance=a,r.state.loading=5),ji.has(e)||(n={rel:"preload",as:"style",href:n.href,crossOrigin:n.crossOrigin,integrity:n.integrity,media:n.media,hrefLang:n.hrefLang,referrerPolicy:n.referrerPolicy},ji.set(e,n),a||gR(o,e,n,r.state))),t&&i===null)throw Error(q(528,""));return r}if(t&&i!==null)throw Error(q(529,""));return null;case"script":return t=n.async,n=n.src,typeof n=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=jl(n),n=wl(o).hoistableScripts,i=n.get(t),i||(i={type:"script",instance:null,count:0,state:null},n.set(t,i)),i):{type:"void",instance:null,count:0,state:null};default:throw Error(q(444,e))}}function Bl(e){return'href="'+zi(e)+'"'}function Pu(e){return'link[rel="stylesheet"]['+e+"]"}function S0(e){return Ct({},e,{"data-precedence":e.precedence,precedence:null})}function gR(e,t,n,i){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?i.loading=1:(t=e.createElement("link"),i.preload=t,t.addEventListener("load",function(){return i.loading|=1}),t.addEventListener("error",function(){return i.loading|=2}),xn(t,"link",n),yn(t),e.head.appendChild(t))}function jl(e){return'[src="'+zi(e)+'"]'}function zu(e){return"script[async]"+e}function BS(e,t,n){if(t.count++,t.instance===null)switch(t.type){case"style":var i=e.querySelector('style[data-href~="'+zi(n.href)+'"]');if(i)return t.instance=i,yn(i),i;var o=Ct({},n,{"data-href":n.href,"data-precedence":n.precedence,href:null,precedence:null});return i=(e.ownerDocument||e).createElement("style"),yn(i),xn(i,"style",o),Mf(i,n.precedence,e),t.instance=i;case"stylesheet":o=Bl(n.href);var a=e.querySelector(Pu(o));if(a)return t.state.loading|=4,t.instance=a,yn(a),a;i=S0(n),(o=ji.get(o))&&ub(i,o),a=(e.ownerDocument||e).createElement("link"),yn(a);var r=a;return r._p=new Promise(function(s,l){r.onload=s,r.onerror=l}),xn(a,"link",i),t.state.loading|=4,Mf(a,n.precedence,e),t.instance=a;case"script":return a=jl(n.src),(o=e.querySelector(zu(a)))?(t.instance=o,yn(o),o):(i=n,(o=ji.get(a))&&(i=Ct({},n),db(i,o)),e=e.ownerDocument||e,o=e.createElement("script"),yn(o),xn(o,"link",i),e.head.appendChild(o),t.instance=o);case"void":return null;default:throw Error(q(443,t.type))}else t.type==="stylesheet"&&!(t.state.loading&4)&&(i=t.instance,t.state.loading|=4,Mf(i,n.precedence,e));return t.instance}function Mf(e,t,n){for(var i=n.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),o=i.length?i[i.length-1]:null,a=o,r=0;r<i.length;r++){var s=i[r];if(s.dataset.precedence===t)a=s;else if(a!==o)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=n.nodeType===9?n.head:n,t.insertBefore(e,t.firstChild))}function ub(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function db(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var xf=null;function IS(e,t,n){if(xf===null){var i=new Map,o=xf=new Map;o.set(n,i)}else o=xf,i=o.get(n),i||(i=new Map,o.set(n,i));if(i.has(e))return i;for(i.set(e,null),n=n.getElementsByTagName(e),o=0;o<n.length;o++){var a=n[o];if(!(a[Ru]||a[En]||e==="link"&&a.getAttribute("rel")==="stylesheet")&&a.namespaceURI!=="http://www.w3.org/2000/svg"){var r=a.getAttribute(t)||"";r=e+r;var s=i.get(r);s?s.push(a):i.set(r,[a])}}return i}function PS(e,t,n){e=e.ownerDocument||e,e.head.insertBefore(n,t==="title"?e.querySelector("head > title"):null)}function yR(e,t,n){if(n===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function k0(e){return!(e.type==="stylesheet"&&!(e.state.loading&3))}function bR(e,t,n,i){if(n.type==="stylesheet"&&(typeof i.media!="string"||matchMedia(i.media).matches!==!1)&&!(n.state.loading&4)){if(n.instance===null){var o=Bl(i.href),a=t.querySelector(Pu(o));if(a){t=a._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=tp.bind(e),t.then(e,e)),n.state.loading|=4,n.instance=a,yn(a);return}a=t.ownerDocument||t,i=S0(i),(o=ji.get(o))&&ub(i,o),a=a.createElement("link"),yn(a);var r=a;r._p=new Promise(function(s,l){r.onload=s,r.onerror=l}),xn(a,"link",i),n.instance=a}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(n,t),(t=n.state.preload)&&!(n.state.loading&3)&&(e.count++,n=tp.bind(e),t.addEventListener("load",n),t.addEventListener("error",n))}}var Eg=0;function vR(e,t){return e.stylesheets&&e.count===0&&Nf(e,e.stylesheets),0<e.count||0<e.imgCount?function(n){var i=setTimeout(function(){if(e.stylesheets&&Nf(e,e.stylesheets),e.unsuspend){var a=e.unsuspend;e.unsuspend=null,a()}},6e4+t);0<e.imgBytes&&Eg===0&&(Eg=62500*ZL());var o=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Nf(e,e.stylesheets),e.unsuspend)){var a=e.unsuspend;e.unsuspend=null,a()}},(e.imgBytes>Eg?50:800)+t);return e.unsuspend=n,function(){e.unsuspend=null,clearTimeout(i),clearTimeout(o)}}:null}function tp(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Nf(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var np=null;function Nf(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,np=new Map,t.forEach(wR,e),np=null,tp.call(e))}function wR(e,t){if(!(t.state.loading&4)){var n=np.get(e);if(n)var i=n.get(null);else{n=new Map,np.set(e,n);for(var o=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<o.length;a++){var r=o[a];(r.nodeName==="LINK"||r.getAttribute("media")!=="not all")&&(n.set(r.dataset.precedence,r),i=r)}i&&n.set(null,i)}o=t.instance,r=o.getAttribute("data-precedence"),a=n.get(r)||i,a===i&&n.set(null,o),n.set(r,o),this.count++,i=tp.bind(this),o.addEventListener("load",i),o.addEventListener("error",i),a?a.parentNode.insertBefore(o,a.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(o,e.firstChild)),t.state.loading|=4}}var Cu={$$typeof:ca,Provider:null,Consumer:null,_currentValue:is,_currentValue2:is,_threadCount:0};function TR(e,t,n,i,o,a,r,s,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Xh(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xh(0),this.hiddenUpdates=Xh(null),this.identifierPrefix=i,this.onUncaughtError=o,this.onCaughtError=a,this.onRecoverableError=r,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function E0(e,t,n,i,o,a,r,s,l,c,u,f){return e=new TR(e,t,n,r,l,c,u,f,s),t=1,a===!0&&(t|=24),a=bi(3,null,null,t),e.current=a,a.stateNode=e,t=Iy(),t.refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:i,isDehydrated:n,cache:t},Hy(a),e}function C0(e){return e?(e=gl,e):gl}function M0(e,t,n,i,o,a){o=C0(o),i.context===null?i.context=o:i.pendingContext=o,i=or(t),i.payload={element:n},a=a===void 0?null:a,a!==null&&(i.callback=a),n=ar(e,i,t),n!==null&&(ni(n,e,t),au(n,e,t))}function zS(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function fb(e,t){zS(e,t),(e=e.alternate)&&zS(e,t)}function x0(e){if(e.tag===13||e.tag===31){var t=gs(e,67108864);t!==null&&ni(t,e,67108864),fb(e,67108864)}}function HS(e){if(e.tag===13||e.tag===31){var t=ki();t=ky(t);var n=gs(e,t);n!==null&&ni(n,e,t),fb(e,t)}}var ip=!0;function SR(e,t,n,i){var o=Ae.T;Ae.T=null;var a=ct.p;try{ct.p=2,pb(e,t,n,i)}finally{ct.p=a,Ae.T=o}}function kR(e,t,n,i){var o=Ae.T;Ae.T=null;var a=ct.p;try{ct.p=8,pb(e,t,n,i)}finally{ct.p=a,Ae.T=o}}function pb(e,t,n,i){if(ip){var o=by(i);if(o===null)Sg(e,t,i,op,n),VS(e,i);else if(CR(o,e,t,n,i))i.stopPropagation();else if(VS(e,i),t&4&&-1<ER.indexOf(e)){for(;o!==null;){var a=zl(o);if(a!==null)switch(a.tag){case 3:if(a=a.stateNode,a.current.memoizedState.isDehydrated){var r=es(a.pendingLanes);if(r!==0){var s=a;for(s.pendingLanes|=2,s.entangledLanes|=2;r;){var l=1<<31-Si(r);s.entanglements[1]|=l,r&=~l}Oo(a),!(lt&6)&&(Gf=wi()+500,Iu(0,!1))}}break;case 31:case 13:s=gs(a,2),s!==null&&ni(s,a,2),yp(),fb(a,2)}if(a=by(i),a===null&&Sg(e,t,i,op,n),a===o)break;o=a}o!==null&&i.stopPropagation()}else Sg(e,t,i,null,n)}}function by(e){return e=xy(e),mb(e)}var op=null;function mb(e){if(op=null,e=ul(e),e!==null){var t=Nu(e);if(t===null)e=null;else{var n=t.tag;if(n===13){if(e=GS(t),e!==null)return e;e=null}else if(n===31){if(e=KS(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return op=e,null}function N0(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(dD()){case WS:return 2;case ZS:return 8;case Of:case fD:return 32;case ek:return 268435456;default:return 32}default:return 32}}var vy=!1,lr=null,cr=null,ur=null,Mu=new Map,xu=new Map,Xa=[],ER="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function VS(e,t){switch(e){case"focusin":case"focusout":lr=null;break;case"dragenter":case"dragleave":cr=null;break;case"mouseover":case"mouseout":ur=null;break;case"pointerover":case"pointerout":Mu.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":xu.delete(t.pointerId)}}function Kc(e,t,n,i,o,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:i,nativeEvent:a,targetContainers:[o]},t!==null&&(t=zl(t),t!==null&&x0(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,o!==null&&t.indexOf(o)===-1&&t.push(o),e)}function CR(e,t,n,i,o){switch(t){case"focusin":return lr=Kc(lr,e,t,n,i,o),!0;case"dragenter":return cr=Kc(cr,e,t,n,i,o),!0;case"mouseover":return ur=Kc(ur,e,t,n,i,o),!0;case"pointerover":var a=o.pointerId;return Mu.set(a,Kc(Mu.get(a)||null,e,t,n,i,o)),!0;case"gotpointercapture":return a=o.pointerId,xu.set(a,Kc(xu.get(a)||null,e,t,n,i,o)),!0}return!1}function A0(e){var t=ul(e.target);if(t!==null){var n=Nu(t);if(n!==null){if(t=n.tag,t===13){if(t=GS(n),t!==null){e.blockedOn=t,ET(e.priority,function(){HS(n)});return}}else if(t===31){if(t=KS(n),t!==null){e.blockedOn=t,ET(e.priority,function(){HS(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Af(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=by(e.nativeEvent);if(n===null){n=e.nativeEvent;var i=new n.constructor(n.type,n);Ig=i,n.target.dispatchEvent(i),Ig=null}else return t=zl(n),t!==null&&x0(t),e.blockedOn=n,!1;t.shift()}return!0}function US(e,t,n){Af(e)&&n.delete(t)}function MR(){vy=!1,lr!==null&&Af(lr)&&(lr=null),cr!==null&&Af(cr)&&(cr=null),ur!==null&&Af(ur)&&(ur=null),Mu.forEach(US),xu.forEach(US)}function pf(e,t){e.blockedOn===t&&(e.blockedOn=null,vy||(vy=!0,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,MR)))}var mf=null;function $S(e){mf!==e&&(mf=e,ln.unstable_scheduleCallback(ln.unstable_NormalPriority,function(){mf===e&&(mf=null);for(var t=0;t<e.length;t+=3){var n=e[t],i=e[t+1],o=e[t+2];if(typeof i!="function"){if(mb(i||n)===null)continue;break}var a=zl(n);a!==null&&(e.splice(t,3),t-=3,Zg(a,{pending:!0,data:o,method:n.method,action:i},i,o))}}))}function Il(e){function t(l){return pf(l,e)}lr!==null&&pf(lr,e),cr!==null&&pf(cr,e),ur!==null&&pf(ur,e),Mu.forEach(t),xu.forEach(t);for(var n=0;n<Xa.length;n++){var i=Xa[n];i.blockedOn===e&&(i.blockedOn=null)}for(;0<Xa.length&&(n=Xa[0],n.blockedOn===null);)A0(n),n.blockedOn===null&&Xa.shift();if(n=(e.ownerDocument||e).$$reactFormReplay,n!=null)for(i=0;i<n.length;i+=3){var o=n[i],a=n[i+1],r=o[ii]||null;if(typeof a=="function")r||$S(n);else if(r){var s=null;if(a&&a.hasAttribute("formAction")){if(o=a,r=a[ii]||null)s=r.formAction;else if(mb(o)!==null)continue}else s=r.action;typeof s=="function"?n[i+1]=s:(n.splice(i,3),i-=3),$S(n)}}}function D0(){function e(a){a.canIntercept&&a.info==="react-transition"&&a.intercept({handler:function(){return new Promise(function(r){return o=r})},focusReset:"manual",scroll:"manual"})}function t(){o!==null&&(o(),o=null),i||setTimeout(n,20)}function n(){if(!i&&!navigation.transition){var a=navigation.currentEntry;a&&a.url!=null&&navigation.navigate(a.url,{state:a.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var i=!1,o=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(n,100),function(){i=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),o!==null&&(o(),o=null)}}}function hb(e){this._internalRoot=e}wp.prototype.render=hb.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(q(409));var n=t.current,i=ki();M0(n,i,e,t,null,null)};wp.prototype.unmount=hb.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;M0(e.current,2,null,e,null,null),yp(),t[Pl]=null}};function wp(e){this._internalRoot=e}wp.prototype.unstable_scheduleHydration=function(e){if(e){var t=ak();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Xa.length&&t!==0&&t<Xa[n].priority;n++);Xa.splice(n,0,e),n===0&&A0(e)}};var jS=YS.version;if(jS!=="19.2.0")throw Error(q(527,jS,"19.2.0"));ct.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(q(188)):(e=Object.keys(e).join(","),Error(q(268,e)));return e=oD(t),e=e!==null?QS(e):null,e=e===null?null:e.stateNode,e};var xR={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Ae,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__!="undefined"&&(Qc=__REACT_DEVTOOLS_GLOBAL_HOOK__,!Qc.isDisabled&&Qc.supportsFiber))try{Au=Qc.inject(xR),Ti=Qc}catch(e){}var Qc;Tp.createRoot=function(e,t){if(!qS(e))throw Error(q(299));var n=!1,i="",o=TE,a=SE,r=kE;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onUncaughtError!==void 0&&(o=t.onUncaughtError),t.onCaughtError!==void 0&&(a=t.onCaughtError),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=E0(e,1,!1,null,null,n,i,null,o,a,r,D0),e[Pl]=t.current,cb(e),new hb(t)};Tp.hydrateRoot=function(e,t,n){if(!qS(e))throw Error(q(299));var i=!1,o="",a=TE,r=SE,s=kE,l=null;return n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onUncaughtError!==void 0&&(a=n.onUncaughtError),n.onCaughtError!==void 0&&(r=n.onCaughtError),n.onRecoverableError!==void 0&&(s=n.onRecoverableError),n.formState!==void 0&&(l=n.formState)),t=E0(e,1,!0,t,n!=null?n:null,i,o,l,a,r,s,D0),t.context=C0(null),n=t.current,i=ki(),i=ky(i),o=or(i),o.callback=null,ar(n,o,i),n=i,t.current.lanes=n,Lu(t,n),Oo(t),e[Pl]=t.current,cb(e),new wp(t)};Tp.version="19.2.0"});var Fo=Mo((gP,O0)=>{"use strict";function R0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(R0)}catch(e){console.error(e)}}R0(),O0.exports=L0()});var _0=Mo(Sp=>{"use strict";var NR=Symbol.for("react.transitional.element"),AR=Symbol.for("react.fragment");function F0(e,t,n){var i=null;if(n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),"key"in t){n={};for(var o in t)o!=="key"&&(n[o]=t[o])}else n=t;return t=n.ref,{$$typeof:NR,type:e,key:i,ref:t!==void 0?t:null,props:n}}Sp.Fragment=AR;Sp.jsx=F0;Sp.jsxs=F0});var P=Mo((bP,B0)=>{"use strict";B0.exports=_0()});var sP={};Ah(sP,{default:()=>Nh});module.exports=B1(sP);var ut=require("obsidian");var lM=require("obsidian"),cM=O(Fo());var I0=O(fe()),gb=O(P()),yb=(0,I0.createContext)(void 0),Fn=({app:e,children:t})=>(0,gb.jsx)(yb.Provider,{value:e,children:(0,gb.jsx)("div",{className:"mondo",children:t})});var P0=O(P()),Mt=({variant:e="body",className:t,children:n,style:i,as:o="div"})=>{let r={h1:{className:"inline-title"},heading:{className:"setting-item-name",style:{fontSize:"1rem",fontWeight:600}},subtitle:{className:"setting-item-description",style:{color:"var(--text-muted)"}},body:{style:{color:"var(--text-normal)"}},muted:{style:{color:"var(--text-muted)"}},code:{className:"cm-inline",style:{fontFamily:"var(--font-mono)",background:"var(--background-primary)"}}}[e];return(0,P0.jsx)(o,{className:[r.className,t].filter(Boolean).join(" "),style:{...r.style,...i},children:n})},bb=Mt;var z0=O(fe());var pe=()=>{let e=(0,z0.useContext)(yb);if(!e)throw new Error("useApp must be used within <AppProvider>");return e};var kp=O(fe());function Zt(e,t){let n=pe(),[i,o]=(0,kp.useState)(t);return(0,kp.useEffect)(()=>{let a=()=>{var p,d,h;let l=(d=(p=n==null?void 0:n.plugins)==null?void 0:p.getPlugin)==null?void 0:d.call(p,"mondo"),c=(h=l==null?void 0:l.settings)!=null?h:{},u=e?e.split("."):[],f=c;for(let m of u){if(f==null){f=void 0;break}f=f[m]}o(f===void 0?t:f)};a();let r=n.metadataCache.on("changed",a),s=()=>a();try{window.addEventListener("mondo:settings-updated",s)}catch(l){}return()=>{n.metadataCache.offref(r);try{window.removeEventListener("mondo:settings-updated",s)}catch(l){}}},[n,e,t]),i}var vr=O(fe());var wb=O(fe());var Ep=O(fe()),H0=require("obsidian"),V0=O(P()),Ze=({name:e,className:t})=>{let n=(0,Ep.useRef)(null);(0,Ep.useEffect)(()=>{if(!n.current)return;typeof e=="string"&&e.trim().length>0?(0,H0.setIcon)(n.current,e):n.current.innerHTML=""},[e]);let i=["inline-flex items-center justify-center w-5 h-5",t!=null?t:"mr-2"].filter(Boolean).join(" ");return(0,V0.jsx)("span",{ref:n,className:i,"aria-hidden":!0})};var Cp=O(fe());var U0=O(P()),vb=(e,t,n)=>{let i=pe();(0,Cp.useEffect)(()=>{let o=e.current;if(!o)return;let a=async s=>{let l=s;if(!(n!=null&&n.disabled)){s.preventDefault();try{let c=l.metaKey||l.ctrlKey,u=t;if(c)try{await i.workspace.openLinkText(u,"","split");return}catch(d){let h=i.workspace.getLeaf(!0);h&&await h.openFile(i.vault.getAbstractFileByPath(u));return}let f=i.workspace.getLeaf(!1)||i.workspace.getLeaf(!0),p=i.vault.getAbstractFileByPath(u);f&&p&&await f.openFile(p)}catch(c){console.error("useLink: failed to open file",c)}n!=null&&n.onClick&&n.onClick(l)}},r=s=>{n!=null&&n.disabled||(s.key==="Enter"||s.key===" ")&&(s.preventDefault(),a(s))};return o.classList.add("internal-link","cm-hmd-internal-link"),o.setAttribute("data-href",t),o.setAttribute("data-path",t),(n&&n.disabled||o.disabled)&&o.setAttribute("aria-disabled","true"),o.addEventListener("click",a),o.addEventListener("keydown",r),()=>{o.removeEventListener("click",a),o.removeEventListener("keydown",r),o.classList.remove("internal-link","cm-hmd-internal-link"),o.removeAttribute("data-href"),o.removeAttribute("data-path"),o.removeAttribute("aria-disabled")}},[e,t,i,n==null?void 0:n.disabled])},DR=({to:e,children:t,className:n,onClick:i,disabled:o})=>{let a=Cp.default.useRef(null);return vb(a,e,{onClick:i,disabled:o}),(0,U0.jsx)("span",{ref:a,className:n,style:{cursor:o?void 0:"pointer"},children:t})},bs=DR;var yr=O(P()),Ta=({icon:e,iconPosition:t="start",children:n,className:i,to:o,variant:a="button",fullWidth:r=!1,iconClassName:s,tone:l="default",pressed:c,...u})=>{var E;let f=t==="start",p=e?(0,yr.jsx)(Ze,{name:e,className:s}):null,d=(0,yr.jsxs)(yr.Fragment,{children:[f&&p,n,!f&&p]}),h=a==="link",m=(()=>{switch(l){case"info":return"var(--interactive-accent)";case"success":return"var(--color-green, #2f9e44)";case"danger":return"var(--color-red, #d94848)";case"warning":return"var(--color-orange, #d97706)";default:return}})(),b=c===!0,y=h?["mondo-button-link",r?"flex":"inline-flex",l==="default"?"items-center gap-1 bg-transparent border-0 p-0 m-0 text-left text-[var(--text-normal)] hover:text-[var(--interactive-accent)]":"items-center gap-1 bg-transparent border-0 p-0 m-0 text-left text-current hover:text-current"]:["mondo-button"];r&&y.push("w-full");let g=[...y,i,b?"mondo-button--pressed":null].filter(Boolean).join(" "),v=typeof c=="boolean"?{"aria-pressed":c,"data-pressed":c?"true":"false"}:{},w=u.style||{},T=(E=w.color)!=null?E:h?m:void 0,k=h?{cursor:u.disabled?void 0:"var(--cursor-link, pointer)",textDecorationLine:"var(--link-decoration, underline)",textDecorationThickness:"var(--link-decoration-thickness, 1px)",background:"transparent",boxShadow:"none",...w,...T?{color:T}:{}}:w;if(o){let C={...u},L=C.onClick,F=C.disabled,N=C.title,_=C["aria-label"];delete C.onClick,delete C.disabled,delete C.title,delete C["aria-label"];let A=wb.default.useRef(null);vb(A,o,{onClick:M=>L&&L(M),disabled:F});let[,x]=wb.default.useState(!1),S=h?{...k,...l!=="default"?{color:k==null?void 0:k.color}:{},border:"none",outline:"none"}:{cursor:F?void 0:"pointer"};return(0,yr.jsx)("button",{ref:A,className:g,title:N,"aria-label":_,disabled:F,role:h?"link":"button",style:S,onMouseEnter:()=>x(!0),onMouseLeave:()=>x(!1),...C,...v,children:d})}return(0,yr.jsx)("button",{className:g,style:k,...u,...v,children:d})},Me=Ta;var Sb=require("obsidian");var Mp={entities:{}};var _e={name:"Facts",icon:"bookmark",template:`
date: {{date}}
---
`,list:{columns:["date","show"],sort:{column:"date",direction:"desc"}},links:[{type:"backlinks",key:"link",config:{title:"Links",icon:"layers",find:{query:[{steps:[{notIn:{property:"linksTo",type:[]}}]}]},sort:{strategy:"manual"},columns:[{type:"entityIcon"},{type:"show"},{type:"cover",align:"right"},{type:"date",align:"right"}],createEntity:{enabled:!1}}}]};var ce={name:"Logs",icon:"file-clock",template:`
date: {{date}}
---
`,list:{columns:["date","show"],sort:{column:"date",direction:"desc"}},links:[{type:"backlinks",key:"link",config:{title:"Links",icon:"layers",find:{query:[{steps:[{notIn:{property:"linksTo",type:[]}}]}]},sort:{strategy:"manual"},columns:[{type:"entityIcon"},{type:"show"},{type:"cover",align:"right"},{type:"date",align:"right"}],createEntity:{enabled:!1}}}]};var He={name:"Documents",icon:"file-text",template:`
date: {{date}}
file:
---
`,list:{columns:["show","category","file"]},links:[{type:"backlinks",key:"facts",config:{targetType:"fact",properties:["document"],title:"Facts",icon:"file-text",sort:{strategy:"manual"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["document"],title:"Logs",icon:"clipboard-list"}},{type:"backlinks",key:"documents",config:{targetType:"document",properties:["document"],title:"Documents",icon:"paperclip",sort:{strategy:"manual"}}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["document"],title:"Tasks",icon:"check-square",columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"}}}]};var _o={name:"Meetings",icon:"calendar-clock",template:`
date: {{date}}
participants: []
location: []
---
`,createRelated:[{key:"task",label:"Task",icon:"check-square",panelKey:"tasks",create:{attributes:{type:"task"}}},{key:"fact",label:"Fact",icon:"bookmark-plus",panelKey:"facts",create:{attributes:{type:"fact"}}},{key:"log",label:"Log",icon:"file-plus",panelKey:"logs",create:{attributes:{type:"log"}}}],list:{columns:["date_time","participants"],sort:{column:"date_time",direction:"desc"}},links:[{type:"backlinks",key:"facts",config:{targetType:"fact",properties:["meeting"],title:"Facts",icon:"file-text",sort:{strategy:"manual"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["meeting"],title:"Logs",icon:"clipboard-list"}},{type:"backlinks",key:"documents",config:{targetType:"document",properties:["meeting"],title:"Documents",icon:"paperclip",sort:{strategy:"manual"}}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["meeting"],title:"Tasks",icon:"check-square",columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"}}}]};var de={name:"Tasks",icon:"check-square",template:`
date: {{date}}
status: todo
---
`,list:{columns:["show","participants","status"]},createRelated:[{key:"subtask",label:"Sub-Task",icon:"check-square",create:{title:"Untitled Sub-Task for {@this.show}",attributes:{type:"task",task:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,panelKey:"facts",create:{title:"Untitled Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,panelKey:"logs",create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["task"],title:"Tasks",icon:"check-square",columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"subtask"}}},{type:"backlinks",key:"facts",config:{targetType:"fact",properties:["linksTo"],title:_e.name,icon:_e.icon,sort:{strategy:"manual"},createEntity:{referenceCreate:"fact"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"link",config:{title:"Links",icon:"layers",find:{query:[{steps:[{notIn:{property:"linksTo",type:["task","log","fact"]}}]}]},sort:{strategy:"manual"},columns:[{type:"entityIcon"},{type:"show"},{type:"cover",align:"right"},{type:"date",align:"right"}],createEntity:{enabled:!1}}}]};var gt={name:"Ideas",icon:"lightbulb",template:`
date: {{date}}
status: draft
---
`,list:{columns:["show","status"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this idea",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var Sa={name:"Projects",icon:"folder-git-2",template:`
date: {{date}}
company: []
team: []
participants: []
status: draft
---
`,createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",project:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",project:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",project:["{@this}"]}}},{key:"meeting",label:"Meeting",icon:_o.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} with {@this.show}",attributes:{type:"meeting",project:["{@this}"],participants:["{@this.participants}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",project:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",project:["{@this}"]}}}],list:{columns:["show"]},links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["project"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"facts",config:{targetType:"fact",properties:["project"],title:_e.name,icon:_e.icon,sort:{strategy:"manual"},createEntity:{referenceCreate:"fact"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["project"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"documents",config:{targetType:"document",properties:["project"],title:He.name,icon:He.icon,sort:{strategy:"manual"},createEntity:{referenceCreate:"document"}}},{type:"backlinks",key:"meetings",config:{title:_o.name,icon:_o.icon,targetType:"meeting",properties:["project"],filter:{any:[{"participants.length":{eq:0}},{"participants.length":{gt:1}}]},sort:{strategy:"column",column:"date",direction:"desc"},columns:[{type:"show"},{type:"attribute",key:"participants"},{type:"date",align:"right"}],createEntity:{referenceCreate:"meeting"}}},{type:"backlinks",key:"link",config:{title:"Links",icon:"layers",find:{query:[{steps:[{notIn:{property:"linksTo",type:["fact","task","log","document","meeting"]}}]}]},sort:{strategy:"manual"},columns:[{type:"entityIcon"},{type:"show"},{type:"cover",align:"right"},{type:"date",align:"right"}],createEntity:{enabled:!1}}}]};var ka={name:"Teams",icon:"users",template:`
date: {{date}}
company: []
location: []
---
`,createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],list:{columns:["show","company","area"]},links:[{type:"backlinks",key:"people",config:{targetType:"person",properties:["team"],title:"People",icon:"users",collapsed:!1,sort:{strategy:"column",column:"show",direction:"asc"},columns:[{type:"cover"},{type:"show"},{type:"attribute",key:"company"},{type:"attribute",key:"team"}]}},{type:"backlinks",key:"projects",config:{targetType:"project",properties:["team"],title:"Projects",icon:"folder-git-2",columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"}}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this team",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var Hu={name:"People",icon:"user",template:`
date: {{date}}
location: []
company: []
role: []
team: []
---
`,list:{columns:["cover","show","company","role","team","location"],sort:{column:"show",direction:"asc"}},createRelated:[{key:"fact",label:"Fact",icon:_e.icon,create:{title:"Untitled Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"project",label:"Project",icon:Sa.icon,create:{title:"Untitled Project for {@this.show}",attributes:{type:"project",linksTo:["{@this}"]}}},{key:"report",label:"Report",icon:"user",create:{title:"New Report for {@this.show}",attributes:{type:"person",reportsTo:["{@this}"],company:["{@this.company}"],area:["{@this.area}"]}}},{key:"teammate",label:"Teammate",icon:ka.icon,create:{title:"New Teammate for {@this.show}",attributes:{type:"person",company:["{@this.company}"],area:["{@this.area}"],team:["{@this.team}"]}}},{key:"1o1s",label:"1:1 Meeting",icon:_o.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} 1-1 with {@this.show}",attributes:{type:"meeting",participants:["{@this}"]}}},{key:"task",label:"Task",icon:de.icon,create:{title:"Untitled Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"reports",description:"People who report to this person",config:{title:"Reports",icon:"arrow-up-circle",visibility:"notEmpty",find:{query:[{steps:[{in:{property:["reportsTo"],type:"person"}}]}]},sort:{strategy:"column",column:"show",direction:"asc"},columns:[{type:"cover"},{type:"show"},{type:"attribute",key:"role"}],createEntity:{referenceCreate:"report"}}},{type:"backlinks",key:"teammates",config:{targetType:"person",title:"Teammates",icon:"users",find:{query:[{steps:[{out:{property:["team","teams"],type:"team"}},{in:{property:["team","teams"],type:"person"}},{not:"host"},{unique:!0}]}],combine:"union"},sort:{strategy:"column",column:"show",direction:"asc"},columns:[{type:"cover"},{type:"show"},{type:"attribute",key:"role"},{type:"attribute",key:"team"}],createEntity:{referenceCreate:"teammate"}}},{type:"backlinks",key:"1o1s",config:{targetType:"meeting",title:"1:1s",icon:_o.icon,find:{query:[{steps:[{in:{property:["participants"],type:"meeting"}}]}]},filter:{"participants.length":{eq:1}},sort:{strategy:"column",column:"date",direction:"desc"},pageSize:5,columns:[{type:"show"},{type:"date",align:"right"}],createEntity:{referenceCreate:"1o1s"}}},{type:"backlinks",key:"meetings",config:{title:"Meetings",icon:_o.icon,find:{query:[{description:"Direct backlinks via participants/people",steps:[{in:{property:["participants"],type:"meeting"}}]},{description:"Via teams (meetings backlink to teams)",steps:[{out:{property:["team"],type:"team"}},{in:{property:["team"],type:"meeting"}}]}]},filter:{any:[{"participants.length":{eq:0}},{"participants.length":{gt:1}}]},sort:{strategy:"column",column:"date",direction:"desc"},columns:[{type:"show"},{type:"attribute",key:"participants"},{type:"date",align:"right"}],createEntity:{enabled:!0,title:"{YY}-{MM}-{DD} {hh}.{mm} Untitled Meeting",attributes:{participants:["{@this}"]}}}},{type:"backlinks",key:"projects",config:{title:Sa.name,icon:Sa.icon,find:{query:[{description:"Direct backlinks via participants/people",steps:[{in:{property:["linksTo","participants"],type:"project"}}]},{description:"Via teams (projects backlink to teams)",steps:[{out:{property:["team"],type:"team"}},{in:{property:["team"],type:"project"}}]}]},sort:{strategy:"manual"},columns:[{type:"show"},{type:"attribute",key:"participants"},{type:"date",align:"right"}],createEntity:{referenceCreate:"project"}}},{type:"backlinks",key:"facts",config:{targetType:"fact",properties:["linksTo","participants"],title:_e.name,icon:_e.icon,sort:{strategy:"manual"},createEntity:{referenceCreate:"fact"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo","participants"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"documents",config:{targetType:"document",properties:["linksTo","participants"],title:He.name,icon:He.icon,sort:{strategy:"manual"},createEntity:{referenceCreate:"document"}}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo","participants"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"link",config:{title:"Links",icon:"layers",find:{query:[{steps:[{notIn:{property:"linksTo",type:["meeting","log","project","person"]}}]}]},sort:{strategy:"manual"},columns:[{type:"entityIcon"},{type:"show"},{type:"cover",align:"right"},{type:"date",align:"right"}],createEntity:{enabled:!1}}}]};var Yl={name:"Gear",icon:"settings",template:`
date: {{date}}
owner: []
location: []
---
`,list:{columns:["cover","show","owner","location"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["gear"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this gear",steps:[{notIn:{property:"linksTo",type:["meeting","log","task"]}}]}],combine:"union"},filter:{type:{nin:["meeting","log"]}},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var xp={name:"Companies",icon:"building-2",template:`
date: {{date}}
location: []
---
`,list:{columns:["cover","show","location"]},createRelated:[{key:"employee",label:"Person",icon:Hu.icon,create:{title:"New Employee for {@this.show}",attributes:{type:"person",company:["{@this}"]}}},{key:"team",label:"Team",icon:ka.icon,create:{title:"New Team for {@this.show}",attributes:{type:"team",company:["{@this}"]}}},{key:"project",label:"Project",icon:Sa.icon,create:{title:"New Project for {@this.show}",attributes:{type:"project",company:["{@this}"],team:[],status:"draft"}}},{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",company:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",company:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",company:["{@this}"]}}},{key:"gear",label:"Gear",icon:Yl.icon,create:{title:"Untitled Gear for {@this.show}",attributes:{type:"gear",company:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"Untitled Idea for {@this.show}",attributes:{type:"idea",company:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",company:["{@this}"]}}}],links:[{type:"backlinks",key:"employees",config:{targetType:"person",properties:["company"],title:"Employees",icon:Hu.icon,sort:{strategy:"column",column:"show",direction:"asc"},columns:[{type:"cover"},{type:"show"},{type:"attribute",key:"team"},{type:"attribute",key:"role"}],createEntity:{referenceCreate:"employee"}}},{type:"backlinks",key:"teams",config:{targetType:"team",properties:["company"],title:"Teams",icon:ka.icon,columns:[{type:"show"}],sort:{strategy:"column",column:"show",direction:"asc"},createEntity:{referenceCreate:"team"}}},{type:"backlinks",key:"projects",config:{targetType:"project",title:"Projects",icon:Sa.icon,find:{query:[{description:"Direct projects linked via company property",steps:[{in:{property:["company"],type:"project"}},{unique:!0}]},{description:"Projects linked to teams that belong to this company",steps:[{in:{property:["company"],type:"team"}},{in:{property:["team","teams"],type:"project"}},{unique:!0}]}],combine:"union"},sort:{strategy:"manual"},columns:[{type:"show"},{type:"attribute",key:"status"},{type:"attribute",key:"team"},{type:"date",align:"right"}],createEntity:{referenceCreate:"project"}}},{type:"backlinks",key:"facts",config:{targetType:"fact",properties:["company"],title:"Facts",icon:_e.icon,sort:{strategy:"manual"},createEntity:{referenceCreate:"fact"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["company"],title:"Logs",icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"documents",config:{targetType:"document",properties:["company"],title:"Documents",icon:He.icon,sort:{strategy:"manual"},createEntity:{referenceCreate:"document"}}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["company"],title:"Tasks",icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}}]};var $0={name:"Roles",icon:"briefcase",template:`---
type: {{type}}
date: {{date}}
---
`,list:{columns:["show"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"people",config:{targetType:"person",properties:["role"],title:"People",icon:"users",collapsed:!1,sort:{strategy:"column",column:"show",direction:"asc"},columns:[{type:"cover"},{type:"show"},{type:"attribute",key:"company"},{type:"attribute",key:"team"}]}},{type:"backlinks",key:"projects",desc:"Projects associated with this role",config:{targetType:"project",properties:["role"],title:"Projects",icon:"folder-git-2",columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"}}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this role",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var Vu={name:"Restaurants",icon:"utensils",template:`
date: {{date}}
location: []
---
`,list:{columns:["cover","show","location"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this restaurant",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var j0={name:"Locations",icon:"map-pin",template:`---
type: {{type}}
date: {{date}}
---
`,list:{columns:["cover","show","country","region"]},createRelated:[{key:"restaurant",label:"Restaurant",icon:Vu.icon,create:{title:"New Restaurant for {@this.show}",attributes:{type:"restaurant",location:["{@this}"]}}},{key:"company",label:"Company",icon:xp.icon,create:{title:"New Company for {@this.show}",attributes:{type:"company",location:["{@this}"]}}},{key:"team",label:"Team",icon:ka.icon,create:{title:"New Team for {@this.show}",attributes:{type:"team",location:["{@this}"]}}},{key:"gear",label:"Gear",icon:Yl.icon,create:{title:"New Gear for {@this.show}",attributes:{type:"gear",location:["{@this}"]}}},{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"people",desc:"People linked to this location",config:{targetType:"person",properties:["location"],title:"People",icon:"user",columns:[{type:"cover"},{type:"show"},{type:"attribute",key:"company"},{type:"attribute",key:"role"}],sort:{strategy:"column",column:"show",direction:"asc"}}},{type:"backlinks",key:"restaurants",desc:"Restaurants linked to this location",config:{targetType:"restaurant",properties:["location"],title:"Restaurants",icon:Vu.icon,columns:[{type:"show"},{type:"date",align:"right"}],sort:{strategy:"column",column:"show",direction:"asc"},createEntity:{referenceCreate:"restaurant"}}},{type:"backlinks",key:"companies",desc:"Companies linked to this location",config:{targetType:"company",properties:["location"],title:"Companies",icon:"building-2",columns:[{type:"show"}],sort:{strategy:"column",column:"show",direction:"asc"},createEntity:{referenceCreate:"company"}}},{type:"backlinks",key:"teams",desc:"Teams linked to this location",config:{targetType:"team",properties:["location"],title:"Teams",icon:"layers",columns:[{type:"show"}],sort:{strategy:"column",column:"show",direction:"asc"},createEntity:{referenceCreate:"team"}}},{type:"backlinks",key:"gears",desc:"Gears linked to this location",config:{targetType:"gear",properties:["location"],title:"Gears",icon:"settings",columns:[{type:"show"},{type:"date",align:"right"}],sort:{strategy:"column",column:"show",direction:"asc"},createEntity:{referenceCreate:"gear"}}},{type:"backlinks",key:"projects",desc:"Projects linked to this location via role",config:{targetType:"project",properties:["location"],title:"Projects",icon:"folder-git-2",columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"}}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this location",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var Y0={name:"Tools",icon:"hammer",template:`
date: {{date}}
---
`,list:{columns:["cover","show","category","owner","location"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this tool",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var q0={name:"Cooking Book",icon:"book-open-check",template:`
date: {{date}}
category: []
cookTime:
calories:
---

## Ingredients

- 

## Instructions

1. 

`,list:{columns:["cover","show","source","servings"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this recipe",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var G0={name:"Ingredients",icon:"carrot",template:`
category: []
supplier: []
---
`,list:{columns:["cover","show","category","supplier"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"recipes",config:{targetType:"recipe",properties:["ingredients"],title:"Recipes",icon:"book-open-check",sort:{strategy:"manual"},columns:[{type:"cover"},{type:"show"}]}},{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this ingredient",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var K0={name:"Books",icon:"book",template:`
date: {{date}}
---
`,list:{columns:["cover","show","author","status","genre"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this book",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var Q0={name:"Shows",icon:"clapperboard",template:`
date: {{date}}
format: movie
genre: []
---
`,list:{columns:["cover","show","format","status","platform","release_date"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this show",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var X0={name:"Newsletters",icon:"send",template:`
date: {{date}}
frequency:
category: []
author: []
---
`,list:{columns:["show","frequency","category","author"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this newsletter",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var J0={name:"Articles",icon:"newspaper",template:`
date: {{date}}
status: draft
---
`,list:{columns:["cover","show","author","status","source"]},createRelated:[{key:"task",label:"Task",icon:de.icon,create:{title:"New Task for {@this.show}",attributes:{type:"task",linksTo:["{@this}"]}}},{key:"log",label:"Log",icon:ce.icon,create:{title:"{YY}-{MM}-{DD} {hh}.{mm} Log for {@this.show}",attributes:{type:"log",linksTo:["{@this}"]}}},{key:"fact",label:"Fact",icon:_e.icon,create:{title:"New Fact for {@this.show}",attributes:{type:"fact",linksTo:["{@this}"]}}},{key:"document",label:"Document",icon:He.icon,create:{title:"Untitled Document for {@this.show}",attributes:{type:"document",linksTo:["{@this}"]}}},{key:"idea",label:"Idea",icon:gt.icon,create:{title:"New Idea for {@this.show}",attributes:{type:"idea",linksTo:["{@this}"]}}}],links:[{type:"backlinks",key:"tasks",config:{targetType:"task",properties:["linksTo"],title:de.name,icon:de.icon,columns:[{type:"show"},{type:"attribute",key:"status"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{referenceCreate:"task"}}},{type:"backlinks",key:"logs",config:{targetType:"log",properties:["linksTo"],title:ce.name,icon:ce.icon,createEntity:{referenceCreate:"log"}}},{type:"backlinks",key:"links",config:{title:"Links",icon:"layers",find:{query:[{description:"Notes referencing this article",steps:[{notIn:{property:"linksTo",type:["log","task"]}}]}]},columns:[{type:"entityIcon"},{type:"show"},{type:"attribute",key:"type",label:"Type"},{type:"date",align:"right"}],sort:{strategy:"manual"},createEntity:{enabled:!1}}}]};var W0={titles:{order:["person","fact","log","task","project","idea","company","team","meeting","role","location","restaurant","gear","tool","recipe","ingredient","book","show","newsletter","document","article"]},relevantNotes:{filter:{order:["person","fact","log","task","project","idea","company","team","meeting","role","location","restaurant","gear","tool","recipe","ingredient","book","show","newsletter","document","article"]}},quickSearch:{entities:["person","company","location","role","task"]},entities:{person:Hu,fact:_e,log:ce,task:de,project:Sa,idea:gt,company:xp,team:ka,meeting:_o,role:$0,location:j0,restaurant:Vu,gear:Yl,tool:Y0,recipe:q0,ingredient:G0,book:K0,show:Q0,newsletter:X0,document:He,article:J0}};var Z0={name:"People",icon:"user",createRelated:[{key:"task",label:"Task",icon:"check-square",create:{attributes:{type:"task"}}}],links:[{type:"backlinks",targetType:"task",properties:["participants"]}]};var eC={name:"Company",icon:"gear",createRelated:[{key:"person",label:"Person",icon:"user-plus",create:{attributes:{type:"person"}}}],links:[{type:"backlinks",targetType:"person",properties:["company"]}]};var tC={name:"Tasks",icon:"check-square",createRelated:[{key:"subtask",label:"Sub-task",icon:"list-plus",create:{title:"Untitled Sub-task",attributes:{type:"task"}}}]};var nC={quickSearch:{entities:["person","company","task"]},entities:{person:Z0,company:eC,task:tC}};var Np=e=>JSON.parse(JSON.stringify(e)),iC=e=>{var u,f,p,d,h,m,b,y;let n=Object.entries(e.entities).map(([g,v])=>({...v,type:g})),i=Object.fromEntries(n.map(g=>[g.type,g])),o=n.map(g=>g.type),a=new Set(o),r=Array.isArray((u=e.titles)==null?void 0:u.order)?(f=e.titles)==null?void 0:f.order:o,s=Array.isArray((d=(p=e.relevantNotes)==null?void 0:p.filter)==null?void 0:d.order)?(m=(h=e.relevantNotes)==null?void 0:h.filter)==null?void 0:m.order:o,l=Array.isArray((b=e.quickSearch)==null?void 0:b.entities)?(y=e.quickSearch)==null?void 0:y.entities:[];return{list:n,entities:i,types:o,typeSet:a,ui:{tiles:{order:r},relevantNotes:{filter:{order:s}},quickSearch:{entities:l}}}},Uu=Np(Mp),ao=iC(Uu),br=ao.list,xt=ao.entities,$t=ao.types,ql=ao.typeSet,vs=ao.ui,$u=[{key:"full",description:"Full IMS",config:Np(W0)},{key:"mini",description:"Mini IMS",config:Np(nC)}],Tb=new Set;var ju=e=>{Uu=Np(e),ao=iC(Uu),br=ao.list,xt=ao.entities,$t=ao.types,ql=ao.typeSet,vs=ao.ui,console.log(`Mondo: setMondoConfig applied with ${$t.length} entity types`),Tb.forEach(t=>{try{t(Uu)}catch(n){console.error("Mondo: config listener failed",n)}})},Ap=e=>{Tb.add(e);try{e(Uu)}catch(t){console.error("Mondo: config listener failed during registration",t)}return()=>{Tb.delete(e)}},oC=e=>ql.has(e);var _n="daily",Ea="log",aC=[_n,Ea,"journal"],rC=()=>{let e=$t.reduce((n,i)=>{let o=i.toUpperCase();return n[o]=i,n},{}),t=[...$t,...aC.filter(n=>!ql.has(n))];return{mapping:Object.freeze(e),list:t}},sC=rC(),Bn=sC.mapping,qn=sC.list,lC=ql,cC=()=>{let{mapping:e,list:t}=rC();Bn=e,qn=t,lC=ql};cC();Ap(cC);var RR=new Set(aC),OR=new Set([_n,Ea]),Nt=e=>lC.has(e),FR=e=>RR.has(e),Yu=e=>typeof e=="string"&&OR.has(e),ws=e=>Nt(e)||FR(e),en=e=>{if(Nt(e))return xt[e]};var In=e=>{var o,a,r;let t=(o=e.cache)==null?void 0:o.frontmatter,n=typeof(t==null?void 0:t.show)=="string"?t.show.trim():"";if(n)return n;let i=typeof(t==null?void 0:t.name)=="string"?t.name.trim():"";return i||((r=(a=e.file)==null?void 0:a.basename)!=null?r:"Untitled")};var uC=e=>{if(typeof e!="string")return"";let t=e.trim();return t||""},_R=e=>{var i,o,a;let t=(o=(i=e==null?void 0:e.plugins)==null?void 0:i.plugins)==null?void 0:o.mondo,n=(a=t==null?void 0:t.settings)!=null?a:{};return uC(n.selfPersonPath)},BR=e=>{let t=e==null?void 0:e.frontmatter;return(typeof(t==null?void 0:t.type)=="string"?t.type.trim().toLowerCase():"")===Bn.PERSON},Ca=(e,t,n)=>{var p;let i=uC(n)||_R(e);if(!i)return null;let o=e.vault.getAbstractFileByPath(i);if(!(o instanceof Sb.TFile)&&!i.endsWith(".md")&&(o=e.vault.getAbstractFileByPath(`${i}.md`)),!(o instanceof Sb.TFile))return null;let a=(p=e.metadataCache.getFileCache(o))!=null?p:void 0;if(a&&!BR(a))return null;let s=In({file:o,cache:a}),l=typeof t=="string"&&t?t:o.path,c=e.metadataCache.fileToLinktext(o,l),u=s&&s!==c?s:"",f=u?`[[${c}|${u}]]`:`[[${c}]]`;return{file:o,link:f,displayName:s}};var qu=O(P()),kb=()=>{let e=pe(),t=Zt("selfPersonPath",""),n=(0,vr.useMemo)(()=>Ca(e,null,t),[e,t]),i=(0,vr.useCallback)(l=>{e.commands.executeCommandById(l)},[e]),o=(0,vr.useCallback)(()=>{i("mondo:open-today")},[i]),a=(0,vr.useCallback)(()=>{i("mondo:open-journal")},[i]),r=(0,vr.useCallback)(async()=>{if(n)try{let l=e.workspace.getLeaf(!1)||e.workspace.getLeaf(!0);l&&await l.openFile(n.file)}catch(l){console.error("Mondo Dashboard: failed to open self person note",l)}},[e,n]),s=(0,vr.useMemo)(()=>[n?{key:"me",label:"Open Me",icon:"user",onClick:r}:null,{key:"today",label:"Open Today",icon:"calendar",onClick:o},{key:"journal",label:"Open Journal",icon:"book-open",onClick:a}].filter(Boolean),[a,r,o,n]);return s.length===0?null:(0,qu.jsx)("div",{className:"flex flex-col gap-4",children:(0,qu.jsx)("div",{className:"flex w-full flex-row flex-nowrap items-stretch gap-2 sm:flex-row sm:flex-wrap sm:gap-3",children:s.map(l=>(0,qu.jsx)(Me,{"aria-label":l.label,className:"mod-cta flex flex-1 items-center justify-center sm:justify-start",icon:l.icon,onClick:l.onClick,children:(0,qu.jsx)("span",{className:"hidden sm:inline",children:l.label})},l.key))})})};var Lp=O(fe());var It=O(fe()),xb=require("obsidian");var Dp=O(fe());var Ts=class{constructor(t){this.files=new Map;this.eventRefs=[];this.listeners=new Set;this.isInitialized=!1;this.isScanning=!1;this.pendingInitPromise=null;this.scanDebounceTimer=null;this.app=t,qn.forEach(n=>{this.files.set(n,[])})}static getInstance(t){return Ts.instance||(Ts.instance=new Ts(t)),Ts.instance}async initialize(){if(!this.isInitialized){if(this.pendingInitPromise)return this.pendingInitPromise;this.pendingInitPromise=this.doInitialize(),await this.pendingInitPromise,this.pendingInitPromise=null}}async doInitialize(){await this.waitForMetadataCache(),await this.scanFiles(),this.eventRefs.push(this.app.metadataCache.on("changed",()=>this.debouncedScanFiles()),this.app.vault.on("modify",()=>this.debouncedScanFiles()),this.app.vault.on("create",()=>this.debouncedScanFiles()),this.app.vault.on("delete",()=>this.debouncedScanFiles()),this.app.vault.on("rename",()=>this.debouncedScanFiles())),this.isInitialized=!0}async waitForMetadataCache(){if(!this.app.workspace.layoutReady)return new Promise(t=>{if(this.app.workspace.layoutReady){t();return}let n=()=>{if(this.app.workspace.layoutReady){setTimeout(t,100);return}setTimeout(n,50)};n()})}cleanup(){this.scanDebounceTimer&&(clearTimeout(this.scanDebounceTimer),this.scanDebounceTimer=null),this.eventRefs.forEach(t=>{this.app.metadataCache.offref(t),this.app.vault.offref(t)}),this.eventRefs=[],this.listeners.clear(),this.files.clear(),this.isInitialized=!1,Ts.instance=null}debouncedScanFiles(){this.scanDebounceTimer&&clearTimeout(this.scanDebounceTimer),this.scanDebounceTimer=window.setTimeout(()=>{this.scanFiles(),this.scanDebounceTimer=null},100)}async scanFiles(){var t;if(!this.isScanning){this.isScanning=!0;try{qn.forEach(o=>{this.files.set(o,[])});let n=this.app.vault.getMarkdownFiles(),i=[];for(let o of n){let a=this.app.metadataCache.getFileCache(o);if(!a){i.push(o);continue}let r=(t=a==null?void 0:a.frontmatter)==null?void 0:t.type;r&&ws(r)&&this.addFileToCache(r,o,a)}i.length>0&&this.isInitialized&&setTimeout(()=>{this.processPendingFiles(i)},200),this.notifyListeners()}finally{this.isScanning=!1}}}getFiles(t){return!this.isInitialized&&!this.pendingInitPromise&&this.initialize().catch(n=>{console.error("MondoFileManager: Failed to auto-initialize:",n)}),this.files.get(t)||[]}getFileByPath(t){!this.isInitialized&&!this.pendingInitPromise&&this.initialize().catch(n=>{console.error("MondoFileManager: Failed to auto-initialize:",n)});for(let[,n]of this.files){let i=n.find(o=>o.file.path===t);if(i)return i}}getFilesFiltered(t,n){let i=this.getFiles(t);return n?i.filter(o=>{try{return n(o,this.app)}catch(a){return console.error("MondoFileManager filter error:",a),!1}}):i}processPendingFiles(t){var i;let n=!1;for(let o of t){let a=this.app.metadataCache.getFileCache(o);if(a){let r=(i=a==null?void 0:a.frontmatter)==null?void 0:i.type;r&&ws(r)&&this.addFileToCache(r,o,a)&&(n=!0)}}n&&this.notifyListeners()}addFileToCache(t,n,i){let o=this.files.get(t)||[],a=o.findIndex(s=>s.file.path===n.path);if(a!==-1){let s=o[a],l=!1;return s.file!==n&&(s.file=n,l=!0),s.cache!==i&&(s.cache=i||void 0,l=!0),l&&(o[a]=s,this.files.set(t,o)),l}let r={file:n,cache:i||void 0};return o.push(r),this.files.set(t,o),!0}addListener(t){this.listeners.add(t)}removeListener(t){this.listeners.delete(t)}notifyListeners(){let t={type:"files-changed",files:new Map(this.files)};this.listeners.forEach(n=>{try{n(t)}catch(i){console.error("MondoFileManager listener error:",i)}})}refresh(){this.scanFiles()}getStats(){let t={};return qn.forEach(n=>{var i;t[n]=((i=this.files.get(n))==null?void 0:i.length)||0}),t}},Gn=Ts;Gn.instance=null;var ro=(e,t)=>{let n=pe(),[i,o]=(0,Dp.useState)([]);return(0,Dp.useEffect)(()=>{if(!ws(e)){console.warn(`useFiles: Invalid Mondo file type "${e}"`),o([]);return}let a=Gn.getInstance(n),r=()=>{let l=t!=null&&t.filter?a.getFilesFiltered(e,t.filter):a.getFiles(e);o(l)};r();let s=l=>{r()};return a.addListener(s),()=>{a.removeListener(s)}},[n,e,t==null?void 0:t.filter]),i};var Gl=e=>{var a,r,s,l,c,u,f,p,d,h,m,b,y,g,v,w;let t=e==null?void 0:e.view,n=(u=(c=(r=(a=t==null?void 0:t.contentEl)==null?void 0:a.querySelector)==null?void 0:r.call(a,".inline-title"))!=null?c:(l=(s=t==null?void 0:t.containerEl)==null?void 0:s.querySelector)==null?void 0:l.call(s,".inline-title"))!=null?u:null;if(n){n.focus();try{let T=(f=window==null?void 0:window.getSelection)==null?void 0:f.call(window),k=(p=document.createRange)==null?void 0:p.call(document);T&&k&&(T.removeAllRanges(),k.selectNodeContents(n),T.addRange(k))}catch(T){}return!0}let i=(b=(d=t==null?void 0:t.fileView)==null?void 0:d.inputEl)!=null?b:(m=(h=t==null?void 0:t.titleEl)==null?void 0:h.querySelector)==null?void 0:m.call(h,"input");if(i)return i.focus(),i.select(),!0;let o=(w=(v=(g=(y=t==null?void 0:t.app)!=null?y:window==null?void 0:window.app)==null?void 0:g.commands)==null?void 0:v.executeCommandById)==null?void 0:w.call(v,"app:rename-file");return Boolean(o)},wr=e=>e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),dC=({app:e,sourcePath:t,targetFile:n,displayName:i})=>{let o=e.metadataCache.fileToLinktext(n,t),a=i?`|${i}`:"";return`[[${o}${a}]]`};var Gu=e=>{if(!e)return null;let n=e.plugins;if(!n||typeof n.getPlugin!="function")return null;let i=n.getPlugin("mondo");return i!=null?i:null},Eb=Gu;var Bo=e=>{if(!e)return"";let t=e.trim();return!t||t==="/"?"":t.replace(/\\/g,"/").replace(/\/+/g,"/").replace(/^\/+/,"").replace(/\/+$/,"")};var Cb=require("obsidian");var IR=`---
type: {{type}}
date: {{date}}
---
`,fC=Object.freeze(Object.fromEntries(Object.entries(xt).map(([e,t])=>[e,t.template]))),pC=e=>e in fC?fC[e]:IR;var PR=/(YYYY|MM|DD|HH|mm|ss)/g,Ma=e=>e.toString().padStart(2,"0"),zR={YYYY:e=>String(e.getUTCFullYear()),MM:e=>Ma(e.getUTCMonth()+1),DD:e=>Ma(e.getUTCDate()),HH:e=>Ma(e.getUTCHours()),mm:e=>Ma(e.getUTCMinutes()),ss:e=>Ma(e.getUTCSeconds())},Mb=e=>{let t=e.trim();if(!t)return{date:null,isDateOnly:!1};if(t.match(/^\d{4}-\d{2}-\d{2}$/)){let[o,a,r]=t.split("-").map(Number);if(Number.isFinite(o)&&Number.isFinite(a)&&Number.isFinite(r)){let s=new Date(Date.UTC(o,a-1,r));if(!Number.isNaN(s.getTime()))return{date:s,isDateOnly:!0}}}let i=new Date(t);return Number.isNaN(i.getTime())?{date:null,isDateOnly:!1}:{date:i,isDateOnly:!1}},HR=(e,t)=>{let{date:n}=Mb(e);return n?t.replace(PR,i=>{let o=zR[i];return o?o(n):i}):t},Ss=(e,t)=>(n,i)=>n.replace(e,()=>t(i)),VR=[Ss(/{{\s*title\s*}}/gi,e=>e.title),Ss(/{{\s*type\s*}}/gi,e=>e.type),Ss(/{{\s*filename\s*}}/gi,e=>e.filename),Ss(/{{\s*slug\s*}}/gi,e=>e.slug),Ss(/{{\s*date\s*}}/gi,e=>e.date),Ss(/{{\s*datetime\s*}}/gi,e=>{var t;return(t=e.datetime)!=null?t:e.date}),Ss(/{{\s*time\s*}}/gi,e=>{if(typeof e.time=="string")return e.time;let t=Mb(e.date);return t.date?`${Ma(t.date.getUTCHours())}:${Ma(t.date.getUTCMinutes())}`:e.date})],UR=e=>pC(e),Io=async(e,t,n)=>{let i=t==null?void 0:t[n];if(typeof i=="string"){let o=i;if(o.includes(`
`)||o.includes("{{")||o.includes("---"))return o;let a=o.trim();if(a.length>0){let r=a.endsWith(".md")||a.endsWith(".MD")?a:`${a}.md`,s=e.vault.getAbstractFileByPath(a),l=s instanceof Cb.TFile?s:e.vault.getAbstractFileByPath(r);if(l instanceof Cb.TFile)try{return await e.vault.cachedRead(l)}catch(c){console.error(`Mondo: failed to read template file at "${l.path}"`,c)}else console.warn(`Mondo: template note "${a}" was not found; falling back to default template.`)}}return UR(n)},mC=e=>{if(!e.startsWith("---"))return{fm:"",body:e};let t=e.indexOf(`
---`,3);if(t===-1)return{fm:e,body:""};let n=e.slice(0,t+4),i=e.slice(t+4);return{fm:n,body:i}},hC=e=>{if(!e.trim())return"";let t=e.split(/\r?\n/).map(o=>o.trim()).filter(o=>o.length>0);t[0]==="---"&&t.shift(),t[t.length-1]==="---"&&t.pop();let n=new Set;return t.filter(o=>{let a=o.match(/^(\w[\w-]*)(?=\s*:)/),r=a?a[1].toLowerCase():null;return r?r==="type"||r==="show"||n.has(r)?!1:(n.add(r),!0):!0}).join(`
`)},Po=(e,t)=>{let n=e.replace(/^[\s\n\r]+/,""),i=n.startsWith("---")?n:`---
${n}`,{fm:o,body:a}=mC(i),r=hC(o),c=`${["---","type: {{type}}"].concat(r?[r]:[]).concat("---").join(`
`)}${a}`;VR.forEach(b=>{c=b(c,t)}),c=c.replace(/{{\s*(date|time|datetime)\s*:\s*([^}]+)\s*}}/gi,(b,y,g)=>{let v=String(y||"date").toLowerCase(),w=String(g||"").trim();if(!w){if(v==="time"){let T=Mb(t.date);if(T.date)return`${Ma(T.date.getUTCHours())}:${Ma(T.date.getUTCMinutes())}`}return t.date}return HR(t.date,w)}),c.endsWith(`
`)||(c=`${c}
`);let{fm:u,body:f}=mC(c),p=hC(u),d=["---",`type: ${t.type}`];p&&d.push(...p.split(/\r?\n/)),d.push("---");let m=`${d.join(`
`)}${f}`;return m.endsWith(`
`)?m:`${m}
`};var $R=e=>e.replace(/[<>:"/\\|?*]/g,"-").replace(/\s+/g," ").replace(/[\r\n]+/g," ").trim(),jR=async(e,t)=>{var i;if(!(!t||e.vault.getAbstractFileByPath(t)))try{await e.vault.createFolder(t)}catch(o){if(!((i=o==null?void 0:o.message)!=null?i:"").toLowerCase().includes("already exists"))throw o}},YR=(e,t)=>{let n=t.replace(/[\r\n]+/g," ").trim();if(!n)return e;let i=e.split(/\r?\n/);if(i[0]!=="---")return e;let o=i.indexOf("---",1);if(o===-1)return e;let a=i.slice(0,o),r=i[o],s=i.slice(o+1),l=a.slice(1),c=l.findIndex(h=>h.trim().toLowerCase().startsWith("type:")),u=c>=0?c+1:l.length,p=`show: "${n.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"`;return l.splice(u,0,p),[a[0],...l,r,...s].join(`
`)},qR=/[<>:"/\\|?*\r\n]/,gC=async({app:e,entityType:t,input:n})=>{var L,F,N,_;let i=Gu(e);if(!i)throw new Error("Mondo plugin is not ready yet.");let o=t.trim().toLowerCase();if(!Nt(o))throw new Error(`Invalid Mondo entity type "${t}".`);let a=o,r=en(a),s=(L=r==null?void 0:r.name)!=null?L:o,l=i.settings,c=(N=(F=l.rootPaths)==null?void 0:F[a])!=null?N:"/",u=Bo(c);u&&await jR(e,u);let f=n.trim(),p=f||`Untitled ${s}`,h=$R(f||p)||`untitled-${Date.now()}`,m=0,b=h,y="";for(;;){let A=m===0?"":`-${m}`,x=`${h}${A}`,S=`${x}.md`,D=u?`${u}/${S}`:S;if(!e.vault.getAbstractFileByPath(D)){b=x,y=D;break}m+=1}let v=new Date().toISOString(),w=wr(p)||wr(h)||`${Date.now()}`,T=await Io(e,(_=l.templates)!=null?_:{},a),k=Po(T,{title:p,type:String(a),filename:`${b}.md`,slug:w,date:v,datetime:v}),C=f.length>0&&qR.test(f)?YR(k,f):k;return await e.vault.create(y,C)};var tn=O(P()),GR=6,KR=e=>e.map(t=>{let n=In(t);return{file:t.file,display:n,displayLower:n.toLowerCase()}}),QR=({entityType:e,icon:t,title:n,onOpenAll:i})=>{let o=pe(),a=ro(e),r=(0,It.useMemo)(()=>KR(a),[a]),[s,l]=(0,It.useState)(""),[c,u]=(0,It.useState)(!1),[f,p]=(0,It.useState)(!1),[d,h]=(0,It.useState)(-1),m=(0,It.useRef)(null),b=s.trim(),y=(0,It.useCallback)(()=>{m.current!==null&&(window.clearTimeout(m.current),m.current=null)},[]);(0,It.useEffect)(()=>()=>{y()},[y]);let g=(0,It.useCallback)(()=>{y(),h(-1),u(!0)},[y]),v=(0,It.useCallback)(()=>{y(),m.current=window.setTimeout(()=>{u(!1),h(-1),m.current=null},120)},[y]),w=(0,It.useMemo)(()=>{if(!b)return[];let N=b.toLowerCase();return r.filter(_=>_.displayLower.includes(N)).slice(0,GR)},[r,b]),T=(0,It.useCallback)(async(N,_)=>{let A=o.workspace.getLeaf(!0)||o.workspace.getLeaf(!1);A&&(await A.openFile(N),_&&Gl(A))},[o]),k=(0,It.useCallback)(async N=>{y(),l(""),u(!1),h(-1);try{await T(N,!1)}catch(_){console.error(`QuickSearchPanel: failed to open ${e} note`,_),new xb.Notice(`Failed to open ${n}.`)}},[y,e,T,n]),E=(0,It.useCallback)(async()=>{if(f)return;let N=b.toLowerCase();if(N){p(!0),y();try{if(d>=0&&w[d]){await T(w[d].file,!1),l(""),u(!1),h(-1);return}let _=r.filter(x=>x.displayLower===N);if(_.length===1){await T(_[0].file,!1),l(""),u(!1),h(-1);return}let A=await gC({app:o,entityType:e,input:b});await T(A,!0),l(""),u(!1),h(-1)}catch(_){console.error(`QuickSearchPanel: failed to process query for ${e}`,_),new xb.Notice(`Failed to create ${n}.`)}finally{p(!1)}}},[o,y,e,w,d,f,T,r,n,b]),C=b.length>0,L=c&&C&&w.length>0;(0,It.useEffect)(()=>{L||h(-1)},[L]),(0,It.useEffect)(()=>{h(-1)},[b]);let F=(0,It.useCallback)(N=>{if(!(!L||w.length===0)){if(N.key==="ArrowDown"){N.preventDefault(),N.stopPropagation(),h(_=>{let A=_+1;return A>=w.length?w.length-1:A<0?0:A});return}if(N.key==="ArrowUp"){N.preventDefault(),N.stopPropagation(),h(_=>{let A=_-1;return A<-1?-1:A});return}if(N.key==="Enter"){if(d>=0&&w[d]){N.preventDefault(),N.stopPropagation(),k(w[d].file);return}return}N.key==="Escape"&&(N.preventDefault(),N.stopPropagation(),h(-1))}},[w,k,d,L]);return(0,tn.jsxs)("div",{className:"flex flex-col gap-3 rounded-xl border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4 shadow-sm",children:[(0,tn.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,tn.jsxs)("div",{className:"flex items-center gap-2 text-sm font-semibold text-[var(--text-normal)]",children:[t?(0,tn.jsx)(Ze,{name:t,className:"h-5 w-5 text-[var(--text-muted)]"}):null,(0,tn.jsx)("span",{children:n})]}),(0,tn.jsx)(Me,{variant:"link",icon:"list",tone:"info",onClick:()=>i(e),"aria-label":`Open all ${n}`,children:"list all"})]}),(0,tn.jsxs)("form",{className:"relative flex flex-col gap-2",onSubmit:N=>{N.preventDefault(),N.stopPropagation(),E()},children:[(0,tn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,tn.jsx)("input",{className:"setting-input flex-1 min-w-0",type:"text",placeholder:`Search ${n}`,value:s,onChange:N=>l(N.target.value),onFocus:g,onBlur:v,disabled:f,autoComplete:"off",autoCapitalize:"none",autoCorrect:"off",onKeyDown:F}),(0,tn.jsx)(Me,{type:"submit",icon:"chevron-right","aria-label":`Go to ${n}`,className:"flex h-9 w-9 items-center justify-center",disabled:f||!C})]}),L&&(0,tn.jsx)("div",{className:"suggestion-container mod-search-suggestion absolute left-0 right-0 top-full z-20 mt-1 max-h-60 overflow-y-auto",role:"listbox",style:{width:"100%"},children:(0,tn.jsx)("div",{className:"suggestion",children:w.map((N,_)=>{let A=_===d;return(0,tn.jsxs)("div",{role:"option","aria-selected":A,className:`suggestion-item mod-complex search-suggest-item ${A?"is-selected":""}`,onMouseDown:x=>x.preventDefault(),onMouseEnter:()=>h(_),onMouseLeave:()=>h(-1),onClick:()=>{k(N.file)},children:[(0,tn.jsx)("div",{className:"suggestion-content",children:(0,tn.jsx)("div",{className:"suggestion-title",children:(0,tn.jsx)("span",{className:"truncate",children:N.display})})}),(0,tn.jsx)("div",{className:"suggestion-aux",children:(0,tn.jsx)(Ze,{name:"chevron-right",className:"h-4 w-4 text-[var(--text-muted)]"})})]},N.file.path)})})})]})]})},yC=QR;var Nb=O(P()),Ab=({items:e,onOpenEntityPanel:t})=>e.length===0?null:(0,Nb.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 xl:grid-cols-3",children:e.map(n=>(0,Nb.jsx)(yC,{entityType:n.type,icon:n.icon,title:n.title,onOpenAll:t},n.type))});var Ku=O(P()),Db=()=>{let e=pe(),t=Zt("dashboard.quickSearchEntities",[]),n=(0,Lp.useMemo)(()=>{var r,s,l;let o=(l=(s=(r=vs)==null?void 0:r.quickSearch)==null?void 0:s.entities)!=null?l:[];return(Array.isArray(t)&&t.length>0?t:o).map(c=>xt[c]).filter(Boolean).map(c=>({type:c.type,icon:c.icon,title:c.name}))},[t]),i=(0,Lp.useCallback)(o=>{let a=o==null?void 0:o.trim();a&&e.commands.executeCommandById(`mondo:open-${a}`)},[e]);return n.length===0?null:(0,Ku.jsxs)("div",{className:"space-y-4",children:[(0,Ku.jsx)(Mt,{variant:"h1",children:"IMS Quick Search"}),(0,Ku.jsx)(Ab,{items:n,onOpenEntityPanel:i})]})};var Jl=O(fe());var Qu=O(fe());var bC=O(P()),XR=e=>Number.isInteger(e)&&e>=0,zo=(e,t)=>{if(t!==void 0){if(!XR(t))throw new Error(`${e} prop must be a non-negative integer (received ${String(t)})`);return`${e}-${t}`}},ks=({children:e,className:t,style:n,p:i,px:o,py:a,pt:r,pb:s,m:l,mx:c,my:u,mt:f,mb:p,...d})=>{let h=[zo("p",i),zo("px",o),zo("py",a),zo("pt",r),zo("pb",s),zo("m",l),zo("mx",c),zo("my",u),zo("mt",f),zo("mb",p)].filter(Boolean),m=h.join(" "),b={...h.length===0&&!(n&&(n.padding||n.paddingBlock))?{paddingBlock:"0px"}:{}},y=[m,t].filter(Boolean).join(" ");return(0,bC.jsx)("div",{className:y,style:{...b,...n},...d,children:e})};var vC=O(P()),JR=({children:e,className:t,style:n,p:i=2,...o})=>{let r=o.p!==void 0||o.px!==void 0||o.py!==void 0||o.pt!==void 0||o.pb!==void 0?void 0:`p-${i}`,s={border:"1px solid var(--background-modifier-border)",borderRadius:"var(--radius-m, var(--radius-ml))",backgroundColor:"var(--background-secondary)",boxShadow:"var(--shadow-s, var(--input-shadow, none))",clipPath:"none"};return(0,vC.jsx)(ks,{...o,className:[r,"mondo-paper","mod-card",t].filter(Boolean).join(" "),style:{...s,...n},children:e})},Kl=JR;var Tr=O(P()),Lb=({title:e,subtitle:t,icon:n})=>{if(!e&&!t)throw new Error("Title component requires at least a title or a subtitle.");return(0,Tr.jsx)("div",{className:"setting-item-info flex min-h-12 items-center",children:(0,Tr.jsxs)("div",{className:"flex items-center",children:[n&&(0,Tr.jsx)(Ze,{name:n}),(0,Tr.jsxs)("div",{className:"flex flex-col justify-center gap-1",children:[e&&(0,Tr.jsx)("div",{className:"setting-item-name",children:e}),t&&(0,Tr.jsx)("div",{className:"setting-item-description",children:t})]})]})})};var wC=O(P()),WR=(e,t)=>{if(e!==void 0&&(!Number.isInteger(e)||e<0))throw new Error(`${t} must be a non-negative integer (received ${String(e)})`)},ZR=e=>{switch(e){case"row-reverse":return"flex-row-reverse";case"column":return"flex-col";case"column-reverse":return"flex-col-reverse";case"row":default:return}},eO=e=>{switch(e){case"center":return"items-center";case"start":return"items-start";case"end":return"items-end";case"stretch":return"items-stretch";case"baseline":return"items-baseline";default:return}},tO=e=>{switch(e){case"center":return"justify-center";case"start":return"justify-start";case"end":return"justify-end";case"space-between":return"justify-between";case"space-around":return"justify-around";case"space-evenly":return"justify-evenly";case"stretch":return"justify-stretch";default:return}},jt=({children:e,direction:t="row",align:n,justify:i,gap:o,className:a,...r})=>{WR(o,"gap");let s=["flex",ZR(t),eO(n),tO(i),o!==void 0?`gap-${o}`:void 0,a].filter(Boolean).join(" ");return(0,wC.jsx)(ks,{...r,className:s,children:e})},Ql=jt;var Yi=O(P()),so=({title:e,subtitle:t,icon:n,children:i,spacing:o=2,className:a,p:r,px:s,py:l,pt:c,pb:u,m:f,mx:p,my:d,mt:h,mb:m,actions:b,actionsOnCollapsed:y,collapsible:g=!1,collapsed:v=!1,collapseOnHeaderClick:w=!1,onCollapseChange:T,minimizeOnCollapsed:k=!1})=>{var De;let E={};f!==void 0&&(E.m=f),p!==void 0&&(E.mx=p),d!==void 0&&(E.my=d),h!==void 0&&(E.mt=h),m!==void 0&&(E.mb=m);let L=(()=>{if(r!==void 0||s!==void 0||l!==void 0||c!==void 0||u!==void 0){let ue=[];return r!==void 0&&ue.push(`p-${r}`),s!==void 0&&ue.push(`px-${s}`),l!==void 0&&ue.push(`py-${l}`),c!==void 0&&ue.push(`pt-${c}`),u!==void 0&&ue.push(`pb-${u}`),ue.join(" ")}return`p-${o}`})(),F={padding:r!==void 0?`${r*.25}rem`:`${o*.25}rem`,paddingLeft:s!==void 0?`${s*.25}rem`:void 0,paddingRight:s!==void 0?`${s*.25}rem`:void 0,paddingTop:c!==void 0?`${c*.25}rem`:l!==void 0?`${l*.25}rem`:void 0,paddingBottom:u!==void 0?`${u*.25}rem`:l!==void 0?`${l*.25}rem`:void 0},N=(()=>{let ue=r,Re=s!==void 0?s:ue!==void 0?ue:o,bt=l!==void 0?l:ue!==void 0?ue:o;return{x:Re,top:c!==void 0?c:bt,bottom:u!==void 0?u:bt}})(),[_,A]=Qu.default.useState(v);Qu.default.useEffect(()=>{A(v)},[v]);let x=k&&_,S=.25,D=Math.max(0,Math.floor(N.top*S)),M=Math.max(0,Math.floor(N.bottom*S)),B=[`px-${N.x}`,x?"pt-0":`pt-${D}`,x?"pb-0":`pb-${M}`].join(" "),G=N.x*.25,$=N.top*.25,te=N.bottom*.25,j=$*S,me=te*S,W=2,ae={paddingLeft:`${G}rem`,paddingRight:`${G}rem`,paddingTop:x?`${W}px`:`${j}rem`,paddingBottom:x?`${W}px`:`${me}rem`},Q=Boolean(e||t),R=Boolean(n),I=(De=x&&y?y:b)!=null?De:[],z=I.length>0,U=Q||R||z,X=(()=>{if(e&&t)return n?{title:e,subtitle:t,icon:n}:{title:e,subtitle:t};if(e)return n?{title:e,icon:n}:{title:e};if(t)return n?{subtitle:t,icon:n}:{subtitle:t}})(),H=Qu.default.useCallback(()=>{g&&A(ue=>{let Re=!ue;return T==null||T(Re),Re})},[g,T]),Y=g?{role:"button",tabIndex:0,onClick:()=>{H()},onKeyDown:ue=>{(ue.key==="Enter"||ue.key===" ")&&(ue.preventDefault(),H())},"aria-expanded":!_}:{},le=w?Y:{},re=w?{}:Y,ie={display:"flex",flexDirection:"row",alignItems:x?"center":Q?"flex-start":"center",justifyContent:Q?"space-between":"flex-end",gap:"0.5rem",width:x?void 0:"100%"},ke={display:"flex",flexDirection:"row",alignItems:"center",gap:x?"0.25rem":"0.5rem",flexShrink:0,flexGrow:Q?0:1,minWidth:0,width:Q?void 0:"100%",alignSelf:Q?"center":void 0},Ce=2,we=x?1:2,Ne=Qu.default.Children.count(i)>0,Ve=U&&!_&&Ne,Xe=["mondo-card__header",B,w&&g?"cursor-pointer select-none":void 0].filter(Boolean).join(" "),ot={...ae,...w?{outline:"none"}:{},...Ve?{borderBottom:"1px solid var(--background-modifier-border)"}:{}},ee=g&&!w?"cursor-pointer select-none":void 0,Ge={outline:"none"};return(0,Yi.jsxs)(Kl,{p:0,...E,className:[k?"mondo-card--minimize-on-collapsed":void 0,a].filter(Boolean).join(" "),"data-collapsed":_?"true":"false",children:[U&&(0,Yi.jsx)(ks,{className:Xe,style:ot,"data-collapsible":g?"true":"false",...le,children:(0,Yi.jsxs)(jt,{align:Q?"start":"center",justify:Q?"space-between":"end",gap:Ce,style:ie,children:[(X||R)&&(0,Yi.jsx)("div",{className:ee,style:Ge,...re,children:X?(0,Yi.jsx)(Lb,{...X}):R?(0,Yi.jsx)(Lb,{title:"\u200B",icon:n}):null}),z&&(0,Yi.jsx)(jt,{gap:we,align:"center",className:Q?"mondo-card__actions shrink-0 self-center":"mondo-card__actions flex-1 min-w-0",style:ke,onClick:w?ue=>{ue.stopPropagation()}:void 0,onKeyDown:w?ue=>{ue.stopPropagation()}:void 0,children:I.map((ue,Re)=>{var vt,nt,nn;if("content"in ue){let Ht=(vt=ue.key)!=null?vt:`custom-${Re}`;return(0,Yi.jsx)("div",{className:"flex items-center flex-1 min-w-0",children:ue.content},Ht)}if(!ue.text&&!ue.icon)throw new Error("Card action must define at least a text or an icon.");let bt=(nn=(nt=ue.text)!=null?nt:ue.icon)!=null?nn:String(Re);return(0,Yi.jsx)(Ta,{variant:"link",icon:ue.icon,onClick:ue.onClick,children:ue.text},bt)})})]})}),!_&&(0,Yi.jsx)(ks,{className:[L,"mondo-card-content"].join(" "),style:{...F,["--mondo-card-pad-x"]:`${N.x*.25}rem`},children:i})]})};var xa=O(fe());var Xu=e=>{let t=e.trim();return t?(t.startsWith("[[")&&t.endsWith("]]")&&(t=t.slice(2,-2)),t=t.split("|")[0],t=t.replace(/\\/g,"/"),t=t.replace(/\.md$/iu,""),t=t.replace(/^\/+/,""),t.trim()):""},Rp=e=>{if(e==null)return[];if(Array.isArray(e))return e.map(n=>String(n).trim()).filter(n=>n.length>0);let t=String(e).trim();return t?[t]:[]},TC=async(e,t,n)=>{let i=Xu(n);if(!i)return!1;let o=!1;return await e.fileManager.processFrontMatter(t,a=>{let r=Rp(a.link);if(r.some(l=>Xu(String(l))===i)){a.link=r.length>0?r:[n],o=!0;return}a.link=[...r,n],o=!0}),o};var nO=/(\d{4})[-/](\d{2})[-/](\d{2})/,iO=/\b(\d{1,2}):(\d{2})\b/,oO=e=>{if(!e)return{date:null,hasTime:!1};if(e instanceof Date){if(Number.isNaN(e.getTime()))return{date:null,hasTime:!1};let t=e.getHours()!==0||e.getMinutes()!==0||e.getSeconds()!==0||e.getMilliseconds()!==0;return{date:new Date(e.getTime()),hasTime:t}}if(typeof e=="number"&&Number.isFinite(e)){let t=new Date(e);if(Number.isNaN(t.getTime()))return{date:null,hasTime:!1};let n=t.getHours()!==0||t.getMinutes()!==0||t.getSeconds()!==0||t.getMilliseconds()!==0;return{date:t,hasTime:n}}if(typeof e=="string"){let t=e.trim();if(!t)return{date:null,hasTime:!1};let n=t.match(nO);if(n&&t.length<=10){let o=Number(n[1]),a=Number(n[2]),r=Number(n[3]);if(Number.isFinite(o)&&Number.isFinite(a)&&Number.isFinite(r)){let s=new Date(o,a-1,r);if(!Number.isNaN(s.getTime()))return{date:s,hasTime:!1}}}let i=new Date(t);if(!Number.isNaN(i.getTime())){let o=iO.test(t)||t.includes("T")||t.includes(" ");return{date:i,hasTime:o}}}return{date:null,hasTime:!1}},aO=e=>{var a,r;let t=new Date(typeof((a=e.file.stat)==null?void 0:a.ctime)=="number"?e.file.stat.ctime:Date.now()),n=(r=e.cache)==null?void 0:r.frontmatter,{date:i,hasTime:o}=oO(n==null?void 0:n.date);return i?{occurredAt:i,hasExplicitDate:!0,hasExplicitTime:o}:{occurredAt:t,hasExplicitDate:!1,hasExplicitTime:!1}},SC=()=>{let e=pe(),t=(0,xa.useCallback)(c=>{var d;let u=(d=c.cache)==null?void 0:d.frontmatter;return!(Rp(u==null?void 0:u.participants).length>0||(typeof(u==null?void 0:u.status)=="string"?u.status.trim().toLowerCase():"")!=="quick")},[]),n=(0,xa.useMemo)(()=>c=>t(c),[t]),i=ro(Bn.TASK,{filter:n}),o=(0,xa.useMemo)(()=>i.map(c=>{let{occurredAt:u,hasExplicitDate:f,hasExplicitTime:p}=aO(c);return{id:c.file.path,file:c.file,filePath:c.file.path,fileName:c.file.basename,text:In(c),occurredAt:u,hasExplicitDate:f,hasExplicitTime:p}}).sort((c,u)=>{let f=u.occurredAt.getTime()-c.occurredAt.getTime();return f!==0?f:c.filePath!==u.filePath?c.filePath.localeCompare(u.filePath):0}),[i]),a=(0,xa.useMemo)(()=>Boolean(Ca(e,null)),[e,i]),r=(0,xa.useCallback)(async c=>{await e.fileManager.processFrontMatter(c.file,u=>{let f=u;f.status="done",f.completed=new Date().toISOString()})},[e]),s=(0,xa.useCallback)(async c=>{let u=Ca(e,c.file.path);if(!u)throw new Error("Self person is not configured");await e.fileManager.processFrontMatter(c.file,f=>{let p=f,d=Rp(p.participants),h=d.map(Xu),m=Xu(u.link);h.includes(m)?p.participants=d:p.participants=[...d,u.link],p.status="todo"})},[e]),l=(0,xa.useCallback)(async(c,u)=>{if(u==="task"){await s(c);return}try{let f=u==="project"?Bn.PROJECT:Bn.LOG;await e.fileManager.processFrontMatter(c.file,d=>{let h=d;h.type=f,"status"in h&&delete h.status});let p=e.workspace.getLeaf(!0);p&&await p.openFile(c.file)}catch(f){console.error("useInboxTasks: failed to promote quick task",f)}},[e,s]);return{tasks:o,isLoading:!1,toggleTask:r,promoteTask:l,canAssignToSelf:a}};var vn=O(fe());var Na=O(P()),Ju=({secondaryActions:e,toggleClassName:t,menuAriaLabel:n="Open secondary actions",primaryOpensMenu:i=!1,disabled:o,fullWidth:a=!1,className:r,children:s,iconClassName:l,...c})=>{let[u,f]=(0,vn.useState)(!1),p=(0,vn.useRef)(null),d=(0,vn.useRef)(null),{onClick:h,...m}=c,b=(0,vn.useCallback)(()=>{f(!1)},[]);(0,vn.useEffect)(()=>{if(!u)return;let A=S=>{p.current&&(p.current.contains(S.target)||b())},x=S=>{S.key==="Escape"&&b()};return window.addEventListener("mousedown",A),window.addEventListener("keydown",x),()=>{window.removeEventListener("mousedown",A),window.removeEventListener("keydown",x)}},[b,u]);let y=(0,vn.useMemo)(()=>e.filter(A=>!A.disabled),[e]);(0,vn.useEffect)(()=>{u&&y.length===0&&f(!1)},[y.length,u]);let g=o||e.length===0,v=(0,vn.useCallback)(()=>{g||f(A=>!A)},[g]),w=(0,vn.useCallback)(A=>{if(i){if(g){A.preventDefault();return}f(x=>!x)}h&&h(A)},[g,h,i]),T=(0,vn.useCallback)(A=>x=>{A.disabled||(b(),A.onSelect(x))},[b]),k=i?{"aria-haspopup":"menu","aria-expanded":u}:{},E=["relative inline-flex items-stretch",a?"w-full":void 0].filter(Boolean).join(" "),C=[r,e.length>0?"rounded-r-none":void 0,a&&e.length>0?"flex-1":void 0].filter(Boolean).join(" "),L=["rounded-l-none border-l border-[var(--background-modifier-border-hover)] px-2",r,t].filter(Boolean).join(" "),F=["absolute right-0 top-full z-[999] mt-1 min-w-[10rem] overflow-hidden rounded-md border border-[var(--background-modifier-border-hover)] bg-[var(--background-primary)] shadow-lg py-1","divide-y divide-[var(--background-modifier-border-hover)]"].join(" ");(0,vn.useEffect)(()=>{var S;if(!u)return;let A=(S=d.current)==null?void 0:S.querySelectorAll('button[role="menuitem"]:not(:disabled)'),x=A&&A.length>0?A[0]:null;x&&requestAnimationFrame(()=>x.focus())},[u]);let N=(0,vn.useCallback)(A=>{var D;let x=(D=d.current)==null?void 0:D.querySelectorAll('button[role="menuitem"]:not(:disabled)');if(!x||x.length===0)return;let S=x[A];S&&S.focus()},[]),_=(0,vn.useCallback)(A=>{var $;let x=($=d.current)==null?void 0:$.querySelectorAll('button[role="menuitem"]:not(:disabled)'),S=x?Array.from(x):[];if(S.length===0)return;let D=document.activeElement,M=D?S.indexOf(D):-1,B=0,G=S.length-1;switch(A.key){case"Escape":A.preventDefault(),b();break;case"ArrowDown":A.preventDefault(),N(M===-1||M===G?B:M+1);break;case"ArrowUp":A.preventDefault(),N(M===-1||M===B?G:M-1);break;case"Home":A.preventDefault(),N(B);break;case"End":A.preventDefault(),N(G);break;case"Tab":b();break;default:break}},[b,N,e]);return(0,Na.jsxs)("div",{ref:p,className:E,children:[(0,Na.jsx)(Me,{...m,...k,disabled:o,className:C,fullWidth:e.length===0?a:!1,iconClassName:l,onClick:w,children:s}),e.length>0&&(0,Na.jsx)(Me,{type:"button",icon:"chevron-down",iconClassName:"mr-0","aria-label":n,"aria-haspopup":"menu","aria-expanded":u,onClick:v,disabled:g||y.length===0,className:L,children:(0,Na.jsx)("span",{className:"sr-only",children:n})}),u&&y.length>0&&(0,Na.jsx)("div",{ref:d,role:"menu","aria-label":n,className:F,onKeyDown:_,children:e.map((A,x)=>{var D,M;let S=Boolean(A.disabled);return(0,Na.jsx)(Me,{type:"button",role:"menuitem",disabled:S,onClick:T(A),variant:"link",fullWidth:!0,icon:A.icon,className:"flex w-full items-center gap-2 px-3 py-2 text-xs text-[var(--text-normal)] hover:bg-[var(--background-modifier-hover)] focus:bg-[var(--background-modifier-hover)] rounded-none",style:{["--link-decoration"]:"none"},children:(0,Na.jsx)("span",{className:"flex-1 text-left",children:A.label})},`${(M=(D=A.label)==null?void 0:D.toString())!=null?M:x}-${x}`)})})]})},kC=Ju;var EC=O(P()),Es=({direction:e="horizontal",thickness:t=1,length:n="100%",className:i,style:o,spacing:a,spacingBefore:r,spacingAfter:s})=>{let l=e==="horizontal",c=l?{width:n,height:t,background:"var(--setting-item-border-color)"}:{width:t,height:n,background:"var(--setting-item-border-color)"},u=b=>Number.isInteger(b)&&b>=0,f=[];if(a!==void 0){if(!u(a))throw new Error("spacing must be a non-negative integer");f.push(l?`my-${a}`:`mx-${a}`)}if(r!==void 0){if(!u(r))throw new Error("spacingBefore must be a non-negative integer");f.push(l?`mt-${r}`:`ml-${r}`)}if(s!==void 0){if(!u(s))throw new Error("spacingAfter must be a non-negative integer");f.push(l?`mb-${s}`:`mr-${s}`)}let p=[f.join(" "),i].filter(Boolean).join(" "),d=.25,h=b=>`${b*d}rem`,m={};if(a!==void 0){let b=h(a);l?(m.marginTop=b,m.marginBottom=b):(m.marginLeft=b,m.marginRight=b)}if(r!==void 0){let b=h(r);l?m.marginTop=b:m.marginLeft=b}if(s!==void 0){let b=h(s);l?m.marginBottom=b:m.marginRight=b}return(0,EC.jsx)("div",{className:p,style:{...c,...m,...o},"aria-hidden":!0})};var Cr=O(fe()),Bb=require("obsidian");var wn=O(fe()),kr=require("obsidian");var CC="audio/webm",Rb=()=>new Array(12).fill(0),Ob=class{constructor(t){this.listeners=new Set;this.mediaRecorder=null;this.audioContext=null;this.analyser=null;this.mediaStream=null;this.animationFrame=null;this.successTimeout=null;this.chunks=[];this.state={status:"idle",levels:Rb(),errorMessage:null};this.getState=()=>({status:this.state.status,levels:[...this.state.levels],errorMessage:this.state.errorMessage});this.subscribe=t=>(this.listeners.add(t),t(this.getState()),()=>{this.listeners.delete(t)});this.start=async()=>{var t;if(!(this.state.status==="recording"||this.state.status==="processing")){if(!((t=navigator==null?void 0:navigator.mediaDevices)!=null&&t.getUserMedia)){this.setState({status:"error",errorMessage:"Microphone access is not supported in this environment."});return}try{await this.options.onStart()}catch(n){this.setState({status:"error",errorMessage:n instanceof Error?n.message:"Unable to start recording"});return}try{this.setState({status:"idle",errorMessage:null});let n=await navigator.mediaDevices.getUserMedia({audio:!0}),i=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":CC,o=new MediaRecorder(n,{mimeType:i});this.mediaRecorder=o,this.mediaStream=n,this.chunks=[],o.addEventListener("dataavailable",a=>{a.data&&a.data.size>0&&this.chunks.push(a.data)}),o.addEventListener("stop",()=>{this.handleRecordingStop()},{once:!0}),this.startVisualizer(n),o.start(),this.setState({status:"recording",errorMessage:null})}catch(n){this.options.onAbort(),this.cleanupRecording(),this.setState({status:"error",errorMessage:n instanceof Error?n.message:"Microphone permission denied"})}}};this.stop=()=>{if(this.mediaRecorder)try{this.mediaRecorder.stop()}catch(t){console.error("Mondo: failed to stop recorder",t),this.cleanupRecording(),this.setState({status:"error",errorMessage:"Unable to stop recording"})}};this.reset=()=>{var t;if(this.state.status==="recording")try{(t=this.mediaRecorder)==null||t.stop()}catch(n){console.error("Mondo: failed to stop recorder during reset",n)}this.cleanupRecording(),this.setState({status:"idle",levels:Rb(),errorMessage:null}),this.options.onAbort()};this.setState=t=>{var n;this.state={status:(n=t.status)!=null?n:this.state.status,levels:t.levels?[...t.levels]:this.state.levels,errorMessage:t.errorMessage!==void 0?t.errorMessage:this.state.errorMessage},this.emit()};this.emit=()=>{let t=this.getState();this.listeners.forEach(n=>{try{n(t)}catch(i){console.error("Mondo: dictation listener failed",i)}})};this.stopAnimation=()=>{this.animationFrame!==null&&(cancelAnimationFrame(this.animationFrame),this.animationFrame=null)};this.resetVisualizer=()=>{this.stopAnimation(),this.setState({levels:Rb()})};this.cleanupRecording=()=>{this.stopAnimation();let t=this.mediaRecorder;if(t)try{t.stream.getTracks().forEach(a=>a.stop())}catch(a){console.error("Mondo: failed to stop recorder tracks",a)}let n=this.mediaStream;if(n)try{n.getTracks().forEach(a=>a.stop())}catch(a){console.error("Mondo: failed to stop media stream",a)}this.mediaRecorder=null,this.mediaStream=null,this.chunks=[];let i=this.analyser;if(i)try{i.disconnect()}catch(a){console.error("Mondo: failed to disconnect analyser",a)}this.analyser=null;let o=this.audioContext;if(o)try{o.close()}catch(a){console.error("Mondo: failed to close audio context",a)}this.audioContext=null,this.successTimeout!==null&&(window.clearTimeout(this.successTimeout),this.successTimeout=null)};this.updateLevels=()=>{let t=this.analyser;if(!t)return;let n=t.frequencyBinCount,i=new Uint8Array(n);t.getByteFrequencyData(i);let o=Math.max(1,Math.floor(n/12)),a=new Array(12).fill(0).map((r,s)=>{let l=s*o,c=Math.min(l+o,n),u=0;for(let p=l;p<c;p+=1)u+=i[p];let f=u/Math.max(1,c-l);return Math.max(0,Math.min(1,f/255))});this.setState({levels:a}),this.animationFrame=requestAnimationFrame(this.updateLevels)};this.startVisualizer=t=>{try{let n=new AudioContext,i=n.createMediaStreamSource(t),o=n.createAnalyser();o.fftSize=2048,i.connect(o),this.audioContext=n,this.analyser=o,this.updateLevels()}catch(n){console.error("Mondo: failed to initialize visualizer",n),this.resetVisualizer()}};this.handleRecordingStop=async()=>{var n;let t=new Blob(this.chunks,{type:((n=this.mediaRecorder)==null?void 0:n.mimeType)||CC});if(this.cleanupRecording(),t.size===0){this.setState({status:"idle",errorMessage:"No audio captured. Try again."}),this.options.onAbort();return}try{this.setState({status:"processing",errorMessage:null}),await this.options.onSubmit(t),this.setState({status:"success",errorMessage:null}),this.successTimeout=window.setTimeout(()=>{this.resetVisualizer(),this.setState({status:"idle",errorMessage:null})},1200)}catch(i){if(i instanceof DOMException&&i.name==="AbortError"||i instanceof Error&&i.name==="AbortError"||i instanceof Error&&/abort|cancel/i.test(i.message)){this.resetVisualizer(),this.setState({status:"idle",errorMessage:null});return}console.error("Mondo: voice submission failed",i),this.setState({status:"error",errorMessage:i instanceof Error?i.message:"Failed to process recording"}),this.resetVisualizer()}};this.options=t}},Op=Ob;var rO="gpt-4o-mini-transcribe",sO="gpt-5-nano",lO="https://api.openai.com/v1/responses",cO="https://api.openai.com/v1/audio/transcriptions",MC=async e=>{var t;try{let n=await e.json(),i=typeof(n==null?void 0:n.error)=="object"&&n.error&&"message"in n.error?String((t=n.error.message)!=null?t:""):typeof(n==null?void 0:n.message)=="string"?n.message:null;return i&&i.trim()?i.trim():e.statusText}catch(n){return e.statusText||"Request failed"}},uO=e=>{if(!Array.isArray(e))return null;for(let t of e){if(!t||typeof t!="object")continue;let n=t;if(typeof n.text=="string"&&n.text.trim())return n.text.trim();if(Array.isArray(n.content))for(let i of n.content){if(!i||typeof i!="object")continue;let o=i;if(typeof o.text=="string"&&o.text.trim())return o.text.trim();if(typeof o.value=="string"&&o.value.trim())return o.value.trim()}}return null},dO=e=>{if(typeof e.output_text=="string"&&e.output_text.trim())return e.output_text.trim();let t=[e.output,e.content,e.data];for(let n of t){let i=uO(n);if(i)return i}return""},Fb=class{constructor(t){this.getApiKey=()=>{var n;let t=(n=this.plugin.settings)==null?void 0:n.openAIWhisperApiKey;return typeof t!="string"?"":t.trim()};this.hasApiKey=()=>Boolean(this.getApiKey());this.getSelectedModel=()=>{var n;let t=(n=this.plugin.settings)==null?void 0:n.openAIModel;return typeof t!="string"||!t.trim()?sO:t.trim()};this.isPolishEnabled=()=>{var n;return((n=this.plugin.settings)==null?void 0:n.openAITranscriptionPolishEnabled)!==!1};this.ensureApiKey=()=>{let t=this.getApiKey();if(!t)throw new Error("Set your OpenAI API key in the Mondo settings.");return t};this.transcribe=async(t,n={})=>{let i=this.ensureApiKey(),o=new FormData;o.append("model",rO),o.append("file",t,"voice-note.webm");let a=await fetch(cO,{method:"POST",headers:{Authorization:`Bearer ${i}`},body:o,signal:n.signal});if(!a.ok){let l=await MC(a);throw new Error(l||"Transcription request failed.")}let r=await a.json(),s=typeof r.text=="string"?r.text.trim():"";if(!s)throw new Error("Received an empty transcription result.");return s};this.polish=async(t,n={})=>{let i=this.ensureApiKey(),o=this.getSelectedModel(),a=`You are an expert transcription curator.
Take this raw voice transcript and polish it from the classic vocalization issues.
Make the minimum intervention possible.

TRANSCRIPT:
${t}`,r=await fetch(lO,{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json"},body:JSON.stringify({model:o,input:a}),signal:n.signal});if(!r.ok){let c=await MC(r);throw new Error(c||"Model request failed.")}let s=await r.json(),l=dO(s).trim();if(!l)throw new Error("The model did not return any text.");return l};this.process=async(t,n={})=>{let i=await this.transcribe(t,n);return this.isPolishEnabled()?this.polish(i,n):i};this.plugin=t}},Fp=Fb;var _p=require("obsidian"),Ho="mondo-dictation-mic",fO=`
<svg
  xmlns="http://www.w3.org/2000/svg"
  viewBox="0 0 24 24"
  fill="none"
  stroke="currentColor"
  stroke-width="2"
  stroke-linecap="round"
  stroke-linejoin="round"
>
  <path d="M12 19v3" />
  <path d="M19 10v2a7 7 0 0 1-14 0v-2" />
  <rect x="9" y="2" width="6" height="13" rx="3" />
</svg>
`,_b=!1,Sr=()=>{if(!_b){if((0,_p.getIcon)(Ho)){_b=!0;return}(0,_p.addIcon)(Ho,fO.trim()),_b=!0}};var Xl=O(P());Sr();var pO=(e,t)=>{let n=Object.getOwnPropertyDescriptor(window.HTMLInputElement.prototype,"value"),i=n==null?void 0:n.set;i?i.call(e,t):e.value=t,e.dispatchEvent(new Event("input",{bubbles:!0}))},mO=e=>e==="recording"?Ho:e==="processing"?"loader-2":e==="success"?"check":e==="error"?"alert-circle":Ho,hO=e=>e==="recording"?"Stop voice capture":e==="processing"?"Processing voice capture":e==="success"?"Voice capture inserted":e==="error"?"Retry voice capture":"Start voice capture",xC=(0,wn.forwardRef)(({className:e="setting-input flex-1",whisper:t=!0,disabled:n,readOnly:i,...o},a)=>{var $,te,j,me,W,ae;let r=pe(),s=(0,wn.useRef)(null),l=(0,wn.useRef)(null),c=(0,wn.useRef)(null),u=(0,wn.useRef)(null),f=(0,wn.useRef)(null),[p,d]=(0,wn.useState)(null),h=(0,wn.useCallback)(Q=>{s.current=Q,typeof a=="function"?a(Q):a&&(a.current=Q)},[a]),m=(0,wn.useCallback)(()=>{let Q=Eb(r);return Q?(u.current!==Q&&(u.current=Q,f.current=new Fp(Q)),f.current):(u.current=null,f.current=null,null)},[r]),b=(0,wn.useCallback)(()=>{},[]),y=(0,wn.useCallback)(async()=>{let Q=m();if(!Q){let R="Mondo plugin is not ready yet.";throw new kr.Notice(R),new Error(R)}if(!Q.hasApiKey()){let R="Set your OpenAI API key in the Mondo settings.";throw new kr.Notice(R),new Error(R)}},[m]),g=(0,wn.useCallback)(async Q=>{let R=m();if(!R){let z="Mondo plugin is not ready yet.";throw new kr.Notice(z),new Error(z)}let I=s.current;if(!I){let z="Input field is not ready to receive transcription.";throw new kr.Notice(z),new Error(z)}try{let z=await R.process(Q),U=I.value,X=U.length>0&&!/[\s\n]$/.test(U),H=`${U}${X?" ":""}${z}`;pO(I,H),requestAnimationFrame(()=>{let Y=H.length;try{I.setSelectionRange(Y,Y)}catch(le){console.debug("Mondo: unable to set selection range",le)}I.focus({preventScroll:!0})}),new kr.Notice("Transcription inserted into the field.")}catch(z){let U=z instanceof Error?z.message:"Failed to process voice note.";throw new kr.Notice(`Voice capture failed: ${U}`),z instanceof Error?z:new Error(U)}},[m]);(0,wn.useEffect)(()=>{var I,z;if(!t){(I=c.current)==null||I.call(c),c.current=null,(z=l.current)==null||z.reset(),l.current=null,d(null);return}let Q=new Op({onStart:y,onAbort:b,onSubmit:g});l.current=Q;let R=Q.subscribe(U=>{d(U)});return c.current=R,()=>{R(),Q.reset(),l.current=null,c.current=null}},[b,y,g,t]);let v=($=p==null?void 0:p.status)!=null?$:"idle",w=v==="recording",T=v==="processing",k=v==="error",E=v==="success",C=Eb(r),L=Boolean((me=(j=(te=C==null?void 0:C.settings)==null?void 0:te.openAIWhisperApiKey)==null?void 0:j.trim)==null?void 0:me.call(j)),F=C?L?null:"Set your OpenAI API key in the Mondo settings.":"Mondo plugin is not ready yet.",N=hO(v),_=(ae=(W=p==null?void 0:p.errorMessage)!=null?W:F)!=null?ae:N,A=()=>{var I;if(!t)return;let Q=l.current;if(!Q){let z="Voice capture is not available right now.";new kr.Notice(z);return}let R=Q.getState();if(R.status==="recording"){Q.stop();return}R.status!=="processing"&&((I=s.current)==null||I.focus({preventScroll:!0}),Q.start())},x=Boolean(n)||Boolean(i)||!t||T,S=t?"mondo-textfield":void 0,D=t?[e,"mondo-textfield__input"].filter(Boolean).join(" "):e;if(!t)return(0,Xl.jsx)("input",{ref:h,type:"text",className:D,disabled:n,readOnly:i,...o});let M=["mondo-textfield__mic"];w&&M.push("mondo-textfield__mic--recording"),T&&M.push("mondo-textfield__mic--processing"),k&&M.push("mondo-textfield__mic--error"),E&&M.push("mondo-textfield__mic--success");let B=mO(v),G=["mondo-textfield__mic-icon",T?"mondo-voice-fab-icon--spin":void 0].filter(Boolean).join(" ");return(0,Xl.jsxs)("div",{className:S,children:[(0,Xl.jsx)("input",{ref:h,type:"text",className:D,disabled:n,readOnly:i,...o}),(0,Xl.jsx)(Me,{variant:"link",className:M.join(" "),tone:w?"success":"default",type:"button",onClick:A,disabled:x,"aria-label":N,"aria-pressed":w,title:_,style:{textDecorationLine:"none",textDecorationThickness:0,background:"transparent",boxShadow:"none"},icon:B,iconClassName:G})]})});xC.displayName="TextField";var NC=xC;var Er=O(P()),gO=async(e,t)=>{if(!t||e.vault.getAbstractFileByPath(t))return;let i=t.split("/"),o="";for(let a of i)o=o?`${o}/${a}`:a,e.vault.getAbstractFileByPath(o)||await e.vault.createFolder(o)},AC=e=>e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),yO=e=>e.replace(/[\\/]+/g," ").replace(/[:*?"<>|]/g,"").replace(/\s+/g," ").trim(),bO=({iconOnly:e=!1})=>{let t=pe(),[n,i]=(0,Cr.useState)(""),[o,a]=(0,Cr.useState)(!1),r=(0,Cr.useRef)(null),s=(0,Cr.useCallback)(()=>{requestAnimationFrame(()=>{var c;(c=r.current)==null||c.focus({preventScroll:!0})})},[]),l=(0,Cr.useCallback)(async()=>{var f,p,d,h,m;let c=n.trim();if(!c){s();return}let u=(p=(f=t.plugins)==null?void 0:f.getPlugin)==null?void 0:p.call(f,"mondo");if(!u){new Bb.Notice("Mondo plugin is not ready yet"),s();return}a(!0);try{let b=(u==null?void 0:u.settings)||{},y=(d=b.rootPaths)!=null?d:{},g=(h=b.templates)!=null?h:{},v=(m=y[Bn.TASK])!=null?m:"/",w=Bo(v);w&&await gO(t,w);let E=c.split(/\s+/).filter(Boolean).slice(0,10).join(" ")||c,C=yO(E)||"Untitled Task",L=C.endsWith(".md")?C:`${C}.md`,F=j=>w?`${w}/${j}`:j,N=L,_=F(N),A=1;for(;t.vault.getAbstractFileByPath(_);){let j=`-${A}`;N=`${L.replace(/\.md$/i,"")}${j}.md`,_=F(N),A+=1}let S=new Date().toISOString(),D=AC(E)||AC(N.replace(/\.md$/i,""))||`task-${Date.now()}`,M=await Io(t,g,Bn.TASK),B=Po(M!=null?M:"",{title:E,type:Bn.TASK,filename:N,slug:D,date:S});B.trim()||(B=`---
---
`),B.trimStart().startsWith("---")||(B=`---
---
${B.trimStart()}`);let $=`${B.trimEnd()}

${c}
`,te=await t.vault.create(_,$);await t.fileManager.processFrontMatter(te,j=>{let me=j;me.type=Bn.TASK,me.status="quick",me.participants=[],me.date=S}),i(""),s()}catch(b){console.error("QuickTask: failed to create quick task note",b),new Bb.Notice("Failed to create quick task"),s()}finally{a(!1)}},[t,s,n]);return(0,Er.jsx)("form",{className:"w-full",onSubmit:c=>{c.preventDefault(),l()},children:(0,Er.jsxs)(Ql,{direction:"row",align:"center",gap:2,py:0,children:[(0,Er.jsx)(NC,{ref:r,className:"setting-input flex-1 min-w-0",placeholder:"Quick task...",value:n,onChange:c=>i(c.target.value),disabled:o,onKeyDown:c=>{c.key==="Enter"&&(c.preventDefault(),c.stopPropagation(),l())}}),(0,Er.jsxs)(Me,{className:"mod-cta justify-center "+(e?"w-10":"w-12 sm:w-28"),type:"submit","aria-label":"Add task",disabled:o||!n.trim(),children:[(0,Er.jsx)(Ze,{name:"send",className:"w-5 h-5 mr-0"}),!e&&(0,Er.jsx)("span",{className:"hidden sm:inline",children:"Add Task"})]})]})})},DC=bO;var Mi=O(fe()),Wu=O(P()),RC=1e3,Ib=60*RC,OC=60*Ib,vO=24*OC,wO=e=>{if(e instanceof Date)return Number.isNaN(e.getTime())?{date:null,raw:null}:{date:e,raw:e.toISOString()};if(typeof e=="number"){if(!Number.isFinite(e)||e<=0)return{date:null,raw:null};let t=new Date(e);return Number.isNaN(t.getTime())?{date:null,raw:null}:{date:t,raw:t.toISOString()}}if(typeof e=="string"){let t=e.trim();if(!t)return{date:null,raw:null};let n=new Date(t);if(!Number.isNaN(n.getTime()))return{date:n,raw:t};let i=t.includes("T")?t:`${t}T00:00`,o=new Date(i);return Number.isNaN(o.getTime())?{date:null,raw:t}:{date:o,raw:t}}return{date:null,raw:null}},LC=e=>new Date(e.getFullYear(),e.getMonth(),e.getDate()),TO=(e,t)=>{let n=e.getTime()-t,i=n>0,o=Math.abs(n),a=Math.round(o/RC);if(a<=5)return i?"in a few seconds":"just now";if(a<60){let u=`${a} sec`;return i?`in ${u}`:`${u} ago`}if(o<5*Ib)return i?"in a few minutes":"a few minutes ago";if(o<OC){let f=`${Math.round(o/Ib)} min`;return i?`in ${f}`:`${f} ago`}let r=new Date(t),s=LC(r).getTime(),l=LC(e).getTime(),c=Math.round((l-s)/vO);return c===0?new Intl.DateTimeFormat(void 0,{hour:"2-digit",minute:"2-digit",hour12:!1}).format(e):c===-1?"yesterday":c===1?"tomorrow":Math.abs(c)<7?new Intl.DateTimeFormat(void 0,{weekday:"long"}).format(e):r.getFullYear()===e.getFullYear()?new Intl.DateTimeFormat(void 0,{month:"short",day:"numeric"}).format(e):new Intl.DateTimeFormat(void 0,{year:"numeric",month:"short",day:"numeric"}).format(e)},SO=e=>new Intl.DateTimeFormat(void 0,{dateStyle:"full",timeStyle:"short"}).format(e),kO=(e,t)=>typeof e.addEventListener=="function"?(e.addEventListener("change",t),()=>e.removeEventListener("change",t)):typeof e.addListener=="function"?(e.addListener(t),()=>e.removeListener(t)):()=>{},cn=({value:e,fallback:t="\u2014",className:n,extraHint:i})=>{let{date:o,raw:a}=(0,Mi.useMemo)(()=>wO(e),[e]),[r,s]=(0,Mi.useState)(()=>Date.now()),[l,c]=(0,Mi.useState)(!1),[u,f]=(0,Mi.useState)(!1),[p,d]=(0,Mi.useState)(!1),h=(0,Mi.useId)();(0,Mi.useEffect)(()=>{if(typeof window=="undefined")return;let E=window.setInterval(()=>{s(Date.now())},3e4);return()=>{window.clearInterval(E)}},[]),(0,Mi.useEffect)(()=>{if(typeof window=="undefined"||typeof window.matchMedia!="function")return;let E=window.matchMedia("(hover: hover) and (pointer: fine)"),C=F=>{c(F.matches)};c(E.matches);let L=kO(E,C);return()=>{L()}},[]),(0,Mi.useEffect)(()=>{l&&d(!1)},[l]);let m=o?TO(o,r):a!=null?a:t,b=o?SO(o):a!=null?a:null,y=[];b&&y.push(b),i&&y.push(i);let g=y.join(" \u2022 "),v=Boolean(g),w=v?l?u:p:!1,T=["relative inline-flex items-center",n].filter(Boolean).join(" "),k=["pointer-events-none absolute left-1/2 top-full z-50 mt-1 -translate-x-1/2 whitespace-nowrap rounded border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg transition-opacity duration-150",w?"opacity-100":"opacity-0"].join(" ");return(0,Wu.jsxs)("span",{className:T,onMouseEnter:()=>{!v||!l||f(!0)},onMouseLeave:()=>{l&&f(!1)},onFocus:()=>{v&&(l?f(!0):d(!0))},onBlur:()=>{f(!1),d(!1)},onClick:()=>{!v||l||d(E=>!E)},role:v?"button":void 0,"aria-describedby":v?h:void 0,tabIndex:v?0:void 0,children:[(0,Wu.jsx)("span",{children:m}),v?(0,Wu.jsx)("span",{id:h,className:k,role:"tooltip",children:g}):null]})};var Rt=O(P()),FC=({collapsed:e,state:t})=>{let{tasks:n,isLoading:i,toggleTask:o,promoteTask:a,canAssignToSelf:r=!1}=t,[s,l]=(0,Jl.useState)(5),[c,u]=(0,Jl.useState)({}),f=n.slice(0,s),p=n.length>s,d=(0,Jl.useCallback)((m,b)=>{u(y=>{if(b)return y[m]?y:{...y,[m]:!0};if(!y[m])return y;let g={...y};return delete g[m],g})},[]),h=(0,Jl.useCallback)(async(m,b)=>{if(!(b==="task"&&!r)){d(m.id,!0);try{await a(m,b)}finally{d(m.id,!1)}}},[r,a,d]);return(0,Rt.jsx)(so,{icon:"list-checks",collapsible:!0,collapsed:e,collapseOnHeaderClick:!0,actions:[{content:(0,Rt.jsx)("div",{className:"flex-1 min-w-0",children:(0,Rt.jsx)(DC,{iconOnly:!0})})}],children:i?(0,Rt.jsx)(Mt,{variant:"body",className:"text-sm text-[var(--text-muted)]",children:"Loading inbox tasks..."}):n.length===0?(0,Rt.jsx)(Mt,{variant:"body",className:"text-sm text-[var(--text-muted)]",children:"No open tasks in Inbox."}):(0,Rt.jsxs)(jt,{direction:"column",gap:2,className:"w-full",children:[f.map(m=>{let b=[];m.hasExplicitDate||b.push("Date inferred from note creation"),m.hasExplicitTime||b.push("Time inferred from note creation");let y=b.length>0?b.join(" \u2022 "):null,g=Boolean(c[m.id]),v=m.text||m.fileName;return(0,Rt.jsx)("div",{className:"rounded-sm border border-transparent p-2 hover:border-[var(--background-modifier-border-hover)] hover:bg-[var(--background-modifier-hover)]",children:(0,Rt.jsxs)(jt,{direction:"row",align:"start",justify:"space-between",gap:3,className:"w-full",children:[(0,Rt.jsxs)(jt,{direction:"row",align:"start",gap:2,className:"flex-1 min-w-0",children:[(0,Rt.jsx)("input",{type:"checkbox",className:"mt-1 h-4 w-4 shrink-0 accent-[var(--interactive-accent)]",checked:!1,disabled:g,onChange:()=>{g||o(m)},"aria-label":`Complete task "${v}"`}),(0,Rt.jsxs)(jt,{direction:"column",gap:1,className:"flex-1 min-w-0",children:[(0,Rt.jsx)("div",{className:"max-w-full overflow-x-auto",children:(0,Rt.jsx)(bs,{to:m.filePath,className:"block w-full whitespace-nowrap text-sm font-medium text-[var(--text-accent)] hover:underline",children:v})}),(0,Rt.jsx)(Mt,{variant:"body",className:"text-xs text-[var(--text-muted)]",children:(0,Rt.jsx)(cn,{value:m.occurredAt,fallback:"\u2014",extraHint:y})})]})]}),(0,Rt.jsx)(jt,{direction:"row",gap:1,className:"shrink-0",children:(0,Rt.jsx)(kC,{type:"button",className:"text-xs px-2 py-1",toggleClassName:"text-xs px-1 py-1",disabled:g,onClick:r?()=>{g||h(m,"task")}:void 0,icon:"check-square",menuAriaLabel:"Promote inbox task",primaryOpensMenu:!r,secondaryActions:[{label:"project",icon:"folder-git-2",disabled:g,onSelect:()=>{g||h(m,"project")}},{label:"log",icon:"file-clock",disabled:g,onSelect:()=>{g||h(m,"log")}}],children:r?"task":"convert"})})]})},m.id)}),p&&(0,Rt.jsxs)("div",{className:"flex w-full flex-col gap-2 pt-1",children:[(0,Rt.jsx)(Es,{}),(0,Rt.jsx)(Me,{type:"button",variant:"link",fullWidth:!0,className:"text-xs px-2 py-2","aria-label":"Load more inbox tasks",onClick:()=>{l(m=>m+5)},children:"Load more"})]})]})})},Pb=({collapsed:e=!1,state:t})=>{if(t)return(0,Rt.jsx)(FC,{collapsed:e,state:t});let n=SC();return(0,Rt.jsx)(FC,{collapsed:e,state:n})};var _C=O(P()),zb=({enabled:e})=>e?(0,_C.jsx)(Pb,{collapsed:!1}):null;var Pn=O(fe());var Bp=O(fe()),IC=O(P()),EO=e=>Bp.default.isValidElement(e),CO=({children:e,className:t,...n})=>{let o=["mondo-button-group",t].filter(Boolean).join(" "),a=Bp.default.Children.toArray(e).filter(EO);return(0,IC.jsx)("div",{className:o,...n,children:a.map((r,s)=>{let l=s===0,c=s===a.length-1,u=[r.props.className,"mondo-button-group__button",l?"mondo-button-group__button--first":null,c?"mondo-button-group__button--last":null,!l&&!c?"mondo-button-group__button--middle":null].filter(Boolean).join(" ");return Bp.default.cloneElement(r,{className:u})})})},BC=CO;var zC=O(fe()),Cs=O(P()),PC=e=>["text-xs","uppercase","tracking-wide",e?"text-[var(--text-normal)] font-semibold":"text-[var(--text-muted)]"].join(" "),MO=({checked:e,onCheckedChange:t,id:n,className:i,checkedLabel:o="On",uncheckedLabel:a="Off",disabled:r,...s})=>{let l=zC.default.useCallback(()=>{r||t(!e)},[e,r,t]);return(0,Cs.jsxs)("button",{type:"button",id:n,role:"switch","aria-checked":e,...s,className:["flex items-center gap-2",i].filter(Boolean).join(" "),onClick:l,onKeyDown:c=>{(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),l())},disabled:r,children:[(0,Cs.jsx)("span",{className:PC(!e),children:a}),(0,Cs.jsx)("span",{className:["relative inline-flex h-4 w-8 items-center rounded-full border border-[var(--background-modifier-border)]",e?"bg-[var(--interactive-accent)]":"bg-[var(--background-modifier-border)]"].filter(Boolean).join(" "),"aria-hidden":"true",children:(0,Cs.jsx)("span",{className:["absolute left-1 top-1/2 h-3 w-3 -translate-y-1/2 rounded-full bg-[var(--background-primary)] shadow transition-transform",e?"translate-x-3":"translate-x-0"].filter(Boolean).join(" ")})}),(0,Cs.jsx)("span",{className:PC(e),children:o})]})},Ip=MO;var Ub=O(fe());var HC="file-text",xO=e=>{if(Array.isArray(e))return e.filter(t=>typeof t=="string").map(t=>t.trim()).filter(t=>t.length>0);if(typeof e=="string"){let t=e.trim();if(t.length>0)return[t]}return[]},VC=(e,t,n)=>{var l,c;let i=e.trim();if(!i)return{file:null,alias:null};i.startsWith("[[")&&i.endsWith("]]")&&(i=i.slice(2,-2));let[o,a]=i.split("|"),r=(c=(l=o.split("#")[0])==null?void 0:l.trim())!=null?c:"";if(!r)return{file:null,alias:null};let s=t.metadataCache.getFirstLinkpathDest(r,n);return s?{file:s,alias:a?a.trim():null}:{file:null,alias:null}},UC=(e,t)=>{var o,a;let n=t.metadataCache.getFileCache(e),i=(o=n==null?void 0:n.frontmatter)==null?void 0:o.type;if(typeof i=="string"){let r=i.trim().toLowerCase();if(Nt(r)){let s=en(r);return{type:r,icon:(a=s==null?void 0:s.icon)!=null?a:HC}}}return{type:null,icon:HC}},$C=(e,t,n,i)=>{var a;if(t&&t.length>0)return t;let o=n.metadataCache.fileToLinktext(e,i,!1);return o&&o.length>0?o:(a=e.basename)!=null?a:e.name},Wl=(e,t,n,i)=>{let o=xO(e);if(!o.length)return[];let a=new Set,r=[];return o.forEach(s=>{let{file:l,alias:c}=VC(s,t,n);if(!l||i.has(l.path)||a.has(l.path))return;a.add(l.path);let{type:u,icon:f}=UC(l,t),p=$C(l,c,t,n);r.push({path:l.path,label:p,icon:f,type:u,count:1})}),r},Pp=(e,t,n,i)=>{if(!e)return[];let o=Array.isArray(e)?e:[e],a=[],r=new Set;return o.forEach(s=>{var h,m;let l=null;if(typeof s=="string"){let b=s.trim();b.length>0&&(l=b)}else if(s&&typeof s=="object"){let b=s,y=(m=(h=b.link)!=null?h:b.raw)!=null?m:b.value;if(typeof y=="string"){let g=y.trim();g.length>0&&(l=g)}}if(!l)return;let{file:c,alias:u}=VC(l,t,n);if(!c||i.has(c.path)||r.has(c.path))return;r.add(c.path);let{type:f,icon:p}=UC(c,t),d=$C(c,u,t,n);a.push({path:c.path,label:d,icon:p,type:f,count:1})}),a};var jC=e=>Boolean(e)&&typeof e=="object"&&!Array.isArray(e),zp=e=>{var a,r,s,l,c,u,f,p,d,h,m;if(!e)return{created:void 0,changed:void 0,opened:void 0};let t=e,n,i,o;if(jC(t.mondoState)){let b=t.mondoState;if(b.created!==void 0&&(n=b.created),b.changed!==void 0&&(i=b.changed),b.opened!==void 0&&(o=b.opened),jC(b.dailyNote)){let y=b.dailyNote;n===void 0&&(n=(r=(a=y.created)!=null?a:y.createdToday)!=null?r:void 0),i===void 0&&(i=(c=(l=(s=y.changed)!=null?s:y.changedToday)!=null?l:y.modifiedToday)!=null?c:void 0),o===void 0&&(o=(f=(u=y.opened)!=null?u:y.openedToday)!=null?f:void 0)}}return n===void 0&&(n=(p=t.createdToday)!=null?p:void 0),i===void 0&&(i=(h=(d=t.changedToday)!=null?d:t.modifiedToday)!=null?h:void 0),o===void 0&&(o=(m=t.openedToday)!=null?m:void 0),{created:n,changed:i,opened:o}};var YC=e=>{let t=e.file.stat,n=[t==null?void 0:t.mtime,t==null?void 0:t.ctime].filter(i=>typeof i=="number"&&Number.isFinite(i));return n.length===0?0:Math.max(...n)},GC=e=>{let t=e.match(/\d{4}-\d{2}-\d{2}/);return t?t[0]:null},qC=e=>{if(!e)return null;if(e instanceof Date)return Number.isNaN(e.getTime())?null:e.toISOString().slice(0,10);if(typeof e=="number"&&Number.isFinite(e))return new Date(e).toISOString().slice(0,10);if(typeof e=="string"){let t=e.trim();if(!t)return null;let n=GC(t);if(n)return n;let i=Date.parse(t);return Number.isNaN(i)?t:new Date(i).toISOString().slice(0,10)}return null},Hb=(e,t)=>t?e?t>e?t:e:t:e,NO=(e,t)=>{let n=e.get(t.path);if(n)return n;let i={path:t.path,label:t.label,icon:t.icon,type:t.type,counts:{created:0,modified:0,opened:0},lastCreated:null,lastModified:null,lastOpened:null};return e.set(t.path,i),i},Vb=(e,t,n,i)=>{let o=NO(e,t);if(o.counts[n]+=t.count,n==="created"){o.lastCreated=Hb(o.lastCreated,i);return}if(n==="modified"){o.lastModified=Hb(o.lastModified,i);return}o.lastOpened=Hb(o.lastOpened,i)},KC=(e=10)=>{let t=pe(),n=ro(_n),i=ro(Ea),o=(0,Ub.useMemo)(()=>{if(i.length===0)return n;let a=new Map;return n.forEach(r=>{a.set(r.file.path,r)}),i.forEach(r=>{a.has(r.file.path)||a.set(r.file.path,r)}),Array.from(a.values())},[n,i]);return(0,Ub.useMemo)(()=>{if(!t)return[];let a=[...o].sort((l,c)=>YC(c)-YC(l)).slice(0,e),r=new Map;a.forEach(l=>{var v,w,T,k;let c=l.file.path,u=(v=l.cache)==null?void 0:v.frontmatter;if(!u)return;let f=(k=(w=qC(u.date))!=null?w:GC(l.file.basename))!=null?k:qC((T=l.file.stat)==null?void 0:T.mtime),p=new Set([c]),d=zp(u),h=Wl(d.created,t,c,p),m=new Set(h.map(E=>E.path)),b=new Set([...p,...m]),y=Wl(d.changed,t,c,b),g=Pp(d.opened,t,c,p);h.forEach(E=>Vb(r,E,"created",f)),y.forEach(E=>Vb(r,E,"modified",f)),g.forEach(E=>Vb(r,E,"opened",f))});let s=Array.from(r.values());return s.sort((l,c)=>{let u=c.counts.created+c.counts.modified+c.counts.opened,f=l.counts.created+l.counts.modified+l.counts.opened;return u!==f?u-f:l.label.localeCompare(c.label)}),s},[t,o,e])};var Hp=O(fe());var AO={},DO=e=>{var i,o,a;let n=((o=(i=e.cache)==null?void 0:i.frontmatter)!=null?o:AO).show;if(typeof n=="string"){let r=n.trim();if(r.length>0)return r}return(a=e.file.basename)!=null?a:e.file.name},LO=e=>{let t=e.file.stat,n=[typeof(t==null?void 0:t.mtime)=="number"?t.mtime:0,typeof(t==null?void 0:t.ctime)=="number"?t.ctime:0].filter(i=>Number.isFinite(i)&&i>0);return n.length===0?Date.now():Math.max(...n)},RO=(e,t)=>{let n=LO(e);return{path:e.file.path,label:DO(e),type:t,modified:new Date(n)}},OO=(e,t,n)=>{let o=(n?[n]:qn).flatMap(s=>e.getFiles(s).map(l=>RO(l,s)));o.sort((s,l)=>l.modified.getTime()-s.modified.getTime());let a=t>0&&o.length>t;return{notes:a?o.slice(0,t):o,total:o.length,hasMore:a}},QC=(e=10,t)=>{let n=pe(),[i,o]=(0,Hp.useState)({notes:[],total:0,hasMore:!1});return(0,Hp.useEffect)(()=>{let a=Gn.getInstance(n),r=()=>{o(OO(a,e,t))};r();let s=l=>{r()};return a.addListener(s),()=>{a.removeListener(s)}},[n,e,t]),i};var Le=O(P()),FO=e=>e===1?"references 1 time":`references ${e} times`,XC=e=>{if(!e)return null;let t=e.trim();if(!t)return null;let n=t.match(/\d{4}-\d{2}-\d{2}/);if(n)return n[0];let i=Date.parse(t);return Number.isNaN(i)?t:new Date(i).toISOString().slice(0,10)},$b=e=>e.counts.created+e.counts.modified+e.counts.opened,jb=({collapsed:e=!1})=>{let[t,n]=(0,Pn.useState)(null),[i,o]=(0,Pn.useState)("hits"),[a,r]=(0,Pn.useState)(5),[s,l]=(0,Pn.useState)(5),c=KC(25),{notes:u,hasMore:f}=QC(s,t),p=(0,Pn.useMemo)(()=>{let k=[...t?c.filter(E=>E.type===t):c];return k.sort((E,C)=>{let L=$b(C),F=$b(E);return L!==F?L-F:E.label.localeCompare(C.label)}),k},[c,t]),d=(0,Pn.useMemo)(()=>p.slice(0,a),[p,a]),h=p.length>a;(0,Pn.useEffect)(()=>{r(5),l(5)},[t]),(0,Pn.useEffect)(()=>{i==="hits"?r(5):l(5)},[i]);let m=(0,Pn.useCallback)(T=>{n(k=>k===T?null:T)},[]),b=(0,Pn.useCallback)(T=>{o(T?"history":"hits")},[]),y=(0,Pn.useCallback)(()=>{if(i==="history"){l(T=>T+5);return}r(T=>T+5)},[i]),g=i==="history"?f:h,v=(0,Pn.useMemo)(()=>vs.relevantNotes.filter.order.map(T=>{let k=xt[T];return k?{type:T,icon:k.icon,label:k.name}:null}).filter(Boolean),[]),w=i==="history"?"No Mondo notes found yet.":"No referenced notes found yet.";return(0,Le.jsx)(so,{title:"Relevant Notes",icon:"target",collapsible:!0,collapsed:e,collapseOnHeaderClick:!0,actions:[{key:"mode-toggle",content:(0,Le.jsx)(Ip,{checked:i==="history",onCheckedChange:b,uncheckedLabel:"hits",checkedLabel:"history","aria-label":"Toggle relevant notes mode"})}],children:(0,Le.jsxs)(jt,{direction:"column",gap:3,className:"w-full",children:[(0,Le.jsx)(jt,{className:"gap-2 flex-col sm:flex-row sm:items-center sm:justify-between -mt-2 -mx-2 px-2",children:(0,Le.jsx)("div",{className:"-mx-2 flex-1 overflow-x-auto pb-1",children:(0,Le.jsx)(BC,{className:"mondo-relevant-notes__filters-group flex-nowrap mx-0",children:v.map(T=>{let k=t===T.type;return(0,Le.jsx)(Me,{icon:T.icon,"aria-label":`Filter by ${T.label}`,title:`Filter by ${T.label}`,pressed:k,onClick:()=>m(T.type),className:"h-8 min-w-[2.5rem] justify-center px-3",children:(0,Le.jsx)("span",{className:"sr-only",children:T.label})},T.type)})})})}),(i==="history"?u.length===0:p.length===0)?(0,Le.jsx)(Mt,{variant:"body",className:"text-sm text-[var(--text-muted)]",children:w}):i==="history"?(0,Le.jsxs)(Le.Fragment,{children:[u.map(T=>{var L;let k=en(T.type),E=(L=k==null?void 0:k.name)!=null?L:T.type,C=k==null?void 0:k.icon;return(0,Le.jsxs)("div",{className:"flex flex-col gap-1 rounded-sm border border-transparent p-2 hover:border-[var(--background-modifier-border-hover)] hover:bg-[var(--background-modifier-hover)]",children:[(0,Le.jsxs)(jt,{direction:"row",align:"center",justify:"space-between",children:[(0,Le.jsxs)(jt,{direction:"row",align:"center",gap:1,children:[C&&(0,Le.jsx)(Ze,{name:C}),(0,Le.jsx)(bs,{to:T.path,className:"text-sm font-medium text-[var(--text-accent)] hover:underline",children:T.label})]}),(0,Le.jsx)("span",{className:"text-xs uppercase tracking-wide text-[var(--text-muted)]",children:E})]}),(0,Le.jsxs)("span",{className:"text-xs text-[var(--text-muted)]",children:["Last updated "," ",(0,Le.jsx)(cn,{value:T.modified,fallback:"\u2014"})]})]},T.path)}),g?(0,Le.jsxs)("div",{className:"flex w-full flex-col gap-2 pt-1",children:[(0,Le.jsx)(Es,{}),(0,Le.jsx)(Me,{onClick:y,className:"text-xs px-2 py-2",type:"button",variant:"link",fullWidth:!0,"aria-label":"Load more history notes",children:"Load more"})]}):null]}):(0,Le.jsxs)(Le.Fragment,{children:[d.map(T=>{var _,A,x,S,D,M;let k=T.type?(A=(_=en(T.type))==null?void 0:_.name)!=null?A:T.type:"note",E=$b(T),C=XC(T.lastOpened),L=XC((x=T.lastModified)!=null?x:T.lastCreated),F=[(0,Le.jsx)("span",{children:FO(E)},"references")];C&&L&&C===L?F.push((0,Le.jsxs)("span",{children:["last opened "," ",(0,Le.jsx)(cn,{value:(D=(S=T.lastOpened)!=null?S:T.lastModified)!=null?D:T.lastCreated,fallback:"\u2014"})]},"opened")):(F.push((0,Le.jsxs)("span",{children:["last opened "," ",(0,Le.jsx)(cn,{value:T.lastOpened,fallback:"\u2014"})]},"opened")),F.push((0,Le.jsxs)("span",{children:["last modified "," ",(0,Le.jsx)(cn,{value:(M=T.lastModified)!=null?M:T.lastCreated,fallback:"\u2014"})]},"modified")));let N=F.flatMap((B,G)=>G===0?[B]:[(0,Le.jsx)("span",{children:", "},`sep-${G}`),B]);return(0,Le.jsxs)("div",{className:"flex flex-col gap-1 rounded-sm border border-transparent p-2 hover:border-[var(--background-modifier-border-hover)] hover:bg-[var(--background-modifier-hover)]",children:[(0,Le.jsxs)(jt,{direction:"row",align:"center",justify:"space-between",children:[(0,Le.jsxs)(jt,{direction:"row",align:"center",gap:1,children:[(0,Le.jsx)(Ze,{name:T.icon}),(0,Le.jsx)(bs,{to:T.path,className:"text-sm font-medium text-[var(--text-accent)] hover:underline",children:T.label})]}),(0,Le.jsx)("span",{className:"text-xs uppercase tracking-wide text-[var(--text-muted)]",children:k})]}),(0,Le.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:N})]},T.path)}),g?(0,Le.jsxs)("div",{className:"flex w-full flex-col gap-2 pt-1",children:[(0,Le.jsx)(Es,{}),(0,Le.jsx)(Me,{onClick:y,className:"text-xs px-2 py-2",type:"button",variant:"link",fullWidth:!0,"aria-label":"Load more relevant notes",children:"Load more"})]}):null]})]})})};var Zl=O(fe()),JC=e=>{let t=(0,Zl.useCallback)(()=>typeof window=="undefined"?!1:window.matchMedia(e).matches,[e]),[n,i]=(0,Zl.useState)(()=>t());return(0,Zl.useEffect)(()=>{if(i(t()),typeof window=="undefined")return()=>{};let o=window.matchMedia(e),a=r=>{i(r.matches)};return typeof o.addEventListener=="function"?(o.addEventListener("change",a),()=>{o.removeEventListener("change",a)}):(o.addListener(a),()=>{o.removeListener(a)})},[t,e]),n};var WC=O(P()),Yb=({enabled:e})=>{let t=JC("(min-width: 1024px)");return e?(0,WC.jsx)(jb,{collapsed:!t}):null};var Vp=O(fe());var ec=O(P()),qb=({items:e,onOpen:t})=>{let n=(i,o)=>{(i.key==="Enter"||i.key===" ")&&(i.preventDefault(),t(o))};return(0,ec.jsx)("div",{className:"grid grid-cols-3 gap-3 sm:grid-cols-3 md:grid-cols-4 xl:grid-cols-6",children:e.map(i=>(0,ec.jsxs)("div",{role:"button",tabIndex:0,"aria-label":`Open ${i.title}`,title:`Open ${i.title}`,onClick:()=>t(i.type),onKeyDown:o=>n(o,i.type),className:["aspect-square","flex flex-col items-center justify-center text-center","rounded-md border","bg-[var(--background-primary)]","border-[var(--background-modifier-border)]","hover:bg-[var(--background-modifier-hover)]","cursor-pointer select-none transition-colors","text-[var(--text-normal)]"].join(" "),children:[(0,ec.jsx)(Ze,{name:i.icon,className:"w-8 h-8 mb-2"}),(0,ec.jsx)("div",{className:"text-xs sm:text-sm font-medium leading-tight px-2",children:i.title})]},i.type))})};var Zu=O(P()),Gb=()=>{let e=pe(),t=Zt("dashboard.entityTiles",[]),n=(0,Vp.useMemo)(()=>{var r,s,l;let o=(l=(s=(r=vs)==null?void 0:r.tiles)==null?void 0:s.order)!=null?l:[];return(Array.isArray(t)&&t.length>0?t:o).map(c=>xt[c]).filter(Boolean).map(c=>({type:c.type,icon:c.icon,title:c.name}))},[t]),i=(0,Vp.useCallback)(o=>{let a=o==null?void 0:o.trim();a&&e.commands.executeCommandById(`mondo:open-${a}`)},[e]);return n.length===0?null:(0,Zu.jsxs)("div",{className:"space-y-4",children:[(0,Zu.jsx)(Mt,{variant:"h1",children:"IMS Entities"}),(0,Zu.jsx)(qb,{items:n,onOpen:i})]})};var aM=O(fe());var tc=O(fe());var Kb=e=>e.extension.toLowerCase(),_O=new Set(["png","jpg","jpeg","gif","bmp","webp","svg","tiff"]),BO=new Set(["mp3","wav","m4a","aac","ogg","oga","flac","opus"]),ed=e=>Kb(e)==="md",Ms=e=>_O.has(Kb(e)),Qb=e=>BO.has(Kb(e)),ZC=e=>!ed(e)&&!Ms(e)&&!Qb(e);var IO={notes:{count:0,size:0},images:{count:0,size:0},audio:{count:0,size:0},files:{count:0,size:0},totalSize:0},PO=e=>{var r;let t={count:0,size:0},n={count:0,size:0},i={count:0,size:0},o={count:0,size:0},a=0;for(let s of e){let l=(r=s.stat.size)!=null?r:0;if(a+=l,ed(s)){t={count:t.count+1,size:t.size+l};continue}if(Ms(s)){n={count:n.count+1,size:n.size+l};continue}if(Qb(s)){i={count:i.count+1,size:i.size+l};continue}o={count:o.count+1,size:o.size+l}}return{notes:t,images:n,audio:i,files:o,totalSize:a}},eM=()=>{let e=pe(),[t,n]=(0,tc.useState)(IO),i=(0,tc.useCallback)(()=>{let o=e.vault.getFiles();n(PO(o))},[e]);return(0,tc.useEffect)(()=>{i();let o=[],a=()=>i();return o.push(e.vault.on("create",a)),o.push(e.vault.on("delete",a)),o.push(e.vault.on("modify",a)),o.push(e.vault.on("rename",a)),()=>{for(let r of o)try{e.vault.offref(r)}catch(s){console.debug("useVaultStats: failed to detach vault listener",s)}}},[e,i]),t};var zO=[{limit:1073741824,suffix:"Gb"},{limit:1048576,suffix:"Mb"},{limit:1024,suffix:"kB"}],xi=e=>{if(e<=0)return"0B";for(let t of zO)if(e>=t.limit){let n=e/t.limit;return n>=100?`${n.toFixed(0)}${t.suffix}`:n>=10?`${n.toFixed(1)}${t.suffix}`:`${n.toFixed(2)}${t.suffix}`}return`${e.toFixed(0)}B`};var xs="audio-logs-view",td="file-audio",tM="mondo:open-audio-notes";var nc="vault-images-view",Ns="image",nM="mondo:open-vault-images";var ic="vault-files-view",As="file",iM="mondo:open-vault-files";var oc="vault-notes-view",Ds="file-text",oM="mondo:open-vault-notes";var Aa=O(P()),HO=new Intl.NumberFormat,Xb=()=>{let e=pe(),t=eM(),n=(0,aM.useMemo)(()=>[{key:"notes",label:"Notes",count:t.notes.count,size:t.notes.size,commandId:oM},{key:"images",label:"Images",count:t.images.count,size:t.images.size,commandId:nM},{key:"audio",label:"Audio",count:t.audio.count,size:t.audio.size,commandId:tM},{key:"files",label:"Files",count:t.files.count,size:t.files.size,commandId:iM}],[t]),i=o=>{if(o)try{e.commands.executeCommandById(o)}catch(a){console.debug("VaultStatsCard: failed to execute command",a)}};return(0,Aa.jsxs)(so,{spacing:6,children:[(0,Aa.jsxs)(Mt,{as:"div",className:"mb-6 text-center text-sm font-medium text-[var(--text-muted)]",variant:"body",children:["Total size \u2022 ",xi(t.totalSize)]}),(0,Aa.jsx)("div",{className:"grid gap-6 text-center sm:grid-cols-2 lg:grid-cols-4",children:n.map(o=>(0,Aa.jsxs)("div",{role:"button",tabIndex:0,onClick:()=>i(o.commandId),onKeyDown:a=>{(a.key==="Enter"||a.key===" ")&&(a.preventDefault(),i(o.commandId))},className:"flex cursor-pointer flex-col items-center justify-center gap-3 rounded-md border border-transparent p-4 transition-colors hover:border-[var(--background-modifier-border)] hover:bg-[var(--background-modifier-hover)] focus:border-[var(--background-modifier-border)] focus:bg-[var(--background-modifier-hover)] focus:outline-none",children:[(0,Aa.jsxs)(Mt,{as:"div",className:"text-lg font-semibold text-[var(--text-normal)]",variant:"body",children:[HO.format(o.count)," ",o.label]}),(0,Aa.jsx)("div",{className:"h-px w-12 bg-[var(--background-modifier-border)]"}),(0,Aa.jsx)(Mt,{as:"div",className:"text-sm",variant:"muted",children:xi(o.size)})]},o.key))})]})};var rM=O(P()),Jb=()=>Zt("dashboard.disableStats",!0)?null:(0,rM.jsx)(Xb,{});var lo=O(P()),sM=()=>{let e=Zt("dashboard.enableQuickTasks",!0),t=Zt("dashboard.enableRelevantNotes",!0);return(0,lo.jsxs)("div",{className:"p-4 space-y-6",children:[(0,lo.jsx)(Mt,{variant:"h1",children:"Mondo Dashboard"}),(0,lo.jsx)(kb,{}),(e||t)&&(0,lo.jsxs)("div",{className:"grid grid-cols-1 gap-4 lg:grid-cols-2 lg:items-start",children:[(0,lo.jsx)(zb,{enabled:e}),(0,lo.jsx)(Yb,{enabled:t})]}),(0,lo.jsx)(Db,{}),(0,lo.jsx)(Gb,{}),(0,lo.jsx)(Jb,{})]})};var Wb=O(P()),Da="dashboard-view",nd="globe",Up=class extends lM.ItemView{constructor(n,i){super(n);this.root=null;this.iconName=i}getViewType(){return Da}getDisplayText(){return"Mondo Dashboard"}getIcon(){return this.iconName}async onOpen(){this.contentEl.empty(),this.root=(0,cM.createRoot)(this.contentEl),this.root.render((0,Wb.jsx)(Fn,{app:this.app,children:(0,Wb.jsx)(sM,{})}))}async onClose(){var n;(n=this.root)==null||n.unmount(),this.root=null}};var bM=require("obsidian"),vM=O(Fo());var $e=O(fe());var uM=O(fe()),ac=O(P()),VO=({children:e,className:t="",...n})=>(0,ac.jsx)("div",{style:{overflowX:"auto"},className:`mondo-table-wrapper ${t}`,children:(0,ac.jsx)("table",{className:`mondo-table ${t}`,style:{width:"100%",borderCollapse:"collapse",borderSpacing:0,tableLayout:"fixed"},...n,children:e})}),dM=uM.default.forwardRef(({children:e,...t},n)=>(0,ac.jsx)("tr",{ref:n,...t,children:e}));dM.displayName="TableRow";var UO=({children:e,style:t,...n})=>(0,ac.jsx)("td",{style:{...t},...n,children:e}),$O=({children:e,style:t,...n})=>(0,ac.jsx)("th",{style:{...t},...n,children:e}),Kn=Object.assign(VO,{Row:dM,Cell:UO,HeadCell:$O}),Se=Kn;var zn=require("obsidian");var $p=require("obsidian"),Zb=class{constructor(){this.overlayEl=null;this.backdropEl=null;this.contentEl=null;this.containerEl=null;this.closeButtonEl=null;this.overlayDismissHandler=null;this.wakeLock=null;this.wakeLockReleaseHandler=null;this.handleBackdropClick=t=>{this.overlayDismissHandler&&(t.preventDefault(),t.stopPropagation(),this.overlayDismissHandler())};this.ensureContainer=(t={})=>{var s;if(this.containerEl&&document.body.contains(this.containerEl))return t.className&&(this.containerEl.className=t.className),this.containerEl;let n=document.body.createDiv({cls:"mondo-transcription-overlay"}),i=n.createDiv({cls:"mondo-transcription-overlay__backdrop"});i.setAttr("aria-hidden","true"),i.addEventListener("click",this.handleBackdropClick);let o=n.createDiv({cls:"mondo-transcription-overlay__content"});o.setAttr("role","dialog"),o.setAttr("aria-modal","true");let a=o.createEl("button",{cls:"clickable-icon mondo-transcription-overlay__close"});a.setAttr("type","button"),a.setAttr("aria-label","Dismiss"),a.setAttr("title","Dismiss"),a.toggleAttribute("hidden",!0),(0,$p.setIcon)(a,"x");let r=o.createDiv({cls:(s=t.className)!=null?s:"mondo-transcription-overlay__container"});return this.overlayEl=n,this.backdropEl=i,this.contentEl=o,this.closeButtonEl=a,this.containerEl=r,r};this.setDismissHandler=t=>{this.overlayDismissHandler=t!=null?t:null;let n=this.closeButtonEl;if(n){if(n.onclick=null,!t){n.toggleAttribute("hidden",!0);return}n.toggleAttribute("hidden",!1),n.onclick=i=>{i.preventDefault(),i.stopPropagation(),t()}}};this.clear=()=>{let t=this.containerEl;t&&t.replaceChildren()};this.destroy=()=>{var t,n;(t=this.backdropEl)==null||t.removeEventListener("click",this.handleBackdropClick),(n=this.overlayEl)==null||n.remove(),this.overlayEl=null,this.backdropEl=null,this.contentEl=null,this.containerEl=null,this.closeButtonEl=null,this.overlayDismissHandler=null};this.destroyIfEmpty=()=>{let t=this.containerEl;!t||t.childElementCount>0||this.destroy()};this.acquireWakeLock=async()=>{var i;if(!$p.Platform.isMobileApp||this.wakeLock||typeof navigator=="undefined")return;let n=navigator.wakeLock;if(n!=null&&n.request)try{let o=await n.request("screen"),a=()=>{var r;this.wakeLock===o&&(this.wakeLock=null,this.wakeLockReleaseHandler=null),(r=o.removeEventListener)==null||r.call(o,"release",a)};(i=o.addEventListener)==null||i.call(o,"release",a),this.wakeLock=o,this.wakeLockReleaseHandler=a}catch(o){console.debug("Mondo: unable to acquire wake lock",o)}};this.releaseWakeLock=async()=>{var n;let t=this.wakeLock;if(t)try{await t.release()}catch(i){console.debug("Mondo: unable to release wake lock",i)}finally{this.wakeLockReleaseHandler&&((n=t.removeEventListener)==null||n.call(t,"release",this.wakeLockReleaseHandler)),this.wakeLock=null,this.wakeLockReleaseHandler=null}}}},jp=Zb;var jO="gpt-4o-mini-transcribe",fM="application/octet-stream",pM={aac:"audio/aac",flac:"audio/flac",m4a:"audio/mp4",mp3:"audio/mpeg",ogg:"audio/ogg",wav:"audio/wav",webm:"audio/webm"},rc=new Set(Object.keys(pM)),YO=.3,qO=e=>{var n;if(!e)return fM;let t=e.replace(/^\./,"").toLowerCase();return(n=pM[t])!=null?n:fM},Yp=class{constructor(t){this.activeTranscriptions=new Map;this.renderedEmbeds=new WeakMap;this.transcriptionAlertsContainer=null;this.overlay=new jp;this.audioDurationCache=new Map;this.audioDurationRequests=new Map;this.audioContext=null;this.matchesAudioFrontmatterValue=(t,n,i)=>{if(Array.isArray(i))return i.some(s=>this.matchesAudioFrontmatterValue(t,n,s));if(typeof i!="string")return!1;let o=i.trim();if(!o)return!1;let a=[o],r=o.match(/^\[\[(.+?)\]\]$/);if(r!=null&&r[1]){let[s]=r[1].split("|"),l=s==null?void 0:s.trim();l&&a.push(l)}for(let s of a){if(!s)continue;let l=this.plugin.app.metadataCache.getFirstLinkpathDest(s,t.path);if((l==null?void 0:l.path)===n.path||s===n.path)return!0}return!1};this.findTranscriptionByFrontmatter=t=>{var i,o;let n=this.plugin.app.vault.getMarkdownFiles();for(let a of n){let r=this.plugin.app.metadataCache.getFileCache(a),s=(i=r==null?void 0:r.frontmatter)==null?void 0:i.type;if(typeof s!="string"||s.trim().toLowerCase()!=="transcription")continue;let l=(o=r==null?void 0:r.frontmatter)!=null?o:{};if(this.matchesAudioFrontmatterValue(a,t,l==null?void 0:l.source)||this.matchesAudioFrontmatterValue(a,t,l==null?void 0:l.audio))return a}return null};this.initialize=()=>{};this.dispose=()=>{Array.from(this.activeTranscriptions.keys()).forEach(n=>{let i=this.activeTranscriptions.get(n);i==null||i.controller.abort(),this.stopTranscriptionSession(n)}),this.audioContext&&(this.audioContext.close(),this.audioContext=null),this.overlay.releaseWakeLock(),this.overlay.destroy(),this.transcriptionAlertsContainer=null};this.isAudioFile=t=>t?rc.has(t.extension.toLowerCase()):!1;this.transcribeAudioFile=async(t,n)=>{var s,l,c;let i=(c=(l=(s=this.plugin.settings)==null?void 0:s.openAIWhisperApiKey)==null?void 0:l.trim)==null?void 0:c.call(l);if(!i)return new zn.Notice("Set your OpenAI Whisper API key in the Mondo settings before transcribing."),null;let o=t.path,a=this.getTranscriptionNoteFile(t);if(a)return new zn.Notice("Transcription already exists for this audio. Opening note."),this.refreshAudioEmbeds(t.path),this.openTranscriptionFile(a,n!=null?n:t.path),a;if(this.activeTranscriptions.has(o))return new zn.Notice("A transcription is already in progress for this audio file."),null;let r=this.startTranscriptionSession(t);this.refreshAudioEmbeds(t.path);try{let u=await this.createTranscription(i,t,r.controller.signal),f=await this.writeMarkdownNote(t,u);return this.openTranscriptionFile(f,n!=null?n:t.path),new zn.Notice("Transcription note ready."),this.refreshAudioEmbeds(t.path),f}catch(u){if(u instanceof DOMException&&u.name==="AbortError")new zn.Notice("Transcription canceled.");else{console.error("Mondo: failed to transcribe audio note",u);let f=u instanceof Error?u.message:"Unknown transcription error.";new zn.Notice(`Transcription failed: ${f}`)}}finally{this.stopTranscriptionSession(o),this.refreshAudioEmbeds(t.path)}return null};this.decorateMarkdown=(t,n)=>{Array.from(t.querySelectorAll("div.internal-embed.media-embed, div.internal-embed.audio-embed")).forEach(o=>{if(!o.querySelector("audio"))return;let r=this.getAudioFileFromEmbed(o,n.sourcePath);if(!r||!this.isAudioFile(r))return;o.setAttribute("data-mondo-audio-path",r.path),this.renderedEmbeds.set(o,n.sourcePath);let s=o.querySelector(".mondo-audio-actions");s||(s=o.createDiv({cls:"mondo-audio-actions"})),this.renderActionButtons(s,r,n.sourcePath)})};this.openTranscription=(t,n)=>{let i=this.getTranscriptionNoteFile(t);if(!i){new zn.Notice("No transcription note found for this audio yet.");return}this.openTranscriptionFile(i,n!=null?n:t.path)};this.hasExistingTranscription=t=>Boolean(this.getTranscriptionNoteFile(t));this.isTranscriptionInProgress=t=>this.activeTranscriptions.has(t.path);this.getTranscriptionNotePath=t=>{var a,r;let n=(r=(a=t.parent)==null?void 0:a.path)!=null?r:"",i=`${t.basename}-transcription`;return`${n?`${n}/`:""}${i}.md`};this.getTranscriptionNoteFile=t=>{let n=this.findTranscriptionByFrontmatter(t);if(n)return n;let i=this.getTranscriptionNotePath(t),o=this.plugin.app.vault.getAbstractFileByPath(i);return o instanceof zn.TFile?o:null};this.createTranscription=async(t,n,i)=>{var u,f,p,d,h,m,b,y,g,v,w;let o=await this.plugin.app.vault.adapter.readBinary(n.path),a=new Blob([o],{type:qO(n.extension)}),r=new FormData;r.append("model",jO),r.append("file",a,n.name);let s=await fetch("https://api.openai.com/v1/audio/transcriptions",{method:"POST",headers:{Authorization:`Bearer ${t}`},body:r,signal:i});if(!s.ok){let T=s.statusText||"Request failed";try{let k=await s.json();T=(f=(u=k==null?void 0:k.error)==null?void 0:u.message)!=null?f:T}catch(k){console.warn("Mondo: unable to parse transcription error payload",k)}throw new Error(T)}let l=await s.json(),c=(w=(m=(p=l==null?void 0:l.text)!=null?p:l==null?void 0:l.transcription)!=null?m:(h=(d=l==null?void 0:l.results)==null?void 0:d[0])==null?void 0:h.text)!=null?w:(v=(g=(y=(b=l==null?void 0:l.results)==null?void 0:b[0])==null?void 0:y.alternatives)==null?void 0:g[0])==null?void 0:v.transcript;if(!c||!String(c).trim())throw new Error("Received an empty transcription result.");return String(c).trim()};this.writeMarkdownNote=async(t,n)=>{let i=this.getTranscriptionNotePath(t),o=new Date,a=["---","type: transcription",`date: ${this.formatFrontmatterDateTime(o)}`,`source: "[[${t.path}]]"`,"---",""].join(`
`),r=`![[${t.name}]]`,s=`${a}${r}

${n}
`,l=this.plugin.app.vault.getAbstractFileByPath(i);return l instanceof zn.TFile?(await this.plugin.app.vault.modify(l,s),l):this.plugin.app.vault.create(i,s)};this.renderActionButtons=(t,n,i)=>{t.replaceChildren(),t.classList.add("mondo-audio-actions");let o=this.getTranscriptionNoteFile(n),a=this.activeTranscriptions.has(n.path),r=t.createEl("button",{cls:"mondo-audio-action-button mod-cta"});r.setAttr("type","button"),r.setAttr("title","Transcribe this recording with Whisper and link the note");let s=r.createSpan({cls:"mondo-audio-action-icon"});if((0,zn.setIcon)(s,a?"loader-2":"wand-2"),r.createSpan({text:a?"Transcribing\u2026":"Transcribe"}),r.disabled=a,r.addEventListener("click",l=>{l.preventDefault(),l.stopPropagation(),this.transcribeAudioFile(n,i)}),o){let l=t.createEl("button",{cls:"mondo-audio-action-button"});l.setAttr("type","button"),l.setAttr("title","Open the linked transcription note in a new pane");let c=l.createSpan({cls:"mondo-audio-action-icon"});(0,zn.setIcon)(c,"file-text"),l.createSpan({text:"Open transcription"}),l.addEventListener("click",u=>{u.preventDefault(),u.stopPropagation(),this.openTranscription(n,i)})}};this.startTranscriptionSession=t=>{let n=t.path,o=this.ensureTranscriptionAlertsContainer().createDiv({cls:"mondo-transcription-alert"});o.setAttr("role","status"),o.setAttr("aria-live","polite");let a=t.basename||t.name,r=o.createDiv({cls:"mondo-transcription-alert__header"}),s=r.createSpan({cls:"mondo-transcription-alert__message",text:`Transcribing ${a}...`}),l=r.createEl("button",{cls:"mondo-transcription-alert__cancel mod-warning",text:"Cancel"});l.setAttr("type","button");let c=o.createDiv({cls:"mondo-transcription-alert__meta"});c.createSpan({cls:"mondo-transcription-alert__meta-label",text:"Audio:"});let u=c.createSpan({cls:"mondo-transcription-alert__meta-value",text:"--"});c.createSpan({cls:"mondo-transcription-alert__meta-separator",text:";"}),c.createSpan({cls:"mondo-transcription-alert__meta-label",text:"Elapsed:"});let f=c.createSpan({cls:"mondo-transcription-alert__timer"}),p=c.createSpan({cls:"mondo-transcription-alert__estimate"});p.toggleAttribute("hidden",!0);let d=new AbortController,h=Date.now(),m=()=>{f.setText(this.formatElapsedDuration(Date.now()-h))};m();let b=window.setInterval(m,1e3);this.populateAudioDuration(t,u,p);let y={controller:d,startedAt:h,intervalId:b,alertEl:o,labelEl:s,timerEl:f,durationEl:u,estimateEl:p,cancelButton:l,audioName:a};return this.activeTranscriptions.set(n,y),this.overlay.setDismissHandler(()=>{this.cancelTranscription(n)}),this.overlay.acquireWakeLock(),l.addEventListener("click",g=>{g.preventDefault(),g.stopPropagation(),this.cancelTranscription(n)}),y};this.stopTranscriptionSession=t=>{let n=this.activeTranscriptions.get(t);if(!n)return;if(window.clearInterval(n.intervalId),n.alertEl.remove(),this.activeTranscriptions.delete(t),this.activeTranscriptions.size===0)this.overlay.setDismissHandler(null),this.overlay.releaseWakeLock();else{let o=Array.from(this.activeTranscriptions.keys()).pop();o&&this.overlay.setDismissHandler(()=>{this.cancelTranscription(o)})}let i=this.transcriptionAlertsContainer;i&&i.childElementCount===0&&(this.overlay.clear(),this.overlay.destroy(),this.transcriptionAlertsContainer=null)};this.ensureTranscriptionAlertsContainer=()=>{if(this.transcriptionAlertsContainer&&document.body.contains(this.transcriptionAlertsContainer))return this.transcriptionAlertsContainer;let t=this.overlay.ensureContainer({className:"mondo-transcription-alerts"});return this.transcriptionAlertsContainer=t,t};this.populateAudioDuration=async(t,n,i)=>{let o=await this.getAudioDurationSeconds(t);n.isConnected&&(o==null?n.setText("--"):n.setText(this.formatDuration(o))),i&&this.applyEstimatedTranscriptionDuration(i,o)};this.applyEstimatedTranscriptionDuration=(t,n)=>{if(!t.isConnected)return;if(n==null){t.setText(""),t.toggleAttribute("hidden",!0);return}let i=Math.max(5,Math.round(n*YO));t.setText(` (est. ${this.formatDuration(i)})`),t.toggleAttribute("hidden",!1)};this.formatElapsedDuration=t=>{let n=Math.max(0,Math.floor(t/1e3)),i=Math.floor(n/3600),o=Math.floor(n%3600/60),a=n%60;return i>0?`${i}:${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:o>0?`${o}:${a.toString().padStart(2,"0")}`:`${a}s`};this.formatFrontmatterDateTime=t=>{let n=t.getFullYear(),i=(t.getMonth()+1).toString().padStart(2,"0"),o=t.getDate().toString().padStart(2,"0"),a=t.getHours().toString().padStart(2,"0"),r=t.getMinutes().toString().padStart(2,"0");return`${n}-${i}-${o} ${a}:${r}`};this.cancelTranscription=t=>{let n=this.activeTranscriptions.get(t);n&&(n.cancelButton.disabled||(n.cancelButton.disabled=!0,n.cancelButton.setText("Cancelling..."),n.labelEl.setText(`Cancelling ${n.audioName}...`),n.controller.abort()))};this.getAudioDurationSeconds=t=>{let n=this.audioDurationCache.get(t.path);if(typeof n=="number")return Promise.resolve(n);let i=this.audioDurationRequests.get(t.path);if(i)return i;let o=(async()=>{try{let r=await this.decodeAudioDuration(t);if(r!=null)return this.audioDurationCache.set(t.path,r),r}catch(r){console.warn("Mondo: failed to decode audio buffer for duration",r)}let a=await this.loadAudioMetadataDuration(t);return a!=null&&this.audioDurationCache.set(t.path,a),a})().catch(a=>(console.warn("Mondo: failed to resolve audio duration",a),null)).finally(()=>{this.audioDurationRequests.delete(t.path)});return this.audioDurationRequests.set(t.path,o),o};this.loadAudioMetadataDuration=t=>new Promise(n=>{let i=document.createElement("audio");i.preload="metadata",i.src=this.plugin.app.vault.getResourcePath(t);let o=()=>{i.removeEventListener("loadedmetadata",a),i.removeEventListener("error",r),i.src=""},a=()=>{o();let s=Number.isFinite(i.duration)?i.duration:null;n(s)},r=()=>{o(),n(null)};i.addEventListener("loadedmetadata",a),i.addEventListener("error",r),i.load()});this.decodeAudioDuration=async t=>{try{let i=(await this.plugin.app.vault.adapter.readBinary(t.path)).slice(0),a=await this.ensureAudioContext().decodeAudioData(i);return Number.isFinite(a.duration)?a.duration:null}catch(n){return console.warn("Mondo: unable to decode audio duration",n),null}};this.ensureAudioContext=()=>{var i;if(this.audioContext)return this.audioContext;let t=window,n=(i=window.AudioContext)!=null?i:t.webkitAudioContext;if(!n)throw new Error("AudioContext is not supported in this environment.");return this.audioContext=new n,this.audioContext};this.formatDuration=t=>{let n=Math.max(0,Math.round(t)),i=Math.floor(n/3600),o=Math.floor(n%3600/60),a=n%60,r=[];return i>0&&r.push(`${i}h`),o>0&&r.push(`${o}m`),i===0&&(o===0||a>0)&&r.push(`${a}s`),r.length===0?"0s":r.join(" ")};this.refreshAudioEmbeds=t=>{if(!t)return;let n=this.plugin.app.vault.getAbstractFileByPath(t);if(!(n instanceof zn.TFile))return;let o=`[data-mondo-audio-path="${t.replace(/\\/g,"\\\\").replace(/"/g,'\\"')}"]`;Array.from(document.querySelectorAll(o)).forEach(r=>{var c;let s=(c=this.renderedEmbeds.get(r))!=null?c:n.path,l=r.querySelector(".mondo-audio-actions");l&&this.renderActionButtons(l,n,s)})};this.openTranscriptionFile=(t,n)=>{this.plugin.app.workspace.openLinkText(t.path,n,!0)};this.getAudioFileFromEmbed=(t,n)=>{var s,l,c,u,f,p,d;let o=((u=(c=(s=t.getAttribute("src"))!=null?s:t.getAttribute("data-src"))!=null?c:(l=t.dataset)==null?void 0:l.src)!=null?u:"").trim();o.startsWith("!")&&(o=o.slice(1)),o.startsWith("[[")&&(o=o.slice(2)),o.endsWith("]]")&&(o=o.slice(0,-2));let a=(d=(p=(f=o.split("|")[0])==null?void 0:f.trim)==null?void 0:p.call(f))!=null?d:"";if(!a)return null;let r=this.plugin.app.metadataCache.getFirstLinkpathDest(a,n);return r instanceof zn.TFile?r:null};this.plugin=t}};var uo=require("obsidian"),ne=O(P()),co=e=>rc.has(e.extension.toLowerCase()),Ls=e=>{var n;return(typeof e=="string"?e:(n=e.path)!=null?n:"").toLowerCase().endsWith("-transcription.md")},mM=e=>{var n,i,o;let t=e.includes(".")?(o=(i=(n=e.split(".").pop())==null?void 0:n.toLowerCase)==null?void 0:i.call(n))!=null?o:"":e.toLowerCase();return rc.has(t)},hM=e=>{if(e==null||e<=0)return"--";let t=["B","KB","MB","GB","TB"],n=e,i=0;for(;n>=1024&&i<t.length-1;)n/=1024,i+=1;return`${n.toFixed(n>=10||i===0?0:1)} ${t[i]}`},gM=e=>{var i,o,a,r,s,l;let t=e.split(/\r?\n/),n=0;if(((i=t[n])==null?void 0:i.trim())==="---"){for(n+=1;n<t.length&&((o=t[n])==null?void 0:o.trim())!=="---";)n+=1;((a=t[n])==null?void 0:a.trim())==="---"&&(n+=1)}for(;n<t.length;n+=1){let c=(l=(s=(r=t[n])==null?void 0:r.trim)==null?void 0:s.call(r))!=null?l:"";if(c&&!c.startsWith("![["))return c}return null},qp=(e,t)=>{var a;let n=e.metadataCache.getFileCache(t),i=(a=n==null?void 0:n.frontmatter)!=null?a:{},o=i==null?void 0:i.show;if(typeof o=="string"){let r=o.trim();if(r){let s=r.match(/^\[\[(.+?)(?:\|.*?)?\]\]$/);return s!=null&&s[1]?s[1].trim()||null:r}}return t.basename||t.name||null},sc=async(e,t)=>{try{await e.workspace.getLeaf(!0).openFile(t)}catch(n){console.error("Mondo Audio Logs: failed to open file",n)}},yM=({plugin:e})=>{let t=pe(),n=e.getAudioTranscriptionManager(),[i,o]=(0,$e.useState)([]),[a,r]=(0,$e.useState)([]),[s,l]=(0,$e.useState)([]),[c,u]=(0,$e.useState)(0),[f,p]=(0,$e.useState)({}),[d,h]=(0,$e.useState)(!1),[m,b]=(0,$e.useState)({}),[y,g]=(0,$e.useState)(null),[v,w]=(0,$e.useState)(20),T=(0,$e.useRef)(null),k=(0,$e.useRef)({});(0,$e.useEffect)(()=>{k.current=f},[f]);let E=(0,$e.useMemo)(()=>{let R=new Map,I=(z,U)=>{if(!z)return;let X=z.trim().toLowerCase();!X||R.has(X)||R.set(X,U)};return i.forEach(z=>{I(z.path,z),I(z.name,z),I(z.basename,z)}),R},[i]),C=(0,$e.useCallback)(()=>(T.current||(T.current=new Audio,T.current.addEventListener("ended",()=>{g(null)}),T.current.addEventListener("pause",()=>{T.current&&T.current.currentTime===0&&g(null)})),T.current),[]),L=(0,$e.useCallback)(()=>{let R=t.vault.getFiles().filter(I=>co(I)).sort((I,z)=>z.stat.mtime-I.stat.mtime);o(R)},[t]),F=(0,$e.useCallback)(()=>{let R=t.vault.getMarkdownFiles(),I=[],z=[];R.forEach(U=>{var le;let X=t.metadataCache.getFileCache(U),H=(le=X==null?void 0:X.frontmatter)!=null?le:{},Y=typeof(H==null?void 0:H.type)=="string"?H.type.trim().toLowerCase():"";(Ls(U)||Y==="transcription")&&I.push(U),(H==null?void 0:H.voiceover)!=null&&z.push(U)}),r(I),l(z)},[t]),N=(0,$e.useCallback)(()=>{u(R=>R+1)},[]);(0,$e.useEffect)(()=>{L(),F()},[L,F]),(0,$e.useEffect)(()=>{let R=[],I=H=>{if(H instanceof uo.TFile){if(co(H)){L(),N();return}(Ls(H)||H.extension==="md")&&(F(),N())}},z=H=>{if(H instanceof uo.TFile){if(co(H)){L(),N();return}(Ls(H)||H.extension==="md")&&(F(),N())}},U=H=>{if(H instanceof uo.TFile){if(co(H)){L(),N();return}(Ls(H)||H.extension==="md")&&(F(),N())}},X=(H,Y)=>{if(!(H instanceof uo.TFile)){mM(Y)&&(L(),N()),(Ls(Y)||Y.toLowerCase().endsWith(".md"))&&(F(),N());return}(co(H)||mM(Y))&&(L(),N()),(Ls(H)||Ls(Y)||H.extension==="md")&&(F(),N())};return R.push(t.vault.on("create",I)),R.push(t.vault.on("modify",z)),R.push(t.vault.on("delete",U)),R.push(t.vault.on("rename",X)),()=>{R.forEach(H=>t.vault.offref(H))}},[t,N,L,F]),(0,$e.useEffect)(()=>{p(R=>{let I={};return i.forEach(z=>{let U=R[z.path];U&&(I[z.path]=U)}),k.current=I,I})},[i]);let _=(0,$e.useCallback)((R,I)=>{var X,H;let z=Array.isArray(I)?I:[I],U=[];z.forEach(Y=>{if(typeof Y=="string"){U.push(Y);return}if(Y&&typeof Y=="object"){let le=Y.path;typeof le=="string"&&U.push(le)}});for(let Y of U){let le=Y.trim();if(!le)continue;let re=new Set;re.add(le);let ie=le.match(/^\[\[(.+?)\]\]$/);if(ie!=null&&ie[1]){let[ke]=ie[1].split("|");ke!=null&&ke.trim()&&re.add(ke.trim())}for(let ke of re){let Ce=ke.toLowerCase(),we=E.get(Ce);if(we)return we;let Ne=t.metadataCache.getFirstLinkpathDest(ke,R.path);if(Ne instanceof uo.TFile&&co(Ne))return Ne;let Ve=t.vault.getAbstractFileByPath(ke);if(Ve instanceof uo.TFile&&co(Ve))return Ve;let Xe=(X=R.parent)!=null&&X.path?`${R.parent.path}/${ke}`:ke,ot=E.get(Xe.toLowerCase());if(ot)return ot;let ee=t.vault.getAbstractFileByPath(Xe);if(ee instanceof uo.TFile&&co(ee))return ee;if(!ke.includes("."))for(let Ge of rc){let De=`${ke}.${Ge}`,ue=E.get(De.toLowerCase());if(ue)return ue;let Re=(H=R.parent)!=null&&H.path?`${R.parent.path}/${De}`:De,bt=E.get(Re.toLowerCase());if(bt)return bt;let vt=t.vault.getAbstractFileByPath(De);if(vt instanceof uo.TFile&&co(vt))return vt;let nt=t.vault.getAbstractFileByPath(Re);if(nt instanceof uo.TFile&&co(nt))return nt}}}return null},[t.metadataCache,t.vault,E]),A=(0,$e.useCallback)(R=>{var re,ie,ke;let I=t.metadataCache.getFileCache(R),z=(re=I==null?void 0:I.frontmatter)!=null?re:{},U=_(R,z==null?void 0:z.source);if(U)return U;let X=_(R,z==null?void 0:z.audio);if(X)return X;let H=R.basename.replace(/-transcription$/,"").trim();if(!H)return null;let Y=E.get(H.toLowerCase());if(Y)return Y;let le=(ke=(ie=R.parent)==null?void 0:ie.path)!=null?ke:"";if(le){let Ce=`${le}/${H}`.toLowerCase(),we=E.get(Ce);if(we)return we}for(let Ce of rc){let we=`${H}.${Ce}`,Ne=E.get(we.toLowerCase());if(Ne)return Ne;let Ve=le?`${le}/${we}`:we,Xe=E.get(Ve.toLowerCase());if(Xe)return Xe;let ot=t.vault.getAbstractFileByPath(Ve);if(ot instanceof uo.TFile&&co(ot))return ot}return null},[t.metadataCache,t.vault,E,_]),x=(0,$e.useMemo)(()=>{let R=new Map;return a.forEach(I=>{let z=A(I);z&&!R.has(z.path)&&R.set(z.path,I)}),R},[A,a]),S=(0,$e.useMemo)(()=>{let R=new Map;return s.forEach(I=>{var H;let z=t.metadataCache.getFileCache(I),U=(H=z==null?void 0:z.frontmatter)!=null?H:{},X=_(I,U==null?void 0:U.voiceover);X&&!R.has(X.path)&&R.set(X.path,I)}),R},[t.metadataCache,_,s]),D=(0,$e.useMemo)(()=>i.slice(0,v),[i,v]);(0,$e.useEffect)(()=>{if(!n){k.current={},p({}),h(!1);return}if(D.length===0){h(!1);return}let R=c,I={},z=[];if(D.forEach(H=>{var ue,Re,bt,vt,nt,nn,Ht,fi,pi,eo,Co,to;let Y=k.current[H.path],le=(ue=x.get(H.path))!=null?ue:null,re=(Re=S.get(H.path))!=null?Re:null,ie=(vt=(bt=Y==null?void 0:Y.transcription.file)==null?void 0:bt.path)!=null?vt:null,ke=(nn=(nt=Y==null?void 0:Y.voiceoverSource.file)==null?void 0:nt.path)!=null?nn:null,Ce=((Ht=le==null?void 0:le.path)!=null?Ht:null)!==ie,we=((fi=re==null?void 0:re.path)!=null?fi:null)!==ke,Ne=(Y==null?void 0:Y.version)!==R,Ve=!Y||Ne||Ce||we,Xe=le?qp(t,le):null,ot=re?qp(t,re):null,ee={transcription:le?{file:le,title:Xe,snippet:!Ve&&!Ce&&(pi=Y==null?void 0:Y.transcription.snippet)!=null?pi:null,hasLoadedSnippet:!Ve&&!Ce&&(eo=Y==null?void 0:Y.transcription.hasLoadedSnippet)!=null?eo:!1}:{file:null,title:null,snippet:null,hasLoadedSnippet:!0},voiceoverSource:re?{file:re,title:ot,snippet:!Ve&&!we&&(Co=Y==null?void 0:Y.voiceoverSource.snippet)!=null?Co:null,hasLoadedSnippet:!Ve&&!we&&(to=Y==null?void 0:Y.voiceoverSource.hasLoadedSnippet)!=null?to:!1}:{file:null,title:null,snippet:null,hasLoadedSnippet:!0},version:R,isResolved:!le&&!re||!Ve&&(Y==null?void 0:Y.isResolved)===!0&&(!le||(Y==null?void 0:Y.transcription.hasLoadedSnippet)===!0)&&(!re||(Y==null?void 0:Y.voiceoverSource.hasLoadedSnippet)===!0)};I[H.path]=ee;let Ge=Boolean(ee.transcription.file)&&!ee.transcription.hasLoadedSnippet,De=Boolean(ee.voiceoverSource.file)&&!ee.voiceoverSource.hasLoadedSnippet;(Ve||Ge||De)&&z.push(H)}),p(H=>{let Y={...H,...I};return k.current=Y,Y}),z.length===0){h(!1);return}let U=!1;return h(!0),(async()=>{var H,Y;for(let le of z){if(U)break;let re=k.current[le.path];if(!re)continue;let ie={...re,transcription:re.transcription,voiceoverSource:re.voiceoverSource},ke=re.transcription.file;if(ke&&!re.transcription.hasLoadedSnippet)try{let we=await t.vault.cachedRead(ke),Ne=gM(we);ie.transcription={...re.transcription,title:(H=re.transcription.title)!=null?H:qp(t,ke),snippet:Ne,hasLoadedSnippet:!0}}catch(we){console.warn("Mondo Audio Logs: failed to read transcription note",we),ie.transcription={...re.transcription,hasLoadedSnippet:!0}}if(U)break;let Ce=re.voiceoverSource.file;if(Ce&&!re.voiceoverSource.hasLoadedSnippet)try{let we=await t.vault.cachedRead(Ce),Ne=gM(we);ie.voiceoverSource={...re.voiceoverSource,title:(Y=re.voiceoverSource.title)!=null?Y:qp(t,Ce),snippet:Ne,hasLoadedSnippet:!0}}catch(we){console.warn("Mondo Audio Logs: failed to read voiceover source note",we),ie.voiceoverSource={...re.voiceoverSource,hasLoadedSnippet:!0}}ie.version=R,ie.isResolved=!ie.transcription.file&&!ie.voiceoverSource.file||(!ie.transcription.file||ie.transcription.hasLoadedSnippet)&&(!ie.voiceoverSource.file||ie.voiceoverSource.hasLoadedSnippet),p(we=>{if(U)return we;let Ne=we[le.path];if(!Ne)return we;let Ve={...Ne,transcription:ie.transcription,voiceoverSource:ie.voiceoverSource,version:R,isResolved:ie.isResolved},Xe={...we,[le.path]:Ve};return k.current=Xe,Xe})}U||h(!1)})(),()=>{U=!0}},[t,t.vault,n,c,x,S,D]),(0,$e.useEffect)(()=>()=>{let R=T.current;R&&(R.pause(),R.currentTime=0,R.removeAttribute("src"))},[]);let M=(0,$e.useCallback)(async R=>{let I=C();if(y===R.path){I.pause(),I.currentTime=0,g(null);return}let z=t.vault.getResourcePath(R);if(z)try{I.pause(),I.currentTime=0,I.src=z,await I.play(),g(R.path)}catch(U){console.error("Mondo Audio Logs: failed to play audio",U),g(null)}},[t,C,y]),B=(0,$e.useCallback)(()=>{let R=T.current;R&&(R.pause(),R.currentTime=0,g(null))},[]),G=(0,$e.useCallback)(async R=>{if(n){b(I=>({...I,[R.path]:!0}));try{await n.transcribeAudioFile(R,R.path),F(),N()}finally{b(I=>({...I,[R.path]:!1}))}}},[N,n,F]),$=(0,$e.useCallback)(async R=>{var U;let I=(U=n==null?void 0:n.getTranscriptionNoteFile(R))!=null?U:null;if(window.confirm("Delete the audio file and its transcription? This cannot be undone.")){B();try{await t.vault.delete(R)}catch(X){console.error("Mondo Audio Logs: failed to delete audio file",X);return}if(I)try{await t.vault.delete(I)}catch(X){console.error("Mondo Audio Logs: failed to delete transcription note",X)}}},[t.vault,B,n]),te=(0,$e.useMemo)(()=>({totalSize:i.reduce((I,z)=>I+z.stat.size,0),totalNotes:i.length}),[i]),j=(0,$e.useMemo)(()=>D.map(R=>{var Xe,ot,ee,Ge,De,ue,Re,bt,vt,nt,nn,Ht,fi,pi,eo,Co,to,Qr,Xr,Jr,Ft,on,an,Jn,hn;let I=f[R.path],z=hM(R.stat.size),U=R.stat.mtime,X=(Xe=I==null?void 0:I.transcription)!=null?Xe:{file:null,title:null,snippet:null,hasLoadedSnippet:!0},H=(ot=I==null?void 0:I.voiceoverSource)!=null?ot:{file:null,title:null,snippet:null,hasLoadedSnippet:!0},Y=(ue=(De=(ee=X.snippet)!=null?ee:X.title)!=null?De:(Ge=X.file)==null?void 0:Ge.basename)!=null?ue:null,le=(nt=(vt=(Re=H.snippet)!=null?Re:H.title)!=null?vt:(bt=H.file)==null?void 0:bt.basename)!=null?nt:null,re=(pi=(fi=(nn=X.snippet)!=null?nn:X.title)!=null?fi:(Ht=X.file)==null?void 0:Ht.name)!=null?pi:null,ie=(Qr=(to=(eo=H.snippet)!=null?eo:H.title)!=null?to:(Co=H.file)==null?void 0:Co.name)!=null?Qr:null,ke=Boolean(X.file),Ce=Boolean(H.file),we=(I==null?void 0:I.isResolved)!==!0,Ne=(Jn=(an=(Ft=(Xr=X.title)!=null?Xr:H.title)!=null?Ft:(Jr=X.file)==null?void 0:Jr.basename)!=null?an:(on=H.file)==null?void 0:on.basename)!=null?Jn:R.basename,Ve=Boolean(m[R.path])||(n==null?void 0:n.isTranscriptionInProgress(R))===!0;return{file:R,sizeLabel:z,dateValue:U,pathLabel:R.path,transcription:X,transcriptionLabel:Y,transcriptionTooltip:re,hasTranscription:ke,voiceoverSource:H,voiceoverLabel:le,voiceoverTooltip:ie,hasVoiceoverSource:Ce,isTranscribing:Ve,isResolvingMetadata:we,displayTitle:Ne,isResolved:(hn=I==null?void 0:I.isResolved)!=null?hn:!1}}),[n,f,m,D]),me=te.totalNotes.toLocaleString(),W=hM(te.totalSize),ae=i.length>D.length,Q="pointer-events-none absolute left-0 top-full z-20 mt-1 hidden w-max max-w-[28rem] break-words rounded-md border border-[var(--background-modifier-border)] bg-[var(--background-secondary, var(--background-primary))] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg group-hover:block group-focus-visible:block group-focus-within:block";return(0,ne.jsxs)("div",{className:"p-4 space-y-6",children:[(0,ne.jsx)("div",{className:"border-b border-[var(--background-modifier-border)] pb-3",children:(0,ne.jsx)(Mt,{variant:"h1",children:"Audio Notes"})}),(0,ne.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,ne.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,ne.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total Notes"}),(0,ne.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:me})]}),(0,ne.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,ne.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total File Size"}),(0,ne.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:W})]})]}),(0,ne.jsx)("div",{className:"hidden overflow-hidden rounded-lg border border-[var(--background-modifier-border)] sm:block",children:(0,ne.jsxs)(Se,{children:[(0,ne.jsx)("thead",{className:"bg-[var(--background-secondary-alt, var(--background-secondary))]",children:(0,ne.jsxs)("tr",{children:[(0,ne.jsx)(Se.HeadCell,{className:"w-12 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Play"}),(0,ne.jsx)(Se.HeadCell,{className:"p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Title"}),(0,ne.jsx)(Se.HeadCell,{className:"w-48 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Date"}),(0,ne.jsx)(Se.HeadCell,{className:"w-24 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Size"}),(0,ne.jsx)(Se.HeadCell,{className:"p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Transcription"}),(0,ne.jsx)(Se.HeadCell,{className:"w-16 p-3 text-right text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Actions"})]})}),(0,ne.jsx)("tbody",{children:j.length===0?(0,ne.jsx)("tr",{children:(0,ne.jsx)(Se.Cell,{className:"p-6 text-center text-[var(--text-muted)]",colSpan:6,children:d?"Loading audio notes...":"No audio notes found."})}):j.map(R=>{var le,re,ie,ke,Ce,we,Ne,Ve,Xe,ot;let I=y===R.file.path,z=R.displayTitle,U=R.isResolvingMetadata,X=!R.hasTranscription&&!R.hasVoiceoverSource&&U,H=!R.hasTranscription&&!R.hasVoiceoverSource&&!U,Y=R.isTranscribing?"Transcribing...":"Transcribe";return(0,ne.jsxs)(Se.Row,{className:"border-t border-[var(--background-modifier-border)]",children:[(0,ne.jsx)(Se.Cell,{className:"p-3",children:(0,ne.jsx)("button",{type:"button",className:"flex h-8 w-8 items-center justify-center rounded-full border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] text-[var(--text-normal)] hover:bg-[var(--background-secondary-alt, var(--background-secondary))]",onClick:()=>M(R.file),"aria-label":I?"Stop playback":"Play audio",children:(0,ne.jsx)(Ze,{name:I?"square":"play",className:"m-0"})})}),(0,ne.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,ne.jsxs)("div",{className:"flex w-full max-w-[28rem] min-w-0 flex-col items-start gap-1",children:[(0,ne.jsxs)(Me,{variant:"link",tone:"info",fullWidth:!0,className:"group relative overflow-hidden text-left font-medium",onClick:()=>{sc(t,R.file)},"aria-label":`Open ${z}`,title:z!=null?z:void 0,children:[(0,ne.jsx)("span",{className:"block w-full truncate",children:z}),z?(0,ne.jsx)("span",{className:Q,role:"presentation",children:z}):null]}),(0,ne.jsxs)("div",{className:"group relative w-full text-xs text-[var(--text-muted)]","aria-label":R.pathLabel,tabIndex:0,title:R.pathLabel,children:[(0,ne.jsx)("span",{className:"block w-full truncate",children:R.pathLabel}),(0,ne.jsx)("span",{className:Q,role:"presentation",children:R.pathLabel})]})]})}),(0,ne.jsx)(Se.Cell,{className:"p-3 align-middle text-[var(--text-muted)]",children:(0,ne.jsx)(cn,{value:R.dateValue,fallback:"--"})}),(0,ne.jsx)(Se.Cell,{className:"p-3 align-middle text-[var(--text-normal)]",children:R.sizeLabel}),(0,ne.jsx)(Se.Cell,{className:"p-3 align-middle",children:R.hasTranscription||R.hasVoiceoverSource?(0,ne.jsxs)("div",{className:"flex flex-col gap-3",children:[R.hasTranscription?(0,ne.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ne.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Transcription"}),(0,ne.jsx)("a",{href:"#",className:"block max-w-[22rem] truncate text-[var(--interactive-accent)] hover:underline",onClick:ee=>{ee.preventDefault(),R.transcription.file&&sc(t,R.transcription.file)},title:(re=(le=R.transcriptionTooltip)!=null?le:R.transcriptionLabel)!=null?re:"Open transcription",children:(Ce=(ke=R.transcriptionLabel)!=null?ke:(ie=R.transcription.file)==null?void 0:ie.basename)!=null?Ce:"Open transcription"})]}):null,R.hasVoiceoverSource?(0,ne.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ne.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Voiceover Source"}),(0,ne.jsx)("a",{href:"#",className:"block max-w-[22rem] truncate text-[var(--interactive-accent)] hover:underline",onClick:ee=>{ee.preventDefault(),R.voiceoverSource.file&&sc(t,R.voiceoverSource.file)},title:(Ne=(we=R.voiceoverTooltip)!=null?we:R.voiceoverLabel)!=null?Ne:"Open voiceover source",children:(ot=(Xe=R.voiceoverLabel)!=null?Xe:(Ve=R.voiceoverSource.file)==null?void 0:Ve.basename)!=null?ot:"Open voiceover source"})]}):null]}):H?(0,ne.jsx)(Me,{icon:"wand-2",className:"mod-cta",disabled:R.isTranscribing,onClick:()=>G(R.file),children:Y}):(0,ne.jsxs)("div",{className:"flex items-center gap-2 text-[var(--text-muted)]",children:[(0,ne.jsx)(Ze,{name:"clock",className:"h-4 w-4"}),(0,ne.jsx)("span",{className:"text-sm",children:X?"Resolving...":"Preparing..."})]})}),(0,ne.jsx)(Se.Cell,{className:"p-3 text-right align-middle",children:(0,ne.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":"Delete audio note",onClick:()=>{$(R.file)}})})]},R.file.path)})})]})}),(0,ne.jsx)("div",{className:"space-y-3 sm:hidden",children:j.length===0?(0,ne.jsx)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4 text-center text-[var(--text-muted)]",children:d?"Loading audio notes...":"No audio notes found."}):j.map(R=>{var le,re,ie,ke,Ce,we,Ne,Ve,Xe,ot;let I=y===R.file.path,z=R.displayTitle,U=R.isResolvingMetadata,X=!R.hasTranscription&&!R.hasVoiceoverSource&&U,H=!R.hasTranscription&&!R.hasVoiceoverSource&&!U,Y=R.isTranscribing?"Transcribing...":"Transcribe";return(0,ne.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,ne.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,ne.jsxs)("div",{className:"flex flex-1 items-start gap-3",children:[(0,ne.jsx)("button",{type:"button",className:"flex h-10 w-10 shrink-0 items-center justify-center rounded-full border border-[var(--background-modifier-border)] bg-[var(--background-secondary-alt, var(--background-secondary))] text-[var(--text-normal)]",onClick:()=>M(R.file),"aria-label":I?"Stop playback":"Play audio",children:(0,ne.jsx)(Ze,{name:I?"square":"play",className:"m-0"})}),(0,ne.jsxs)("div",{className:"min-w-0 flex-1 space-y-2",children:[(0,ne.jsxs)(Me,{variant:"link",tone:"info",fullWidth:!0,className:"group relative overflow-hidden text-left font-medium",onClick:()=>{sc(t,R.file)},"aria-label":`Open ${z}`,title:z!=null?z:void 0,children:[(0,ne.jsx)("span",{className:"block w-full truncate",children:z}),z?(0,ne.jsx)("span",{className:Q,role:"presentation",children:z}):null]}),(0,ne.jsx)("div",{className:"text-xs text-[var(--text-muted)]","aria-label":R.pathLabel,title:R.pathLabel,children:(0,ne.jsx)("span",{className:"block truncate",children:R.pathLabel})}),(0,ne.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 text-sm",children:[(0,ne.jsxs)("span",{className:"text-[var(--text-muted)]",children:["Date: ",(0,ne.jsx)(cn,{value:R.dateValue,fallback:"--"})]}),(0,ne.jsxs)("span",{className:"text-[var(--text-normal)]",children:["Size: ",R.sizeLabel]})]})]})]}),(0,ne.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":"Delete audio note",onClick:()=>{$(R.file)}})]}),(0,ne.jsxs)("div",{className:"mt-4 space-y-3",children:[R.hasTranscription?(0,ne.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ne.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Transcription"}),(0,ne.jsx)("a",{href:"#",className:"block truncate text-[var(--interactive-accent)] hover:underline",onClick:ee=>{ee.preventDefault(),R.transcription.file&&sc(t,R.transcription.file)},title:(re=(le=R.transcriptionTooltip)!=null?le:R.transcriptionLabel)!=null?re:"Open transcription",children:(Ce=(ke=R.transcriptionLabel)!=null?ke:(ie=R.transcription.file)==null?void 0:ie.basename)!=null?Ce:"Open transcription"})]}):null,R.hasVoiceoverSource?(0,ne.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,ne.jsx)("span",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Voiceover Source"}),(0,ne.jsx)("a",{href:"#",className:"block truncate text-[var(--interactive-accent)] hover:underline",onClick:ee=>{ee.preventDefault(),R.voiceoverSource.file&&sc(t,R.voiceoverSource.file)},title:(Ne=(we=R.voiceoverTooltip)!=null?we:R.voiceoverLabel)!=null?Ne:"Open voiceover source",children:(ot=(Xe=R.voiceoverLabel)!=null?Xe:(Ve=R.voiceoverSource.file)==null?void 0:Ve.basename)!=null?ot:"Open voiceover source"})]}):null,H?(0,ne.jsx)(Me,{icon:"wand-2",className:"mod-cta",disabled:R.isTranscribing,onClick:()=>G(R.file),children:Y}):null,!R.hasTranscription&&!R.hasVoiceoverSource&&!H?(0,ne.jsxs)("div",{className:"flex items-center gap-2 text-[var(--text-muted)]",children:[(0,ne.jsx)(Ze,{name:"clock",className:"h-4 w-4"}),(0,ne.jsx)("span",{className:"text-sm",children:X?"Resolving...":"Preparing..."})]}):null]})]},R.file.path)})}),ae?(0,ne.jsx)("div",{className:"flex justify-center",children:(0,ne.jsx)(Me,{onClick:()=>w(R=>R+20),className:"mod-cta",children:"Load More"})}):null]})};var ev=O(P()),Gp=class extends bM.ItemView{constructor(n,i,o){super(i);this.root=null;this.plugin=n,this.iconName=o}getViewType(){return xs}getDisplayText(){return"Audio Notes"}getIcon(){return this.iconName}async onOpen(){this.contentEl.empty(),this.root=(0,vM.createRoot)(this.contentEl),this.root.render((0,ev.jsx)(Fn,{app:this.app,children:(0,ev.jsx)(yM,{plugin:this.plugin})}))}async onClose(){var n;(n=this.root)==null||n.unmount(),this.root=null}};var SM=require("obsidian"),kM=O(Fo());var tt=O(fe());var qi=O(fe()),Kp=require("obsidian");var La=O(P()),GO=80,KO="image",QO=e=>typeof e=="number"?`${e}px`:typeof e=="string"&&e.trim().length>0?e.trim():`${GO}px`,XO=e=>{let t=e.path;return typeof t=="string"&&t.trim().length>0?t.trim():e.name},Hn=({src:e,alt:t="Cover image",size:n,strategy:i="cover",placeholderIcon:o=KO,placeholderIconClassName:a="h-8 w-8",imageClassName:r="h-full w-full transition-transform duration-200 group-hover:scale-[1.02]",className:s,placeholderClassName:l,coverClassName:c,placeholderVariant:u="dashed",accept:f="image/*",capture:p="environment",allowCameraCapture:d=!0,isLoading:h=!1,disabled:m=!1,selectLabel:b="Select cover image",editLabel:y="Open cover image",onSelectCover:g,onEditCover:v})=>{let w=(0,qi.useRef)(null),T=(0,qi.useRef)(null),k=QO(n),E=(0,qi.useMemo)(()=>({width:k,height:k}),[k]),C=(0,qi.useMemo)(()=>{let x=["group flex items-center justify-center rounded-md p-0 text-[var(--text-muted)] transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--interactive-accent)] focus-visible:ring-offset-0","disabled:cursor-not-allowed disabled:opacity-70"];return u==="solid"?x.push("border border-[var(--background-modifier-border)] bg-[var(--background-primary)]","hover:border-[var(--background-modifier-border-hover)] hover:text-[var(--text-normal)]"):x.push("border border-dashed border-[var(--background-modifier-border)] bg-[var(--background-primary)]","hover:border-[var(--background-modifier-border-hover)] hover:text-[var(--text-normal)]"),s&&x.push(s),l&&x.push(l),x.join(" ")},[s,l,u]),L=(0,qi.useMemo)(()=>{let x=["group relative flex items-center justify-center overflow-hidden rounded-md p-0 transition","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--interactive-accent)] focus-visible:ring-offset-0"];return u==="solid"?x.push("border border-[var(--background-modifier-border)] bg-[var(--background-primary)]"):x.push("border border-transparent"),s&&x.push(s),c&&x.push(c),x.join(" ")},[s,c,u]),F=(0,qi.useCallback)(x=>{var S;if(!(!g||m||h)){if(Kp.Platform.isMobileApp){x.preventDefault();let D=new Kp.Menu;d&&D.addItem(M=>{M.setTitle("Take Photo"),M.onClick(()=>{var B;T.current?T.current.click():(B=w.current)==null||B.click()})}),D.addItem(M=>{M.setTitle("Choose from Library"),M.onClick(()=>{var B;(B=w.current)==null||B.click()})}),D.showAtMouseEvent(x.nativeEvent);return}(S=w.current)==null||S.click()}},[d,m,h,g]),N=(0,qi.useCallback)(()=>{var x;if(!m){if(e&&v){v();return}!e&&g&&((x=w.current)==null||x.click())}},[m,v,g,e]),_=(0,qi.useCallback)(x=>{var B,G;let S=x.target,D=(G=(B=S.files)==null?void 0:B[0])!=null?G:null;if(S.value="",!D||!g)return;let M=XO(D);g(M,D)},[g]),A=(0,qi.useMemo)(()=>({objectFit:i}),[i]);return(0,La.jsxs)("div",{style:E,className:"flex-shrink-0",children:[g?(0,La.jsx)("input",{ref:w,type:"file",accept:f,className:"hidden",onChange:_}):null,g&&d?(0,La.jsx)("input",{ref:T,type:"file",accept:f,capture:p,className:"hidden",onChange:_}):null,e?(0,La.jsx)("button",{type:"button",onClick:N,className:L,style:E,"aria-label":y,disabled:m,children:(0,La.jsx)("img",{src:e,alt:t,className:r,style:A})}):(0,La.jsx)("button",{type:"button",onClick:F,className:C,style:E,"aria-label":b,disabled:m||h||!g,children:(0,La.jsx)(Ze,{name:h?"loader-2":o,className:`${a} ${h?"animate-spin":""}`})})]})};var un=require("obsidian");var JO=new Set(["png","jpg","jpeg","webp"]),WO=[{id:"free",label:"Freeform",ratio:null},{id:"square",label:"1:1",ratio:1},{id:"4x3",label:"4:3",ratio:4/3},{id:"3x2",label:"3:2",ratio:3/2},{id:"16x9",label:"16:9",ratio:16/9},{id:"9x16",label:"9:16",ratio:9/16}],yt=(e,t,n)=>e<t?t:e>n?n:e,wM=e=>{if(e<=0)return"0 B";let t=["B","KB","MB","GB"],n=Math.min(Math.floor(Math.log(e)/Math.log(1024)),t.length-1),i=e/1024**n;return`${i.toFixed(i>=100?0:i>=10?1:2)} ${t[n]}`},nv=e=>Ms(e)&&JO.has(e.extension.toLowerCase()),Vo=(e,t)=>{if(!nv(t)){new un.Notice("Editing is supported for PNG, JPG, and WEBP images.");return}new tv(e,t).open()},tv=class extends un.Modal{constructor(n,i){super(n);this.imageEl=null;this.selectionEl=null;this.constraintButtons=new Map;this.currentConstraint={id:"current",label:"Current",ratio:null};this.newFileCheckbox=null;this.saveButtonEl=null;this.deleteButtonEl=null;this.closeButtonEl=null;this.pointerOperation=null;this.pointerTarget=null;this.activePointerId=null;this.naturalWidth=0;this.naturalHeight=0;this.minSelectionSize=16;this.selection=null;this.constraintRatio=null;this.activeConstraintId=null;this.isProcessing=!1;this.scaleValue=100;this.scaleInputEl=null;this.scaleValueEl=null;this.currentInfoEl=null;this.finalDimensionsEl=null;this.finalSizeEl=null;this.previewUpdateTimer=null;this.previewToken=0;this.originalSize=0;this.imageResizeObserver=null;this.mobileMediaQuery=null;this.isMobileLayout=!1;this.handleImageLoaded=()=>{if(!this.imageEl||!this.selectionEl)return;if(this.naturalWidth=this.imageEl.naturalWidth,this.naturalHeight=this.imageEl.naturalHeight,this.originalSize=this.file.stat.size,this.updateCurrentConstraintState(),!this.naturalWidth||!this.naturalHeight){new un.Notice("Unable to load image dimensions for editing."),this.close();return}let n=Math.min(this.naturalWidth,this.naturalHeight);this.minSelectionSize=Math.max(16,Math.min(n*.05,n)),this.selection={left:0,top:0,right:this.naturalWidth,bottom:this.naturalHeight},this.selectionEl.style.display="block",this.updateSelectionUI(),this.updateOriginalInfo(),this.schedulePreviewUpdate(),this.saveButtonEl&&(this.saveButtonEl.disabled=!1)};this.handleImageError=()=>{new un.Notice("Failed to load the image for editing."),this.close()};this.handleMobileQueryChange=n=>{this.updateMobileLayout(un.Platform.isMobileApp||n.matches)};this.updateMobileLayout=n=>{n!==this.isMobileLayout&&(this.isMobileLayout=n,this.modalEl.toggleClass("mondo-crop-modal--mobile",n),this.updateSelectionUI())};this.updateCurrentConstraintState=()=>{let n=this.constraintButtons.get("current");if(n){if(!this.naturalWidth||!this.naturalHeight){this.currentConstraint.label="Current",this.currentConstraint.ratio=null,n.setText(this.currentConstraint.label),n.disabled=!0,n.setAttr("aria-disabled","true");return}this.currentConstraint.ratio=this.naturalWidth/this.naturalHeight,n.setText(this.currentConstraint.label),n.disabled=!1,n.removeAttribute("aria-disabled"),this.activeConstraintId===this.currentConstraint.id&&this.setConstraint(this.currentConstraint)}};this.translatePointer=n=>{if(!this.imageEl||!this.naturalWidth||!this.naturalHeight)return null;let i=this.imageEl.getBoundingClientRect();if(i.width<=0||i.height<=0)return null;let o=(n.clientX-i.left)/i.width*this.naturalWidth,a=(n.clientY-i.top)/i.height*this.naturalHeight;return{x:yt(o,0,this.naturalWidth),y:yt(a,0,this.naturalHeight)}};this.beginPointerOperation=(n,i)=>{if(!this.selection)return;i.preventDefault(),i.stopPropagation();let o=this.translatePointer(i);if(!o)return;let a={...this.selection};n.type==="move"?this.pointerOperation={type:"move",startPointer:o,startRect:a}:this.pointerOperation={type:"resize",handle:n.handle,startPointer:o,startRect:a},this.activePointerId=i.pointerId,this.pointerTarget=i.currentTarget;try{this.pointerTarget.setPointerCapture(i.pointerId)}catch(r){console.debug("Mondo: pointer capture failed",r)}window.addEventListener("pointermove",this.handlePointerMove),window.addEventListener("pointerup",this.handlePointerUp)};this.handleSelectionPointerDown=n=>{var i;n.button===0&&this.beginPointerOperation({type:"move",startPointer:(i=this.translatePointer(n))!=null?i:{x:0,y:0},startRect:this.selection?{...this.selection}:{left:0,top:0,right:0,bottom:0}},n)};this.handlePointerMove=n=>{if(!this.pointerOperation||n.pointerId!==this.activePointerId)return;let i=this.translatePointer(n);if(!i||!this.selection)return;if(this.pointerOperation.type==="move"){let a=i.x-this.pointerOperation.startPointer.x,r=i.y-this.pointerOperation.startPointer.y,s=this.pointerOperation.startRect,l=s.left+a,c=s.top+r,u=s.right+a,f=s.bottom+r,p=u-l,d=f-c;if(l<0&&(u-=l,l=0),c<0&&(f-=c,c=0),u>this.naturalWidth){let h=u-this.naturalWidth;l-=h,u=this.naturalWidth}if(f>this.naturalHeight){let h=f-this.naturalHeight;c-=h,f=this.naturalHeight}if(u-l<this.minSelectionSize||f-c<this.minSelectionSize){let h=Math.max(this.minSelectionSize,Math.min(this.naturalWidth,p)),m=Math.max(this.minSelectionSize,Math.min(this.naturalHeight,d)),b=(l+u)/2,y=(c+f)/2;l=yt(b-h/2,0,this.naturalWidth-h),u=l+h,c=yt(y-m/2,0,this.naturalHeight-m),f=c+m}this.selection={left:l,top:c,right:u,bottom:f},this.updateSelectionUI();return}let o=this.calculateResize(i,this.pointerOperation.handle,this.pointerOperation.startRect);o&&(this.selection=o,this.updateSelectionUI())};this.handlePointerUp=n=>{n.pointerId===this.activePointerId&&this.detachPointerListeners()};this.detachPointerListeners=()=>{if(this.pointerTarget&&this.activePointerId!==null)try{this.pointerTarget.releasePointerCapture(this.activePointerId)}catch(n){console.debug("Mondo: release pointer capture failed",n)}window.removeEventListener("pointermove",this.handlePointerMove),window.removeEventListener("pointerup",this.handlePointerUp),this.pointerOperation=null,this.pointerTarget=null,this.activePointerId=null};this.calculateResize=(n,i,o)=>!this.naturalWidth||!this.naturalHeight?null:this.constraintRatio?this.calculateResizeWithRatio(n,i,o):this.calculateResizeFree(n,i,o);this.calculateResizeFree=(n,i,o)=>{let{left:a,top:r,right:s,bottom:l}=o;return i.includes("w")&&(a=yt(n.x,0,s-this.minSelectionSize)),i.includes("e")&&(s=yt(n.x,a+this.minSelectionSize,this.naturalWidth)),i.includes("n")&&(r=yt(n.y,0,l-this.minSelectionSize)),i.includes("s")&&(l=yt(n.y,r+this.minSelectionSize,this.naturalHeight)),this.ensureBounds({left:a,top:r,right:s,bottom:l})};this.calculateResizeWithRatio=(n,i,o)=>{var T;let a=(T=this.constraintRatio)!=null?T:1,r=this.minSelectionSize,s=k=>yt(k,0,this.naturalWidth),l=k=>yt(k,0,this.naturalHeight);if(i==="nw"||i==="ne"||i==="sw"||i==="se"){let k=i.includes("w")?o.right:o.left,E=i.includes("n")?o.bottom:o.top,C=s(n.x),L=l(n.y),F=Math.max(r,Math.abs(k-C)),N=Math.max(r,Math.abs(E-L)),_,A;if(F/N>a?(A=N,_=A*a):(_=F,A=_/a),i.includes("w")?_=Math.min(_,k):_=Math.min(_,this.naturalWidth-k),i.includes("n")?A=Math.min(A,E):A=Math.min(A,this.naturalHeight-E),i==="nw"){let D=yt(k-_,0,k-r),M=yt(E-A,0,E-r);return this.ensureRatioBounds({left:D,top:M,right:k,bottom:E},a)}if(i==="ne"){let D=yt(k+_,k+r,this.naturalWidth),M=yt(E-A,0,E-r);return this.ensureRatioBounds({left:k,top:M,right:D,bottom:E},a)}if(i==="sw"){let D=yt(k-_,0,k-r),M=yt(E+A,E+r,this.naturalHeight);return this.ensureRatioBounds({left:D,top:E,right:k,bottom:M},a)}let x=yt(k+_,k+r,this.naturalWidth),S=yt(E+A,E+r,this.naturalHeight);return this.ensureRatioBounds({left:k,top:E,right:x,bottom:S},a)}if(i==="n"||i==="s"){let k=i==="n"?o.bottom:o.top,E=(o.left+o.right)/2,C=l(n.y),L=Math.max(r,Math.abs(k-C)),F=L*a;F>this.naturalWidth&&(F=this.naturalWidth,L=F/a);let N,_;i==="n"?(_=k,N=yt(k-L,0,k-r)):(N=k,_=yt(k+L,k+r,this.naturalHeight));let A=F/2,x=E-A,S=E+A;if(x<0&&(S-=x,x=0),S>this.naturalWidth){let B=S-this.naturalWidth;x-=B,S=this.naturalWidth}let M=(S-x)/a;return i==="n"?N=_-M:_=N+M,this.ensureRatioBounds({left:x,top:N,right:S,bottom:_},a)}let c=i==="w"?o.right:o.left,u=(o.top+o.bottom)/2,f=s(n.x),p=Math.max(r,Math.abs(c-f)),d=p/a;d>this.naturalHeight&&(d=this.naturalHeight,p=d*a);let h,m;i==="w"?(m=c,h=yt(c-p,0,c-r)):(h=c,m=yt(c+p,c+r,this.naturalWidth));let b=d/2,y=u-b,g=u+b;if(y<0&&(g-=y,y=0),g>this.naturalHeight){let k=g-this.naturalHeight;y-=k,g=this.naturalHeight}let w=(g-y)*a;return i==="w"?h=m-w:m=h+w,this.ensureRatioBounds({left:h,top:y,right:m,bottom:g},a)};this.ensureRatioBounds=(n,i)=>{let o=this.ensureBounds(n),a=o.right-o.left,r=o.bottom-o.top;if(a<=0||r<=0)return o;let s=a/r;if(Math.abs(s-i)<.001)return o;let l=a,c=r;s>i?l=r*i:c=a/i;let u=(o.left+o.right)/2,f=(o.top+o.bottom)/2,p=u-l/2,d=u+l/2,h=f-c/2,m=f+c/2;if(p<0&&(d-=p,p=0),d>this.naturalWidth){let g=d-this.naturalWidth;p-=g,d=this.naturalWidth}if(h<0&&(m-=h,h=0),m>this.naturalHeight){let g=m-this.naturalHeight;h-=g,m=this.naturalHeight}let b=d-p,y=m-h;return b<=0||y<=0?o:{left:p,top:h,right:d,bottom:m}};this.ensureBounds=n=>{let{left:i,top:o,right:a,bottom:r}=n;if(i>a&&([i,a]=[a,i]),o>r&&([o,r]=[r,o]),i=yt(i,0,this.naturalWidth),a=yt(a,0,this.naturalWidth),o=yt(o,0,this.naturalHeight),r=yt(r,0,this.naturalHeight),a-i<this.minSelectionSize){let s=(i+a)/2,l=Math.min(this.minSelectionSize/2,this.naturalWidth/2);i=yt(s-l,0,this.naturalWidth-this.minSelectionSize),a=i+Math.min(this.minSelectionSize,this.naturalWidth)}if(r-o<this.minSelectionSize){let s=(o+r)/2,l=Math.min(this.minSelectionSize/2,this.naturalHeight/2);o=yt(s-l,0,this.naturalHeight-this.minSelectionSize),r=o+Math.min(this.minSelectionSize,this.naturalHeight)}return{left:i,top:o,right:a,bottom:r}};this.updateSelectionUI=()=>{var h;if(!this.selectionEl||!this.selection||!this.naturalWidth||!this.naturalHeight||!this.imageEl)return;let{left:n,top:i,right:o,bottom:a}=this.selection,r=o-n,s=a-i;if(r<=0||s<=0)return;let l=(h=this.imageEl.parentElement)==null?void 0:h.getBoundingClientRect(),c=this.imageEl.getBoundingClientRect();if(!l||c.width<=0||c.height<=0)return;let u=c.left-l.left,f=c.top-l.top,p=c.width/this.naturalWidth,d=c.height/this.naturalHeight;this.selectionEl.style.left=`${u+n*p}px`,this.selectionEl.style.top=`${f+i*d}px`,this.selectionEl.style.width=`${r*p}px`,this.selectionEl.style.height=`${s*d}px`,this.schedulePreviewUpdate()};this.updateOriginalInfo=()=>{if(!this.currentInfoEl)return;if(!this.naturalWidth||!this.naturalHeight){this.currentInfoEl.setText("\u2014");return}let n=wM(this.originalSize);this.currentInfoEl.setText(`${Math.round(this.naturalWidth)} \xD7 ${Math.round(this.naturalHeight)} px \u2022 ${n}`)};this.schedulePreviewUpdate=()=>{this.previewUpdateTimer!==null&&window.clearTimeout(this.previewUpdateTimer),this.previewUpdateTimer=window.setTimeout(()=>{this.updatePreview()},120)};this.updatePreview=async()=>{var c,u,f,p,d,h,m;if(!this.selection||!this.imageEl){(c=this.finalDimensionsEl)==null||c.setText("\u2014"),(u=this.finalSizeEl)==null||u.setText("\u2014");return}let n={...this.selection},i=Math.max(1,Math.round(n.right-n.left)),o=Math.max(1,Math.round(n.bottom-n.top)),a=Math.max(this.scaleValue,1)/100,r=Math.max(1,Math.round(i*a)),s=Math.max(1,Math.round(o*a));(f=this.finalDimensionsEl)==null||f.setText(`${r} \xD7 ${s} px`),(p=this.finalSizeEl)==null||p.setText("Calculating\u2026");let l=++this.previewToken;try{let b=await this.generateEditedBlob(n,r,s);if(l!==this.previewToken)return;(d=this.finalDimensionsEl)==null||d.setText(`${r} \xD7 ${s} px`),(h=this.finalSizeEl)==null||h.setText(wM(b.size))}catch(b){if(console.error("Mondo: failed to prepare image preview",b),l!==this.previewToken)return;(m=this.finalSizeEl)==null||m.setText("\u2014")}};this.setConstraint=n=>{this.constraintRatio=n.ratio,this.activeConstraintId=n.id,this.constraintButtons.forEach((i,o)=>{o===n.id?(i.classList.add("is-active"),i.setAttr("aria-pressed","true")):(i.classList.remove("is-active"),i.setAttr("aria-pressed","false"))}),this.selection&&this.constraintRatio?(this.selection=this.ensureRatioBounds(this.selection,this.constraintRatio),this.updateSelectionUI()):this.selection&&this.updateSelectionUI()};this.getMimeType=()=>{let n=this.file.extension.toLowerCase();return n==="jpg"||n==="jpeg"?"image/jpeg":n==="webp"?"image/webp":"image/png"};this.handleSave=async()=>{var c,u;if(!this.selection||!this.imageEl||this.isProcessing)return;let n={...this.selection},i=Math.round(n.right-n.left),o=Math.round(n.bottom-n.top);if(i<=0||o<=0){new un.Notice("Select an area to edit.");return}let a=Math.max(this.scaleValue,1)/100,r=Math.max(1,Math.round(i*a)),s=Math.max(1,Math.round(o*a));this.isProcessing=!0,this.saveButtonEl&&(this.saveButtonEl.disabled=!0),this.deleteButtonEl&&(this.deleteButtonEl.disabled=!0),this.closeButtonEl&&(this.closeButtonEl.disabled=!0);let l=(u=(c=this.newFileCheckbox)==null?void 0:c.checked)!=null?u:!1;this.newFileCheckbox&&(this.newFileCheckbox.disabled=!0);try{let p=await(await this.generateEditedBlob(n,r,s)).arrayBuffer();if(l){let d=await this.createEditedFile(p,r,s);new un.Notice(`Created ${d}`)}else await this.app.vault.modifyBinary(this.file,p),new un.Notice(`Saved ${this.file.name} at ${r}\xD7${s}.`);this.close()}catch(f){console.error("Mondo: Failed to edit image",f),new un.Notice("Editing image failed. Check the console for details.")}finally{this.isProcessing=!1,this.saveButtonEl&&(this.saveButtonEl.disabled=!1),this.deleteButtonEl&&(this.deleteButtonEl.disabled=!1),this.closeButtonEl&&(this.closeButtonEl.disabled=!1),this.newFileCheckbox&&(this.newFileCheckbox.disabled=!1)}};this.handleDelete=async()=>{var o,a;if(this.isProcessing||!confirm(`Delete ${this.file.name}? This action cannot be undone.`))return;let i=(a=(o=this.saveButtonEl)==null?void 0:o.disabled)!=null?a:!1;this.isProcessing=!0,this.saveButtonEl&&(this.saveButtonEl.disabled=!0),this.deleteButtonEl&&(this.deleteButtonEl.disabled=!0),this.closeButtonEl&&(this.closeButtonEl.disabled=!0);try{await this.app.vault.delete(this.file),new un.Notice(`Deleted ${this.file.name}.`),this.close()}catch(r){console.error("Mondo: Failed to delete image",r),new un.Notice("Deleting image failed. Check the console for details.")}finally{this.isProcessing=!1,this.saveButtonEl&&(this.saveButtonEl.disabled=i),this.deleteButtonEl&&(this.deleteButtonEl.disabled=!1),this.closeButtonEl&&(this.closeButtonEl.disabled=!1)}};this.generateEditedBlob=async(n,i,o)=>{if(!this.imageEl)throw new Error("Image not ready");let a=document.createElement("canvas");a.width=i,a.height=o;let r=a.getContext("2d");if(!r)throw new Error("Canvas not supported");r.drawImage(this.imageEl,n.left,n.top,n.right-n.left,n.bottom-n.top,0,0,i,o);let s=this.getMimeType(),l=s==="image/jpeg"?.92:void 0;return await new Promise((c,u)=>{a.toBlob(f=>{f?c(f):u(new Error("Unable to encode edited image"))},s,l)})};this.createEditedFile=async(n,i,o)=>{var d,h;let a=(h=(d=this.file.parent)==null?void 0:d.path)!=null?h:"",r=`${i}x${o}`,s=this.file.extension,l=`${this.file.basename} ${r}`,c=`${l}.${s}`,u=1,f=m=>a?`${a}/${m}`:m;for(;this.app.vault.getAbstractFileByPath(f(c));)l=`${this.file.basename} ${r} (${u})`,c=`${l}.${s}`,u+=1;let p=f(c);return await this.app.vault.createBinary(p,n),c};this.file=i}onOpen(){this.modalEl.addClass("mondo-crop-modal"),this.contentEl.addClass("mondo-crop-modal__content"),this.titleEl.setText(`Edit ${this.file.name}`),this.modalEl.querySelectorAll(".modal-close-button, .modal-close-x").forEach(A=>{A.remove()}),this.titleEl.addClass("mondo-crop-modal__title");let n=this.titleEl.parentElement;if(n instanceof HTMLElement){let A=n.createDiv({cls:"mondo-crop-modal__header"});A.appendChild(this.titleEl);let x=A.createEl("button",{cls:"mondo-crop-modal__close",attr:{type:"button","aria-label":"Close image editor"}}),S=x.createSpan({cls:"mondo-crop-modal__close-icon",attr:{"aria-hidden":"true"}});(0,un.setIcon)(S,"x"),x.addEventListener("click",()=>{this.isProcessing||this.close()}),this.closeButtonEl=x}typeof window!="undefined"&&"matchMedia"in window?(this.mobileMediaQuery=window.matchMedia("(max-width: 600px)"),this.mobileMediaQuery.addEventListener("change",this.handleMobileQueryChange),this.updateMobileLayout(un.Platform.isMobileApp||this.mobileMediaQuery.matches)):this.updateMobileLayout(un.Platform.isMobileApp);let i=this.contentEl.createDiv({cls:"mondo-crop-modal__body"}),a=i.createDiv({cls:"mondo-crop-modal__preview"}).createDiv({cls:"mondo-crop-modal__image-container"});a.style.touchAction="none";let r=a.createEl("img",{cls:"mondo-crop-modal__image"});r.alt=this.file.name,r.addEventListener("load",this.handleImageLoaded),r.addEventListener("error",this.handleImageError),r.src=this.app.vault.getResourcePath(this.file),this.imageEl=r,typeof ResizeObserver!="undefined"&&(this.imageResizeObserver=new ResizeObserver(()=>{this.updateSelectionUI()}),this.imageResizeObserver.observe(r));let s=a.createDiv({cls:"mondo-crop-modal__selection"});s.style.display="none",s.addEventListener("pointerdown",this.handleSelectionPointerDown),this.selectionEl=s,["n","s","e","w","ne","nw","se","sw"].forEach(A=>{let x=s.createDiv({cls:`mondo-crop-modal__handle mondo-crop-modal__handle--${A}`});x.dataset.handle=A,x.addEventListener("pointerdown",S=>{var D;this.beginPointerOperation({type:"resize",handle:A,startPointer:(D=this.translatePointer(S))!=null?D:{x:0,y:0},startRect:this.selection?{...this.selection}:{left:0,top:0,right:0,bottom:0}},S)})});let c=i.createDiv({cls:"mondo-crop-modal__controls"});c.createEl("div",{cls:"mondo-crop-modal__constraints-label"}).setText("Aspect ratio");let f=c.createDiv({cls:"mondo-crop-modal__constraints"});[this.currentConstraint,...WO].forEach(A=>{let x=f.createEl("button",{text:A.label,cls:"mondo-crop-modal__constraint"});x.setAttr("type","button"),A.id==="current"&&A.ratio===null&&(x.disabled=!0,x.setAttr("aria-disabled","true")),x.addEventListener("click",()=>{x.disabled||this.setConstraint(A)}),this.constraintButtons.set(A.id,x)}),this.setConstraint(this.currentConstraint);let d=c.createDiv({cls:"mondo-crop-modal__scale"}),h=d.createDiv({cls:"mondo-crop-modal__scale-header"});h.createSpan({text:"Scale"}),this.scaleValueEl=h.createSpan({cls:"mondo-crop-modal__scale-value",text:"100%"}),this.scaleInputEl=d.createEl("input",{type:"range",cls:"mondo-crop-modal__scale-input",attr:{min:"10",max:"500",step:"1",value:String(this.scaleValue)}}),this.scaleInputEl.addEventListener("input",()=>{var A,x,S;this.scaleValue=Number.parseInt((x=(A=this.scaleInputEl)==null?void 0:A.value)!=null?x:"100",10),(S=this.scaleValueEl)==null||S.setText(`${this.scaleValue}%`),this.schedulePreviewUpdate()});let m=c.createDiv({cls:"mondo-crop-modal__summary"}),b=m.createDiv({cls:"mondo-crop-modal__summary-item"});b.createSpan({cls:"mondo-crop-modal__summary-label",text:"Current"}),this.currentInfoEl=b.createSpan({cls:"mondo-crop-modal__summary-data",text:"Loading\u2026"});let y=m.createDiv({cls:"mondo-crop-modal__summary-item"});y.createSpan({cls:"mondo-crop-modal__summary-label",text:"Estimated"});let g=y.createSpan({cls:"mondo-crop-modal__summary-data"});this.finalDimensionsEl=g.createSpan({text:"\u2014"}),g.createSpan({cls:"mondo-crop-modal__summary-separator",text:"\u2022"}),this.finalSizeEl=g.createSpan({text:"\u2014"});let w=this.contentEl.createDiv({cls:"modal-button-container mondo-crop-modal__footer"}).createDiv({cls:"mondo-crop-modal__footer-inner"}),T=w.createDiv({cls:"mondo-crop-modal__footer-option"}),k=`mondo-edit-new-image-${Date.now()}`,E=T.createEl("input",{type:"checkbox",cls:"mondo-crop-modal__checkbox"});E.id=k,this.newFileCheckbox=E,T.createEl("label",{attr:{for:k}}).setText("Save as new image");let L=w.createDiv({cls:"mondo-crop-modal__footer-actions"}),F=L.createEl("button",{cls:"mondo-crop-modal__delete",attr:{type:"button"}}),N=F.createSpan({cls:"mondo-crop-modal__delete-icon",attr:{"aria-hidden":"true"}});(0,un.setIcon)(N,"trash"),F.createSpan({text:"Delete"}),F.addEventListener("click",()=>{this.handleDelete()}),this.deleteButtonEl=F;let _=L.createEl("button",{text:"Save"});_.addClass("mod-cta"),_.disabled=!0,_.addEventListener("click",()=>{this.handleSave()}),this.saveButtonEl=_}onClose(){this.imageEl&&(this.imageEl.removeEventListener("load",this.handleImageLoaded),this.imageEl.removeEventListener("error",this.handleImageError)),this.mobileMediaQuery&&(this.mobileMediaQuery.removeEventListener("change",this.handleMobileQueryChange),this.mobileMediaQuery=null),this.updateMobileLayout(!1),this.imageResizeObserver&&(this.imageResizeObserver.disconnect(),this.imageResizeObserver=null),this.detachPointerListeners(),this.pointerOperation=null,this.pointerTarget=null,this.activePointerId=null,this.previewUpdateTimer!==null&&(window.clearTimeout(this.previewUpdateTimer),this.previewUpdateTimer=null),this.closeButtonEl=null,this.deleteButtonEl=null,this.saveButtonEl=null}};var oe=O(P()),ZO="vaultImages.viewMode",TM=()=>{let e=pe(),[t,n]=(0,tt.useState)([]),i=(0,tt.useMemo)(()=>{var M,B,G,$;let S=(B=(M=e==null?void 0:e.plugins)==null?void 0:M.getPlugin)==null?void 0:B.call(M,"mondo");return(($=(G=S==null?void 0:S.settings)==null?void 0:G.vaultImages)==null?void 0:$.viewMode)==="grid"?"grid":"wall"},[e]),o=Zt(ZO,i),[a,r]=(0,tt.useState)(i),[s,l]=(0,tt.useState)({}),c=(0,tt.useRef)(new Map),u=(0,tt.useRef)(null),[f,p]=(0,tt.useState)(!1),[d,h]=(0,tt.useState)(null);(0,tt.useEffect)(()=>{r(o)},[o]),(0,tt.useEffect)(()=>{if(typeof window=="undefined")return;let S=window.matchMedia("(hover: hover) and (pointer: fine)"),D=M=>{p(M.matches)};return p(S.matches),typeof S.addEventListener=="function"?(S.addEventListener("change",D),()=>{S.removeEventListener("change",D)}):(S.addListener(D),()=>{S.removeListener(D)})},[]);let m=(0,tt.useCallback)(()=>{let S=e.vault.getFiles().filter(D=>Ms(D)).sort((D,M)=>M.stat.mtime-D.stat.mtime);n(S)},[e]);(0,tt.useEffect)(()=>{m();let S=[],D=()=>{m()};return S.push(e.vault.on("create",D)),S.push(e.vault.on("delete",D)),S.push(e.vault.on("modify",D)),S.push(e.vault.on("rename",D)),()=>{for(let M of S)try{e.vault.offref(M)}catch(B){console.debug("VaultImagesView: failed to remove vault listener",B)}}},[e,m]);let b=(0,tt.useMemo)(()=>{let S=new Map;return t.map(D=>{let M=S.get(D.path);return M||(M=e.vault.getResourcePath(D),S.set(D.path,M)),{file:D,resourcePath:M}})},[e,t]);(0,tt.useEffect)(()=>{let S=!1;return b.forEach(D=>{if(c.current.has(D.file.path))return;let M=new Image;M.onload=()=>{if(S)return;let B={width:M.naturalWidth,height:M.naturalHeight};c.current.set(D.file.path,B),l(G=>({...G,[D.file.path]:B}))},M.onerror=()=>{S||(c.current.set(D.file.path,null),l(B=>({...B,[D.file.path]:null})))},M.src=D.resourcePath}),()=>{S=!0}},[b]);let y=(0,tt.useMemo)(()=>{var S,D;return(D=(S=e==null?void 0:e.plugins)==null?void 0:S.getPlugin)==null?void 0:D.call(S,"mondo")},[e]),g=(0,tt.useCallback)(async S=>{var B,G,$;if(!y)return;let D=(B=y.settings)!=null?B:{},M=(G=D.vaultImages)!=null?G:{};if(M.viewMode!==S){y.settings={...D,vaultImages:{...M,viewMode:S}};try{await(($=y.saveSettings)==null?void 0:$.call(y))}catch(te){console.debug("VaultImagesView: failed to persist view mode",te)}try{window.dispatchEvent(new CustomEvent("mondo:settings-updated"))}catch(te){console.debug("VaultImagesView: failed to dispatch settings update event",te)}}},[y]),v=(0,tt.useCallback)(S=>{let D=S?"grid":"wall";r(D),g(D)},[g]),w=(0,tt.useCallback)(S=>{Vo(e,S)},[e]),T=(0,tt.useCallback)(async S=>{if(window.confirm(`Are you sure you want to delete "${S.basename}"?`))try{await e.vault.delete(S),n(M=>M.filter(B=>B.path!==S.path)),l(M=>{if(!(S.path in M))return M;let B={...M};return delete B[S.path],c.current.delete(S.path),B})}catch(M){console.debug("VaultImagesView: failed to delete image",S.path,M)}},[e]),k=(0,tt.useMemo)(()=>b.map(S=>{var B,G;let D=(B=s[S.file.path])!=null?B:null,M=D?`${D.width} \xD7 ${D.height}`:"\u2014";return{entry:S,dimensionLabel:M,sizeLabel:xi((G=S.file.stat.size)!=null?G:0),typeLabel:S.file.extension.toUpperCase()}}),[s,b]),E=a==="grid";(0,tt.useEffect)(()=>{h(null)},[E]),(0,tt.useEffect)(()=>{f||h(null)},[f]);let C=(0,tt.useCallback)(S=>{let D=u.current;if(!D)return null;let M=S.getBoundingClientRect(),B=D.getBoundingClientRect(),G=M.left-B.left+M.width/2,$=Math.min(Math.max(G,16),B.width-16),te=M.top-B.top;return{x:$,y:te}},[]),L=(0,tt.useCallback)((S,D)=>{if(!f)return;let M=C(D.currentTarget);M&&h({entry:S,position:M})},[f,C]),F=(0,tt.useCallback)((S,D)=>{if(!f)return;let M=C(D.currentTarget);M&&h({entry:S,position:M})},[f,C]),N=(0,tt.useCallback)(()=>{h(null)},[]),_=(0,tt.useCallback)((S,D)=>{(D.key==="Enter"||D.key===" ")&&(D.preventDefault(),w(S.file))},[w]),A=(0,tt.useMemo)(()=>{var B,G;if(!d)return null;let{entry:S}=d,D=(B=s[S.file.path])!=null?B:null,M=D?`${D.width} \xD7 ${D.height}`:"\u2014";return{entry:S,dimensionLabel:M,sizeLabel:xi((G=S.file.stat.size)!=null?G:0),createdAt:S.file.stat.ctime,updatedAt:S.file.stat.mtime}},[s,d]),x=(0,tt.useMemo)(()=>{let S=t.reduce((D,M)=>{var B;return D+((B=M.stat.size)!=null?B:0)},0);return{totalImages:t.length,totalSizeLabel:xi(S)}},[t]);return(0,oe.jsxs)("div",{className:"p-4 space-y-6",children:[(0,oe.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-3 border-b border-[var(--background-modifier-border)] pb-3",children:[(0,oe.jsx)(Mt,{variant:"h1",className:"flex-1",children:"Images"}),(0,oe.jsx)("div",{className:"flex items-center",children:(0,oe.jsx)(Ip,{checked:E,onCheckedChange:v,uncheckedLabel:"Wall",checkedLabel:"Grid","aria-label":"Toggle between wall and grid layouts",className:"shrink-0"})})]}),(0,oe.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,oe.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,oe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total Images"}),(0,oe.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:x.totalImages.toLocaleString()})]}),(0,oe.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,oe.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total File Size"}),(0,oe.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:x.totalSizeLabel})]})]}),b.length===0?(0,oe.jsx)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] p-6 text-center text-[var(--text-muted)]",children:"No images found in your vault."}):E?(0,oe.jsxs)("div",{className:"space-y-3",children:[(0,oe.jsx)("div",{className:"hidden overflow-hidden rounded-lg border border-[var(--background-modifier-border)] sm:block",children:(0,oe.jsxs)(Se,{children:[(0,oe.jsx)("thead",{className:"bg-[var(--background-secondary-alt, var(--background-secondary))]",children:(0,oe.jsxs)("tr",{children:[(0,oe.jsx)(Se.HeadCell,{className:"w-24 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Cover"}),(0,oe.jsx)(Se.HeadCell,{className:"p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Image"}),(0,oe.jsx)(Se.HeadCell,{className:"w-32 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Type"}),(0,oe.jsx)(Se.HeadCell,{className:"w-48 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Size"}),(0,oe.jsx)(Se.HeadCell,{className:"w-20 p-3 text-right text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:(0,oe.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,oe.jsx)("tbody",{children:k.map(({entry:S,dimensionLabel:D,sizeLabel:M,typeLabel:B})=>(0,oe.jsxs)(Se.Row,{className:"border-t border-[var(--background-modifier-border)]",children:[(0,oe.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,oe.jsx)(Hn,{src:S.resourcePath,alt:S.file.basename,size:64,editLabel:`Edit cover for ${S.file.basename}`,onEditCover:()=>{w(S.file)}})}),(0,oe.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,oe.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,oe.jsxs)(Me,{variant:"link",tone:"info",className:"group relative max-w-xl font-medium",onClick:()=>{w(S.file)},"aria-label":`Edit ${S.file.basename}`,children:[(0,oe.jsx)("span",{className:"block max-w-full truncate",children:S.file.basename}),(0,oe.jsx)("span",{className:"pointer-events-none absolute left-0 top-full z-20 mt-1 hidden w-max max-w-xl rounded-md border border-[var(--background-modifier-border)] bg-[var(--background-secondary, var(--background-primary))] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg group-hover:block group-focus-visible:block group-focus-within:block",role:"presentation",children:S.file.basename})]}),(0,oe.jsxs)("div",{className:"group relative max-w-xl text-xs text-[var(--text-muted)]","aria-label":S.file.path,tabIndex:0,children:[(0,oe.jsx)("span",{className:"block truncate",children:S.file.path}),(0,oe.jsx)("span",{className:"pointer-events-none absolute left-0 top-full z-20 mt-1 hidden w-max max-w-xl rounded-md border border-[var(--background-modifier-border)] bg-[var(--background-secondary, var(--background-primary))] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg group-hover:block group-focus-visible:block group-focus-within:block",role:"presentation",children:S.file.path})]})]})}),(0,oe.jsx)(Se.Cell,{className:"p-3 align-middle text-sm text-[var(--text-normal)]",children:B}),(0,oe.jsx)(Se.Cell,{className:"p-3 align-middle text-sm text-[var(--text-normal)]",children:(0,oe.jsxs)("div",{className:"flex flex-col gap-1",children:[(0,oe.jsx)("span",{children:M}),(0,oe.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:D})]})}),(0,oe.jsxs)(Se.Cell,{className:"flex items-center justify-end gap-1 p-3 align-middle",children:[(0,oe.jsx)(Me,{icon:"external-link",variant:"link",tone:"info","aria-label":`Open ${S.file.basename} in a new tab`,onClick:()=>{typeof window!="undefined"&&window.open(S.resourcePath,"_blank","noopener,noreferrer")}}),(0,oe.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":`Delete ${S.file.basename}`,onClick:()=>{T(S.file)}})]})]},S.file.path))})]})}),(0,oe.jsx)("div",{className:"space-y-3 sm:hidden",children:k.map(({entry:S,dimensionLabel:D,sizeLabel:M,typeLabel:B})=>(0,oe.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,oe.jsxs)("div",{className:"flex items-start gap-3",children:[(0,oe.jsx)(Hn,{src:S.resourcePath,alt:S.file.basename,size:80,editLabel:`Edit ${S.file.basename}`,onEditCover:()=>{w(S.file)}}),(0,oe.jsxs)("div",{className:"min-w-0 flex-1 space-y-2",children:[(0,oe.jsx)(Me,{variant:"link",tone:"info",className:"block w-full truncate text-left font-medium",onClick:()=>{w(S.file)},"aria-label":`Edit ${S.file.basename}`,children:S.file.basename}),(0,oe.jsx)("div",{className:"text-xs text-[var(--text-muted)]","aria-label":S.file.path,title:S.file.path,children:(0,oe.jsx)("span",{className:"block truncate",children:S.file.path})}),(0,oe.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 text-sm text-[var(--text-normal)]",children:[(0,oe.jsxs)("span",{children:["Type: ",B]}),(0,oe.jsxs)("span",{children:["Size: ",M]}),(0,oe.jsxs)("span",{className:"text-[var(--text-muted)]",children:["Dimensions: ",D]})]})]})]}),(0,oe.jsxs)("div",{className:"mt-3 flex justify-end gap-2",children:[(0,oe.jsx)(Me,{icon:"external-link",variant:"link",tone:"info","aria-label":`Open ${S.file.basename} in a new tab`,onClick:()=>{typeof window!="undefined"&&window.open(S.resourcePath,"_blank","noopener,noreferrer")}}),(0,oe.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":`Delete ${S.file.basename}`,onClick:()=>{T(S.file)}})]})]},S.file.path))})]}):(0,oe.jsxs)("div",{ref:u,className:"relative overflow-visible rounded-lg border border-[var(--background-modifier-border)] p-2",onMouseLeave:N,children:[(0,oe.jsx)("div",{className:"grid grid-cols-2 gap-0 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8",children:b.map(S=>(0,oe.jsx)("div",{className:"group relative aspect-square",children:(0,oe.jsx)("div",{role:"button",tabIndex:0,className:"relative h-full w-full cursor-pointer overflow-hidden outline-none transition-transform duration-200 ease-out hover:z-20 hover:scale-[1.06] hover:rounded-lg hover:shadow-[0_14px_45px_rgba(0,0,0,0.55)] focus-visible:z-20 focus-visible:scale-[1.04] focus-visible:rounded-lg focus-visible:shadow-[0_12px_36px_rgba(0,0,0,0.5)] focus-visible:ring-2 focus-visible:ring-[var(--interactive-accent)] focus-visible:ring-offset-0",onMouseEnter:D=>{L(S,D)},onMouseMove:D=>{F(S,D)},onMouseLeave:N,"aria-label":`Edit ${S.file.basename}`,children:(0,oe.jsx)(Hn,{src:S.resourcePath,alt:S.file.basename,size:"100%",coverClassName:"rounded-none border-none",editLabel:`Edit ${S.file.basename}`,onEditCover:()=>{w(S.file)}})})},S.file.path))}),f&&d&&A?(0,oe.jsxs)("div",{className:"pointer-events-none absolute z-30 w-64 rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-primary)] p-4 text-[var(--text-normal)] shadow-[0_18px_60px_rgba(0,0,0,0.6)] backdrop-blur-sm transition-opacity duration-150",style:{left:d.position.x,top:d.position.y,transform:"translate(-50%, calc(-100% - 12px))",backgroundColor:"var(--background-secondary, var(--background-primary))"},children:[(0,oe.jsx)("div",{className:"text-sm font-semibold",children:A.entry.file.basename}),(0,oe.jsx)("div",{className:"mt-1 truncate text-xs text-[var(--text-muted)]",children:A.entry.file.path}),(0,oe.jsxs)("div",{className:"mt-3 space-y-1 text-xs",children:[(0,oe.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,oe.jsx)("span",{className:"text-[var(--text-muted)]",children:"File size"}),(0,oe.jsx)("span",{children:A.sizeLabel})]}),(0,oe.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,oe.jsx)("span",{className:"text-[var(--text-muted)]",children:"Dimensions"}),(0,oe.jsx)("span",{children:A.dimensionLabel})]}),(0,oe.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,oe.jsx)("span",{className:"text-[var(--text-muted)]",children:"Created"}),(0,oe.jsx)(cn,{value:A.createdAt,className:"text-right"})]}),(0,oe.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,oe.jsx)("span",{className:"text-[var(--text-muted)]",children:"Last update"}),(0,oe.jsx)(cn,{value:A.updatedAt,className:"text-right"})]})]})]}):null]})]})};var iv=O(P()),Qp=class extends SM.ItemView{constructor(n,i=Ns){super(n);this.root=null;this.iconName=i}getViewType(){return nc}getDisplayText(){return"Images"}getIcon(){return this.iconName}async onOpen(){this.contentEl.empty(),this.root=(0,kM.createRoot)(this.contentEl),this.root.render((0,iv.jsx)(Fn,{app:this.app,children:(0,iv.jsx)(TM,{})}))}async onClose(){var n;(n=this.root)==null||n.unmount(),this.root=null}};var CM=require("obsidian"),MM=O(Fo());var fo=O(fe());var ve=O(P()),eF={pdf:"file-text",csv:"table",xlsx:"table",xls:"table",doc:"file-text",docx:"file-text",ppt:"presentation",pptx:"presentation",keynote:"presentation",zip:"archive",rar:"archive","7z":"archive",mp4:"film",mov:"film",avi:"film",mkv:"film"},tF=e=>e.extension.toLowerCase(),EM=()=>{let e=pe(),[t,n]=(0,fo.useState)([]),i=(0,fo.useCallback)(()=>{let l=e.vault.getFiles().filter(c=>ZC(c)).sort((c,u)=>u.stat.mtime-c.stat.mtime);n(l)},[e]);(0,fo.useEffect)(()=>{i();let l=[],c=()=>{i()};return l.push(e.vault.on("create",c)),l.push(e.vault.on("delete",c)),l.push(e.vault.on("modify",c)),l.push(e.vault.on("rename",c)),()=>{for(let u of l)try{e.vault.offref(u)}catch(f){console.debug("VaultFilesView: failed to remove vault listener",f)}}},[e,i]);let o=(0,fo.useMemo)(()=>t.map(l=>{var m,b,y,g;let c=tF(l),u=(m=eF[c])!=null?m:"file",f=l.stat.ctime,p=(b=l.stat.size)!=null?b:0,d=(g=(y=l.parent)==null?void 0:y.path)!=null?g:"",h=d.length>0?d:"/";return{file:l,typeLabel:c.toUpperCase(),icon:u,sizeLabel:xi(p),size:p,createdValue:f,pathLabel:h}}),[t]),a=(0,fo.useCallback)(async l=>{await e.workspace.getLeaf(!0).openFile(l)},[e]),r=(0,fo.useCallback)(async l=>{if(window.confirm(`Are you sure you want to delete "${l.basename}"?`))try{await e.vault.delete(l),n(u=>u.filter(f=>f.path!==l.path))}catch(u){console.debug("VaultFilesView: failed to delete file",l.path,u)}},[e]),s=(0,fo.useMemo)(()=>{let l=o.reduce((c,u)=>c+u.size,0);return{totalCount:o.length,totalSizeLabel:xi(l)}},[o]);return(0,ve.jsxs)("div",{className:"p-4 space-y-6",children:[(0,ve.jsx)("div",{className:"border-b border-[var(--background-modifier-border)] pb-3",children:(0,ve.jsx)(Mt,{variant:"h1",children:"Files"})}),(0,ve.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,ve.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,ve.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total Files"}),(0,ve.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:s.totalCount.toLocaleString()})]}),(0,ve.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,ve.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total File Size"}),(0,ve.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:s.totalSizeLabel})]})]}),(0,ve.jsx)("div",{className:"hidden overflow-hidden rounded-lg border border-[var(--background-modifier-border)] sm:block",children:(0,ve.jsxs)(Se,{children:[(0,ve.jsx)("thead",{className:"bg-[var(--background-secondary-alt, var(--background-secondary))]",children:(0,ve.jsxs)("tr",{children:[(0,ve.jsx)(Se.HeadCell,{className:"p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"File"}),(0,ve.jsx)(Se.HeadCell,{className:"w-40 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Type"}),(0,ve.jsx)(Se.HeadCell,{className:"w-32 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Size"}),(0,ve.jsx)(Se.HeadCell,{className:"w-48 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Created"}),(0,ve.jsx)(Se.HeadCell,{className:"w-16 p-3 text-right text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:(0,ve.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,ve.jsx)("tbody",{children:o.length===0?(0,ve.jsx)("tr",{children:(0,ve.jsx)(Se.Cell,{colSpan:5,className:"p-6 text-center text-[var(--text-muted)]",children:"No files found."})}):o.map(l=>(0,ve.jsxs)(Se.Row,{className:"border-t border-[var(--background-modifier-border)]",children:[(0,ve.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,ve.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,ve.jsxs)(Me,{variant:"link",tone:"info",className:"group relative max-w-xl font-medium",onClick:()=>{a(l.file)},"aria-label":`Open ${l.file.basename}`,children:[(0,ve.jsx)("span",{className:"block max-w-full truncate",children:l.file.basename}),(0,ve.jsx)("span",{className:"pointer-events-none absolute left-0 top-full z-20 mt-1 hidden w-max max-w-xl rounded-md border border-[var(--background-modifier-border)] bg-[var(--background-secondary, var(--background-primary))] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg group-hover:block group-focus-visible:block group-focus-within:block",role:"presentation",children:l.file.basename})]}),(0,ve.jsxs)("div",{className:"group relative max-w-xl text-xs text-[var(--text-muted)]","aria-label":l.pathLabel,tabIndex:0,children:[(0,ve.jsx)("span",{className:"block truncate",children:l.pathLabel}),(0,ve.jsx)("span",{className:"pointer-events-none absolute left-0 top-full z-20 mt-1 hidden w-max max-w-xl rounded-md border border-[var(--background-modifier-border)] bg-[var(--background-secondary, var(--background-primary))] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg group-hover:block group-focus-visible:block group-focus-within:block",role:"presentation",children:l.pathLabel})]})]})}),(0,ve.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,ve.jsxs)("div",{className:"flex items-center gap-2 text-[var(--text-normal)]",children:[(0,ve.jsx)(Ze,{name:l.icon,className:"h-4 w-4"}),(0,ve.jsx)("span",{className:"truncate text-sm",children:l.typeLabel})]})}),(0,ve.jsx)(Se.Cell,{className:"p-3 align-middle text-[var(--text-normal)]",children:l.sizeLabel}),(0,ve.jsx)(Se.Cell,{className:"p-3 align-middle text-[var(--text-muted)]",children:(0,ve.jsx)(cn,{value:l.createdValue,fallback:"\u2014"})}),(0,ve.jsx)(Se.Cell,{className:"p-3 align-middle text-right",children:(0,ve.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":`Delete ${l.file.basename}`,onClick:()=>{r(l.file)}})})]},l.file.path))})]})}),(0,ve.jsx)("div",{className:"space-y-3 sm:hidden",children:o.length===0?(0,ve.jsx)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4 text-center text-[var(--text-muted)]",children:"No files found."}):o.map(l=>(0,ve.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,ve.jsxs)("div",{className:"flex items-start justify-between gap-3",children:[(0,ve.jsxs)("div",{className:"min-w-0 flex-1 space-y-2",children:[(0,ve.jsx)(Me,{variant:"link",tone:"info",className:"block w-full truncate text-left font-medium",onClick:()=>{a(l.file)},"aria-label":`Open ${l.file.basename}`,children:l.file.basename}),(0,ve.jsx)("div",{className:"text-xs text-[var(--text-muted)]","aria-label":l.pathLabel,title:l.pathLabel,children:(0,ve.jsx)("span",{className:"block truncate",children:l.pathLabel})})]}),(0,ve.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":`Delete ${l.file.basename}`,onClick:()=>{r(l.file)}})]}),(0,ve.jsxs)("div",{className:"mt-3 flex flex-wrap gap-x-4 gap-y-2 text-sm text-[var(--text-normal)]",children:[(0,ve.jsxs)("div",{className:"flex items-center gap-2",children:[(0,ve.jsx)(Ze,{name:l.icon,className:"h-4 w-4"}),(0,ve.jsx)("span",{children:l.typeLabel})]}),(0,ve.jsxs)("div",{className:"text-[var(--text-normal)]",children:["Size: ",l.sizeLabel]}),(0,ve.jsxs)("div",{className:"text-[var(--text-muted)]",children:["Created: ",(0,ve.jsx)(cn,{value:l.createdValue,fallback:"\u2014"})]})]})]},l.file.path))})]})};var ov=O(P()),Xp=class extends CM.ItemView{constructor(n,i=As){super(n);this.root=null;this.iconName=i}getViewType(){return ic}getDisplayText(){return"Files"}getIcon(){return this.iconName}async onOpen(){this.contentEl.empty(),this.root=(0,MM.createRoot)(this.contentEl),this.root.render((0,ov.jsx)(Fn,{app:this.app,children:(0,ov.jsx)(EM,{})}))}async onClose(){var n;(n=this.root)==null||n.unmount(),this.root=null}};var DM=require("obsidian"),LM=O(Fo());var ai=O(fe()),lc=require("obsidian");var Jp=require("obsidian"),nF=new Set(["png","jpg","jpeg","gif","bmp","webp","svg","avif","heic","heif"]),xM=e=>{if(typeof e=="string"){let t=e.trim();return t.length>0?t:null}if(Array.isArray(e))for(let t of e){let n=xM(t);if(n)return n}return null},iF=e=>{let t=e.trim();if(!t)return"";t.startsWith("![[")&&t.endsWith("]]")?t=t.slice(3,-2):t.startsWith("[[")&&t.endsWith("]]")&&(t=t.slice(2,-2));let n=t.indexOf("|");n>=0&&(t=t.slice(0,n));let i=t.indexOf("#");return i>=0&&(t=t.slice(0,i)),t.trim()},oF=e=>nF.has(e.extension.toLowerCase()),aF=(e,t,n)=>{let i=e.vault.getAbstractFileByPath(t);if(i instanceof Jp.TFile)return i;let o=e.metadataCache.getFirstLinkpathDest(t,n);if(o instanceof Jp.TFile)return o;if(t.toLowerCase().endsWith(".md")){let a=t.replace(/\.md$/i,""),r=e.metadataCache.getFirstLinkpathDest(a,n);if(r instanceof Jp.TFile)return r}return null},Mr=(e,t)=>{var s,l;let n=(l=(s=t.cache)==null?void 0:s.frontmatter)!=null?l:{},i=n==null?void 0:n.cover,o=xM(i);if(!o)return null;if(/^(https?:|app:|data:)/i.test(o))return{kind:"external",url:o};let a=iF(o);if(!a)return null;let r=aF(e,a,t.file.path);return!r||!oF(r)?null:{kind:"vault",file:r,resourcePath:e.vault.getResourcePath(r)}};var be=O(P()),rF=new Set(["png","jpg","jpeg","gif","bmp","webp","svg","avif","heic","heif"]),NM=e=>{let t=/\.([^.]+)$/.exec(e.name);if(t)return t[1].toLowerCase();let n=e.type;if(typeof n=="string"&&n.startsWith("image/")){let[,i]=n.split("/");if(i)return i.toLowerCase()}return"png"},sF=e=>{if(e.type&&e.type.startsWith("image/"))return!0;let t=NM(e);return rF.has(t)},lF=e=>{let t=NM(e),n=e.name.trim();return n.length===0?`cover.${t}`:n.toLowerCase().endsWith(`.${t}`)||n.includes(".")?n:`${n}.${t}`},AM=()=>{let e=pe(),[t,n]=(0,ai.useState)([]),[i,o]=(0,ai.useState)(!1),[a,r]=(0,ai.useState)(null),s=(0,ai.useCallback)(async()=>{var m,b,y,g,v,w;let d=e.vault.getFiles().filter(T=>ed(T)).sort((T,k)=>k.stat.mtime-T.stat.mtime),h=[];for(let T of d){let k=e.metadataCache.getFileCache(T),E=(m=k==null?void 0:k.frontmatter)!=null?m:{},C=typeof E.show=="string"?E.show:"",L=C.trim()||T.basename,F={file:T,cache:k!=null?k:void 0},N=Mr(e,F),_=(y=(b=T.parent)==null?void 0:b.path)!=null?y:"",x=Boolean(C.trim())?T.path:_.length>0?_:"/",S=typeof E.type=="string"?E.type.trim():"",D=S.toLowerCase(),M=S||"Markdown",B="file-text";if(D&&Nt(D)){let $=en(D);M=(g=$==null?void 0:$.name)!=null?g:S||"Markdown",B=(v=$==null?void 0:$.icon)!=null?v:"tag"}else D&&(M=S,B="tag");let G=(w=T.stat.size)!=null?w:0;h.push({file:T,displayName:L,pathLabel:x,cover:N,size:G,sizeLabel:xi(G),typeLabel:M,typeIcon:B})}return h},[e]);(0,ai.useEffect)(()=>{let d=!1,h=async()=>{o(!0);let y=await s();d||(n(y),o(!1))};h();let m=[],b=()=>{h()};return m.push(e.vault.on("create",b)),m.push(e.vault.on("delete",b)),m.push(e.vault.on("modify",b)),m.push(e.vault.on("rename",b)),()=>{d=!0;for(let y of m)try{e.vault.offref(y)}catch(g){console.debug("VaultNotesView: failed to remove vault listener",g)}}},[e,s]);let l=(0,ai.useCallback)(async d=>{await e.workspace.getLeaf(!0).openFile(d)},[e]),c=(0,ai.useCallback)(async d=>{if(window.confirm(`Are you sure you want to delete "${d.basename}"?`))try{await e.vault.delete(d),n(m=>m.filter(b=>b.file.path!==d.path))}catch(m){console.debug("VaultNotesView: failed to delete note",d.path,m)}},[e]),u=(0,ai.useCallback)(async(d,h,m)=>{if(!(a&&a!==d.path)){if(!sF(m)){new lc.Notice("Please select an image file.");return}r(d.path);try{let b=lF(m),y=await e.fileManager.getAvailablePathForAttachment(b,d.path),g=await m.arrayBuffer(),v=await e.vault.createBinary(y,g),w=null;if(v instanceof lc.TFile)w=v;else{let k=e.vault.getAbstractFileByPath(y);k instanceof lc.TFile&&(w=k)}if(!w)throw new Error("Failed to create image attachment");let T=e.metadataCache.fileToLinktext(w,d.path,!1);await e.fileManager.processFrontMatter(d,k=>{k.cover=`[[${T}]]`})}catch(b){console.error("VaultNotesView: failed to set cover image",b),new lc.Notice("Failed to set cover image.")}finally{r(null)}}},[e,a]),f=(0,ai.useCallback)(d=>{try{d.kind==="vault"?Vo(e,d.file):typeof window!="undefined"&&window.open(d.url,"_blank","noopener,noreferrer")}catch(h){console.debug("VaultNotesView: failed to open cover image",h)}},[e]),p=(0,ai.useMemo)(()=>{let d=t.reduce((h,m)=>h+m.size,0);return{totalCount:t.length,totalSize:d,totalSizeLabel:xi(d)}},[t]);return(0,be.jsxs)("div",{className:"p-4 space-y-6",children:[(0,be.jsx)("div",{className:"border-b border-[var(--background-modifier-border)] pb-3",children:(0,be.jsx)(Mt,{variant:"h1",children:"Markdown Notes"})}),(0,be.jsxs)("div",{className:"grid gap-3 sm:grid-cols-2",children:[(0,be.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,be.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total Notes"}),(0,be.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:p.totalCount.toLocaleString()})]}),(0,be.jsxs)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:[(0,be.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Total File Size"}),(0,be.jsx)("div",{className:"mt-2 text-2xl font-semibold text-[var(--text-normal)]",children:p.totalSizeLabel})]})]}),(0,be.jsx)("div",{className:"hidden overflow-hidden rounded-lg border border-[var(--background-modifier-border)] sm:block",children:(0,be.jsxs)(Se,{children:[(0,be.jsx)("thead",{className:"bg-[var(--background-secondary-alt, var(--background-secondary))]",children:(0,be.jsxs)("tr",{children:[(0,be.jsx)(Se.HeadCell,{className:"w-20 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Cover"}),(0,be.jsx)(Se.HeadCell,{className:"p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Note"}),(0,be.jsx)(Se.HeadCell,{className:"w-36 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Type"}),(0,be.jsx)(Se.HeadCell,{className:"w-32 p-3 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Size"}),(0,be.jsx)(Se.HeadCell,{className:"w-16 p-3 text-right text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:(0,be.jsx)("span",{className:"sr-only",children:"Actions"})})]})}),(0,be.jsxs)("tbody",{children:[i&&t.length===0?(0,be.jsx)("tr",{children:(0,be.jsx)(Se.Cell,{colSpan:5,className:"p-6 text-center text-[var(--text-muted)]",children:"Loading notes\u2026"})}):null,!i&&t.length===0?(0,be.jsx)("tr",{children:(0,be.jsx)(Se.Cell,{colSpan:5,className:"p-6 text-center text-[var(--text-muted)]",children:"No notes found."})}):null,t.map(d=>{let h=a===d.file.path;return(0,be.jsxs)(Se.Row,{className:"border-t border-[var(--background-modifier-border)]",children:[(0,be.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,be.jsx)(Hn,{src:d.cover?d.cover.kind==="vault"?d.cover.resourcePath:d.cover.url:void 0,alt:d.displayName,size:48,strategy:"cover",placeholderIcon:"image",placeholderIconClassName:"h-5 w-5 text-[var(--text-muted)]",placeholderVariant:"dashed",className:"bg-[var(--background-primary)]",coverClassName:"border border-[var(--background-modifier-border)]",isLoading:h,disabled:h,selectLabel:`Select cover for ${d.displayName}`,editLabel:`Edit cover for ${d.displayName}`,onSelectCover:(m,b)=>{u(d.file,m,b)},onEditCover:d.cover?()=>{f(d.cover)}:void 0})}),(0,be.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,be.jsxs)("div",{className:"flex flex-col items-start gap-1",children:[(0,be.jsxs)(Me,{variant:"link",tone:"info",className:"group relative max-w-xl font-medium",onClick:()=>{l(d.file)},"aria-label":`Open ${d.displayName}`,children:[(0,be.jsx)("span",{className:"block max-w-full truncate",children:d.displayName}),(0,be.jsx)("span",{className:"pointer-events-none absolute left-0 top-full z-20 mt-1 hidden w-max max-w-xl rounded-md border border-[var(--background-modifier-border)] bg-[var(--background-secondary, var(--background-primary))] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg group-hover:block group-focus-visible:block group-focus-within:block",role:"presentation",children:d.displayName})]}),(0,be.jsxs)("div",{className:"group relative max-w-xl text-xs text-[var(--text-muted)]","aria-label":d.pathLabel,tabIndex:0,children:[(0,be.jsx)("span",{className:"block truncate",children:d.pathLabel}),(0,be.jsx)("span",{className:"pointer-events-none absolute left-0 top-full z-20 mt-1 hidden w-max max-w-xl rounded-md border border-[var(--background-modifier-border)] bg-[var(--background-secondary, var(--background-primary))] px-2 py-1 text-xs text-[var(--text-normal)] shadow-lg group-hover:block group-focus-visible:block group-focus-within:block",role:"presentation",children:d.pathLabel})]})]})}),(0,be.jsx)(Se.Cell,{className:"p-3 align-middle",children:(0,be.jsxs)("div",{className:"flex items-center gap-2 text-[var(--text-normal)]",children:[(0,be.jsx)(Ze,{name:d.typeIcon,className:"h-4 w-4"}),(0,be.jsx)("span",{className:"truncate text-sm",children:d.typeLabel})]})}),(0,be.jsx)(Se.Cell,{className:"p-3 align-middle text-[var(--text-normal)]",children:d.sizeLabel}),(0,be.jsx)(Se.Cell,{className:"p-3 align-middle text-right",children:(0,be.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":`Delete ${d.displayName}`,onClick:()=>{c(d.file)}})})]},d.file.path)})]})]})}),(0,be.jsxs)("div",{className:"space-y-3 sm:hidden",children:[i&&t.length===0?(0,be.jsx)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4 text-center text-[var(--text-muted)]",children:"Loading notes\u2026"}):null,!i&&t.length===0?(0,be.jsx)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4 text-center text-[var(--text-muted)]",children:"No notes found."}):null,t.map(d=>{let h=a===d.file.path;return(0,be.jsx)("div",{className:"rounded-lg border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] p-4",children:(0,be.jsxs)("div",{className:"flex items-start gap-3",children:[(0,be.jsx)("div",{className:"shrink-0",children:(0,be.jsx)(Hn,{src:d.cover?d.cover.kind==="vault"?d.cover.resourcePath:d.cover.url:void 0,alt:d.displayName,size:64,strategy:"cover",placeholderIcon:"image",placeholderIconClassName:"h-5 w-5 text-[var(--text-muted)]",placeholderVariant:"dashed",className:"bg-[var(--background-primary)]",coverClassName:"border border-[var(--background-modifier-border)]",isLoading:h,disabled:h,selectLabel:`Select cover for ${d.displayName}`,editLabel:`Edit cover for ${d.displayName}`,onSelectCover:(m,b)=>{u(d.file,m,b)},onEditCover:d.cover?()=>{f(d.cover)}:void 0})}),(0,be.jsxs)("div",{className:"min-w-0 flex-1 space-y-2",children:[(0,be.jsx)(Me,{variant:"link",tone:"info",className:"block w-full truncate text-left font-medium",onClick:()=>{l(d.file)},"aria-label":`Open ${d.displayName}`,children:d.displayName}),(0,be.jsx)("div",{className:"text-xs text-[var(--text-muted)]","aria-label":d.pathLabel,title:d.pathLabel,children:(0,be.jsx)("span",{className:"block truncate",children:d.pathLabel})}),(0,be.jsxs)("div",{className:"flex flex-wrap gap-x-4 gap-y-2 text-sm text-[var(--text-normal)]",children:[(0,be.jsxs)("div",{className:"flex items-center gap-2",children:[(0,be.jsx)(Ze,{name:d.typeIcon,className:"h-4 w-4"}),(0,be.jsx)("span",{children:d.typeLabel})]}),(0,be.jsxs)("div",{children:["Size: ",d.sizeLabel]})]})]}),(0,be.jsx)(Me,{icon:"trash",variant:"link",tone:"danger","aria-label":`Delete ${d.displayName}`,onClick:()=>{c(d.file)}})]})},d.file.path)})]})]})};var av=O(P()),Wp=class extends DM.ItemView{constructor(n,i=Ds){super(n);this.root=null;this.iconName=i}getViewType(){return oc}getDisplayText(){return"Markdown Notes"}getIcon(){return this.iconName}async onOpen(){this.contentEl.empty(),this.root=(0,LM.createRoot)(this.contentEl),this.root.render((0,av.jsx)(Fn,{app:this.app,children:(0,av.jsx)(AM,{})}))}async onClose(){var n;(n=this.root)==null||n.unmount(),this.root=null}};var KM=require("obsidian"),QM=O(Fo());var uc=O(fe()),tm=require("obsidian");var OM=O(fe());var FM="show",RM=e=>{if(typeof e!="string")return;let t=e.trim();return t.length>0?t:void 0},cF=e=>e.getHours()!==0||e.getMinutes()!==0||e.getSeconds()!==0||e.getMilliseconds()!==0,uF=e=>/[T\s]\d{1,2}:\d{2}/.test(e)||/\d{2}:\d{2}:\d{2}/.test(e),rv=e=>{if(e instanceof Date)return Number.isNaN(e.getTime())?{date:null,raw:null,hasTime:!1}:{date:e,raw:e.toISOString(),hasTime:cF(e)};if(typeof e=="string"){let t=e.trim();if(!t)return{date:null,raw:"",hasTime:!1};let n=t.match(/^\d{4}-\d{2}-\d{2}$/),i=null;if(n){let[o,a,r]=t.split("-").map(Number);if(Number.isFinite(o)&&Number.isFinite(a)&&Number.isFinite(r)){let s=new Date(Date.UTC(o,a-1,r));i=Number.isNaN(s.getTime())?null:s}}else{let o=new Date(t);i=Number.isNaN(o.getTime())?null:o}return{date:i,raw:t,hasTime:uF(t)}}return{date:null,raw:null,hasTime:!1}},dF=(e,t)=>{let n=RM(e);if(!n)return{date:null,raw:n!=null?n:null,hasTime:!1};let i=RM(t);if(!i)return{date:null,raw:n,hasTime:!1};let o=new Date(`${n}T${i}`);return Number.isNaN(o.getTime())?{date:null,raw:`${n} ${i}`.trim(),hasTime:!0}:{date:o,raw:`${n} ${i}`.trim(),hasTime:!0}},_M=e=>rv(e),id=e=>{var s,l;let t=(s=e.frontmatter)!=null?s:{},n=rv(t.date),i=dF(t.date,t.time);if(n.date)return!n.hasTime&&i.date?{...i,source:"frontmatter"}:{...n,source:"frontmatter"};if(i.date)return{...i,source:"legacy"};let o=rv(t.datetime);if(o.date)return{...o,source:"legacy"};let a=typeof((l=e.file.stat)==null?void 0:l.ctime)=="number"?new Date(e.file.stat.ctime):null;return a&&!Number.isNaN(a.getTime())?{date:a,raw:null,hasTime:!0,source:"created"}:{date:null,raw:typeof t.date=="string"&&t.date.trim()||typeof t.datetime=="string"&&t.datetime.trim()||i.raw||n.raw||null,hasTime:!1,source:null}},fF={date:e=>{var n,i;let t=id(e);return(i=(n=t.date)!=null?n:t.raw)!=null?i:void 0},datetime:e=>{var n,i;let t=id(e);return(i=(n=t.date)!=null?n:t.raw)!=null?i:void 0},date_time:e=>{var n,i;let t=id(e);return(i=(n=t.date)!=null?n:t.raw)!=null?i:void 0}},sv=e=>e==null?"":Array.isArray(e)?e.map(t=>sv(t)).join(", "):e instanceof Date?e.toISOString():typeof e=="object"?JSON.stringify(e):String(e),lv=(e,t)=>{var i,o;if(!t)return"";if(t===FM){let a=(i=e.frontmatter)==null?void 0:i.show;return typeof a=="string"&&a.trim().length>0?a:e.label}if(t==="fileName"||t==="filename")return e.fileName;let n=fF[t];if(n){let a=n(e);if(a!==void 0)return a}return(o=e.frontmatter)==null?void 0:o[t]},BM=e=>{let t=ro(e),{columns:n,rows:i}=(0,OM.useMemo)(()=>{var u,f,p,d;let o=en(e),a=(f=(u=o==null?void 0:o.list)==null?void 0:u.columns)==null?void 0:f.filter(h=>h),r=a&&a.length>0?a:[FM],s=(()=>{var m,b;let h=(b=(m=o==null?void 0:o.list)==null?void 0:m.sort)==null?void 0:b.column;return h&&r.includes(h)?h:r[0]})(),l=((d=(p=o==null?void 0:o.list)==null?void 0:p.sort)==null?void 0:d.direction)==="desc"?"desc":"asc",c=t.map(h=>{var T,k;let{file:m,cache:b}=h,y=(T=b==null?void 0:b.frontmatter)!=null?T:{},g=y==null?void 0:y.show,v=(k=m.basename)!=null?k:m.name,w=typeof g=="string"&&g.trim().length>0?g:v;return{path:m.path,label:w,fileName:v,frontmatter:y,file:m}});return c.sort((h,m)=>{let b=lv(h,s),y=lv(m,s),g=sv(b).toLowerCase(),v=sv(y).toLowerCase(),w=g.localeCompare(v,void 0,{sensitivity:"base",numeric:!0});return l==="desc"?-w:w}),{columns:r,rows:c}},[e,t]);return{columns:n,rows:i}},IM=(e,t)=>lv(e,t);var zM=O(P()),PM=e=>e==null?"":Array.isArray(e)?e.map(t=>PM(t)).join(", "):typeof e=="object"?JSON.stringify(e):String(e),cv=({value:e})=>{let t=PM(e);return(0,zM.jsx)("span",{children:t.length>0?t:"\u2014"})};var HM=O(fe()),VM=require("obsidian");var UM=O(P()),Rs=({path:e,label:t})=>{let n=pe(),i=(0,HM.useCallback)(async()=>{let o=n.vault.getAbstractFileByPath(e);if(!o||!(o instanceof VM.TFile)){console.warn(`MondoFileLink: Could not find file at path "${e}"`);return}let a=n.workspace.getLeaf(!0);await a.openFile(o),n.workspace.revealLeaf(a)},[n,e]);return(0,UM.jsx)(Me,{onClick:o=>{o.preventDefault(),o.stopPropagation(),i()},variant:"link",className:"text-sm",children:t})};var $M=O(P()),uv=({row:e,value:t})=>{let n=typeof t=="string"&&t.trim().length>0?t:e.label;return(0,$M.jsx)(Rs,{path:e.path,label:String(n)})};var jM=O(fe()),dv=require("obsidian");var xr=O(P()),YM=e=>e?Array.isArray(e)?e.flatMap(t=>YM(t)):typeof e=="string"?e.split(/[,;\n]/).map(t=>t.trim()).filter(t=>t.length>0):[]:[],pF=e=>{let t=e.slice(2,-2),[n,i]=t.split("|");return{target:n.trim(),label:(i!=null?i:n).trim()}},mF=(e,t)=>{let n=e.vault.getAbstractFileByPath(t);if(n instanceof dv.TFile)return n;let i=t.replace(/\.md$/i,""),o=e.metadataCache.getFirstLinkpathDest(i,"");return o instanceof dv.TFile?o:null},fv=({value:e})=>{let t=pe(),n=(0,jM.useMemo)(()=>YM(e).map(o=>{var u,f;let a=o,r=o;if(o.startsWith("[[")&&o.endsWith("]]")){let p=pF(o);a=p.label,r=p.target}let s=mF(t,r),l=(u=s==null?void 0:s.path)!=null?u:o.startsWith("[[")?void 0:r;return{label:a.includes("/")&&(f=a.split("/").pop())!=null?f:a,path:l}}),[t,e]);return n.length===0?(0,xr.jsx)("span",{children:"\u2014"}):(0,xr.jsx)("span",{children:n.map((i,o)=>{var l;let a=`${(l=i.path)!=null?l:i.label}-${o}`,r=i.path?(0,xr.jsx)(Rs,{path:i.path,label:i.label}):(0,xr.jsx)("span",{className:"rounded bg-[var(--background-modifier-hover)] px-2 py-1 text-xs",children:i.label}),s=o===n.length-1;return(0,xr.jsxs)("span",{children:[r,!s&&(0,xr.jsx)("span",{children:", "})]},a)})})};var cc=O(P()),od=({value:e,row:t,column:n})=>{var p,d,h;let i=n.toLowerCase(),o=Array.isArray(e)?e[0]:e,a,r;if(i==="date"||i==="date_time"||i==="datetime"){let m=id(t);a={date:m.date,raw:m.raw,hasTime:m.hasTime},r=m.source}else{let m=_M(o);if(a={date:m.date,raw:m.raw,hasTime:m.hasTime},r=void 0,!a.raw&&typeof o=="string"){let b=o.trim();a={...a,raw:b.length>0?b:null}}}let s=(d=(p=a.date)!=null?p:a.raw)!=null?d:null,l=(h=a.raw)!=null?h:"\u2014",u=(0,cc.jsxs)("span",{className:"inline-flex items-center gap-1",children:[(0,cc.jsx)(cn,{value:s,fallback:l,extraHint:r==="created"?"Created from file metadata":null}),r==="created"?(0,cc.jsx)("span",{children:"\u2022 created"}):null]});return i==="date_time"?(0,cc.jsx)(Rs,{path:t.path,label:u}):u};var em=O(fe()),Zp=require("obsidian");var pv=O(P()),qM=e=>{if(!e)return null;if(Array.isArray(e)){for(let t of e){let n=qM(t);if(n)return n}return null}return typeof e=="string"&&e.trim()||null},hF=e=>{let t=e.slice(2,-2),[n]=t.split("|");return n.trim()},mv=({value:e,row:t})=>{let n=pe(),i=(0,em.useMemo)(()=>{let r=qM(e);if(!r)return null;let s=r;r.startsWith("[[")&&r.endsWith("]]")&&(s=hF(r));let l=n.vault.getAbstractFileByPath(s);if(l instanceof Zp.TFile)return l;let c=s.replace(/\.md$/i,""),u=n.metadataCache.getFirstLinkpathDest(c,"");return u instanceof Zp.TFile?u:null},[n,e]),o=(0,em.useCallback)(async()=>{let r=n.vault.getAbstractFileByPath(t.path);if(!(r instanceof Zp.TFile))return;let s=n.workspace.getLeaf(!0);await s.openFile(r),n.workspace.revealLeaf(s)},[n,t.path]);if(!i)return null;let a=n.vault.getResourcePath(i);return(0,pv.jsx)("div",{className:"mx-auto",children:(0,pv.jsx)(Hn,{src:a,alt:i.name,size:64,strategy:"cover",coverClassName:"border border-[var(--background-modifier-border)] bg-[var(--background-primary)]",editLabel:`Open ${t.label}`,onEditCover:o})})};var po=O(P()),gF=new Set(["show","filename","fileName","title"]),yF=new Set(["company","location","team","role","owner","participants"]),hv=new Set(["cover","thumbnail","image"]),bF=e=>e.split(/[-_]/).map(t=>t.charAt(0).toUpperCase()+t.slice(1)).join(" "),vF=e=>{let t=e.toLowerCase();return gF.has(t)?uv:t==="date"?od:t==="date_time"||t==="datetime"?od:hv.has(t)?mv:yF.has(t)?fv:t.endsWith("date")?od:cv},gv=({columns:e,rows:t})=>t.length===0?null:(0,po.jsx)("div",{className:"overflow-x-auto",children:(0,po.jsxs)("table",{className:"min-w-full table-auto border border-[var(--background-modifier-border)]",children:[(0,po.jsx)("thead",{children:(0,po.jsx)("tr",{className:"bg-[var(--background-secondary)]",children:e.map(n=>{let o=hv.has(n.toLowerCase())?"border-b border-[var(--background-modifier-border)] w-16 min-w-[4rem] max-w-[4rem] p-0 text-center text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]":"border-b border-[var(--background-modifier-border)] px-3 py-2 text-left text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]";return(0,po.jsx)("th",{className:o,children:bF(n)},n)})})}),(0,po.jsx)("tbody",{children:t.map(n=>(0,po.jsx)("tr",{className:"odd:bg-[var(--background-primary-alt)] even:bg-[var(--background-primary)]",children:e.map(i=>{let o=vF(i),a=IM(n,i),r=hv.has(i.toLowerCase());return(0,po.jsx)("td",{className:`border-t border-[var(--background-modifier-border)] text-sm text-[var(--text-normal)] ${r?"w-16 min-w-[4rem] max-w-[4rem] p-0 align-middle":"px-3 py-2"}`,children:(0,po.jsx)(o,{row:n,column:i,value:a})},`${n.path}-${i}`)})},n.path))})]})});var Ni=O(P()),wF=e=>{var a,r,s,l,c,u,f,p,d,h,m,b,y,g,v,w;let t=e==null?void 0:e.view,n=(u=(c=(r=(a=t==null?void 0:t.contentEl)==null?void 0:a.querySelector)==null?void 0:r.call(a,".inline-title"))!=null?c:(l=(s=t==null?void 0:t.containerEl)==null?void 0:s.querySelector)==null?void 0:l.call(s,".inline-title"))!=null?u:null;if(n){n.focus();try{let T=(f=window.getSelection)==null?void 0:f.call(window),k=(p=document.createRange)==null?void 0:p.call(document);T&&k&&(T.removeAllRanges(),k.selectNodeContents(n),T.addRange(k))}catch(T){}return!0}let i=(b=(d=t==null?void 0:t.fileView)==null?void 0:d.inputEl)!=null?b:(m=(h=t==null?void 0:t.titleEl)==null?void 0:h.querySelector)==null?void 0:m.call(h,"input");if(i)return i.focus(),i.select(),!0;let o=(w=(v=(g=(y=t==null?void 0:t.app)!=null?y:window==null?void 0:window.app)==null?void 0:g.commands)==null?void 0:v.executeCommandById)==null?void 0:w.call(v,"app:rename-file");return Boolean(o)},TF=e=>e.trim().toLowerCase().normalize("NFKD").replace(/[\u0300-\u036f]/g,"").replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""),SF=async(e,t)=>{var i;if(!t)return;if(!e.vault.getAbstractFileByPath(t))try{await e.vault.createFolder(t)}catch(o){if(!((i=o.message)!=null?i:"").toLowerCase().includes("already exists"))throw o}},kF=e=>e.split(/[-_\s]+/).filter(t=>t.length>0).map(t=>t[0].toUpperCase()+t.slice(1)).join(" "),EF=async({app:e,entityType:t,title:n})=>{var T,k,E,C,L,F;let i=(k=(T=e==null?void 0:e.plugins)==null?void 0:T.plugins)==null?void 0:k.mondo,o=(E=i==null?void 0:i.settings)!=null?E:{},a=(C=o.rootPaths)!=null?C:{},r=(L=o.templates)!=null?L:{},s=(F=a[t])!=null?F:"/",l=Bo(s);l&&await SF(e,l);let c=n.trim()||"Untitled",u=(t===Bn.LOG?c.replace(/:/g,"-").replace(/[\\/*?"<>|]+/g,"-"):c.replace(/[\\/:*?"<>|]+/g,"-")).replace(/\s+/g," ").trim(),f=u.endsWith(".md")?u:`${u}.md`,p=N=>l?`${l}/${N}`:N,d=f,h=p(d),m=e.vault.getAbstractFileByPath(h);if(m instanceof tm.TFile)return{file:m,created:!1};let b=TF(c)||u.toLowerCase(),y=new Date().toISOString(),g=await Io(e,r,t),v=Po(g!=null?g:"",{title:c,type:String(t),filename:d,slug:b,date:y}),w=await e.vault.create(h,v);if(t===Bn.TASK)try{let N=Ca(e,w.path);N&&await TC(e,w,N.link)}catch(N){console.error("EntityView: failed to assign self participant to new task",N)}return{file:w,created:!0}},GM=({entityType:e})=>{var u;let t=pe(),{columns:n,rows:i}=BM(e),o=en(e),a=(u=o==null?void 0:o.name)!=null?u:e,r=(0,uc.useMemo)(()=>kF(e),[e]),[s,l]=(0,uc.useState)(!1),c=(0,uc.useCallback)(async()=>{if(!s){l(!0);try{let f=`Untitled ${r}`;if(e===Bn.LOG){let m=new Date,b=String(m.getFullYear()),y=String(m.getMonth()+1).padStart(2,"0"),g=String(m.getDate()).padStart(2,"0"),v=String(m.getHours()).padStart(2,"0"),w=String(m.getMinutes()).padStart(2,"0"),T=`${b}-${y}-${g}`,k=`${v}.${w}`;f=`${T} ${k}`}let{file:p,created:d}=await EF({app:t,entityType:e,title:f}),h=t.workspace.getLeaf(!0);h&&await h.openFile(p),d&&h&&window.setTimeout(()=>{var m;((m=t.workspace.getActiveFile())==null?void 0:m.path)===p.path&&wF(h)},150)}catch(f){console.error("EntityView: failed to create entity file",f),new tm.Notice("Failed to create the new entity note.")}finally{l(!1)}}},[t,r,e,s]);return(0,Ni.jsxs)("div",{className:"flex h-full w-full flex-col gap-4 overflow-y-auto p-6",children:[(0,Ni.jsxs)("header",{className:"flex items-center justify-between gap-4",children:[(0,Ni.jsx)("div",{className:"flex flex-col",children:(0,Ni.jsx)("h1",{className:"text-xl font-semibold",children:a})}),(0,Ni.jsxs)("div",{className:"flex items-center gap-3",children:[(0,Ni.jsxs)("button",{type:"button",className:"flex items-center gap-1 rounded border border-[var(--background-modifier-border)] bg-[var(--background-secondary)] px-3 py-1 text-sm font-medium text-[var(--text-normal)] shadow-sm hover:bg-[var(--background-modifier-hover)] focus:outline-none focus-visible:ring-2 focus-visible:ring-[var(--interactive-accent)] disabled:cursor-not-allowed disabled:opacity-60",onClick:c,disabled:s,children:[(0,Ni.jsx)("span",{className:"text-base leading-none",children:"+"}),(0,Ni.jsx)("span",{children:"New"})]}),(0,Ni.jsxs)("span",{className:"text-sm text-[var(--text-muted)]",children:[i.length," files"]})]})]}),i.length===0?(0,Ni.jsx)("div",{className:"text-sm text-[var(--text-muted)]",children:"No files found for this type yet."}):(0,Ni.jsx)(gv,{columns:n,rows:i})]})};var yv=O(P()),ad="entity-panel-view",nm=class extends KM.ItemView{constructor(n,i){super(n);this.root=null;this.entityType=(()=>{let n=$t[0];return n!=null?n:"person"})();this.iconName=i,this.applyEntityConfig(this.entityType)}getViewType(){return ad}getDisplayText(){var i;let n=en(this.entityType);return(i=n==null?void 0:n.name)!=null?i:this.entityType}getIcon(){return this.iconName}getState(){return{entityType:this.entityType}}async setState(n,i){n!=null&&n.entityType&&(this.entityType=n.entityType,this.applyEntityConfig(this.entityType)),this.root&&this.render(),await super.setState(n,i)}async onOpen(){let{state:n}=this.leaf.getViewState(),i=n;i!=null&&i.entityType&&(this.entityType=i.entityType,this.applyEntityConfig(this.entityType)),this.contentEl.empty(),this.root=(0,QM.createRoot)(this.contentEl),this.render()}applyEntityConfig(n){var a;let i=en(n);if(!i)return;this.iconName=i.icon;let o=this.leaf;(a=o==null?void 0:o.setIcon)==null||a.call(o,i.icon)}async onClose(){var n;(n=this.root)==null||n.unmount(),this.root=null}render(){this.root&&this.root.render((0,yv.jsx)(Fn,{app:this.app,children:(0,yv.jsx)(GM,{entityType:this.entityType})}))}};var uN=O(Fo());var XM=O(P()),dc=({message:e})=>(0,XM.jsxs)("p",{style:{color:"red"},children:["Error: ",e]});var Yv={};Ah(Yv,{Alias:()=>$o,CST:()=>Uv,Composer:()=>Fs,Document:()=>Ji,Lexer:()=>kc,LineCounter:()=>Ec,Pair:()=>At,Parser:()=>_s,Scalar:()=>ge,Schema:()=>Fr,YAMLError:()=>wc,YAMLMap:()=>Pt,YAMLParseError:()=>Li,YAMLSeq:()=>Nn,YAMLWarning:()=>Tc,isAlias:()=>Di,isCollection:()=>at,isDocument:()=>Gi,isMap:()=>Ki,isNode:()=>Qe,isPair:()=>qe,isScalar:()=>ze,isSeq:()=>Qi,parse:()=>Yx,parseAllDocuments:()=>jx,parseDocument:()=>jv,stringify:()=>qx,visit:()=>ho,visitAsync:()=>rd});var im=Symbol.for("yaml.alias"),om=Symbol.for("yaml.document"),mo=Symbol.for("yaml.map"),bv=Symbol.for("yaml.pair"),Ai=Symbol.for("yaml.scalar"),Ra=Symbol.for("yaml.seq"),Qn=Symbol.for("yaml.node.type"),Di=e=>!!e&&typeof e=="object"&&e[Qn]===im,Gi=e=>!!e&&typeof e=="object"&&e[Qn]===om,Ki=e=>!!e&&typeof e=="object"&&e[Qn]===mo,qe=e=>!!e&&typeof e=="object"&&e[Qn]===bv,ze=e=>!!e&&typeof e=="object"&&e[Qn]===Ai,Qi=e=>!!e&&typeof e=="object"&&e[Qn]===Ra;function at(e){if(e&&typeof e=="object")switch(e[Qn]){case mo:case Ra:return!0}return!1}function Qe(e){if(e&&typeof e=="object")switch(e[Qn]){case im:case mo:case Ai:case Ra:return!0}return!1}var am=e=>(ze(e)||at(e))&&!!e.anchor;var ri=Symbol("break visit"),JM=Symbol("skip children"),Uo=Symbol("remove node");function ho(e,t){let n=WM(t);Gi(e)?fc(null,e.contents,n,Object.freeze([e]))===Uo&&(e.contents=null):fc(null,e,n,Object.freeze([]))}ho.BREAK=ri;ho.SKIP=JM;ho.REMOVE=Uo;function fc(e,t,n,i){let o=ZM(e,t,n,i);if(Qe(o)||qe(o))return ex(e,i,o),fc(e,o,n,i);if(typeof o!="symbol"){if(at(t)){i=Object.freeze(i.concat(t));for(let a=0;a<t.items.length;++a){let r=fc(a,t.items[a],n,i);if(typeof r=="number")a=r-1;else{if(r===ri)return ri;r===Uo&&(t.items.splice(a,1),a-=1)}}}else if(qe(t)){i=Object.freeze(i.concat(t));let a=fc("key",t.key,n,i);if(a===ri)return ri;a===Uo&&(t.key=null);let r=fc("value",t.value,n,i);if(r===ri)return ri;r===Uo&&(t.value=null)}}return o}async function rd(e,t){let n=WM(t);Gi(e)?await pc(null,e.contents,n,Object.freeze([e]))===Uo&&(e.contents=null):await pc(null,e,n,Object.freeze([]))}rd.BREAK=ri;rd.SKIP=JM;rd.REMOVE=Uo;async function pc(e,t,n,i){let o=await ZM(e,t,n,i);if(Qe(o)||qe(o))return ex(e,i,o),pc(e,o,n,i);if(typeof o!="symbol"){if(at(t)){i=Object.freeze(i.concat(t));for(let a=0;a<t.items.length;++a){let r=await pc(a,t.items[a],n,i);if(typeof r=="number")a=r-1;else{if(r===ri)return ri;r===Uo&&(t.items.splice(a,1),a-=1)}}}else if(qe(t)){i=Object.freeze(i.concat(t));let a=await pc("key",t.key,n,i);if(a===ri)return ri;a===Uo&&(t.key=null);let r=await pc("value",t.value,n,i);if(r===ri)return ri;r===Uo&&(t.value=null)}}return o}function WM(e){return typeof e=="object"&&(e.Collection||e.Node||e.Value)?Object.assign({Alias:e.Node,Map:e.Node,Scalar:e.Node,Seq:e.Node},e.Value&&{Map:e.Value,Scalar:e.Value,Seq:e.Value},e.Collection&&{Map:e.Collection,Seq:e.Collection},e):e}function ZM(e,t,n,i){var o,a,r,s,l;if(typeof n=="function")return n(e,t,i);if(Ki(t))return(o=n.Map)==null?void 0:o.call(n,e,t,i);if(Qi(t))return(a=n.Seq)==null?void 0:a.call(n,e,t,i);if(qe(t))return(r=n.Pair)==null?void 0:r.call(n,e,t,i);if(ze(t))return(s=n.Scalar)==null?void 0:s.call(n,e,t,i);if(Di(t))return(l=n.Alias)==null?void 0:l.call(n,e,t,i)}function ex(e,t,n){let i=t[t.length-1];if(at(i))i.items[e]=n;else if(qe(i))e==="key"?i.key=n:i.value=n;else if(Gi(i))i.contents=n;else{let o=Di(i)?"alias":"scalar";throw new Error(`Cannot replace node with ${o} parent`)}}var CF={"!":"%21",",":"%2C","[":"%5B","]":"%5D","{":"%7B","}":"%7D"},MF=e=>e.replace(/[!,[\]{}]/g,t=>CF[t]),dn=class{constructor(t,n){this.docStart=null,this.docEnd=!1,this.yaml=Object.assign({},dn.defaultYaml,t),this.tags=Object.assign({},dn.defaultTags,n)}clone(){let t=new dn(this.yaml,this.tags);return t.docStart=this.docStart,t}atDocument(){let t=new dn(this.yaml,this.tags);switch(this.yaml.version){case"1.1":this.atNextDocument=!0;break;case"1.2":this.atNextDocument=!1,this.yaml={explicit:dn.defaultYaml.explicit,version:"1.2"},this.tags=Object.assign({},dn.defaultTags);break}return t}add(t,n){this.atNextDocument&&(this.yaml={explicit:dn.defaultYaml.explicit,version:"1.1"},this.tags=Object.assign({},dn.defaultTags),this.atNextDocument=!1);let i=t.trim().split(/[ \t]+/),o=i.shift();switch(o){case"%TAG":{if(i.length!==2&&(n(0,"%TAG directive should contain exactly two parts"),i.length<2))return!1;let[a,r]=i;return this.tags[a]=r,!0}case"%YAML":{if(this.yaml.explicit=!0,i.length!==1)return n(0,"%YAML directive should contain exactly one part"),!1;let[a]=i;if(a==="1.1"||a==="1.2")return this.yaml.version=a,!0;{let r=/^\d+\.\d+$/.test(a);return n(6,`Unsupported YAML version ${a}`,r),!1}}default:return n(0,`Unknown directive ${o}`,!0),!1}}tagName(t,n){if(t==="!")return"!";if(t[0]!=="!")return n(`Not a valid tag: ${t}`),null;if(t[1]==="<"){let r=t.slice(2,-1);return r==="!"||r==="!!"?(n(`Verbatim tags aren't resolved, so ${t} is invalid.`),null):(t[t.length-1]!==">"&&n("Verbatim tags must end with a >"),r)}let[,i,o]=t.match(/^(.*!)([^!]*)$/s);o||n(`The ${t} tag has no suffix`);let a=this.tags[i];if(a)try{return a+decodeURIComponent(o)}catch(r){return n(String(r)),null}return i==="!"?t:(n(`Could not resolve tag: ${t}`),null)}tagString(t){for(let[n,i]of Object.entries(this.tags))if(t.startsWith(i))return n+MF(t.substring(i.length));return t[0]==="!"?t:`!<${t}>`}toString(t){let n=this.yaml.explicit?[`%YAML ${this.yaml.version||"1.2"}`]:[],i=Object.entries(this.tags),o;if(t&&i.length>0&&Qe(t.contents)){let a={};ho(t.contents,(r,s)=>{Qe(s)&&s.tag&&(a[s.tag]=!0)}),o=Object.keys(a)}else o=[];for(let[a,r]of i)a==="!!"&&r==="tag:yaml.org,2002:"||(!t||o.some(s=>s.startsWith(r)))&&n.push(`%TAG ${a} ${r}`);return n.join(`
`)}};dn.defaultYaml={explicit:!1,version:"1.2"};dn.defaultTags={"!!":"tag:yaml.org,2002:"};function rm(e){if(/[\x00-\x19\s,[\]{}]/.test(e)){let n=`Anchor must not contain whitespace or control characters: ${JSON.stringify(e)}`;throw new Error(n)}return!0}function vv(e){let t=new Set;return ho(e,{Value(n,i){i.anchor&&t.add(i.anchor)}}),t}function wv(e,t){for(let n=1;;++n){let i=`${e}${n}`;if(!t.has(i))return i}}function tx(e,t){let n=[],i=new Map,o=null;return{onAnchor:a=>{n.push(a),o!=null||(o=vv(e));let r=wv(t,o);return o.add(r),r},setAnchors:()=>{for(let a of n){let r=i.get(a);if(typeof r=="object"&&r.anchor&&(ze(r.node)||at(r.node)))r.node.anchor=r.anchor;else{let s=new Error("Failed to resolve repeated object (this should not happen)");throw s.source=a,s}}},sourceObjects:i}}function Nr(e,t,n,i){if(i&&typeof i=="object")if(Array.isArray(i))for(let o=0,a=i.length;o<a;++o){let r=i[o],s=Nr(e,i,String(o),r);s===void 0?delete i[o]:s!==r&&(i[o]=s)}else if(i instanceof Map)for(let o of Array.from(i.keys())){let a=i.get(o),r=Nr(e,i,o,a);r===void 0?i.delete(o):r!==a&&i.set(o,r)}else if(i instanceof Set)for(let o of Array.from(i)){let a=Nr(e,i,o,o);a===void 0?i.delete(o):a!==o&&(i.delete(o),i.add(a))}else for(let[o,a]of Object.entries(i)){let r=Nr(e,i,o,a);r===void 0?delete i[o]:r!==a&&(i[o]=r)}return e.call(t,n,i)}function fn(e,t,n){if(Array.isArray(e))return e.map((i,o)=>fn(i,String(o),n));if(e&&typeof e.toJSON=="function"){if(!n||!am(e))return e.toJSON(t,n);let i={aliasCount:0,count:1,res:void 0};n.anchors.set(e,i),n.onCreate=a=>{i.res=a,delete n.onCreate};let o=e.toJSON(t,n);return n.onCreate&&n.onCreate(o),o}return typeof e=="bigint"&&!(n!=null&&n.keep)?Number(e):e}var Ar=class{constructor(t){Object.defineProperty(this,Qn,{value:t})}clone(){let t=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return this.range&&(t.range=this.range.slice()),t}toJS(t,{mapAsMap:n,maxAliasCount:i,onAnchor:o,reviver:a}={}){if(!Gi(t))throw new TypeError("A document argument is required");let r={anchors:new Map,doc:t,keep:!0,mapAsMap:n===!0,mapKeyWarned:!1,maxAliasCount:typeof i=="number"?i:100},s=fn(this,"",r);if(typeof o=="function")for(let{count:l,res:c}of r.anchors.values())o(c,l);return typeof a=="function"?Nr(a,{"":s},"",s):s}};var $o=class extends Ar{constructor(t){super(im),this.source=t,Object.defineProperty(this,"tag",{set(){throw new Error("Alias nodes cannot have tags")}})}resolve(t,n){let i;n!=null&&n.aliasResolveCache?i=n.aliasResolveCache:(i=[],ho(t,{Node:(a,r)=>{(Di(r)||am(r))&&i.push(r)}}),n&&(n.aliasResolveCache=i));let o;for(let a of i){if(a===this)break;a.anchor===this.source&&(o=a)}return o}toJSON(t,n){if(!n)return{source:this.source};let{anchors:i,doc:o,maxAliasCount:a}=n,r=this.resolve(o,n);if(!r){let l=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new ReferenceError(l)}let s=i.get(r);if(s||(fn(r,null,n),s=i.get(r)),!s||s.res===void 0){let l="This should not happen: Alias anchor was not resolved?";throw new ReferenceError(l)}if(a>=0&&(s.count+=1,s.aliasCount===0&&(s.aliasCount=sm(o,r,i)),s.count*s.aliasCount>a)){let l="Excessive alias count indicates a resource exhaustion attack";throw new ReferenceError(l)}return s.res}toString(t,n,i){let o=`*${this.source}`;if(t){if(rm(this.source),t.options.verifyAliasOrder&&!t.anchors.has(this.source)){let a=`Unresolved alias (the anchor must be set before the alias): ${this.source}`;throw new Error(a)}if(t.implicitKey)return`${o} `}return o}};function sm(e,t,n){if(Di(t)){let i=t.resolve(e),o=n&&i&&n.get(i);return o?o.count*o.aliasCount:0}else if(at(t)){let i=0;for(let o of t.items){let a=sm(e,o,n);a>i&&(i=a)}return i}else if(qe(t)){let i=sm(e,t.key,n),o=sm(e,t.value,n);return Math.max(i,o)}return 1}var lm=e=>!e||typeof e!="function"&&typeof e!="object",ge=class extends Ar{constructor(t){super(Ai),this.value=t}toJSON(t,n){return n!=null&&n.keep?this.value:fn(this.value,t,n)}toString(){return String(this.value)}};ge.BLOCK_FOLDED="BLOCK_FOLDED";ge.BLOCK_LITERAL="BLOCK_LITERAL";ge.PLAIN="PLAIN";ge.QUOTE_DOUBLE="QUOTE_DOUBLE";ge.QUOTE_SINGLE="QUOTE_SINGLE";var xF="tag:yaml.org,2002:";function NF(e,t,n){var i;if(t){let o=n.filter(r=>r.tag===t),a=(i=o.find(r=>!r.format))!=null?i:o[0];if(!a)throw new Error(`Tag ${t} not found`);return a}return n.find(o=>{var a;return((a=o.identify)==null?void 0:a.call(o,e))&&!o.format})}function Oa(e,t,n){var f,p,d,h;if(Gi(e)&&(e=e.contents),Qe(e))return e;if(qe(e)){let m=(p=(f=n.schema[mo]).createNode)==null?void 0:p.call(f,n.schema,null,n);return m.items.push(e),m}(e instanceof String||e instanceof Number||e instanceof Boolean||typeof BigInt!="undefined"&&e instanceof BigInt)&&(e=e.valueOf());let{aliasDuplicateObjects:i,onAnchor:o,onTagObj:a,schema:r,sourceObjects:s}=n,l;if(i&&e&&typeof e=="object"){if(l=s.get(e),l)return(d=l.anchor)!=null||(l.anchor=o(e)),new $o(l.anchor);l={anchor:null,node:null},s.set(e,l)}t!=null&&t.startsWith("!!")&&(t=xF+t.slice(2));let c=NF(e,t,r.tags);if(!c){if(e&&typeof e.toJSON=="function"&&(e=e.toJSON()),!e||typeof e!="object"){let m=new ge(e);return l&&(l.node=m),m}c=e instanceof Map?r[mo]:Symbol.iterator in Object(e)?r[Ra]:r[mo]}a&&(a(c),delete n.onTagObj);let u=c!=null&&c.createNode?c.createNode(n.schema,e,n):typeof((h=c==null?void 0:c.nodeClass)==null?void 0:h.from)=="function"?c.nodeClass.from(n.schema,e,n):new ge(e);return t?u.tag=t:c.default||(u.tag=c.tag),l&&(l.node=u),u}function sd(e,t,n){let i=n;for(let o=t.length-1;o>=0;--o){let a=t[o];if(typeof a=="number"&&Number.isInteger(a)&&a>=0){let r=[];r[a]=i,i=r}else i=new Map([[a,i]])}return Oa(i,void 0,{aliasDuplicateObjects:!1,keepUndefined:!1,onAnchor:()=>{throw new Error("This should not happen, please report a bug.")},schema:e,sourceObjects:new Map})}var hc=e=>e==null||typeof e=="object"&&!!e[Symbol.iterator]().next().done,mc=class extends Ar{constructor(t,n){super(t),Object.defineProperty(this,"schema",{value:n,configurable:!0,enumerable:!1,writable:!0})}clone(t){let n=Object.create(Object.getPrototypeOf(this),Object.getOwnPropertyDescriptors(this));return t&&(n.schema=t),n.items=n.items.map(i=>Qe(i)||qe(i)?i.clone(t):i),this.range&&(n.range=this.range.slice()),n}addIn(t,n){if(hc(t))this.add(n);else{let[i,...o]=t,a=this.get(i,!0);if(at(a))a.addIn(o,n);else if(a===void 0&&this.schema)this.set(i,sd(this.schema,o,n));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`)}}deleteIn(t){let[n,...i]=t;if(i.length===0)return this.delete(n);let o=this.get(n,!0);if(at(o))return o.deleteIn(i);throw new Error(`Expected YAML collection at ${n}. Remaining path: ${i}`)}getIn(t,n){let[i,...o]=t,a=this.get(i,!0);return o.length===0?!n&&ze(a)?a.value:a:at(a)?a.getIn(o,n):void 0}hasAllNullValues(t){return this.items.every(n=>{if(!qe(n))return!1;let i=n.value;return i==null||t&&ze(i)&&i.value==null&&!i.commentBefore&&!i.comment&&!i.tag})}hasIn(t){let[n,...i]=t;if(i.length===0)return this.has(n);let o=this.get(n,!0);return at(o)?o.hasIn(i):!1}setIn(t,n){let[i,...o]=t;if(o.length===0)this.set(i,n);else{let a=this.get(i,!0);if(at(a))a.setIn(o,n);else if(a===void 0&&this.schema)this.set(i,sd(this.schema,o,n));else throw new Error(`Expected YAML collection at ${i}. Remaining path: ${o}`)}}};var nx=e=>e.replace(/^(?!$)(?: $)?/gm,"#");function Xi(e,t){return/^\n+$/.test(e)?e.substring(1):t?e.replace(/^(?! *$)/gm,t):e}var jo=(e,t,n)=>e.endsWith(`
`)?Xi(n,t):n.includes(`
`)?`
`+Xi(n,t):(e.endsWith(" ")?"":" ")+n;var Tv="flow",cm="block",ld="quoted";function cd(e,t,n="flow",{indentAtStart:i,lineWidth:o=80,minContentWidth:a=20,onFold:r,onOverflow:s}={}){if(!o||o<0)return e;o<a&&(a=0);let l=Math.max(1+a,1+o-t.length);if(e.length<=l)return e;let c=[],u={},f=o-t.length;typeof i=="number"&&(i>o-Math.max(2,a)?c.push(0):f=o-i);let p,d,h=!1,m=-1,b=-1,y=-1;n===cm&&(m=ix(e,m,t.length),m!==-1&&(f=m+l));for(let v;v=e[m+=1];){if(n===ld&&v==="\\"){switch(b=m,e[m+1]){case"x":m+=3;break;case"u":m+=5;break;case"U":m+=9;break;default:m+=1}y=m}if(v===`
`)n===cm&&(m=ix(e,m,t.length)),f=m+t.length+l,p=void 0;else{if(v===" "&&d&&d!==" "&&d!==`
`&&d!=="	"){let w=e[m+1];w&&w!==" "&&w!==`
`&&w!=="	"&&(p=m)}if(m>=f)if(p)c.push(p),f=p+l,p=void 0;else if(n===ld){for(;d===" "||d==="	";)d=v,v=e[m+=1],h=!0;let w=m>y+1?m-2:b-1;if(u[w])return e;c.push(w),u[w]=!0,f=w+l,p=void 0}else h=!0}d=v}if(h&&s&&s(),c.length===0)return e;r&&r();let g=e.slice(0,c[0]);for(let v=0;v<c.length;++v){let w=c[v],T=c[v+1]||e.length;w===0?g=`
${t}${e.slice(0,T)}`:(n===ld&&u[w]&&(g+=`${e[w]}\\`),g+=`
${t}${e.slice(w+1,T)}`)}return g}function ix(e,t,n){let i=t,o=t+1,a=e[o];for(;a===" "||a==="	";)if(t<o+n)a=e[++t];else{do a=e[++t];while(a&&a!==`
`);i=t,o=t+1,a=e[o]}return i}var dm=(e,t)=>({indentAtStart:t?e.indent.length:e.indentAtStart,lineWidth:e.options.lineWidth,minContentWidth:e.options.minContentWidth}),fm=e=>/^(%|---|\.\.\.)/m.test(e);function AF(e,t,n){if(!t||t<0)return!1;let i=t-n,o=e.length;if(o<=i)return!1;for(let a=0,r=0;a<o;++a)if(e[a]===`
`){if(a-r>i)return!0;if(r=a+1,o-r<=i)return!1}return!0}function ud(e,t){let n=JSON.stringify(e);if(t.options.doubleQuotedAsJSON)return n;let{implicitKey:i}=t,o=t.options.doubleQuotedMinMultiLineLength,a=t.indent||(fm(e)?"  ":""),r="",s=0;for(let l=0,c=n[l];c;c=n[++l])if(c===" "&&n[l+1]==="\\"&&n[l+2]==="n"&&(r+=n.slice(s,l)+"\\ ",l+=1,s=l,c="\\"),c==="\\")switch(n[l+1]){case"u":{r+=n.slice(s,l);let u=n.substr(l+2,4);switch(u){case"0000":r+="\\0";break;case"0007":r+="\\a";break;case"000b":r+="\\v";break;case"001b":r+="\\e";break;case"0085":r+="\\N";break;case"00a0":r+="\\_";break;case"2028":r+="\\L";break;case"2029":r+="\\P";break;default:u.substr(0,2)==="00"?r+="\\x"+u.substr(2):r+=n.substr(l,6)}l+=5,s=l+1}break;case"n":if(i||n[l+2]==='"'||n.length<o)l+=1;else{for(r+=n.slice(s,l)+`

`;n[l+2]==="\\"&&n[l+3]==="n"&&n[l+4]!=='"';)r+=`
`,l+=2;r+=a,n[l+2]===" "&&(r+="\\"),l+=1,s=l+1}break;default:l+=1}return r=s?r+n.slice(s):n,i?r:cd(r,a,ld,dm(t,!1))}function Sv(e,t){if(t.options.singleQuote===!1||t.implicitKey&&e.includes(`
`)||/[ \t]\n|\n[ \t]/.test(e))return ud(e,t);let n=t.indent||(fm(e)?"  ":""),i="'"+e.replace(/'/g,"''").replace(/\n+/g,`$&
${n}`)+"'";return t.implicitKey?i:cd(i,n,Tv,dm(t,!1))}function gc(e,t){let{singleQuote:n}=t.options,i;if(n===!1)i=ud;else{let o=e.includes('"'),a=e.includes("'");o&&!a?i=Sv:a&&!o?i=ud:i=n?Sv:ud}return i(e,t)}var kv;try{kv=new RegExp(`(^|(?<!
))
+(?!
|$)`,"g")}catch(e){kv=/\n+(?!\n|$)/g}function um({comment:e,type:t,value:n},i,o,a){let{blockQuote:r,commentString:s,lineWidth:l}=i.options;if(!r||/\n[\t ]+$/.test(n))return gc(n,i);let c=i.indent||(i.forceBlockIndent||fm(n)?"  ":""),u=r==="literal"?!0:r==="folded"||t===ge.BLOCK_FOLDED?!1:t===ge.BLOCK_LITERAL?!0:!AF(n,l,c.length);if(!n)return u?`|
`:`>
`;let f,p;for(p=n.length;p>0;--p){let T=n[p-1];if(T!==`
`&&T!=="	"&&T!==" ")break}let d=n.substring(p),h=d.indexOf(`
`);h===-1?f="-":n===d||h!==d.length-1?(f="+",a&&a()):f="",d&&(n=n.slice(0,-d.length),d[d.length-1]===`
`&&(d=d.slice(0,-1)),d=d.replace(kv,`$&${c}`));let m=!1,b,y=-1;for(b=0;b<n.length;++b){let T=n[b];if(T===" ")m=!0;else if(T===`
`)y=b;else break}let g=n.substring(0,y<b?y+1:b);g&&(n=n.substring(g.length),g=g.replace(/\n+/g,`$&${c}`));let w=(m?c?"2":"1":"")+f;if(e&&(w+=" "+s(e.replace(/ ?[\r\n]+/g," ")),o&&o()),!u){let T=n.replace(/\n+/g,`
$&`).replace(/(?:^|\n)([\t ].*)(?:([\n\t ]*)\n(?![\n\t ]))?/g,"$1$2").replace(/\n+/g,`$&${c}`),k=!1,E=dm(i,!0);r!=="folded"&&t!==ge.BLOCK_FOLDED&&(E.onOverflow=()=>{k=!0});let C=cd(`${g}${T}${d}`,c,cm,E);if(!k)return`>${w}
${c}${C}`}return n=n.replace(/\n+/g,`$&${c}`),`|${w}
${c}${g}${n}${d}`}function DF(e,t,n,i){let{type:o,value:a}=e,{actualString:r,implicitKey:s,indent:l,indentStep:c,inFlow:u}=t;if(s&&a.includes(`
`)||u&&/[[\]{},]/.test(a))return gc(a,t);if(/^[\n\t ,[\]{}#&*!|>'"%@`]|^[?-]$|^[?-][ \t]|[\n:][ \t]|[ \t]\n|[\n\t ]#|[\n\t :]$/.test(a))return s||u||!a.includes(`
`)?gc(a,t):um(e,t,n,i);if(!s&&!u&&o!==ge.PLAIN&&a.includes(`
`))return um(e,t,n,i);if(fm(a)){if(l==="")return t.forceBlockIndent=!0,um(e,t,n,i);if(s&&l===c)return gc(a,t)}let f=a.replace(/\n+/g,`$&
${l}`);if(r){let p=m=>{var b;return m.default&&m.tag!=="tag:yaml.org,2002:str"&&((b=m.test)==null?void 0:b.test(f))},{compat:d,tags:h}=t.doc.schema;if(h.some(p)||d!=null&&d.some(p))return gc(a,t)}return s?f:cd(f,l,Tv,dm(t,!1))}function Fa(e,t,n,i){let{implicitKey:o,inFlow:a}=t,r=typeof e.value=="string"?e:Object.assign({},e,{value:String(e.value)}),{type:s}=e;s!==ge.QUOTE_DOUBLE&&/[\x00-\x08\x0b-\x1f\x7f-\x9f\u{D800}-\u{DFFF}]/u.test(r.value)&&(s=ge.QUOTE_DOUBLE);let l=u=>{switch(u){case ge.BLOCK_FOLDED:case ge.BLOCK_LITERAL:return o||a?gc(r.value,t):um(r,t,n,i);case ge.QUOTE_DOUBLE:return ud(r.value,t);case ge.QUOTE_SINGLE:return Sv(r.value,t);case ge.PLAIN:return DF(r,t,n,i);default:return null}},c=l(s);if(c===null){let{defaultKeyType:u,defaultStringType:f}=t.options,p=o&&u||f;if(c=l(p),c===null)throw new Error(`Unsupported default string type ${p}`)}return c}function pm(e,t){let n=Object.assign({blockQuote:!0,commentString:nx,defaultKeyType:null,defaultStringType:"PLAIN",directives:null,doubleQuotedAsJSON:!1,doubleQuotedMinMultiLineLength:40,falseStr:"false",flowCollectionPadding:!0,indentSeq:!0,lineWidth:80,minContentWidth:20,nullStr:"null",simpleKeys:!1,singleQuote:null,trueStr:"true",verifyAliasOrder:!0},e.schema.toStringOptions,t),i;switch(n.collectionStyle){case"block":i=!1;break;case"flow":i=!0;break;default:i=null}return{anchors:new Set,doc:e,flowCollectionPadding:n.flowCollectionPadding?" ":"",indent:"",indentStep:typeof n.indent=="number"?" ".repeat(n.indent):"  ",inFlow:i,options:n}}function LF(e,t){var o,a,r,s;if(t.tag){let l=e.filter(c=>c.tag===t.tag);if(l.length>0)return(o=l.find(c=>c.format===t.format))!=null?o:l[0]}let n,i;if(ze(t)){i=t.value;let l=e.filter(c=>{var u;return(u=c.identify)==null?void 0:u.call(c,i)});if(l.length>1){let c=l.filter(u=>u.test);c.length>0&&(l=c)}n=(a=l.find(c=>c.format===t.format))!=null?a:l.find(c=>!c.format)}else i=t,n=e.find(l=>l.nodeClass&&i instanceof l.nodeClass);if(!n){let l=(s=(r=i==null?void 0:i.constructor)==null?void 0:r.name)!=null?s:i===null?"null":typeof i;throw new Error(`Tag not resolved for ${l} value`)}return n}function RF(e,t,{anchors:n,doc:i}){var s;if(!i.directives)return"";let o=[],a=(ze(e)||at(e))&&e.anchor;a&&rm(a)&&(n.add(a),o.push(`&${a}`));let r=(s=e.tag)!=null?s:t.default?null:t.tag;return r&&o.push(i.directives.tagString(r)),o.join(" ")}function _a(e,t,n,i){var l,c;if(qe(e))return e.toString(t,n,i);if(Di(e)){if(t.doc.directives)return e.toString(t);if((l=t.resolvedAliases)!=null&&l.has(e))throw new TypeError("Cannot stringify circular structure without alias nodes");t.resolvedAliases?t.resolvedAliases.add(e):t.resolvedAliases=new Set([e]),e=e.resolve(t.doc)}let o,a=Qe(e)?e:t.doc.createNode(e,{onTagObj:u=>o=u});o!=null||(o=LF(t.doc.schema.tags,a));let r=RF(a,o,t);r.length>0&&(t.indentAtStart=((c=t.indentAtStart)!=null?c:0)+r.length+1);let s=typeof o.stringify=="function"?o.stringify(a,t,n,i):ze(a)?Fa(a,t,n,i):a.toString(t,n,i);return r?ze(a)||s[0]==="{"||s[0]==="["?`${r} ${s}`:`${r}
${t.indent}${s}`:s}function ox({key:e,value:t},n,i,o){var E,C;let{allNullValues:a,doc:r,indent:s,indentStep:l,options:{commentString:c,indentSeq:u,simpleKeys:f}}=n,p=Qe(e)&&e.comment||null;if(f){if(p)throw new Error("With simple keys, key nodes cannot have comments");if(at(e)||!Qe(e)&&typeof e=="object"){let L="With simple keys, collection cannot be used as a key value";throw new Error(L)}}let d=!f&&(!e||p&&t==null&&!n.inFlow||at(e)||(ze(e)?e.type===ge.BLOCK_FOLDED||e.type===ge.BLOCK_LITERAL:typeof e=="object"));n=Object.assign({},n,{allNullValues:!1,implicitKey:!d&&(f||!a),indent:s+l});let h=!1,m=!1,b=_a(e,n,()=>h=!0,()=>m=!0);if(!d&&!n.inFlow&&b.length>1024){if(f)throw new Error("With simple keys, single line scalar must not span more than 1024 characters");d=!0}if(n.inFlow){if(a||t==null)return h&&i&&i(),b===""?"?":d?`? ${b}`:b}else if(a&&!f||t==null&&d)return b=`? ${b}`,p&&!h?b+=jo(b,n.indent,c(p)):m&&o&&o(),b;h&&(p=null),d?(p&&(b+=jo(b,n.indent,c(p))),b=`? ${b}
${s}:`):(b=`${b}:`,p&&(b+=jo(b,n.indent,c(p))));let y,g,v;Qe(t)?(y=!!t.spaceBefore,g=t.commentBefore,v=t.comment):(y=!1,g=null,v=null,t&&typeof t=="object"&&(t=r.createNode(t))),n.implicitKey=!1,!d&&!p&&ze(t)&&(n.indentAtStart=b.length+1),m=!1,!u&&l.length>=2&&!n.inFlow&&!d&&Qi(t)&&!t.flow&&!t.tag&&!t.anchor&&(n.indent=n.indent.substring(2));let w=!1,T=_a(t,n,()=>w=!0,()=>m=!0),k=" ";if(p||y||g){if(k=y?`
`:"",g){let L=c(g);k+=`
${Xi(L,n.indent)}`}T===""&&!n.inFlow?k===`
`&&(k=`

`):k+=`
${n.indent}`}else if(!d&&at(t)){let L=T[0],F=T.indexOf(`
`),N=F!==-1,_=(C=(E=n.inFlow)!=null?E:t.flow)!=null?C:t.items.length===0;if(N||!_){let A=!1;if(N&&(L==="&"||L==="!")){let x=T.indexOf(" ");L==="&"&&x!==-1&&x<F&&T[x+1]==="!"&&(x=T.indexOf(" ",x+1)),(x===-1||F<x)&&(A=!0)}A||(k=`
${n.indent}`)}}else(T===""||T[0]===`
`)&&(k="");return b+=k+T,n.inFlow?w&&i&&i():v&&!w?b+=jo(b,n.indent,c(v)):m&&o&&o(),b}function mm(e,t){(e==="debug"||e==="warn")&&console.warn(t)}var hm="<<",go={identify:e=>e===hm||typeof e=="symbol"&&e.description===hm,default:"key",tag:"tag:yaml.org,2002:merge",test:/^<<$/,resolve:()=>Object.assign(new ge(Symbol(hm)),{addToJSMap:Cv}),stringify:()=>hm},ax=(e,t)=>(go.identify(t)||ze(t)&&(!t.type||t.type===ge.PLAIN)&&go.identify(t.value))&&(e==null?void 0:e.doc.schema.tags.some(n=>n.tag===go.tag&&n.default));function Cv(e,t,n){if(n=e&&Di(n)?n.resolve(e.doc):n,Qi(n))for(let i of n.items)Ev(e,t,i);else if(Array.isArray(n))for(let i of n)Ev(e,t,i);else Ev(e,t,n)}function Ev(e,t,n){let i=e&&Di(n)?n.resolve(e.doc):n;if(!Ki(i))throw new Error("Merge sources must be maps or map aliases");let o=i.toJSON(null,e,Map);for(let[a,r]of o)t instanceof Map?t.has(a)||t.set(a,r):t instanceof Set?t.add(a):Object.prototype.hasOwnProperty.call(t,a)||Object.defineProperty(t,a,{value:r,writable:!0,enumerable:!0,configurable:!0});return t}function gm(e,t,{key:n,value:i}){if(Qe(n)&&n.addToJSMap)n.addToJSMap(e,t,i);else if(ax(e,n))Cv(e,t,i);else{let o=fn(n,"",e);if(t instanceof Map)t.set(o,fn(i,o,e));else if(t instanceof Set)t.add(o);else{let a=OF(n,o,e),r=fn(i,a,e);a in t?Object.defineProperty(t,a,{value:r,writable:!0,enumerable:!0,configurable:!0}):t[a]=r}}return t}function OF(e,t,n){if(t===null)return"";if(typeof t!="object")return String(t);if(Qe(e)&&(n!=null&&n.doc)){let i=pm(n.doc,{});i.anchors=new Set;for(let a of n.anchors.keys())i.anchors.add(a.anchor);i.inFlow=!0,i.inStringifyKey=!0;let o=e.toString(i);if(!n.mapKeyWarned){let a=JSON.stringify(o);a.length>40&&(a=a.substring(0,36)+'..."'),mm(n.doc.options.logLevel,`Keys with collection values will be stringified due to JS Object restrictions: ${a}. Set mapAsMap: true to use object keys.`),n.mapKeyWarned=!0}return o}return JSON.stringify(t)}function yc(e,t,n){let i=Oa(e,void 0,n),o=Oa(t,void 0,n);return new At(i,o)}var At=class{constructor(t,n=null){Object.defineProperty(this,Qn,{value:bv}),this.key=t,this.value=n}clone(t){let{key:n,value:i}=this;return Qe(n)&&(n=n.clone(t)),Qe(i)&&(i=i.clone(t)),new At(n,i)}toJSON(t,n){let i=n!=null&&n.mapAsMap?new Map:{};return gm(n,i,this)}toString(t,n,i){return t!=null&&t.doc?ox(this,t,n,i):JSON.stringify(this)}};function bm(e,t,n){var a;return(((a=t.inFlow)!=null?a:e.flow)?_F:FF)(e,t,n)}function FF({comment:e,items:t},n,{blockItemPrefix:i,flowChars:o,itemIndent:a,onChompKeep:r,onComment:s}){let{indent:l,options:{commentString:c}}=n,u=Object.assign({},n,{indent:a,type:null}),f=!1,p=[];for(let h=0;h<t.length;++h){let m=t[h],b=null;if(Qe(m))!f&&m.spaceBefore&&p.push(""),ym(n,p,m.commentBefore,f),m.comment&&(b=m.comment);else if(qe(m)){let g=Qe(m.key)?m.key:null;g&&(!f&&g.spaceBefore&&p.push(""),ym(n,p,g.commentBefore,f))}f=!1;let y=_a(m,u,()=>b=null,()=>f=!0);b&&(y+=jo(y,a,c(b))),f&&b&&(f=!1),p.push(i+y)}let d;if(p.length===0)d=o.start+o.end;else{d=p[0];for(let h=1;h<p.length;++h){let m=p[h];d+=m?`
${l}${m}`:`
`}}return e?(d+=`
`+Xi(c(e),l),s&&s()):f&&r&&r(),d}function _F({items:e},t,{flowChars:n,itemIndent:i}){let{indent:o,indentStep:a,flowCollectionPadding:r,options:{commentString:s}}=t;i+=a;let l=Object.assign({},t,{indent:i,inFlow:!0,type:null}),c=!1,u=0,f=[];for(let h=0;h<e.length;++h){let m=e[h],b=null;if(Qe(m))m.spaceBefore&&f.push(""),ym(t,f,m.commentBefore,!1),m.comment&&(b=m.comment);else if(qe(m)){let g=Qe(m.key)?m.key:null;g&&(g.spaceBefore&&f.push(""),ym(t,f,g.commentBefore,!1),g.comment&&(c=!0));let v=Qe(m.value)?m.value:null;v?(v.comment&&(b=v.comment),v.commentBefore&&(c=!0)):m.value==null&&(g!=null&&g.comment)&&(b=g.comment)}b&&(c=!0);let y=_a(m,l,()=>b=null);h<e.length-1&&(y+=","),b&&(y+=jo(y,i,s(b))),!c&&(f.length>u||y.includes(`
`))&&(c=!0),f.push(y),u=f.length}let{start:p,end:d}=n;if(f.length===0)return p+d;if(!c){let h=f.reduce((m,b)=>m+b.length+2,2);c=t.options.lineWidth>0&&h>t.options.lineWidth}if(c){let h=p;for(let m of f)h+=m?`
${a}${o}${m}`:`
`;return`${h}
${o}${d}`}else return`${p}${r}${f.join(" ")}${r}${d}`}function ym({indent:e,options:{commentString:t}},n,i,o){if(i&&o&&(i=i.replace(/^\n+/,"")),i){let a=Xi(t(i),e);n.push(a.trimStart())}}function Dr(e,t){let n=ze(t)?t.value:t;for(let i of e)if(qe(i)&&(i.key===t||i.key===n||ze(i.key)&&i.key.value===n))return i}var Pt=class extends mc{static get tagName(){return"tag:yaml.org,2002:map"}constructor(t){super(mo,t),this.items=[]}static from(t,n,i){let{keepUndefined:o,replacer:a}=i,r=new this(t),s=(l,c)=>{if(typeof a=="function")c=a.call(n,l,c);else if(Array.isArray(a)&&!a.includes(l))return;(c!==void 0||o)&&r.items.push(yc(l,c,i))};if(n instanceof Map)for(let[l,c]of n)s(l,c);else if(n&&typeof n=="object")for(let l of Object.keys(n))s(l,n[l]);return typeof t.sortMapEntries=="function"&&r.items.sort(t.sortMapEntries),r}add(t,n){var r;let i;qe(t)?i=t:!t||typeof t!="object"||!("key"in t)?i=new At(t,t==null?void 0:t.value):i=new At(t.key,t.value);let o=Dr(this.items,i.key),a=(r=this.schema)==null?void 0:r.sortMapEntries;if(o){if(!n)throw new Error(`Key ${i.key} already set`);ze(o.value)&&lm(i.value)?o.value.value=i.value:o.value=i.value}else if(a){let s=this.items.findIndex(l=>a(i,l)<0);s===-1?this.items.push(i):this.items.splice(s,0,i)}else this.items.push(i)}delete(t){let n=Dr(this.items,t);return n?this.items.splice(this.items.indexOf(n),1).length>0:!1}get(t,n){var a;let i=Dr(this.items,t),o=i==null?void 0:i.value;return(a=!n&&ze(o)?o.value:o)!=null?a:void 0}has(t){return!!Dr(this.items,t)}set(t,n){this.add(new At(t,n),!0)}toJSON(t,n,i){let o=i?new i:n!=null&&n.mapAsMap?new Map:{};n!=null&&n.onCreate&&n.onCreate(o);for(let a of this.items)gm(n,o,a);return o}toString(t,n,i){if(!t)return JSON.stringify(this);for(let o of this.items)if(!qe(o))throw new Error(`Map items must all be pairs; found ${JSON.stringify(o)} instead`);return!t.allNullValues&&this.hasAllNullValues(!1)&&(t=Object.assign({},t,{allNullValues:!0})),bm(this,t,{blockItemPrefix:"",flowChars:{start:"{",end:"}"},itemIndent:t.indent||"",onChompKeep:i,onComment:n})}};var yo={collection:"map",default:!0,nodeClass:Pt,tag:"tag:yaml.org,2002:map",resolve(e,t){return Ki(e)||t("Expected a mapping for this tag"),e},createNode:(e,t,n)=>Pt.from(e,t,n)};var Nn=class extends mc{static get tagName(){return"tag:yaml.org,2002:seq"}constructor(t){super(Ra,t),this.items=[]}add(t){this.items.push(t)}delete(t){let n=vm(t);return typeof n!="number"?!1:this.items.splice(n,1).length>0}get(t,n){let i=vm(t);if(typeof i!="number")return;let o=this.items[i];return!n&&ze(o)?o.value:o}has(t){let n=vm(t);return typeof n=="number"&&n<this.items.length}set(t,n){let i=vm(t);if(typeof i!="number")throw new Error(`Expected a valid index, not ${t}.`);let o=this.items[i];ze(o)&&lm(n)?o.value=n:this.items[i]=n}toJSON(t,n){let i=[];n!=null&&n.onCreate&&n.onCreate(i);let o=0;for(let a of this.items)i.push(fn(a,String(o++),n));return i}toString(t,n,i){return t?bm(this,t,{blockItemPrefix:"- ",flowChars:{start:"[",end:"]"},itemIndent:(t.indent||"")+"  ",onChompKeep:i,onComment:n}):JSON.stringify(this)}static from(t,n,i){let{replacer:o}=i,a=new this(t);if(n&&Symbol.iterator in Object(n)){let r=0;for(let s of n){if(typeof o=="function"){let l=n instanceof Set?s:String(r++);s=o.call(n,l,s)}a.items.push(Oa(s,void 0,i))}}return a}};function vm(e){let t=ze(e)?e.value:e;return t&&typeof t=="string"&&(t=Number(t)),typeof t=="number"&&Number.isInteger(t)&&t>=0?t:null}var bo={collection:"seq",default:!0,nodeClass:Nn,tag:"tag:yaml.org,2002:seq",resolve(e,t){return Qi(e)||t("Expected a sequence for this tag"),e},createNode:(e,t,n)=>Nn.from(e,t,n)};var Lr={identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify(e,t,n,i){return t=Object.assign({actualString:!0},t),Fa(e,t,n,i)}};var Os={identify:e=>e==null,createNode:()=>new ge(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^(?:~|[Nn]ull|NULL)?$/,resolve:()=>new ge(null),stringify:({source:e},t)=>typeof e=="string"&&Os.test.test(e)?e:t.options.nullStr};var dd={identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:[Tt]rue|TRUE|[Ff]alse|FALSE)$/,resolve:e=>new ge(e[0]==="t"||e[0]==="T"),stringify({source:e,value:t},n){if(e&&dd.test.test(e)){let i=e[0]==="t"||e[0]==="T";if(t===i)return e}return t?n.options.trueStr:n.options.falseStr}};function Vn({format:e,minFractionDigits:t,tag:n,value:i}){if(typeof i=="bigint")return String(i);let o=typeof i=="number"?i:Number(i);if(!isFinite(o))return isNaN(o)?".nan":o<0?"-.inf":".inf";let a=JSON.stringify(i);if(!e&&t&&(!n||n==="tag:yaml.org,2002:float")&&/^\d/.test(a)){let r=a.indexOf(".");r<0&&(r=a.length,a+=".");let s=t-(a.length-r-1);for(;s-- >0;)a+="0"}return a}var wm={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Vn},Tm={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:\.[0-9]+|[0-9]+(?:\.[0-9]*)?)[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():Vn(e)}},Sm={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:\.[0-9]+|[0-9]+\.[0-9]*)$/,resolve(e){let t=new ge(parseFloat(e)),n=e.indexOf(".");return n!==-1&&e[e.length-1]==="0"&&(t.minFractionDigits=e.length-n-1),t},stringify:Vn};var km=e=>typeof e=="bigint"||Number.isInteger(e),Mv=(e,t,n,{intAsBigInt:i})=>i?BigInt(e):parseInt(e.substring(t),n);function rx(e,t,n){let{value:i}=e;return km(i)&&i>=0?n+i.toString(t):Vn(e)}var Em={identify:e=>km(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^0o[0-7]+$/,resolve:(e,t,n)=>Mv(e,2,8,n),stringify:e=>rx(e,8,"0o")},Cm={identify:km,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9]+$/,resolve:(e,t,n)=>Mv(e,0,10,n),stringify:Vn},Mm={identify:e=>km(e)&&e>=0,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^0x[0-9a-fA-F]+$/,resolve:(e,t,n)=>Mv(e,2,16,n),stringify:e=>rx(e,16,"0x")};var sx=[yo,bo,Lr,Os,dd,Em,Cm,Mm,wm,Tm,Sm];function lx(e){return typeof e=="bigint"||Number.isInteger(e)}var xm=({value:e})=>JSON.stringify(e),BF=[{identify:e=>typeof e=="string",default:!0,tag:"tag:yaml.org,2002:str",resolve:e=>e,stringify:xm},{identify:e=>e==null,createNode:()=>new ge(null),default:!0,tag:"tag:yaml.org,2002:null",test:/^null$/,resolve:()=>null,stringify:xm},{identify:e=>typeof e=="boolean",default:!0,tag:"tag:yaml.org,2002:bool",test:/^true$|^false$/,resolve:e=>e==="true",stringify:xm},{identify:lx,default:!0,tag:"tag:yaml.org,2002:int",test:/^-?(?:0|[1-9][0-9]*)$/,resolve:(e,t,{intAsBigInt:n})=>n?BigInt(e):parseInt(e,10),stringify:({value:e})=>lx(e)?e.toString():JSON.stringify(e)},{identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^-?(?:0|[1-9][0-9]*)(?:\.[0-9]*)?(?:[eE][-+]?[0-9]+)?$/,resolve:e=>parseFloat(e),stringify:xm}],IF={default:!0,tag:"",test:/^/,resolve(e,t){return t(`Unresolved plain scalar ${JSON.stringify(e)}`),e}},cx=[yo,bo].concat(BF,IF);var fd={identify:e=>e instanceof Uint8Array,default:!1,tag:"tag:yaml.org,2002:binary",resolve(e,t){if(typeof atob=="function"){let n=atob(e.replace(/[\n\r]/g,"")),i=new Uint8Array(n.length);for(let o=0;o<n.length;++o)i[o]=n.charCodeAt(o);return i}else return t("This environment does not support reading binary tags; either Buffer or atob is required"),e},stringify({comment:e,type:t,value:n},i,o,a){if(!n)return"";let r=n,s;if(typeof btoa=="function"){let l="";for(let c=0;c<r.length;++c)l+=String.fromCharCode(r[c]);s=btoa(l)}else throw new Error("This environment does not support writing binary tags; either Buffer or btoa is required");if(t!=null||(t=ge.BLOCK_LITERAL),t!==ge.QUOTE_DOUBLE){let l=Math.max(i.options.lineWidth-i.indent.length,i.options.minContentWidth),c=Math.ceil(s.length/l),u=new Array(c);for(let f=0,p=0;f<c;++f,p+=l)u[f]=s.substr(p,l);s=u.join(t===ge.BLOCK_LITERAL?`
`:" ")}return Fa({comment:e,type:t,value:s},i,o,a)}};function xv(e,t){var n;if(Qi(e))for(let i=0;i<e.items.length;++i){let o=e.items[i];if(!qe(o)){if(Ki(o)){o.items.length>1&&t("Each pair must have its own sequence indicator");let a=o.items[0]||new At(new ge(null));if(o.commentBefore&&(a.key.commentBefore=a.key.commentBefore?`${o.commentBefore}
${a.key.commentBefore}`:o.commentBefore),o.comment){let r=(n=a.value)!=null?n:a.key;r.comment=r.comment?`${o.comment}
${r.comment}`:o.comment}o=a}e.items[i]=qe(o)?o:new At(o)}}else t("Expected a sequence for this tag");return e}function Nv(e,t,n){let{replacer:i}=n,o=new Nn(e);o.tag="tag:yaml.org,2002:pairs";let a=0;if(t&&Symbol.iterator in Object(t))for(let r of t){typeof i=="function"&&(r=i.call(t,String(a++),r));let s,l;if(Array.isArray(r))if(r.length===2)s=r[0],l=r[1];else throw new TypeError(`Expected [key, value] tuple: ${r}`);else if(r&&r instanceof Object){let c=Object.keys(r);if(c.length===1)s=c[0],l=r[s];else throw new TypeError(`Expected tuple with one key, not ${c.length} keys`)}else s=r;o.items.push(yc(s,l,n))}return o}var pd={collection:"seq",default:!1,tag:"tag:yaml.org,2002:pairs",resolve:xv,createNode:Nv};var Rr=class extends Nn{constructor(){super(),this.add=Pt.prototype.add.bind(this),this.delete=Pt.prototype.delete.bind(this),this.get=Pt.prototype.get.bind(this),this.has=Pt.prototype.has.bind(this),this.set=Pt.prototype.set.bind(this),this.tag=Rr.tag}toJSON(t,n){if(!n)return super.toJSON(t);let i=new Map;n!=null&&n.onCreate&&n.onCreate(i);for(let o of this.items){let a,r;if(qe(o)?(a=fn(o.key,"",n),r=fn(o.value,a,n)):a=fn(o,"",n),i.has(a))throw new Error("Ordered maps must not include duplicate keys");i.set(a,r)}return i}static from(t,n,i){let o=Nv(t,n,i),a=new this;return a.items=o.items,a}};Rr.tag="tag:yaml.org,2002:omap";var md={collection:"seq",identify:e=>e instanceof Map,nodeClass:Rr,default:!1,tag:"tag:yaml.org,2002:omap",resolve(e,t){let n=xv(e,t),i=[];for(let{key:o}of n.items)ze(o)&&(i.includes(o.value)?t(`Ordered maps must not include duplicate keys: ${o.value}`):i.push(o.value));return Object.assign(new Rr,n)},createNode:(e,t,n)=>Rr.from(e,t,n)};function ux({value:e,source:t},n){return t&&(e?Av:Dv).test.test(t)?t:e?n.options.trueStr:n.options.falseStr}var Av={identify:e=>e===!0,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:Y|y|[Yy]es|YES|[Tt]rue|TRUE|[Oo]n|ON)$/,resolve:()=>new ge(!0),stringify:ux},Dv={identify:e=>e===!1,default:!0,tag:"tag:yaml.org,2002:bool",test:/^(?:N|n|[Nn]o|NO|[Ff]alse|FALSE|[Oo]ff|OFF)$/,resolve:()=>new ge(!1),stringify:ux};var dx={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^(?:[-+]?\.(?:inf|Inf|INF)|\.nan|\.NaN|\.NAN)$/,resolve:e=>e.slice(-3).toLowerCase()==="nan"?NaN:e[0]==="-"?Number.NEGATIVE_INFINITY:Number.POSITIVE_INFINITY,stringify:Vn},fx={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"EXP",test:/^[-+]?(?:[0-9][0-9_]*)?(?:\.[0-9_]*)?[eE][-+]?[0-9]+$/,resolve:e=>parseFloat(e.replace(/_/g,"")),stringify(e){let t=Number(e.value);return isFinite(t)?t.toExponential():Vn(e)}},px={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",test:/^[-+]?(?:[0-9][0-9_]*)?\.[0-9_]*$/,resolve(e){let t=new ge(parseFloat(e.replace(/_/g,""))),n=e.indexOf(".");if(n!==-1){let i=e.substring(n+1).replace(/_/g,"");i[i.length-1]==="0"&&(t.minFractionDigits=i.length)}return t},stringify:Vn};var hd=e=>typeof e=="bigint"||Number.isInteger(e);function Nm(e,t,n,{intAsBigInt:i}){let o=e[0];if((o==="-"||o==="+")&&(t+=1),e=e.substring(t).replace(/_/g,""),i){switch(n){case 2:e=`0b${e}`;break;case 8:e=`0o${e}`;break;case 16:e=`0x${e}`;break}let r=BigInt(e);return o==="-"?BigInt(-1)*r:r}let a=parseInt(e,n);return o==="-"?-1*a:a}function Lv(e,t,n){let{value:i}=e;if(hd(i)){let o=i.toString(t);return i<0?"-"+n+o.substr(1):n+o}return Vn(e)}var mx={identify:hd,default:!0,tag:"tag:yaml.org,2002:int",format:"BIN",test:/^[-+]?0b[0-1_]+$/,resolve:(e,t,n)=>Nm(e,2,2,n),stringify:e=>Lv(e,2,"0b")},hx={identify:hd,default:!0,tag:"tag:yaml.org,2002:int",format:"OCT",test:/^[-+]?0[0-7_]+$/,resolve:(e,t,n)=>Nm(e,1,8,n),stringify:e=>Lv(e,8,"0")},gx={identify:hd,default:!0,tag:"tag:yaml.org,2002:int",test:/^[-+]?[0-9][0-9_]*$/,resolve:(e,t,n)=>Nm(e,0,10,n),stringify:Vn},yx={identify:hd,default:!0,tag:"tag:yaml.org,2002:int",format:"HEX",test:/^[-+]?0x[0-9a-fA-F_]+$/,resolve:(e,t,n)=>Nm(e,2,16,n),stringify:e=>Lv(e,16,"0x")};var Or=class extends Pt{constructor(t){super(t),this.tag=Or.tag}add(t){let n;qe(t)?n=t:t&&typeof t=="object"&&"key"in t&&"value"in t&&t.value===null?n=new At(t.key,null):n=new At(t,null),Dr(this.items,n.key)||this.items.push(n)}get(t,n){let i=Dr(this.items,t);return!n&&qe(i)?ze(i.key)?i.key.value:i.key:i}set(t,n){if(typeof n!="boolean")throw new Error(`Expected boolean value for set(key, value) in a YAML set, not ${typeof n}`);let i=Dr(this.items,t);i&&!n?this.items.splice(this.items.indexOf(i),1):!i&&n&&this.items.push(new At(t))}toJSON(t,n){return super.toJSON(t,n,Set)}toString(t,n,i){if(!t)return JSON.stringify(this);if(this.hasAllNullValues(!0))return super.toString(Object.assign({},t,{allNullValues:!0}),n,i);throw new Error("Set items must all have null values")}static from(t,n,i){let{replacer:o}=i,a=new this(t);if(n&&Symbol.iterator in Object(n))for(let r of n)typeof o=="function"&&(r=o.call(n,r,r)),a.items.push(yc(r,null,i));return a}};Or.tag="tag:yaml.org,2002:set";var gd={collection:"map",identify:e=>e instanceof Set,nodeClass:Or,default:!1,tag:"tag:yaml.org,2002:set",createNode:(e,t,n)=>Or.from(e,t,n),resolve(e,t){if(Ki(e)){if(e.hasAllNullValues(!0))return Object.assign(new Or,e);t("Set items must all have null values")}else t("Expected a mapping for this tag");return e}};function Rv(e,t){let n=e[0],i=n==="-"||n==="+"?e.substring(1):e,o=r=>t?BigInt(r):Number(r),a=i.replace(/_/g,"").split(":").reduce((r,s)=>r*o(60)+o(s),o(0));return n==="-"?o(-1)*a:a}function bx(e){let{value:t}=e,n=r=>r;if(typeof t=="bigint")n=r=>BigInt(r);else if(isNaN(t)||!isFinite(t))return Vn(e);let i="";t<0&&(i="-",t*=n(-1));let o=n(60),a=[t%o];return t<60?a.unshift(0):(t=(t-a[0])/o,a.unshift(t%o),t>=60&&(t=(t-a[0])/o,a.unshift(t))),i+a.map(r=>String(r).padStart(2,"0")).join(":").replace(/000000\d*$/,"")}var Am={identify:e=>typeof e=="bigint"||Number.isInteger(e),default:!0,tag:"tag:yaml.org,2002:int",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+$/,resolve:(e,t,{intAsBigInt:n})=>Rv(e,n),stringify:bx},Dm={identify:e=>typeof e=="number",default:!0,tag:"tag:yaml.org,2002:float",format:"TIME",test:/^[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\.[0-9_]*$/,resolve:e=>Rv(e,!1),stringify:bx},bc={identify:e=>e instanceof Date,default:!0,tag:"tag:yaml.org,2002:timestamp",test:RegExp("^([0-9]{4})-([0-9]{1,2})-([0-9]{1,2})(?:(?:t|T|[ \\t]+)([0-9]{1,2}):([0-9]{1,2}):([0-9]{1,2}(\\.[0-9]+)?)(?:[ \\t]*(Z|[-+][012]?[0-9](?::[0-9]{2})?))?)?$"),resolve(e){let t=e.match(bc.test);if(!t)throw new Error("!!timestamp expects a date, starting with yyyy-mm-dd");let[,n,i,o,a,r,s]=t.map(Number),l=t[7]?Number((t[7]+"00").substr(1,3)):0,c=Date.UTC(n,i-1,o,a||0,r||0,s||0,l),u=t[8];if(u&&u!=="Z"){let f=Rv(u,!1);Math.abs(f)<30&&(f*=60),c-=6e4*f}return new Date(c)},stringify:({value:e})=>{var t;return(t=e==null?void 0:e.toISOString().replace(/(T00:00:00)?\.000Z$/,""))!=null?t:""}};var Ov=[yo,bo,Lr,Os,Av,Dv,mx,hx,gx,yx,dx,fx,px,fd,go,md,pd,gd,Am,Dm,bc];var vx=new Map([["core",sx],["failsafe",[yo,bo,Lr]],["json",cx],["yaml11",Ov],["yaml-1.1",Ov]]),wx={binary:fd,bool:dd,float:Sm,floatExp:Tm,floatNaN:wm,floatTime:Dm,int:Cm,intHex:Mm,intOct:Em,intTime:Am,map:yo,merge:go,null:Os,omap:md,pairs:pd,seq:bo,set:gd,timestamp:bc},Tx={"tag:yaml.org,2002:binary":fd,"tag:yaml.org,2002:merge":go,"tag:yaml.org,2002:omap":md,"tag:yaml.org,2002:pairs":pd,"tag:yaml.org,2002:set":gd,"tag:yaml.org,2002:timestamp":bc};function Lm(e,t,n){let i=vx.get(t);if(i&&!e)return n&&!i.includes(go)?i.concat(go):i.slice();let o=i;if(!o)if(Array.isArray(e))o=[];else{let a=Array.from(vx.keys()).filter(r=>r!=="yaml11").map(r=>JSON.stringify(r)).join(", ");throw new Error(`Unknown schema "${t}"; use one of ${a} or define customTags array`)}if(Array.isArray(e))for(let a of e)o=o.concat(a);else typeof e=="function"&&(o=e(o.slice()));return n&&(o=o.concat(go)),o.reduce((a,r)=>{let s=typeof r=="string"?wx[r]:r;if(!s){let l=JSON.stringify(r),c=Object.keys(wx).map(u=>JSON.stringify(u)).join(", ");throw new Error(`Unknown custom tag ${l}; use one of ${c}`)}return a.includes(s)||a.push(s),a},[])}var PF=(e,t)=>e.key<t.key?-1:e.key>t.key?1:0,Fr=class{constructor({compat:t,customTags:n,merge:i,resolveKnownTags:o,schema:a,sortMapEntries:r,toStringDefaults:s}){this.compat=Array.isArray(t)?Lm(t,"compat"):t?Lm(null,t):null,this.name=typeof a=="string"&&a||"core",this.knownTags=o?Tx:{},this.tags=Lm(n,this.name,i),this.toStringOptions=s!=null?s:null,Object.defineProperty(this,mo,{value:yo}),Object.defineProperty(this,Ai,{value:Lr}),Object.defineProperty(this,Ra,{value:bo}),this.sortMapEntries=typeof r=="function"?r:r===!0?PF:null}clone(){let t=Object.create(Fr.prototype,Object.getOwnPropertyDescriptors(this));return t.tags=this.tags.slice(),t}};function Sx(e,t){var l;let n=[],i=t.directives===!0;if(t.directives!==!1&&e.directives){let c=e.directives.toString(e);c?(n.push(c),i=!0):e.directives.docStart&&(i=!0)}i&&n.push("---");let o=pm(e,t),{commentString:a}=o.options;if(e.commentBefore){n.length!==1&&n.unshift("");let c=a(e.commentBefore);n.unshift(Xi(c,""))}let r=!1,s=null;if(e.contents){if(Qe(e.contents)){if(e.contents.spaceBefore&&i&&n.push(""),e.contents.commentBefore){let f=a(e.contents.commentBefore);n.push(Xi(f,""))}o.forceBlockIndent=!!e.comment,s=e.contents.comment}let c=s?void 0:()=>r=!0,u=_a(e.contents,o,()=>s=null,c);s&&(u+=jo(u,"",a(s))),(u[0]==="|"||u[0]===">")&&n[n.length-1]==="---"?n[n.length-1]=`--- ${u}`:n.push(u)}else n.push(_a(e.contents,o));if((l=e.directives)!=null&&l.docEnd)if(e.comment){let c=a(e.comment);c.includes(`
`)?(n.push("..."),n.push(Xi(c,""))):n.push(`... ${c}`)}else n.push("...");else{let c=e.comment;c&&r&&(c=c.replace(/^\n+/,"")),c&&((!r||s)&&n[n.length-1]!==""&&n.push(""),n.push(Xi(a(c),"")))}return n.join(`
`)+`
`}var Ji=class{constructor(t,n,i){this.commentBefore=null,this.comment=null,this.errors=[],this.warnings=[],Object.defineProperty(this,Qn,{value:om});let o=null;typeof n=="function"||Array.isArray(n)?o=n:i===void 0&&n&&(i=n,n=void 0);let a=Object.assign({intAsBigInt:!1,keepSourceTokens:!1,logLevel:"warn",prettyErrors:!0,strict:!0,stringKeys:!1,uniqueKeys:!0,version:"1.2"},i);this.options=a;let{version:r}=a;i!=null&&i._directives?(this.directives=i._directives.atDocument(),this.directives.yaml.explicit&&(r=this.directives.yaml.version)):this.directives=new dn({version:r}),this.setSchema(r,i),this.contents=t===void 0?null:this.createNode(t,o,i)}clone(){let t=Object.create(Ji.prototype,{[Qn]:{value:om}});return t.commentBefore=this.commentBefore,t.comment=this.comment,t.errors=this.errors.slice(),t.warnings=this.warnings.slice(),t.options=Object.assign({},this.options),this.directives&&(t.directives=this.directives.clone()),t.schema=this.schema.clone(),t.contents=Qe(this.contents)?this.contents.clone(t.schema):this.contents,this.range&&(t.range=this.range.slice()),t}add(t){vc(this.contents)&&this.contents.add(t)}addIn(t,n){vc(this.contents)&&this.contents.addIn(t,n)}createAlias(t,n){if(!t.anchor){let i=vv(this);t.anchor=!n||i.has(n)?wv(n||"a",i):n}return new $o(t.anchor)}createNode(t,n,i){let o;if(typeof n=="function")t=n.call({"":t},"",t),o=n;else if(Array.isArray(n)){let b=g=>typeof g=="number"||g instanceof String||g instanceof Number,y=n.filter(b).map(String);y.length>0&&(n=n.concat(y)),o=n}else i===void 0&&n&&(i=n,n=void 0);let{aliasDuplicateObjects:a,anchorPrefix:r,flow:s,keepUndefined:l,onTagObj:c,tag:u}=i!=null?i:{},{onAnchor:f,setAnchors:p,sourceObjects:d}=tx(this,r||"a"),h={aliasDuplicateObjects:a!=null?a:!0,keepUndefined:l!=null?l:!1,onAnchor:f,onTagObj:c,replacer:o,schema:this.schema,sourceObjects:d},m=Oa(t,u,h);return s&&at(m)&&(m.flow=!0),p(),m}createPair(t,n,i={}){let o=this.createNode(t,null,i),a=this.createNode(n,null,i);return new At(o,a)}delete(t){return vc(this.contents)?this.contents.delete(t):!1}deleteIn(t){return hc(t)?this.contents==null?!1:(this.contents=null,!0):vc(this.contents)?this.contents.deleteIn(t):!1}get(t,n){return at(this.contents)?this.contents.get(t,n):void 0}getIn(t,n){return hc(t)?!n&&ze(this.contents)?this.contents.value:this.contents:at(this.contents)?this.contents.getIn(t,n):void 0}has(t){return at(this.contents)?this.contents.has(t):!1}hasIn(t){return hc(t)?this.contents!==void 0:at(this.contents)?this.contents.hasIn(t):!1}set(t,n){this.contents==null?this.contents=sd(this.schema,[t],n):vc(this.contents)&&this.contents.set(t,n)}setIn(t,n){hc(t)?this.contents=n:this.contents==null?this.contents=sd(this.schema,Array.from(t),n):vc(this.contents)&&this.contents.setIn(t,n)}setSchema(t,n={}){typeof t=="number"&&(t=String(t));let i;switch(t){case"1.1":this.directives?this.directives.yaml.version="1.1":this.directives=new dn({version:"1.1"}),i={resolveKnownTags:!1,schema:"yaml-1.1"};break;case"1.2":case"next":this.directives?this.directives.yaml.version=t:this.directives=new dn({version:t}),i={resolveKnownTags:!0,schema:"core"};break;case null:this.directives&&delete this.directives,i=null;break;default:{let o=JSON.stringify(t);throw new Error(`Expected '1.1', '1.2' or null as first argument, but found: ${o}`)}}if(n.schema instanceof Object)this.schema=n.schema;else if(i)this.schema=new Fr(Object.assign(i,n));else throw new Error("With a null YAML version, the { schema: Schema } option is required")}toJS({json:t,jsonArg:n,mapAsMap:i,maxAliasCount:o,onAnchor:a,reviver:r}={}){let s={anchors:new Map,doc:this,keep:!t,mapAsMap:i===!0,mapKeyWarned:!1,maxAliasCount:typeof o=="number"?o:100},l=fn(this.contents,n!=null?n:"",s);if(typeof a=="function")for(let{count:c,res:u}of s.anchors.values())a(u,c);return typeof r=="function"?Nr(r,{"":l},"",l):l}toJSON(t,n){return this.toJS({json:!0,jsonArg:t,mapAsMap:!1,onAnchor:n})}toString(t={}){if(this.errors.length>0)throw new Error("Document with errors cannot be stringified");if("indent"in t&&(!Number.isInteger(t.indent)||Number(t.indent)<=0)){let n=JSON.stringify(t.indent);throw new Error(`"indent" option must be a positive integer, not ${n}`)}return Sx(this,t)}};function vc(e){if(at(e))return!0;throw new Error("Expected a YAML collection as document contents")}var wc=class extends Error{constructor(t,n,i,o){super(),this.name=t,this.code=i,this.message=o,this.pos=n}},Li=class extends wc{constructor(t,n,i){super("YAMLParseError",t,n,i)}},Tc=class extends wc{constructor(t,n,i){super("YAMLWarning",t,n,i)}},yd=(e,t)=>n=>{if(n.pos[0]===-1)return;n.linePos=n.pos.map(s=>t.linePos(s));let{line:i,col:o}=n.linePos[0];n.message+=` at line ${i}, column ${o}`;let a=o-1,r=e.substring(t.lineStarts[i-1],t.lineStarts[i]).replace(/[\n\r]+$/,"");if(a>=60&&r.length>80){let s=Math.min(a-39,r.length-79);r="\u2026"+r.substring(s),a-=s-1}if(r.length>80&&(r=r.substring(0,79)+"\u2026"),i>1&&/^ *$/.test(r.substring(0,a))){let s=e.substring(t.lineStarts[i-2],t.lineStarts[i-1]);s.length>80&&(s=s.substring(0,79)+`\u2026
`),r=s+r}if(/[^ ]/.test(r)){let s=1,l=n.linePos[1];l&&l.line===i&&l.col>o&&(s=Math.max(1,Math.min(l.col-o,80-a)));let c=" ".repeat(a)+"^".repeat(s);n.message+=`:

${r}
${c}
`}};function Yo(e,{flow:t,indicator:n,next:i,offset:o,onError:a,parentIndent:r,startOnNewline:s}){let l=!1,c=s,u=s,f="",p="",d=!1,h=!1,m=null,b=null,y=null,g=null,v=null,w=null,T=null;for(let C of e)switch(h&&(C.type!=="space"&&C.type!=="newline"&&C.type!=="comma"&&a(C.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),h=!1),m&&(c&&C.type!=="comment"&&C.type!=="newline"&&a(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),m=null),C.type){case"space":!t&&(n!=="doc-start"||(i==null?void 0:i.type)!=="flow-collection")&&C.source.includes("	")&&(m=C),u=!0;break;case"comment":{u||a(C,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let L=C.source.substring(1)||" ";f?f+=p+L:f=L,p="",c=!1;break}case"newline":c?f?f+=C.source:(!w||n!=="seq-item-ind")&&(l=!0):p+=C.source,c=!0,d=!0,(b||y)&&(g=C),u=!0;break;case"anchor":b&&a(C,"MULTIPLE_ANCHORS","A node can have at most one anchor"),C.source.endsWith(":")&&a(C.offset+C.source.length-1,"BAD_ALIAS","Anchor ending in : is ambiguous",!0),b=C,T!=null||(T=C.offset),c=!1,u=!1,h=!0;break;case"tag":{y&&a(C,"MULTIPLE_TAGS","A node can have at most one tag"),y=C,T!=null||(T=C.offset),c=!1,u=!1,h=!0;break}case n:(b||y)&&a(C,"BAD_PROP_ORDER",`Anchors and tags must be after the ${C.source} indicator`),w&&a(C,"UNEXPECTED_TOKEN",`Unexpected ${C.source} in ${t!=null?t:"collection"}`),w=C,c=n==="seq-item-ind"||n==="explicit-key-ind",u=!1;break;case"comma":if(t){v&&a(C,"UNEXPECTED_TOKEN",`Unexpected , in ${t}`),v=C,c=!1,u=!1;break}default:a(C,"UNEXPECTED_TOKEN",`Unexpected ${C.type} token`),c=!1,u=!1}let k=e[e.length-1],E=k?k.offset+k.source.length:o;return h&&i&&i.type!=="space"&&i.type!=="newline"&&i.type!=="comma"&&(i.type!=="scalar"||i.source!=="")&&a(i.offset,"MISSING_CHAR","Tags and anchors must be separated from the next token by white space"),m&&(c&&m.indent<=r||(i==null?void 0:i.type)==="block-map"||(i==null?void 0:i.type)==="block-seq")&&a(m,"TAB_AS_INDENT","Tabs are not allowed as indentation"),{comma:v,found:w,spaceBefore:l,comment:f,hasNewline:d,anchor:b,tag:y,newlineAfterProp:g,end:E,start:T!=null?T:E}}function _r(e){if(!e)return null;switch(e.type){case"alias":case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":if(e.source.includes(`
`))return!0;if(e.end){for(let t of e.end)if(t.type==="newline")return!0}return!1;case"flow-collection":for(let t of e.items){for(let n of t.start)if(n.type==="newline")return!0;if(t.sep){for(let n of t.sep)if(n.type==="newline")return!0}if(_r(t.key)||_r(t.value))return!0}return!1;default:return!0}}function bd(e,t,n){if((t==null?void 0:t.type)==="flow-collection"){let i=t.end[0];i.indent===e&&(i.source==="]"||i.source==="}")&&_r(t)&&n(i,"BAD_INDENT","Flow end indicator should be more indented than parent",!0)}}function Rm(e,t,n){let{uniqueKeys:i}=e.options;if(i===!1)return!1;let o=typeof i=="function"?i:(a,r)=>a===r||ze(a)&&ze(r)&&a.value===r.value;return t.some(a=>o(a.key,n))}var kx="All mapping items must start at the same column";function Ex({composeNode:e,composeEmptyNode:t},n,i,o,a){var u,f;let r=(u=a==null?void 0:a.nodeClass)!=null?u:Pt,s=new r(n.schema);n.atRoot&&(n.atRoot=!1);let l=i.offset,c=null;for(let p of i.items){let{start:d,key:h,sep:m,value:b}=p,y=Yo(d,{indicator:"explicit-key-ind",next:h!=null?h:m==null?void 0:m[0],offset:l,onError:o,parentIndent:i.indent,startOnNewline:!0}),g=!y.found;if(g){if(h&&(h.type==="block-seq"?o(l,"BLOCK_AS_IMPLICIT_KEY","A block sequence may not be used as an implicit map key"):"indent"in h&&h.indent!==i.indent&&o(l,"BAD_INDENT",kx)),!y.anchor&&!y.tag&&!m){c=y.end,y.comment&&(s.comment?s.comment+=`
`+y.comment:s.comment=y.comment);continue}(y.newlineAfterProp||_r(h))&&o(h!=null?h:d[d.length-1],"MULTILINE_IMPLICIT_KEY","Implicit keys need to be on a single line")}else((f=y.found)==null?void 0:f.indent)!==i.indent&&o(l,"BAD_INDENT",kx);n.atKey=!0;let v=y.end,w=h?e(n,h,y,o):t(n,v,d,null,y,o);n.schema.compat&&bd(i.indent,h,o),n.atKey=!1,Rm(n,s.items,w)&&o(v,"DUPLICATE_KEY","Map keys must be unique");let T=Yo(m!=null?m:[],{indicator:"map-value-ind",next:b,offset:w.range[2],onError:o,parentIndent:i.indent,startOnNewline:!h||h.type==="block-scalar"});if(l=T.end,T.found){g&&((b==null?void 0:b.type)==="block-map"&&!T.hasNewline&&o(l,"BLOCK_AS_IMPLICIT_KEY","Nested mappings are not allowed in compact mappings"),n.options.strict&&y.start<T.found.offset-1024&&o(w.range,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit block mapping key"));let k=b?e(n,b,T,o):t(n,l,m,null,T,o);n.schema.compat&&bd(i.indent,b,o),l=k.range[2];let E=new At(w,k);n.options.keepSourceTokens&&(E.srcToken=p),s.items.push(E)}else{g&&o(w.range,"MISSING_CHAR","Implicit map keys need to be followed by map values"),T.comment&&(w.comment?w.comment+=`
`+T.comment:w.comment=T.comment);let k=new At(w);n.options.keepSourceTokens&&(k.srcToken=p),s.items.push(k)}}return c&&c<l&&o(c,"IMPOSSIBLE","Map comment with trailing content"),s.range=[i.offset,l,c!=null?c:l],s}function Cx({composeNode:e,composeEmptyNode:t},n,i,o,a){var u;let r=(u=a==null?void 0:a.nodeClass)!=null?u:Nn,s=new r(n.schema);n.atRoot&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let l=i.offset,c=null;for(let{start:f,value:p}of i.items){let d=Yo(f,{indicator:"seq-item-ind",next:p,offset:l,onError:o,parentIndent:i.indent,startOnNewline:!0});if(!d.found)if(d.anchor||d.tag||p)p&&p.type==="block-seq"?o(d.end,"BAD_INDENT","All sequence items must start at the same column"):o(l,"MISSING_CHAR","Sequence item without - indicator");else{c=d.end,d.comment&&(s.comment=d.comment);continue}let h=p?e(n,p,d,o):t(n,d.end,f,null,d,o);n.schema.compat&&bd(i.indent,p,o),l=h.range[2],s.items.push(h)}return s.range=[i.offset,l,c!=null?c:l],s}function qo(e,t,n,i){let o="";if(e){let a=!1,r="";for(let s of e){let{source:l,type:c}=s;switch(c){case"space":a=!0;break;case"comment":{n&&!a&&i(s,"MISSING_CHAR","Comments must be separated from other tokens by white space characters");let u=l.substring(1)||" ";o?o+=r+u:o=u,r="";break}case"newline":o&&(r+=l),a=!0;break;default:i(s,"UNEXPECTED_TOKEN",`Unexpected ${c} at node end`)}t+=l.length}}return{comment:o,offset:t}}var Fv="Block collections are not allowed within flow collections",_v=e=>e&&(e.type==="block-map"||e.type==="block-seq");function Mx({composeNode:e,composeEmptyNode:t},n,i,o,a){var b,y;let r=i.start.source==="{",s=r?"flow map":"flow sequence",l=(b=a==null?void 0:a.nodeClass)!=null?b:r?Pt:Nn,c=new l(n.schema);c.flow=!0;let u=n.atRoot;u&&(n.atRoot=!1),n.atKey&&(n.atKey=!1);let f=i.offset+i.start.source.length;for(let g=0;g<i.items.length;++g){let v=i.items[g],{start:w,key:T,sep:k,value:E}=v,C=Yo(w,{flow:s,indicator:"explicit-key-ind",next:T!=null?T:k==null?void 0:k[0],offset:f,onError:o,parentIndent:i.indent,startOnNewline:!1});if(!C.found){if(!C.anchor&&!C.tag&&!k&&!E){g===0&&C.comma?o(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`):g<i.items.length-1&&o(C.start,"UNEXPECTED_TOKEN",`Unexpected empty item in ${s}`),C.comment&&(c.comment?c.comment+=`
`+C.comment:c.comment=C.comment),f=C.end;continue}!r&&n.options.strict&&_r(T)&&o(T,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line")}if(g===0)C.comma&&o(C.comma,"UNEXPECTED_TOKEN",`Unexpected , in ${s}`);else if(C.comma||o(C.start,"MISSING_CHAR",`Missing , between ${s} items`),C.comment){let L="";e:for(let F of w)switch(F.type){case"comma":case"space":break;case"comment":L=F.source.substring(1);break e;default:break e}if(L){let F=c.items[c.items.length-1];qe(F)&&(F=(y=F.value)!=null?y:F.key),F.comment?F.comment+=`
`+L:F.comment=L,C.comment=C.comment.substring(L.length+1)}}if(!r&&!k&&!C.found){let L=E?e(n,E,C,o):t(n,C.end,k,null,C,o);c.items.push(L),f=L.range[2],_v(E)&&o(L.range,"BLOCK_IN_FLOW",Fv)}else{n.atKey=!0;let L=C.end,F=T?e(n,T,C,o):t(n,L,w,null,C,o);_v(T)&&o(F.range,"BLOCK_IN_FLOW",Fv),n.atKey=!1;let N=Yo(k!=null?k:[],{flow:s,indicator:"map-value-ind",next:E,offset:F.range[2],onError:o,parentIndent:i.indent,startOnNewline:!1});if(N.found){if(!r&&!C.found&&n.options.strict){if(k)for(let x of k){if(x===N.found)break;if(x.type==="newline"){o(x,"MULTILINE_IMPLICIT_KEY","Implicit keys of flow sequence pairs need to be on a single line");break}}C.start<N.found.offset-1024&&o(N.found,"KEY_OVER_1024_CHARS","The : indicator must be at most 1024 chars after the start of an implicit flow sequence key")}}else E&&("source"in E&&E.source&&E.source[0]===":"?o(E,"MISSING_CHAR",`Missing space after : in ${s}`):o(N.start,"MISSING_CHAR",`Missing , or : between ${s} items`));let _=E?e(n,E,N,o):N.found?t(n,N.end,k,null,N,o):null;_?_v(E)&&o(_.range,"BLOCK_IN_FLOW",Fv):N.comment&&(F.comment?F.comment+=`
`+N.comment:F.comment=N.comment);let A=new At(F,_);if(n.options.keepSourceTokens&&(A.srcToken=v),r){let x=c;Rm(n,x.items,F)&&o(L,"DUPLICATE_KEY","Map keys must be unique"),x.items.push(A)}else{let x=new Pt(n.schema);x.flow=!0,x.items.push(A);let S=(_!=null?_:F).range;x.range=[F.range[0],S[1],S[2]],c.items.push(x)}f=_?_.range[2]:N.end}}let p=r?"}":"]",[d,...h]=i.end,m=f;if(d&&d.source===p)m=d.offset+d.source.length;else{let g=s[0].toUpperCase()+s.substring(1),v=u?`${g} must end with a ${p}`:`${g} in block collection must be sufficiently indented and end with a ${p}`;o(f,u?"MISSING_CHAR":"BAD_INDENT",v),d&&d.source.length!==1&&h.unshift(d)}if(h.length>0){let g=qo(h,m,n.options.strict,o);g.comment&&(c.comment?c.comment+=`
`+g.comment:c.comment=g.comment),c.range=[i.offset,m,g.offset]}else c.range=[i.offset,m,m];return c}function Bv(e,t,n,i,o,a){let r=n.type==="block-map"?Ex(e,t,n,i,a):n.type==="block-seq"?Cx(e,t,n,i,a):Mx(e,t,n,i,a),s=r.constructor;return o==="!"||o===s.tagName?(r.tag=s.tagName,r):(o&&(r.tag=o),r)}function xx(e,t,n,i,o){var p,d,h;let a=i.tag,r=a?t.directives.tagName(a.source,m=>o(a,"TAG_RESOLVE_FAILED",m)):null;if(n.type==="block-seq"){let{anchor:m,newlineAfterProp:b}=i,y=m&&a?m.offset>a.offset?m:a:m!=null?m:a;y&&(!b||b.offset<y.offset)&&o(y,"MISSING_CHAR","Missing newline after block sequence props")}let s=n.type==="block-map"?"map":n.type==="block-seq"?"seq":n.start.source==="{"?"map":"seq";if(!a||!r||r==="!"||r===Pt.tagName&&s==="map"||r===Nn.tagName&&s==="seq")return Bv(e,t,n,o,r);let l=t.schema.tags.find(m=>m.tag===r&&m.collection===s);if(!l){let m=t.schema.knownTags[r];if(m&&m.collection===s)t.schema.tags.push(Object.assign({},m,{default:!1})),l=m;else return m?o(a,"BAD_COLLECTION_TYPE",`${m.tag} used for ${s} collection, but expects ${(p=m.collection)!=null?p:"scalar"}`,!0):o(a,"TAG_RESOLVE_FAILED",`Unresolved tag: ${r}`,!0),Bv(e,t,n,o,r)}let c=Bv(e,t,n,o,r,l),u=(h=(d=l.resolve)==null?void 0:d.call(l,c,m=>o(a,"TAG_RESOLVE_FAILED",m),t.options))!=null?h:c,f=Qe(u)?u:new ge(u);return f.range=c.range,f.tag=r,l!=null&&l.format&&(f.format=l.format),f}function Om(e,t,n){let i=t.offset,o=zF(t,e.options.strict,n);if(!o)return{value:"",type:null,comment:"",range:[i,i,i]};let a=o.mode===">"?ge.BLOCK_FOLDED:ge.BLOCK_LITERAL,r=t.source?HF(t.source):[],s=r.length;for(let m=r.length-1;m>=0;--m){let b=r[m][1];if(b===""||b==="\r")s=m;else break}if(s===0){let m=o.chomp==="+"&&r.length>0?`
`.repeat(Math.max(1,r.length-1)):"",b=i+o.length;return t.source&&(b+=t.source.length),{value:m,type:a,comment:o.comment,range:[i,b,b]}}let l=t.indent+o.indent,c=t.offset+o.length,u=0;for(let m=0;m<s;++m){let[b,y]=r[m];if(y===""||y==="\r")o.indent===0&&b.length>l&&(l=b.length);else{if(b.length<l){let g="Block scalars with more-indented leading empty lines must use an explicit indentation indicator";n(c+b.length,"MISSING_CHAR",g)}o.indent===0&&(l=b.length),u=m,l===0&&!e.atRoot&&n(c,"BAD_INDENT","Block scalar values in collections must be indented");break}c+=b.length+y.length+1}for(let m=r.length-1;m>=s;--m)r[m][0].length>l&&(s=m+1);let f="",p="",d=!1;for(let m=0;m<u;++m)f+=r[m][0].slice(l)+`
`;for(let m=u;m<s;++m){let[b,y]=r[m];c+=b.length+y.length+1;let g=y[y.length-1]==="\r";if(g&&(y=y.slice(0,-1)),y&&b.length<l){let w=`Block scalar lines must not be less indented than their ${o.indent?"explicit indentation indicator":"first line"}`;n(c-y.length-(g?2:1),"BAD_INDENT",w),b=""}a===ge.BLOCK_LITERAL?(f+=p+b.slice(l)+y,p=`
`):b.length>l||y[0]==="	"?(p===" "?p=`
`:!d&&p===`
`&&(p=`

`),f+=p+b.slice(l)+y,p=`
`,d=!0):y===""?p===`
`?f+=`
`:p=`
`:(f+=p+y,p=" ",d=!1)}switch(o.chomp){case"-":break;case"+":for(let m=s;m<r.length;++m)f+=`
`+r[m][0].slice(l);f[f.length-1]!==`
`&&(f+=`
`);break;default:f+=`
`}let h=i+o.length+t.source.length;return{value:f,type:a,comment:o.comment,range:[i,h,h]}}function zF({offset:e,props:t},n,i){if(t[0].type!=="block-scalar-header")return i(t[0],"IMPOSSIBLE","Block scalar header not found"),null;let{source:o}=t[0],a=o[0],r=0,s="",l=-1;for(let p=1;p<o.length;++p){let d=o[p];if(!s&&(d==="-"||d==="+"))s=d;else{let h=Number(d);!r&&h?r=h:l===-1&&(l=e+p)}}l!==-1&&i(l,"UNEXPECTED_TOKEN",`Block scalar header includes extra characters: ${o}`);let c=!1,u="",f=o.length;for(let p=1;p<t.length;++p){let d=t[p];switch(d.type){case"space":c=!0;case"newline":f+=d.source.length;break;case"comment":n&&!c&&i(d,"MISSING_CHAR","Comments must be separated from other tokens by white space characters"),f+=d.source.length,u=d.source.substring(1);break;case"error":i(d,"UNEXPECTED_TOKEN",d.message),f+=d.source.length;break;default:{let h=`Unexpected token in block scalar header: ${d.type}`;i(d,"UNEXPECTED_TOKEN",h);let m=d.source;m&&typeof m=="string"&&(f+=m.length)}}}return{mode:a,indent:r,chomp:s,comment:u,length:f}}function HF(e){let t=e.split(/\n( *)/),n=t[0],i=n.match(/^( *)/),a=[i!=null&&i[1]?[i[1],n.slice(i[1].length)]:["",n]];for(let r=1;r<t.length;r+=2)a.push([t[r],t[r+1]]);return a}function Fm(e,t,n){let{offset:i,type:o,source:a,end:r}=e,s,l,c=(p,d,h)=>n(i+p,d,h);switch(o){case"scalar":s=ge.PLAIN,l=VF(a,c);break;case"single-quoted-scalar":s=ge.QUOTE_SINGLE,l=UF(a,c);break;case"double-quoted-scalar":s=ge.QUOTE_DOUBLE,l=$F(a,c);break;default:return n(e,"UNEXPECTED_TOKEN",`Expected a flow scalar value, but found: ${o}`),{value:"",type:null,comment:"",range:[i,i+a.length,i+a.length]}}let u=i+a.length,f=qo(r,u,t,n);return{value:l,type:s,comment:f.comment,range:[i,u,f.offset]}}function VF(e,t){let n="";switch(e[0]){case"	":n="a tab character";break;case",":n="flow indicator character ,";break;case"%":n="directive indicator character %";break;case"|":case">":{n=`block scalar indicator ${e[0]}`;break}case"@":case"`":{n=`reserved character ${e[0]}`;break}}return n&&t(0,"BAD_SCALAR_START",`Plain value cannot start with ${n}`),Nx(e)}function UF(e,t){return(e[e.length-1]!=="'"||e.length===1)&&t(e.length,"MISSING_CHAR","Missing closing 'quote"),Nx(e.slice(1,-1)).replace(/''/g,"'")}function Nx(e){var l;let t,n;try{t=new RegExp(`(.*?)(?<![ 	])[ 	]*\r?
`,"sy"),n=new RegExp(`[ 	]*(.*?)(?:(?<![ 	])[ 	]*)?\r?
`,"sy")}catch(c){t=/(.*?)[ \t]*\r?\n/sy,n=/[ \t]*(.*?)[ \t]*\r?\n/sy}let i=t.exec(e);if(!i)return e;let o=i[1],a=" ",r=t.lastIndex;for(n.lastIndex=r;i=n.exec(e);)i[1]===""?a===`
`?o+=a:a=`
`:(o+=a+i[1],a=" "),r=n.lastIndex;let s=/[ \t]*(.*)/sy;return s.lastIndex=r,i=s.exec(e),o+a+((l=i==null?void 0:i[1])!=null?l:"")}function $F(e,t){let n="";for(let i=1;i<e.length-1;++i){let o=e[i];if(!(o==="\r"&&e[i+1]===`
`))if(o===`
`){let{fold:a,offset:r}=jF(e,i);n+=a,i=r}else if(o==="\\"){let a=e[++i],r=YF[a];if(r)n+=r;else if(a===`
`)for(a=e[i+1];a===" "||a==="	";)a=e[++i+1];else if(a==="\r"&&e[i+1]===`
`)for(a=e[++i+1];a===" "||a==="	";)a=e[++i+1];else if(a==="x"||a==="u"||a==="U"){let s={x:2,u:4,U:8}[a];n+=qF(e,i+1,s,t),i+=s}else{let s=e.substr(i-1,2);t(i-1,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),n+=s}}else if(o===" "||o==="	"){let a=i,r=e[i+1];for(;r===" "||r==="	";)r=e[++i+1];r!==`
`&&!(r==="\r"&&e[i+2]===`
`)&&(n+=i>a?e.slice(a,i+1):o)}else n+=o}return(e[e.length-1]!=='"'||e.length===1)&&t(e.length,"MISSING_CHAR",'Missing closing "quote'),n}function jF(e,t){let n="",i=e[t+1];for(;(i===" "||i==="	"||i===`
`||i==="\r")&&!(i==="\r"&&e[t+2]!==`
`);)i===`
`&&(n+=`
`),t+=1,i=e[t+1];return n||(n=" "),{fold:n,offset:t}}var YF={0:"\0",a:"\x07",b:"\b",e:"\x1B",f:"\f",n:`
`,r:"\r",t:"	",v:"\v",N:"\x85",_:"\xA0",L:"\u2028",P:"\u2029"," ":" ",'"':'"',"/":"/","\\":"\\","	":"	"};function qF(e,t,n,i){let o=e.substr(t,n),r=o.length===n&&/^[0-9a-fA-F]+$/.test(o)?parseInt(o,16):NaN;if(isNaN(r)){let s=e.substr(t-2,n+2);return i(t-2,"BAD_DQ_ESCAPE",`Invalid escape sequence ${s}`),s}return String.fromCodePoint(r)}function Iv(e,t,n,i){let{value:o,type:a,comment:r,range:s}=t.type==="block-scalar"?Om(e,t,i):Fm(t,e.options.strict,i),l=n?e.directives.tagName(n.source,f=>i(n,"TAG_RESOLVE_FAILED",f)):null,c;e.options.stringKeys&&e.atKey?c=e.schema[Ai]:l?c=GF(e.schema,o,l,n,i):t.type==="scalar"?c=KF(e,o,t,i):c=e.schema[Ai];let u;try{let f=c.resolve(o,p=>i(n!=null?n:t,"TAG_RESOLVE_FAILED",p),e.options);u=ze(f)?f:new ge(f)}catch(f){let p=f instanceof Error?f.message:String(f);i(n!=null?n:t,"TAG_RESOLVE_FAILED",p),u=new ge(o)}return u.range=s,u.source=o,a&&(u.type=a),l&&(u.tag=l),c.format&&(u.format=c.format),r&&(u.comment=r),u}function GF(e,t,n,i,o){var s;if(n==="!")return e[Ai];let a=[];for(let l of e.tags)if(!l.collection&&l.tag===n)if(l.default&&l.test)a.push(l);else return l;for(let l of a)if((s=l.test)!=null&&s.test(t))return l;let r=e.knownTags[n];return r&&!r.collection?(e.tags.push(Object.assign({},r,{default:!1,test:void 0})),r):(o(i,"TAG_RESOLVE_FAILED",`Unresolved tag: ${n}`,n!=="tag:yaml.org,2002:str"),e[Ai])}function KF({atKey:e,directives:t,schema:n},i,o,a){var s;let r=n.tags.find(l=>{var c;return(l.default===!0||e&&l.default==="key")&&((c=l.test)==null?void 0:c.test(i))})||n[Ai];if(n.compat){let l=(s=n.compat.find(c=>{var u;return c.default&&((u=c.test)==null?void 0:u.test(i))}))!=null?s:n[Ai];if(r.tag!==l.tag){let c=t.tagString(r.tag),u=t.tagString(l.tag),f=`Value may be parsed as either ${c} or ${u}`;a(o,"TAG_RESOLVE_FAILED",f,!0)}}return r}function Ax(e,t,n){if(t){n!=null||(n=t.length);for(let i=n-1;i>=0;--i){let o=t[i];switch(o.type){case"space":case"comment":case"newline":e-=o.source.length;continue}for(o=t[++i];(o==null?void 0:o.type)==="space";)e+=o.source.length,o=t[++i];break}}return e}var QF={composeNode:Pv,composeEmptyNode:_m};function Pv(e,t,n,i){let o=e.atKey,{spaceBefore:a,comment:r,anchor:s,tag:l}=n,c,u=!0;switch(t.type){case"alias":c=XF(e,t,i),(s||l)&&i(t,"ALIAS_PROPS","An alias node must not specify any properties");break;case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"block-scalar":c=Iv(e,t,l,i),s&&(c.anchor=s.source.substring(1));break;case"block-map":case"block-seq":case"flow-collection":c=xx(QF,e,t,n,i),s&&(c.anchor=s.source.substring(1));break;default:{let f=t.type==="error"?t.message:`Unsupported token (type: ${t.type})`;i(t,"UNEXPECTED_TOKEN",f),c=_m(e,t.offset,void 0,null,n,i),u=!1}}if(s&&c.anchor===""&&i(s,"BAD_ALIAS","Anchor cannot be an empty string"),o&&e.options.stringKeys&&(!ze(c)||typeof c.value!="string"||c.tag&&c.tag!=="tag:yaml.org,2002:str")){let f="With stringKeys, all keys must be strings";i(l!=null?l:t,"NON_STRING_KEY",f)}return a&&(c.spaceBefore=!0),r&&(t.type==="scalar"&&t.source===""?c.comment=r:c.commentBefore=r),e.options.keepSourceTokens&&u&&(c.srcToken=t),c}function _m(e,t,n,i,{spaceBefore:o,comment:a,anchor:r,tag:s,end:l},c){let u={type:"scalar",offset:Ax(t,n,i),indent:-1,source:""},f=Iv(e,u,s,c);return r&&(f.anchor=r.source.substring(1),f.anchor===""&&c(r,"BAD_ALIAS","Anchor cannot be an empty string")),o&&(f.spaceBefore=!0),a&&(f.comment=a,f.range[2]=l),f}function XF({options:e},{offset:t,source:n,end:i},o){let a=new $o(n.substring(1));a.source===""&&o(t,"BAD_ALIAS","Alias cannot be an empty string"),a.source.endsWith(":")&&o(t+n.length-1,"BAD_ALIAS","Alias ending in : is ambiguous",!0);let r=t+n.length,s=qo(i,r,e.strict,o);return a.range=[t,r,s.offset],s.comment&&(a.comment=s.comment),a}function Dx(e,t,{offset:n,start:i,value:o,end:a},r){let s=Object.assign({_directives:t},e),l=new Ji(void 0,s),c={atKey:!1,atRoot:!0,directives:l.directives,options:l.options,schema:l.schema},u=Yo(i,{indicator:"doc-start",next:o!=null?o:a==null?void 0:a[0],offset:n,onError:r,parentIndent:0,startOnNewline:!0});u.found&&(l.directives.docStart=!0,o&&(o.type==="block-map"||o.type==="block-seq")&&!u.hasNewline&&r(u.end,"MISSING_CHAR","Block collection cannot start on same line with directives-end marker")),l.contents=o?Pv(c,o,u,r):_m(c,u.end,i,null,u,r);let f=l.contents.range[2],p=qo(a,f,!1,r);return p.comment&&(l.comment=p.comment),l.range=[n,f,p.offset],l}function vd(e){if(typeof e=="number")return[e,e+1];if(Array.isArray(e))return e.length===2?e:[e[0],e[1]];let{offset:t,source:n}=e;return[t,t+(typeof n=="string"?n.length:1)]}function Lx(e){var o;let t="",n=!1,i=!1;for(let a=0;a<e.length;++a){let r=e[a];switch(r[0]){case"#":t+=(t===""?"":i?`

`:`
`)+(r.substring(1)||" "),n=!0,i=!1;break;case"%":((o=e[a+1])==null?void 0:o[0])!=="#"&&(a+=1),n=!1;break;default:n||(i=!0),n=!1}}return{comment:t,afterEmptyLine:i}}var Fs=class{constructor(t={}){this.doc=null,this.atDirectives=!1,this.prelude=[],this.errors=[],this.warnings=[],this.onError=(n,i,o,a)=>{let r=vd(n);a?this.warnings.push(new Tc(r,i,o)):this.errors.push(new Li(r,i,o))},this.directives=new dn({version:t.version||"1.2"}),this.options=t}decorate(t,n){let{comment:i,afterEmptyLine:o}=Lx(this.prelude);if(i){let a=t.contents;if(n)t.comment=t.comment?`${t.comment}
${i}`:i;else if(o||t.directives.docStart||!a)t.commentBefore=i;else if(at(a)&&!a.flow&&a.items.length>0){let r=a.items[0];qe(r)&&(r=r.key);let s=r.commentBefore;r.commentBefore=s?`${i}
${s}`:i}else{let r=a.commentBefore;a.commentBefore=r?`${i}
${r}`:i}}n?(Array.prototype.push.apply(t.errors,this.errors),Array.prototype.push.apply(t.warnings,this.warnings)):(t.errors=this.errors,t.warnings=this.warnings),this.prelude=[],this.errors=[],this.warnings=[]}streamInfo(){return{comment:Lx(this.prelude).comment,directives:this.directives,errors:this.errors,warnings:this.warnings}}*compose(t,n=!1,i=-1){for(let o of t)yield*this.next(o);yield*this.end(n,i)}*next(t){switch(t.type){case"directive":this.directives.add(t.source,(n,i,o)=>{let a=vd(t);a[0]+=n,this.onError(a,"BAD_DIRECTIVE",i,o)}),this.prelude.push(t.source),this.atDirectives=!0;break;case"document":{let n=Dx(this.options,this.directives,t,this.onError);this.atDirectives&&!n.directives.docStart&&this.onError(t,"MISSING_CHAR","Missing directives-end/doc-start indicator line"),this.decorate(n,!1),this.doc&&(yield this.doc),this.doc=n,this.atDirectives=!1;break}case"byte-order-mark":case"space":break;case"comment":case"newline":this.prelude.push(t.source);break;case"error":{let n=t.source?`${t.message}: ${JSON.stringify(t.source)}`:t.message,i=new Li(vd(t),"UNEXPECTED_TOKEN",n);this.atDirectives||!this.doc?this.errors.push(i):this.doc.errors.push(i);break}case"doc-end":{if(!this.doc){let i="Unexpected doc-end without preceding document";this.errors.push(new Li(vd(t),"UNEXPECTED_TOKEN",i));break}this.doc.directives.docEnd=!0;let n=qo(t.end,t.offset+t.source.length,this.doc.options.strict,this.onError);if(this.decorate(this.doc,!0),n.comment){let i=this.doc.comment;this.doc.comment=i?`${i}
${n.comment}`:n.comment}this.doc.range[2]=n.offset;break}default:this.errors.push(new Li(vd(t),"UNEXPECTED_TOKEN",`Unsupported token ${t.type}`))}}*end(t=!1,n=-1){if(this.doc)this.decorate(this.doc,!0),yield this.doc,this.doc=null;else if(t){let i=Object.assign({_directives:this.directives},this.options),o=new Ji(void 0,i);this.atDirectives&&this.onError(n,"MISSING_CHAR","Missing directives-end indicator line"),o.range=[0,n,n],this.decorate(o,!1),yield o}}};var Uv={};Ah(Uv,{BOM:()=>wd,DOCUMENT:()=>Td,FLOW_END:()=>Sd,SCALAR:()=>Sc,createScalarToken:()=>Ox,isCollection:()=>ZF,isScalar:()=>e2,prettyToken:()=>t2,resolveAsScalar:()=>Rx,setScalarValue:()=>Fx,stringify:()=>Bx,tokenType:()=>Vv,visit:()=>Br});function Rx(e,t=!0,n){if(e){let i=(o,a,r)=>{let s=typeof o=="number"?o:Array.isArray(o)?o[0]:o.offset;if(n)n(s,a,r);else throw new Li([s,s+1],a,r)};switch(e.type){case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return Fm(e,t,i);case"block-scalar":return Om({options:{strict:t}},e,i)}}return null}function Ox(e,t){var c;let{implicitKey:n=!1,indent:i,inFlow:o=!1,offset:a=-1,type:r="PLAIN"}=t,s=Fa({type:r,value:e},{implicitKey:n,indent:i>0?" ".repeat(i):"",inFlow:o,options:{blockQuote:!0,lineWidth:-1}}),l=(c=t.end)!=null?c:[{type:"newline",offset:-1,indent:i,source:`
`}];switch(s[0]){case"|":case">":{let u=s.indexOf(`
`),f=s.substring(0,u),p=s.substring(u+1)+`
`,d=[{type:"block-scalar-header",offset:a,indent:i,source:f}];return _x(d,l)||d.push({type:"newline",offset:-1,indent:i,source:`
`}),{type:"block-scalar",offset:a,indent:i,props:d,source:p}}case'"':return{type:"double-quoted-scalar",offset:a,indent:i,source:s,end:l};case"'":return{type:"single-quoted-scalar",offset:a,indent:i,source:s,end:l};default:return{type:"scalar",offset:a,indent:i,source:s,end:l}}}function Fx(e,t,n={}){let{afterKey:i=!1,implicitKey:o=!1,inFlow:a=!1,type:r}=n,s="indent"in e?e.indent:null;if(i&&typeof s=="number"&&(s+=2),!r)switch(e.type){case"single-quoted-scalar":r="QUOTE_SINGLE";break;case"double-quoted-scalar":r="QUOTE_DOUBLE";break;case"block-scalar":{let c=e.props[0];if(c.type!=="block-scalar-header")throw new Error("Invalid block scalar header");r=c.source[0]===">"?"BLOCK_FOLDED":"BLOCK_LITERAL";break}default:r="PLAIN"}let l=Fa({type:r,value:t},{implicitKey:o||s===null,indent:s!==null&&s>0?" ".repeat(s):"",inFlow:a,options:{blockQuote:!0,lineWidth:-1}});switch(l[0]){case"|":case">":JF(e,l);break;case'"':zv(e,l,"double-quoted-scalar");break;case"'":zv(e,l,"single-quoted-scalar");break;default:zv(e,l,"scalar")}}function JF(e,t){let n=t.indexOf(`
`),i=t.substring(0,n),o=t.substring(n+1)+`
`;if(e.type==="block-scalar"){let a=e.props[0];if(a.type!=="block-scalar-header")throw new Error("Invalid block scalar header");a.source=i,e.source=o}else{let{offset:a}=e,r="indent"in e?e.indent:-1,s=[{type:"block-scalar-header",offset:a,indent:r,source:i}];_x(s,"end"in e?e.end:void 0)||s.push({type:"newline",offset:-1,indent:r,source:`
`});for(let l of Object.keys(e))l!=="type"&&l!=="offset"&&delete e[l];Object.assign(e,{type:"block-scalar",indent:r,props:s,source:o})}}function _x(e,t){if(t)for(let n of t)switch(n.type){case"space":case"comment":e.push(n);break;case"newline":return e.push(n),!0}return!1}function zv(e,t,n){switch(e.type){case"scalar":case"double-quoted-scalar":case"single-quoted-scalar":e.type=n,e.source=t;break;case"block-scalar":{let i=e.props.slice(1),o=t.length;e.props[0].type==="block-scalar-header"&&(o-=e.props[0].source.length);for(let a of i)a.offset+=o;delete e.props,Object.assign(e,{type:n,source:t,end:i});break}case"block-map":case"block-seq":{let o={type:"newline",offset:e.offset+t.length,indent:e.indent,source:`
`};delete e.items,Object.assign(e,{type:n,source:t,end:[o]});break}default:{let i="indent"in e?e.indent:-1,o="end"in e&&Array.isArray(e.end)?e.end.filter(a=>a.type==="space"||a.type==="comment"||a.type==="newline"):[];for(let a of Object.keys(e))a!=="type"&&a!=="offset"&&delete e[a];Object.assign(e,{type:n,indent:i,source:t,end:o})}}}var Bx=e=>"type"in e?Im(e):Bm(e);function Im(e){switch(e.type){case"block-scalar":{let t="";for(let n of e.props)t+=Im(n);return t+e.source}case"block-map":case"block-seq":{let t="";for(let n of e.items)t+=Bm(n);return t}case"flow-collection":{let t=e.start.source;for(let n of e.items)t+=Bm(n);for(let n of e.end)t+=n.source;return t}case"document":{let t=Bm(e);if(e.end)for(let n of e.end)t+=n.source;return t}default:{let t=e.source;if("end"in e&&e.end)for(let n of e.end)t+=n.source;return t}}}function Bm({start:e,key:t,sep:n,value:i}){let o="";for(let a of e)o+=a.source;if(t&&(o+=Im(t)),n)for(let a of n)o+=a.source;return i&&(o+=Im(i)),o}var Hv=Symbol("break visit"),WF=Symbol("skip children"),Ix=Symbol("remove item");function Br(e,t){"type"in e&&e.type==="document"&&(e={start:e.start,value:e.value}),Px(Object.freeze([]),e,t)}Br.BREAK=Hv;Br.SKIP=WF;Br.REMOVE=Ix;Br.itemAtPath=(e,t)=>{let n=e;for(let[i,o]of t){let a=n==null?void 0:n[i];if(a&&"items"in a)n=a.items[o];else return}return n};Br.parentCollection=(e,t)=>{let n=Br.itemAtPath(e,t.slice(0,-1)),i=t[t.length-1][0],o=n==null?void 0:n[i];if(o&&"items"in o)return o;throw new Error("Parent collection not found")};function Px(e,t,n){let i=n(t,e);if(typeof i=="symbol")return i;for(let o of["key","value"]){let a=t[o];if(a&&"items"in a){for(let r=0;r<a.items.length;++r){let s=Px(Object.freeze(e.concat([[o,r]])),a.items[r],n);if(typeof s=="number")r=s-1;else{if(s===Hv)return Hv;s===Ix&&(a.items.splice(r,1),r-=1)}}typeof i=="function"&&o==="key"&&(i=i(t,e))}}return typeof i=="function"?i(t,e):i}var wd="\uFEFF",Td="",Sd="",Sc="",ZF=e=>!!e&&"items"in e,e2=e=>!!e&&(e.type==="scalar"||e.type==="single-quoted-scalar"||e.type==="double-quoted-scalar"||e.type==="block-scalar");function t2(e){switch(e){case wd:return"<BOM>";case Td:return"<DOC>";case Sd:return"<FLOW_END>";case Sc:return"<SCALAR>";default:return JSON.stringify(e)}}function Vv(e){switch(e){case wd:return"byte-order-mark";case Td:return"doc-mode";case Sd:return"flow-error-end";case Sc:return"scalar";case"---":return"doc-start";case"...":return"doc-end";case"":case`
`:case`\r
`:return"newline";case"-":return"seq-item-ind";case"?":return"explicit-key-ind";case":":return"map-value-ind";case"{":return"flow-map-start";case"}":return"flow-map-end";case"[":return"flow-seq-start";case"]":return"flow-seq-end";case",":return"comma"}switch(e[0]){case" ":case"	":return"space";case"#":return"comment";case"%":return"directive-line";case"*":return"alias";case"&":return"anchor";case"!":return"tag";case"'":return"single-quoted-scalar";case'"':return"double-quoted-scalar";case"|":case">":return"block-scalar-header"}return null}function vo(e){switch(e){case void 0:case" ":case`
`:case"\r":case"	":return!0;default:return!1}}var zx=new Set("0123456789ABCDEFabcdef"),n2=new Set("0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-#;/?:@&=+$_.!~*'()"),Pm=new Set(",[]{}"),i2=new Set(` ,[]{}
\r	`),$v=e=>!e||i2.has(e),kc=class{constructor(){this.atEnd=!1,this.blockScalarIndent=-1,this.blockScalarKeep=!1,this.buffer="",this.flowKey=!1,this.flowLevel=0,this.indentNext=0,this.indentValue=0,this.lineEndPos=null,this.next=null,this.pos=0}*lex(t,n=!1){var o;if(t){if(typeof t!="string")throw TypeError("source is not a string");this.buffer=this.buffer?this.buffer+t:t,this.lineEndPos=null}this.atEnd=!n;let i=(o=this.next)!=null?o:"stream";for(;i&&(n||this.hasChars(1));)i=yield*this.parseNext(i)}atLineEnd(){let t=this.pos,n=this.buffer[t];for(;n===" "||n==="	";)n=this.buffer[++t];return!n||n==="#"||n===`
`?!0:n==="\r"?this.buffer[t+1]===`
`:!1}charAt(t){return this.buffer[this.pos+t]}continueScalar(t){let n=this.buffer[t];if(this.indentNext>0){let i=0;for(;n===" ";)n=this.buffer[++i+t];if(n==="\r"){let o=this.buffer[i+t+1];if(o===`
`||!o&&!this.atEnd)return t+i+1}return n===`
`||i>=this.indentNext||!n&&!this.atEnd?t+i:-1}if(n==="-"||n==="."){let i=this.buffer.substr(t,3);if((i==="---"||i==="...")&&vo(this.buffer[t+3]))return-1}return t}getLine(){let t=this.lineEndPos;return(typeof t!="number"||t!==-1&&t<this.pos)&&(t=this.buffer.indexOf(`
`,this.pos),this.lineEndPos=t),t===-1?this.atEnd?this.buffer.substring(this.pos):null:(this.buffer[t-1]==="\r"&&(t-=1),this.buffer.substring(this.pos,t))}hasChars(t){return this.pos+t<=this.buffer.length}setNext(t){return this.buffer=this.buffer.substring(this.pos),this.pos=0,this.lineEndPos=null,this.next=t,null}peek(t){return this.buffer.substr(this.pos,t)}*parseNext(t){switch(t){case"stream":return yield*this.parseStream();case"line-start":return yield*this.parseLineStart();case"block-start":return yield*this.parseBlockStart();case"doc":return yield*this.parseDocument();case"flow":return yield*this.parseFlowCollection();case"quoted-scalar":return yield*this.parseQuotedScalar();case"block-scalar":return yield*this.parseBlockScalar();case"plain-scalar":return yield*this.parsePlainScalar()}}*parseStream(){let t=this.getLine();if(t===null)return this.setNext("stream");if(t[0]===wd&&(yield*this.pushCount(1),t=t.substring(1)),t[0]==="%"){let n=t.length,i=t.indexOf("#");for(;i!==-1;){let a=t[i-1];if(a===" "||a==="	"){n=i-1;break}else i=t.indexOf("#",i+1)}for(;;){let a=t[n-1];if(a===" "||a==="	")n-=1;else break}let o=(yield*this.pushCount(n))+(yield*this.pushSpaces(!0));return yield*this.pushCount(t.length-o),this.pushNewline(),"stream"}if(this.atLineEnd()){let n=yield*this.pushSpaces(!0);return yield*this.pushCount(t.length-n),yield*this.pushNewline(),"stream"}return yield Td,yield*this.parseLineStart()}*parseLineStart(){let t=this.charAt(0);if(!t&&!this.atEnd)return this.setNext("line-start");if(t==="-"||t==="."){if(!this.atEnd&&!this.hasChars(4))return this.setNext("line-start");let n=this.peek(3);if((n==="---"||n==="...")&&vo(this.charAt(3)))return yield*this.pushCount(3),this.indentValue=0,this.indentNext=0,n==="---"?"doc":"stream"}return this.indentValue=yield*this.pushSpaces(!1),this.indentNext>this.indentValue&&!vo(this.charAt(1))&&(this.indentNext=this.indentValue),yield*this.parseBlockStart()}*parseBlockStart(){let[t,n]=this.peek(2);if(!n&&!this.atEnd)return this.setNext("block-start");if((t==="-"||t==="?"||t===":")&&vo(n)){let i=(yield*this.pushCount(1))+(yield*this.pushSpaces(!0));return this.indentNext=this.indentValue+1,this.indentValue+=i,yield*this.parseBlockStart()}return"doc"}*parseDocument(){yield*this.pushSpaces(!0);let t=this.getLine();if(t===null)return this.setNext("doc");let n=yield*this.pushIndicators();switch(t[n]){case"#":yield*this.pushCount(t.length-n);case void 0:return yield*this.pushNewline(),yield*this.parseLineStart();case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel=1,"flow";case"}":case"]":return yield*this.pushCount(1),"doc";case"*":return yield*this.pushUntil($v),"doc";case'"':case"'":return yield*this.parseQuotedScalar();case"|":case">":return n+=yield*this.parseBlockScalarHeader(),n+=yield*this.pushSpaces(!0),yield*this.pushCount(t.length-n),yield*this.pushNewline(),yield*this.parseBlockScalar();default:return yield*this.parsePlainScalar()}}*parseFlowCollection(){let t,n,i=-1;do t=yield*this.pushNewline(),t>0?(n=yield*this.pushSpaces(!1),this.indentValue=i=n):n=0,n+=yield*this.pushSpaces(!0);while(t+n>0);let o=this.getLine();if(o===null)return this.setNext("flow");if((i!==-1&&i<this.indentNext&&o[0]!=="#"||i===0&&(o.startsWith("---")||o.startsWith("..."))&&vo(o[3]))&&!(i===this.indentNext-1&&this.flowLevel===1&&(o[0]==="]"||o[0]==="}")))return this.flowLevel=0,yield Sd,yield*this.parseLineStart();let a=0;for(;o[a]===",";)a+=yield*this.pushCount(1),a+=yield*this.pushSpaces(!0),this.flowKey=!1;switch(a+=yield*this.pushIndicators(),o[a]){case void 0:return"flow";case"#":return yield*this.pushCount(o.length-a),"flow";case"{":case"[":return yield*this.pushCount(1),this.flowKey=!1,this.flowLevel+=1,"flow";case"}":case"]":return yield*this.pushCount(1),this.flowKey=!0,this.flowLevel-=1,this.flowLevel?"flow":"doc";case"*":return yield*this.pushUntil($v),"flow";case'"':case"'":return this.flowKey=!0,yield*this.parseQuotedScalar();case":":{let r=this.charAt(1);if(this.flowKey||vo(r)||r===",")return this.flowKey=!1,yield*this.pushCount(1),yield*this.pushSpaces(!0),"flow"}default:return this.flowKey=!1,yield*this.parsePlainScalar()}}*parseQuotedScalar(){let t=this.charAt(0),n=this.buffer.indexOf(t,this.pos+1);if(t==="'")for(;n!==-1&&this.buffer[n+1]==="'";)n=this.buffer.indexOf("'",n+2);else for(;n!==-1;){let a=0;for(;this.buffer[n-1-a]==="\\";)a+=1;if(a%2===0)break;n=this.buffer.indexOf('"',n+1)}let i=this.buffer.substring(0,n),o=i.indexOf(`
`,this.pos);if(o!==-1){for(;o!==-1;){let a=this.continueScalar(o+1);if(a===-1)break;o=i.indexOf(`
`,a)}o!==-1&&(n=o-(i[o-1]==="\r"?2:1))}if(n===-1){if(!this.atEnd)return this.setNext("quoted-scalar");n=this.buffer.length}return yield*this.pushToIndex(n+1,!1),this.flowLevel?"flow":"doc"}*parseBlockScalarHeader(){this.blockScalarIndent=-1,this.blockScalarKeep=!1;let t=this.pos;for(;;){let n=this.buffer[++t];if(n==="+")this.blockScalarKeep=!0;else if(n>"0"&&n<="9")this.blockScalarIndent=Number(n)-1;else if(n!=="-")break}return yield*this.pushUntil(n=>vo(n)||n==="#")}*parseBlockScalar(){let t=this.pos-1,n=0,i;e:for(let a=this.pos;i=this.buffer[a];++a)switch(i){case" ":n+=1;break;case`
`:t=a,n=0;break;case"\r":{let r=this.buffer[a+1];if(!r&&!this.atEnd)return this.setNext("block-scalar");if(r===`
`)break}default:break e}if(!i&&!this.atEnd)return this.setNext("block-scalar");if(n>=this.indentNext){this.blockScalarIndent===-1?this.indentNext=n:this.indentNext=this.blockScalarIndent+(this.indentNext===0?1:this.indentNext);do{let a=this.continueScalar(t+1);if(a===-1)break;t=this.buffer.indexOf(`
`,a)}while(t!==-1);if(t===-1){if(!this.atEnd)return this.setNext("block-scalar");t=this.buffer.length}}let o=t+1;for(i=this.buffer[o];i===" ";)i=this.buffer[++o];if(i==="	"){for(;i==="	"||i===" "||i==="\r"||i===`
`;)i=this.buffer[++o];t=o-1}else if(!this.blockScalarKeep)do{let a=t-1,r=this.buffer[a];r==="\r"&&(r=this.buffer[--a]);let s=a;for(;r===" ";)r=this.buffer[--a];if(r===`
`&&a>=this.pos&&a+1+n>s)t=a;else break}while(!0);return yield Sc,yield*this.pushToIndex(t+1,!0),yield*this.parseLineStart()}*parsePlainScalar(){let t=this.flowLevel>0,n=this.pos-1,i=this.pos-1,o;for(;o=this.buffer[++i];)if(o===":"){let a=this.buffer[i+1];if(vo(a)||t&&Pm.has(a))break;n=i}else if(vo(o)){let a=this.buffer[i+1];if(o==="\r"&&(a===`
`?(i+=1,o=`
`,a=this.buffer[i+1]):n=i),a==="#"||t&&Pm.has(a))break;if(o===`
`){let r=this.continueScalar(i+1);if(r===-1)break;i=Math.max(i,r-2)}}else{if(t&&Pm.has(o))break;n=i}return!o&&!this.atEnd?this.setNext("plain-scalar"):(yield Sc,yield*this.pushToIndex(n+1,!0),t?"flow":"doc")}*pushCount(t){return t>0?(yield this.buffer.substr(this.pos,t),this.pos+=t,t):0}*pushToIndex(t,n){let i=this.buffer.slice(this.pos,t);return i?(yield i,this.pos+=i.length,i.length):(n&&(yield""),0)}*pushIndicators(){switch(this.charAt(0)){case"!":return(yield*this.pushTag())+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"&":return(yield*this.pushUntil($v))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators());case"-":case"?":case":":{let t=this.flowLevel>0,n=this.charAt(1);if(vo(n)||t&&Pm.has(n))return t?this.flowKey&&(this.flowKey=!1):this.indentNext=this.indentValue+1,(yield*this.pushCount(1))+(yield*this.pushSpaces(!0))+(yield*this.pushIndicators())}}return 0}*pushTag(){if(this.charAt(1)==="<"){let t=this.pos+2,n=this.buffer[t];for(;!vo(n)&&n!==">";)n=this.buffer[++t];return yield*this.pushToIndex(n===">"?t+1:t,!1)}else{let t=this.pos+1,n=this.buffer[t];for(;n;)if(n2.has(n))n=this.buffer[++t];else if(n==="%"&&zx.has(this.buffer[t+1])&&zx.has(this.buffer[t+2]))n=this.buffer[t+=3];else break;return yield*this.pushToIndex(t,!1)}}*pushNewline(){let t=this.buffer[this.pos];return t===`
`?yield*this.pushCount(1):t==="\r"&&this.charAt(1)===`
`?yield*this.pushCount(2):0}*pushSpaces(t){let n=this.pos-1,i;do i=this.buffer[++n];while(i===" "||t&&i==="	");let o=n-this.pos;return o>0&&(yield this.buffer.substr(this.pos,o),this.pos=n),o}*pushUntil(t){let n=this.pos,i=this.buffer[n];for(;!t(i);)i=this.buffer[++n];return yield*this.pushToIndex(n,!1)}};var Ec=class{constructor(){this.lineStarts=[],this.addNewLine=t=>this.lineStarts.push(t),this.linePos=t=>{let n=0,i=this.lineStarts.length;for(;n<i;){let a=n+i>>1;this.lineStarts[a]<t?n=a+1:i=a}if(this.lineStarts[n]===t)return{line:n+1,col:1};if(n===0)return{line:0,col:t};let o=this.lineStarts[n-1];return{line:n,col:t-o+1}}}};function Ir(e,t){for(let n=0;n<e.length;++n)if(e[n].type===t)return!0;return!1}function Hx(e){for(let t=0;t<e.length;++t)switch(e[t].type){case"space":case"comment":case"newline":break;default:return t}return-1}function Ux(e){switch(e==null?void 0:e.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":case"flow-collection":return!0;default:return!1}}function zm(e){var t;switch(e.type){case"document":return e.start;case"block-map":{let n=e.items[e.items.length-1];return(t=n.sep)!=null?t:n.start}case"block-seq":return e.items[e.items.length-1].start;default:return[]}}function Cc(e){var n;if(e.length===0)return[];let t=e.length;e:for(;--t>=0;)switch(e[t].type){case"doc-start":case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":case"newline":break e}for(;((n=e[++t])==null?void 0:n.type)==="space";);return e.splice(t,e.length)}function Vx(e){if(e.start.type==="flow-seq-start")for(let t of e.items)t.sep&&!t.value&&!Ir(t.start,"explicit-key-ind")&&!Ir(t.sep,"map-value-ind")&&(t.key&&(t.value=t.key),delete t.key,Ux(t.value)?t.value.end?Array.prototype.push.apply(t.value.end,t.sep):t.value.end=t.sep:Array.prototype.push.apply(t.start,t.sep),delete t.sep)}var _s=class{constructor(t){this.atNewLine=!0,this.atScalar=!1,this.indent=0,this.offset=0,this.onKeyLine=!1,this.stack=[],this.source="",this.type="",this.lexer=new kc,this.onNewLine=t}*parse(t,n=!1){this.onNewLine&&this.offset===0&&this.onNewLine(0);for(let i of this.lexer.lex(t,n))yield*this.next(i);n||(yield*this.end())}*next(t){if(this.source=t,this.atScalar){this.atScalar=!1,yield*this.step(),this.offset+=t.length;return}let n=Vv(t);if(n)if(n==="scalar")this.atNewLine=!1,this.atScalar=!0,this.type="scalar";else{switch(this.type=n,yield*this.step(),n){case"newline":this.atNewLine=!0,this.indent=0,this.onNewLine&&this.onNewLine(this.offset+t.length);break;case"space":this.atNewLine&&t[0]===" "&&(this.indent+=t.length);break;case"explicit-key-ind":case"map-value-ind":case"seq-item-ind":this.atNewLine&&(this.indent+=t.length);break;case"doc-mode":case"flow-error-end":return;default:this.atNewLine=!1}this.offset+=t.length}else{let i=`Not a YAML token: ${t}`;yield*this.pop({type:"error",offset:this.offset,message:i,source:t}),this.offset+=t.length}}*end(){for(;this.stack.length>0;)yield*this.pop()}get sourceToken(){return{type:this.type,offset:this.offset,indent:this.indent,source:this.source}}*step(){let t=this.peek(1);if(this.type==="doc-end"&&(!t||t.type!=="doc-end")){for(;this.stack.length>0;)yield*this.pop();this.stack.push({type:"doc-end",offset:this.offset,source:this.source});return}if(!t)return yield*this.stream();switch(t.type){case"document":return yield*this.document(t);case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return yield*this.scalar(t);case"block-scalar":return yield*this.blockScalar(t);case"block-map":return yield*this.blockMap(t);case"block-seq":return yield*this.blockSequence(t);case"flow-collection":return yield*this.flowCollection(t);case"doc-end":return yield*this.documentEnd(t)}yield*this.pop()}peek(t){return this.stack[this.stack.length-t]}*pop(t){let n=t!=null?t:this.stack.pop();if(n)if(this.stack.length===0)yield n;else{let i=this.peek(1);switch(n.type==="block-scalar"?n.indent="indent"in i?i.indent:0:n.type==="flow-collection"&&i.type==="document"&&(n.indent=0),n.type==="flow-collection"&&Vx(n),i.type){case"document":i.value=n;break;case"block-scalar":i.props.push(n);break;case"block-map":{let o=i.items[i.items.length-1];if(o.value){i.items.push({start:[],key:n,sep:[]}),this.onKeyLine=!0;return}else if(o.sep)o.value=n;else{Object.assign(o,{key:n,sep:[]}),this.onKeyLine=!o.explicitKey;return}break}case"block-seq":{let o=i.items[i.items.length-1];o.value?i.items.push({start:[],value:n}):o.value=n;break}case"flow-collection":{let o=i.items[i.items.length-1];!o||o.value?i.items.push({start:[],key:n,sep:[]}):o.sep?o.value=n:Object.assign(o,{key:n,sep:[]});return}default:yield*this.pop(),yield*this.pop(n)}if((i.type==="document"||i.type==="block-map"||i.type==="block-seq")&&(n.type==="block-map"||n.type==="block-seq")){let o=n.items[n.items.length-1];o&&!o.sep&&!o.value&&o.start.length>0&&Hx(o.start)===-1&&(n.indent===0||o.start.every(a=>a.type!=="comment"||a.indent<n.indent))&&(i.type==="document"?i.end=o.start:i.items.push({start:o.start}),n.items.splice(-1,1))}}else{let i="Tried to pop an empty stack";yield{type:"error",offset:this.offset,source:"",message:i}}}*stream(){switch(this.type){case"directive-line":yield{type:"directive",offset:this.offset,source:this.source};return;case"byte-order-mark":case"space":case"comment":case"newline":yield this.sourceToken;return;case"doc-mode":case"doc-start":{let t={type:"document",offset:this.offset,start:[]};this.type==="doc-start"&&t.start.push(this.sourceToken),this.stack.push(t);return}}yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML stream`,source:this.source}}*document(t){if(t.value)return yield*this.lineEnd(t);switch(this.type){case"doc-start":{Hx(t.start)!==-1?(yield*this.pop(),yield*this.step()):t.start.push(this.sourceToken);return}case"anchor":case"tag":case"space":case"comment":case"newline":t.start.push(this.sourceToken);return}let n=this.startBlockValue(t);n?this.stack.push(n):yield{type:"error",offset:this.offset,message:`Unexpected ${this.type} token in YAML document`,source:this.source}}*scalar(t){if(this.type==="map-value-ind"){let n=zm(this.peek(2)),i=Cc(n),o;t.end?(o=t.end,o.push(this.sourceToken),delete t.end):o=[this.sourceToken];let a={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:i,key:t,sep:o}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=a}else yield*this.lineEnd(t)}*blockScalar(t){switch(this.type){case"space":case"comment":case"newline":t.props.push(this.sourceToken);return;case"scalar":if(t.source=this.source,this.atNewLine=!0,this.indent=0,this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}yield*this.pop();break;default:yield*this.pop(),yield*this.step()}}*blockMap(t){var i;let n=t.items[t.items.length-1];switch(this.type){case"newline":if(this.onKeyLine=!1,n.value){let o="end"in n.value?n.value.end:void 0,a=Array.isArray(o)?o[o.length-1]:void 0;(a==null?void 0:a.type)==="comment"?o==null||o.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else if(n.sep)n.sep.push(this.sourceToken);else{if(this.atIndentedComment(n.start,t.indent)){let o=t.items[t.items.length-2],a=(i=o==null?void 0:o.value)==null?void 0:i.end;if(Array.isArray(a)){Array.prototype.push.apply(a,n.start),a.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return}if(this.indent>=t.indent){let o=!this.onKeyLine&&this.indent===t.indent,a=o&&(n.sep||n.explicitKey)&&this.type!=="seq-item-ind",r=[];if(a&&n.sep&&!n.value){let s=[];for(let l=0;l<n.sep.length;++l){let c=n.sep[l];switch(c.type){case"newline":s.push(l);break;case"space":break;case"comment":c.indent>t.indent&&(s.length=0);break;default:s.length=0}}s.length>=2&&(r=n.sep.splice(s[1]))}switch(this.type){case"anchor":case"tag":a||n.value?(r.push(this.sourceToken),t.items.push({start:r}),this.onKeyLine=!0):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"explicit-key-ind":!n.sep&&!n.explicitKey?(n.start.push(this.sourceToken),n.explicitKey=!0):a||n.value?(r.push(this.sourceToken),t.items.push({start:r,explicitKey:!0})):this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken],explicitKey:!0}]}),this.onKeyLine=!0;return;case"map-value-ind":if(n.explicitKey)if(n.sep)if(n.value)t.items.push({start:[],key:null,sep:[this.sourceToken]});else if(Ir(n.sep,"map-value-ind"))this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:r,key:null,sep:[this.sourceToken]}]});else if(Ux(n.key)&&!Ir(n.sep,"newline")){let s=Cc(n.start),l=n.key,c=n.sep;c.push(this.sourceToken),delete n.key,delete n.sep,this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:l,sep:c}]})}else r.length>0?n.sep=n.sep.concat(r,this.sourceToken):n.sep.push(this.sourceToken);else if(Ir(n.start,"newline"))Object.assign(n,{key:null,sep:[this.sourceToken]});else{let s=Cc(n.start);this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:s,key:null,sep:[this.sourceToken]}]})}else n.sep?n.value||a?t.items.push({start:r,key:null,sep:[this.sourceToken]}):Ir(n.sep,"map-value-ind")?this.stack.push({type:"block-map",offset:this.offset,indent:this.indent,items:[{start:[],key:null,sep:[this.sourceToken]}]}):n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});this.onKeyLine=!0;return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let s=this.flowScalar(this.type);a||n.value?(t.items.push({start:r,key:s,sep:[]}),this.onKeyLine=!0):n.sep?this.stack.push(s):(Object.assign(n,{key:s,sep:[]}),this.onKeyLine=!0);return}default:{let s=this.startBlockValue(t);if(s){if(s.type==="block-seq"){if(!n.explicitKey&&n.sep&&!Ir(n.sep,"newline")){yield*this.pop({type:"error",offset:this.offset,message:"Unexpected block-seq-ind on same line with key",source:this.source});return}}else o&&t.items.push({start:r});this.stack.push(s);return}}}}yield*this.pop(),yield*this.step()}*blockSequence(t){var i;let n=t.items[t.items.length-1];switch(this.type){case"newline":if(n.value){let o="end"in n.value?n.value.end:void 0,a=Array.isArray(o)?o[o.length-1]:void 0;(a==null?void 0:a.type)==="comment"?o==null||o.push(this.sourceToken):t.items.push({start:[this.sourceToken]})}else n.start.push(this.sourceToken);return;case"space":case"comment":if(n.value)t.items.push({start:[this.sourceToken]});else{if(this.atIndentedComment(n.start,t.indent)){let o=t.items[t.items.length-2],a=(i=o==null?void 0:o.value)==null?void 0:i.end;if(Array.isArray(a)){Array.prototype.push.apply(a,n.start),a.push(this.sourceToken),t.items.pop();return}}n.start.push(this.sourceToken)}return;case"anchor":case"tag":if(n.value||this.indent<=t.indent)break;n.start.push(this.sourceToken);return;case"seq-item-ind":if(this.indent!==t.indent)break;n.value||Ir(n.start,"seq-item-ind")?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return}if(this.indent>t.indent){let o=this.startBlockValue(t);if(o){this.stack.push(o);return}}yield*this.pop(),yield*this.step()}*flowCollection(t){let n=t.items[t.items.length-1];if(this.type==="flow-error-end"){let i;do yield*this.pop(),i=this.peek(1);while(i&&i.type==="flow-collection")}else if(t.end.length===0){switch(this.type){case"comma":case"explicit-key-ind":!n||n.sep?t.items.push({start:[this.sourceToken]}):n.start.push(this.sourceToken);return;case"map-value-ind":!n||n.value?t.items.push({start:[],key:null,sep:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):Object.assign(n,{key:null,sep:[this.sourceToken]});return;case"space":case"comment":case"newline":case"anchor":case"tag":!n||n.value?t.items.push({start:[this.sourceToken]}):n.sep?n.sep.push(this.sourceToken):n.start.push(this.sourceToken);return;case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":{let o=this.flowScalar(this.type);!n||n.value?t.items.push({start:[],key:o,sep:[]}):n.sep?this.stack.push(o):Object.assign(n,{key:o,sep:[]});return}case"flow-map-end":case"flow-seq-end":t.end.push(this.sourceToken);return}let i=this.startBlockValue(t);i?this.stack.push(i):(yield*this.pop(),yield*this.step())}else{let i=this.peek(2);if(i.type==="block-map"&&(this.type==="map-value-ind"&&i.indent===t.indent||this.type==="newline"&&!i.items[i.items.length-1].sep))yield*this.pop(),yield*this.step();else if(this.type==="map-value-ind"&&i.type!=="flow-collection"){let o=zm(i),a=Cc(o);Vx(t);let r=t.end.splice(1,t.end.length);r.push(this.sourceToken);let s={type:"block-map",offset:t.offset,indent:t.indent,items:[{start:a,key:t,sep:r}]};this.onKeyLine=!0,this.stack[this.stack.length-1]=s}else yield*this.lineEnd(t)}}flowScalar(t){if(this.onNewLine){let n=this.source.indexOf(`
`)+1;for(;n!==0;)this.onNewLine(this.offset+n),n=this.source.indexOf(`
`,n)+1}return{type:t,offset:this.offset,indent:this.indent,source:this.source}}startBlockValue(t){switch(this.type){case"alias":case"scalar":case"single-quoted-scalar":case"double-quoted-scalar":return this.flowScalar(this.type);case"block-scalar-header":return{type:"block-scalar",offset:this.offset,indent:this.indent,props:[this.sourceToken],source:""};case"flow-map-start":case"flow-seq-start":return{type:"flow-collection",offset:this.offset,indent:this.indent,start:this.sourceToken,items:[],end:[]};case"seq-item-ind":return{type:"block-seq",offset:this.offset,indent:this.indent,items:[{start:[this.sourceToken]}]};case"explicit-key-ind":{this.onKeyLine=!0;let n=zm(t),i=Cc(n);return i.push(this.sourceToken),{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,explicitKey:!0}]}}case"map-value-ind":{this.onKeyLine=!0;let n=zm(t),i=Cc(n);return{type:"block-map",offset:this.offset,indent:this.indent,items:[{start:i,key:null,sep:[this.sourceToken]}]}}}return null}atIndentedComment(t,n){return this.type!=="comment"||this.indent<=n?!1:t.every(i=>i.type==="newline"||i.type==="space")}*documentEnd(t){this.type!=="doc-mode"&&(t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop()))}*lineEnd(t){switch(this.type){case"comma":case"doc-start":case"doc-end":case"flow-seq-end":case"flow-map-end":case"map-value-ind":yield*this.pop(),yield*this.step();break;case"newline":this.onKeyLine=!1;case"space":case"comment":default:t.end?t.end.push(this.sourceToken):t.end=[this.sourceToken],this.type==="newline"&&(yield*this.pop())}}};function $x(e){let t=e.prettyErrors!==!1;return{lineCounter:e.lineCounter||t&&new Ec||null,prettyErrors:t}}function jx(e,t={}){let{lineCounter:n,prettyErrors:i}=$x(t),o=new _s(n==null?void 0:n.addNewLine),a=new Fs(t),r=Array.from(a.compose(o.parse(e)));if(i&&n)for(let s of r)s.errors.forEach(yd(e,n)),s.warnings.forEach(yd(e,n));return r.length>0?r:Object.assign([],{empty:!0},a.streamInfo())}function jv(e,t={}){let{lineCounter:n,prettyErrors:i}=$x(t),o=new _s(n==null?void 0:n.addNewLine),a=new Fs(t),r=null;for(let s of a.compose(o.parse(e),!0,e.length))if(!r)r=s;else if(r.options.logLevel!=="silent"){r.errors.push(new Li(s.range.slice(0,2),"MULTIPLE_DOCS","Source contains multiple documents; please use YAML.parseAllDocuments()"));break}return i&&n&&(r.errors.forEach(yd(e,n)),r.warnings.forEach(yd(e,n))),r}function Yx(e,t,n){let i;typeof t=="function"?i=t:n===void 0&&t&&typeof t=="object"&&(n=t);let o=jv(e,n);if(!o)return null;if(o.warnings.forEach(a=>mm(o.options.logLevel,a)),o.errors.length>0){if(o.options.logLevel!=="silent")throw o.errors[0];o.errors=[]}return o.toJS(Object.assign({reviver:i},n))}function qx(e,t,n){var o;let i=null;if(typeof t=="function"||Array.isArray(t)?i=t:n===void 0&&t&&(n=t),typeof n=="string"&&(n=n.length),typeof n=="number"){let a=Math.round(n);n=a<1?void 0:a>8?{indent:8}:{indent:a}}if(e===void 0){let{keepUndefined:a}=(o=n!=null?n:t)!=null?o:{};if(!a)return}return Gi(e)&&!i?e.toString(n):new Ji(e,i,n).toString(n)}var Hm=Yv;var Vm=O(fe());function o2(e,t="YYYY-MM-DD"){try{let i={YYYY:"(\\d{4})",MM:"(\\d{2})",DD:"(\\d{2})",HH:"(\\d{2})",mm:"(\\d{2})"},a=(l=>l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(t);Object.keys(i).forEach(l=>{a=a.split(l).join(i[l])});let r=new RegExp("^"+a),s=e.match(r);if(s){let l=t.indexOf("YYYY")>=0?s[t.split(/(YYYY|MM|DD|HH|mm)/).indexOf("YYYY")+1]:void 0,c={},u=t.match(/(YYYY|MM|DD|HH|mm)/g)||[],f=1;for(let m of u)c[m]=s[f++]||"";let p=c.YYYY?parseInt(c.YYYY,10):NaN,d=c.MM?parseInt(c.MM,10):NaN,h=c.DD?parseInt(c.DD,10):NaN;if(!Number.isNaN(p)&&!Number.isNaN(d)&&!Number.isNaN(h)){let m=new Date(p,d-1,h);if(!Number.isNaN(m.getTime()))return m}}}catch(i){}let n=new Date(e);return Number.isNaN(n.getTime())?null:n}function a2(){let e=pe(),t=Zt("journal.root","Journal"),n=Zt("journal.entry","YYYY-MM-DD"),[i,o]=(0,Vm.useState)({current:null,prev:null,next:null});return(0,Vm.useEffect)(()=>{let a=!0,r=(c,u)=>{if(!u||u==="/")return!0;let f=u.replace(/^\/+|\/+$/g,"");return f?c===f||c.startsWith(`${f}/`):!0},s=()=>{let c=e.workspace.getActiveFile(),u=e.vault.getMarkdownFiles(),f=[];for(let y of u){if(!r(y.path,t))continue;let g=y.basename,v=o2(g,n);v&&f.push({file:y,date:v})}if(f.sort((y,g)=>y.date.getTime()-g.date.getTime()||y.file.path.localeCompare(g.file.path)),!c){a&&o({current:null,prev:null,next:null});return}if(!r(c.path,t)){a&&o({current:null,prev:null,next:null});return}let p=f.findIndex(y=>y.file.path===c.path),d=y=>({file:y,cache:e.metadataCache.getFileCache(y)||void 0}),h=p>=0?d(f[p].file):d(c),m=p>0?d(f[p-1].file):null,b=p>=0&&p<f.length-1?d(f[p+1].file):null;a&&o({current:h,prev:m,next:b})},l=[];return l.push(e.workspace.on("file-open",s)),l.push(e.vault.on("create",s)),l.push(e.vault.on("modify",s)),l.push(e.vault.on("delete",s)),l.push(e.vault.on("rename",s)),l.push(e.metadataCache.on("changed",s)),s(),()=>{var c,u,f,p,d,h;a=!1;try{for(let m of l)(u=(c=e.workspace)==null?void 0:c.offref)==null||u.call(c,m),(p=(f=e.vault)==null?void 0:f.offref)==null||p.call(f,m),(h=(d=e.metadataCache)==null?void 0:d.offref)==null||h.call(d,m)}catch(m){}}},[e,t,n]),i}var Gx=a2;function qv(e){return String(e).padStart(2,"0")}function r2(e,t){return e.split("HH").join(qv(t.getHours())).split("mm").join(qv(t.getMinutes())).split("MM").join(qv(t.getMinutes()))}async function kd(e,t,n){var T,k,E,C,L,F,N,_,A,x,S;let{modifyExisting:i=!0}=n!=null?n:{},a=(t.settings||{}).journal||{root:"Journal",entry:"YYYY-MM-DD"},r=a.root||"Journal",s=a.entry||"YYYY-MM-DD",l=r==="/"?"":r.replace(/^\/+|\/+$/g,"");try{l!==""&&(e.vault.getAbstractFileByPath(l)||await e.vault.createFolder(l))}catch(D){throw D}let c=new Date,u={YYYY:String(c.getFullYear()),MM:String(c.getMonth()+1).padStart(2,"0"),DD:String(c.getDate()).padStart(2,"0")},f=s;for(let[D,M]of Object.entries(u))f=f.split(D).join(M);f.endsWith(".md")||(f=`${f}.md`);let p=l?`${l}/${f}`:f,d=e.vault.getAbstractFileByPath(p),h=new Date,m=`${String(h.getFullYear())}-${String(h.getMonth()+1).padStart(2,"0")}-${String(h.getDate()).padStart(2,"0")}`,b=D=>`---
type: journal
date: ${D}
---
`;if(!d)d=await e.vault.create(p,b(m));else if(i)try{let D=await e.vault.read(d),M=/^\s*```mondo\njournal-nav\n```\r?\n?/,B=D.replace(M,""),G=/^\s*---\n([\s\S]*?)\n---\r?\n?/,$=B.match(G);if($){let te=$[1]||"",j=/(^|\n)\s*type\s*:\s*journal(\s|$)/i.test(te),me=/(^|\n)\s*date\s*:\s*\d{4}-\d{2}-\d{2}(\s|$)/i.test(te);if(!(j&&me&&te.indexOf(m)!==-1)){let W=B.replace(G,"").replace(/^\r?\n+/,""),ae=b(m)+W;await e.vault.modify(d,ae)}}else{let te=B.replace(/^\r?\n+/,""),j=b(m)+te;await e.vault.modify(d,j)}}catch(D){}let y=e.workspace.getLeavesOfType("markdown"),g=y.find(D=>{var M;try{let B=(M=D.view)==null?void 0:M.file;return(B==null?void 0:B.path)===p}catch(B){return!1}}),v=y.find(D=>{var M;try{let B=(M=D.view)==null?void 0:M.file;if(!B)return!1;let G=B.path,$=G.split("/").pop()||G;if(!(l===""?!0:G.startsWith(l+"/")))return!1;let me=(ae=>ae.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"))(s).replace(/YYYY/g,"\\d{4}").replace(/MM/g,"\\d{2}").replace(/DD/g,"\\d{2}");return new RegExp("^"+me+"(?:\\.md)?$").test($)}catch(B){return!1}}),w=(T=g!=null?g:v)!=null?T:e.workspace.getLeaf(!0);v&&!g?(await v.openFile(d),e.workspace.revealLeaf(v)):g?e.workspace.revealLeaf(g):await w.openFile(d);try{let D=w.view;if(D&&D.editor){let M=D.editor;if(i){let B=M.getValue()||"";if((k=a.useSections)!=null?k:!1){let $=a.note||"HH:MM",te=(a.section||"h3").toLowerCase(),j=B.split(/\n/),me=new Date,W=r2($,me),ae=Q=>{for(let R=Q+1;R<j.length;R++)if(/^#\s+/.test(j[R]))return R-1;return j.length-1};if(te==="inline"){let Q=`${W} - `,R=-1,I=-1,z=0;for(let U=0;U<j.length;U++){let X=(E=j[U])!=null?E:"";for(let Y=1;Y<=6;Y++)if(X.trim()===`${"#".repeat(Y)} ${W}`){R=U;break}if(R>=0)break;let H=X.indexOf(`${W} -`);H!==-1&&I===-1&&(I=U,z=H+`${W} -`.length+(X[H+`${W} -`.length]===" "?1:0))}if(R>=0){let X=ae(R),Y=((C=j[X])!=null?C:"").length;M.replaceRange(`
`,{line:X,ch:Y}),M.setCursor({line:X+1,ch:0}),M.focus()}else if(I>=0){let U=(L=j[I])!=null?L:"",X=`${W} -`,H=U.indexOf(X),Y=H>=0?H+X.length:0,re=U.slice(Y).replace(/\s+$/,"").length,ie=Y+re,ke=U.length>ie&&U[ie]===" ";re===0?(M.replaceRange(" ",{line:I,ch:Y}),M.setCursor({line:I,ch:Y+1})):ke?M.setCursor({line:I,ch:ie+1}):(M.replaceRange(" ",{line:I,ch:ie}),M.setCursor({line:I,ch:ie+1})),M.focus()}else{let U=j.length,X=U!==0&&((F=j[U-1])!=null?F:"").length>0,H=`${X?`
`:""}${Q}`;M.replaceRange(H,{line:U,ch:0});let Y=U+(X?1:0);M.setCursor({line:Y,ch:Q.length}),M.focus()}}else{let Q=te.match(/^h([1-6])$/),R=Q?Math.max(1,Math.min(6,Number(Q[1]))):3,z=`${"#".repeat(R)} ${W}`,U=-1;for(let X=0;X<j.length;X++)if(j[X].trim()===z){U=X;break}if(U>=0){let H=ae(U),le=((N=j[H])!=null?N:"").length;M.replaceRange(`
`,{line:H,ch:le}),M.setCursor({line:H+1,ch:0}),M.focus()}else{let X=-1;for(let ie=0;ie<j.length;ie++)/^#\s+/.test(j[ie])&&(X=ie);let H=X>=0?ae(X)+1:j.length,Y=H!==0,le=`${Y?`
`:""}${z}
`;M.replaceRange(le,{line:H,ch:0});let re=H+(Y?2:1);M.setCursor({line:re,ch:0}),M.focus()}}}else{let te=B.replace(/\n*$/,"")+`

`;te!==B&&M.setValue(te);let me=M.getValue().split(/\n/),W=Math.max(0,me.length-1);M.setCursor({line:W,ch:0}),M.focus()}}else{let B=M.lineCount(),G=Math.max(0,B-1),$=(A=(_=M.getLine(G))==null?void 0:_.length)!=null?A:0;M.setCursor({line:G,ch:$}),M.focus()}try{let B=M.getCursor?M.getCursor():null;if(B&&typeof M.scrollIntoView=="function")M.scrollIntoView(B,!0);else if(D.containerEl){let G=M.cursorCoords?M.cursorCoords(!0):null,$=(S=(x=D.containerEl).querySelector)==null?void 0:S.call(x,".cm-scroller, .CodeMirror-scroll");if(G&&$){let te=$,j=te.clientHeight/2;te.scrollTop=Math.max(0,G.top-j+10)}}}catch(B){}}}catch(D){}}var Ba=O(P()),Gv=()=>{let{current:e,prev:t,next:n}=Gx(),i=pe(),o=c=>{try{let u=i.workspace.getLeaf(!1);if(u){let f=i.vault.getAbstractFileByPath(c);f&&u.openFile&&u.openFile(f)}}catch(u){}},a=(c,u)=>{let f=p=>String(p).padStart(2,"0");return u.replace(/YYYY/g,String(c.getFullYear())).replace(/MM/g,f(c.getMonth()+1)).replace(/DD/g,f(c.getDate()))};return(0,Ba.jsx)(Kl,{children:(0,Ba.jsxs)(Ql,{align:"center",gap:4,className:"items-center",mx:8,children:[(0,Ba.jsx)(Me,{icon:"chevron-left",iconPosition:"start",className:"mod-cta",onClick:()=>{t&&o(t.file.path)},disabled:!t,children:"Prev entry"}),(0,Ba.jsx)("div",{className:"flex-1"}),(0,Ba.jsx)(Me,{className:"mod-cta",onClick:async()=>{var u,f;let c=(f=(u=i.plugins)==null?void 0:u.plugins)==null?void 0:f.mondo;if(c&&typeof kd=="function")try{await kd(i,c);return}catch(p){}try{i.commands.executeCommandById("mondo-open-journal")}catch(p){}},children:"Today"}),(0,Ba.jsx)("div",{className:"flex-1"}),(0,Ba.jsx)(Me,{icon:"chevron-right",iconPosition:"end",className:"mod-cta",onClick:()=>{n&&o(n.file.path)},children:"Next entry"})]})})};var wo=O(fe());var Ia=O(fe());var An=O(P()),s2=[{short:"J",full:"January"},{short:"F",full:"February"},{short:"M",full:"March"},{short:"A",full:"April"},{short:"M",full:"May"},{short:"J",full:"June"},{short:"J",full:"July"},{short:"A",full:"August"},{short:"S",full:"September"},{short:"O",full:"October"},{short:"N",full:"November"},{short:"D",full:"December"}],l2="var(--interactive-accent)",c2="var(--background-secondary)",u2="var(--text-muted)",d2="var(--text-on-accent)",f2={aspectRatio:"1 / 1",margin:0,border:0,borderRadius:0,padding:0,width:"100%"},Kx=e=>String(e).padStart(2,"0"),Qx=(e,t,n)=>`${e}-${Kx(t+1)}-${Kx(n)}`,Kv=({checkedDays:e,onClick:t,onToggleView:n,title:i,showToggle:o=!0})=>{let[a,r]=(0,Ia.useState)(()=>new Date().getFullYear()),s=(0,Ia.useMemo)(()=>new Set(e),[e]),l=(0,Ia.useCallback)(()=>{r(p=>p-1)},[]),c=(0,Ia.useCallback)(()=>{r(p=>p+1)},[]),u=(0,Ia.useCallback)(()=>{r(new Date().getFullYear())},[]),f=(0,Ia.useMemo)(()=>{let p=new Date,d=Qx(p.getFullYear(),p.getMonth(),p.getDate());return s2.map(({short:h,full:m},b)=>{let y=new Date(a,b+1,0).getDate(),g=Array.from({length:y},(v,w)=>{let T=w+1,k=Qx(a,b,T),E=k>d;return{id:k,label:String(T),isFuture:E,isActive:s.has(k)}});return{id:`${m}-${a}`,shortLabel:h,fullLabel:m,days:g}})},[s,a]);return(0,An.jsxs)("div",{className:"flex flex-col gap-4 pt-2 pb-2",children:[(0,An.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,An.jsxs)("div",{className:"flex items-center gap-2",children:[(0,An.jsx)("button",{type:"button",className:"px-2 py-1 text-xs border rounded",style:{borderColor:"var(--background-modifier-border)"},onClick:l,children:"\u25C0"}),(0,An.jsx)("button",{type:"button",className:"text-base font-semibold",style:{color:"var(--text-normal)"},onClick:u,children:a}),(0,An.jsx)("button",{type:"button",className:"px-2 py-1 text-xs border rounded",style:{borderColor:"var(--background-modifier-border)"},onClick:c,children:"\u25B6"})]}),(0,An.jsx)("div",{className:"flex-1 flex justify-center",children:i&&(0,An.jsx)("div",{className:"text-sm font-semibold text-center",style:{color:"var(--text-normal)"},children:i})}),o&&(0,An.jsx)("div",{className:"flex items-center",children:(0,An.jsx)(Me,{variant:"link",className:"mr-2",onClick:n,children:"View streak"})})]}),(0,An.jsx)("div",{className:"grid w-full",style:{gridTemplateColumns:"repeat(12, minmax(0, 1fr))"},children:f.map(p=>(0,An.jsxs)("div",{className:"flex flex-col items-center",children:[(0,An.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide flex items-center justify-center w-full h-6",title:p.fullLabel,children:p.shortLabel}),(0,An.jsx)("div",{className:"grid w-full",style:{gridAutoRows:"minmax(0, 1fr)",justifyItems:"center"},children:p.days.map(d=>{let h=d.isActive?l2:c2,m=d.isActive?d2:u2;return(0,An.jsx)("button",{type:"button",className:"flex items-center justify-center text-[10px] focus:outline-none",style:{...f2,backgroundColor:h,color:m,pointerEvents:d.isFuture?"none":"auto",cursor:d.isFuture?"default":"pointer"},onClick:()=>t(d.id),"aria-pressed":d.isActive,"aria-disabled":d.isFuture,disabled:d.isFuture,children:d.label},d.id)})})]},p.id))})]})};var Bs=O(fe());var Pr=O(P()),p2="var(--interactive-accent)",m2="var(--background-secondary)",h2="var(--text-on-accent)",g2="var(--text-muted)",Xx="1.75rem",y2={width:Xx,height:Xx,borderRadius:0,border:0,padding:0,fontSize:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",flex:"0 0 auto"},Jx=e=>String(e).padStart(2,"0"),Wx=(e,t,n)=>`${e}-${Jx(t+1)}-${Jx(n)}`,Qv=({checkedDays:e,onClick:t,onToggleView:n,streakLength:i=21,title:o,showToggle:a=!0})=>{let r=(0,Bs.useMemo)(()=>new Set(e),[e]),[s,l]=(0,Bs.useState)(()=>new Date);(0,Bs.useEffect)(()=>{if(typeof window=="undefined")return;let u=window.setInterval(()=>{l(f=>{let p=new Date;return p.getFullYear()!==f.getFullYear()||p.getMonth()!==f.getMonth()||p.getDate()!==f.getDate()?p:f})},1e3);return()=>{window.clearInterval(u)}},[]);let c=(0,Bs.useMemo)(()=>{let u=Math.max(1,i),f=s,p=Wx(f.getFullYear(),f.getMonth(),f.getDate()),d=[];for(let h=u-1;h>=0;h-=1){let m=new Date(f);m.setDate(f.getDate()-h);let b=Wx(m.getFullYear(),m.getMonth(),m.getDate());d.push({id:b,label:String(m.getDate()),isFuture:b>p,isActive:r.has(b)})}return d},[r,i,s]);return(0,Pr.jsxs)("div",{className:"flex flex-col gap-3 pt-2 pb-2",children:[(0,Pr.jsxs)("div",{className:"flex items-center justify-between",children:[(0,Pr.jsx)("div",{className:"text-sm font-semibold",style:{color:"var(--text-normal)"},children:o!=null?o:`Last ${c.length} days`}),a&&(0,Pr.jsx)(Me,{variant:"link",className:"mr-2",onClick:n,children:"View calendar"})]}),(0,Pr.jsx)("div",{className:"flex flex-wrap justify-end",style:{gap:0},children:c.map(u=>{let f=u.isActive?p2:m2,p=u.isActive?h2:g2;return(0,Pr.jsx)("button",{type:"button",className:"focus:outline-none",style:{...y2,backgroundColor:f,color:p,cursor:u.isFuture?"default":"pointer",pointerEvents:u.isFuture?"none":"auto"},onClick:()=>t(u.id),"aria-pressed":u.isActive,"aria-disabled":u.isFuture,disabled:u.isFuture,title:u.id,children:u.label},u.id)})})]})};var Ot=O(fe()),iN=require("obsidian");var Um=O(fe());function $m(){let e=pe(),[t,n]=(0,Um.useState)(()=>{let i=e.workspace.getActiveFile();return{file:i?Zx(e,i):void 0}});return(0,Um.useEffect)(()=>{let i=()=>{let r=e.workspace.getActiveFile();n({file:r?Zx(e,r):void 0})},o=e.workspace.on("file-open",i),a=e.metadataCache.on("changed",i);return()=>{e.workspace.offref(o),e.metadataCache.offref(a)}},[e]),t}function Zx(e,t){return{file:t,cache:e.metadataCache.getFileCache(t)||void 0}}var Xv="streak",eN=e=>String(e).padStart(2,"0"),b2=e=>`${e.getFullYear()}-${eN(e.getMonth()+1)}-${eN(e.getDate())}`,tN=e=>{if(Array.isArray(e))return e.map(t=>typeof t=="string"?t:t instanceof Date?b2(t):String(t)).filter(Boolean);if(typeof e=="string")try{let t=JSON.parse(e);if(Array.isArray(t))return t.map(n=>typeof n=="string"?n:String(n!=null?n:"")).filter(Boolean)}catch(t){return e.split(/[,\s]+/).map(n=>n.trim()).filter(Boolean)}return[]},nN=e=>{let t=Array.from(e);return t.sort(),t},oN=({trackerKey:e,filePath:t}={})=>{var N,_;let n=pe(),{file:i}=$m(),[o,a]=(0,Ot.useState)(void 0),[r,s]=(0,Ot.useState)(void 0),l=t?o===void 0:!1,c=t?o!=null?o:null:(N=i==null?void 0:i.file)!=null?N:null,u=t?r:(_=i==null?void 0:i.cache)==null?void 0:_.frontmatter,f=e!=null?e:"habits",p=`${f}-view`,d=(0,Ot.useRef)(null),[h,m]=(0,Ot.useState)(null),[b,y]=(0,Ot.useState)(new Set),[g,v]=(0,Ot.useState)(Xv),w=(0,Ot.useCallback)(()=>{var x;if(!t){a(void 0),s(void 0);return}let A=n.vault.getAbstractFileByPath(t);if(A instanceof iN.TFile){a(A);let S=n.metadataCache.getFileCache(A);s((x=S==null?void 0:S.frontmatter)!=null?x:void 0);return}a(null),s(void 0)},[n.metadataCache,n.vault,t]);(0,Ot.useEffect)(()=>{if(!t){a(null),s(void 0);return}w()},[t,w]),(0,Ot.useEffect)(()=>{if(!t)return;let A=()=>{w()},x=n.metadataCache.on("changed",A),S=n.vault.on("modify",D=>{(D==null?void 0:D.path)===t&&w()});return()=>{n.metadataCache.offref(x),n.vault.offref(S)}},[n.metadataCache,n.vault,t,w]);let T=(0,Ot.useCallback)(async()=>{if(l)return;if(!c){m("Unable to access the current note.");return}let A=`${c.path}|${f}`;if(d.current!==A)try{await n.fileManager.processFrontMatter(c,x=>{let S=tN(x==null?void 0:x[f]);x[f]=S;let D=x==null?void 0:x[p];D!=="calendar"&&D!=="streak"&&(x[p]=Xv)}),d.current=A,m(null)}catch(x){console.error("useHabitTracker: failed to ensure frontmatter",x),d.current=null,m("Unable to read habit tracker data.")}},[n.fileManager,l,c,f,p]);(0,Ot.useEffect)(()=>{d.current=null},[c,f]),(0,Ot.useEffect)(()=>{T()},[T]),(0,Ot.useEffect)(()=>{if(!u)return;let A=tN(u[f]);y(new Set(A));let x=u[p];v(x==="streak"||x==="calendar"?x:Xv)},[u,f,p]);let k=(0,Ot.useCallback)(async A=>{if(!c){m("Unable to save habit tracker data.");return}try{await n.fileManager.processFrontMatter(c,x=>{x[f]=nN(A)}),m(null)}catch(x){console.error("useHabitTracker: failed to persist tracked days",x),m("Unable to save habit tracker data.")}},[n.fileManager,c,f]),E=(0,Ot.useCallback)(async A=>{if(!c){m("Unable to save habit tracker view.");return}try{await n.fileManager.processFrontMatter(c,x=>{x[p]=A})}catch(x){console.error("useHabitTracker: failed to persist view mode",x),m("Unable to save habit tracker view.")}},[n.fileManager,c,p]),C=(0,Ot.useCallback)(A=>{y(x=>{let S=new Set(x);return S.has(A)?S.delete(A):S.add(A),k(S),S})},[k]),L=(0,Ot.useCallback)(()=>{v(A=>{let x=A==="streak"?"calendar":"streak";return E(x),x})},[E]);return{checkedDays:(0,Ot.useMemo)(()=>nN(b),[b]),viewMode:g,error:h,toggleDay:C,toggleView:L}};var zr=O(P()),jm=({title:e,blockKey:t,inlineKey:n,notePath:i})=>{var y;let[o,a]=(0,wo.useState)(()=>typeof window=="undefined"||typeof window.matchMedia!="function"?!1:window.matchMedia("(max-width: 640px)").matches),r=(y=t!=null?t:n)!=null?y:"habits",{checkedDays:s,viewMode:l,error:c,toggleDay:u,toggleView:f}=oN({trackerKey:r,filePath:i}),p=(0,wo.useRef)(!1),d=(0,wo.useRef)(null),h=o?"streak":l;(0,wo.useEffect)(()=>{if(typeof window=="undefined"||typeof window.matchMedia!="function")return;let g=window.matchMedia("(max-width: 640px)"),v=w=>{a(w.matches)};return a(g.matches),typeof g.addEventListener=="function"?(g.addEventListener("change",v),()=>g.removeEventListener("change",v)):(g.addListener(v),()=>g.removeListener(v))},[]);let m=(0,wo.useCallback)(g=>{u(g)},[u]),b=(0,wo.useCallback)(()=>{o||f()},[o,f]);return(0,wo.useEffect)(()=>{var g;if(!p.current){p.current=!0;return}(g=d.current)==null||g.scrollIntoView({behavior:"smooth",block:"start"})},[h]),(0,zr.jsx)("div",{ref:d,children:(0,zr.jsx)(Kl,{children:(0,zr.jsxs)(Ql,{direction:"column",gap:3,children:[h==="calendar"?(0,zr.jsx)(Kv,{checkedDays:s,onClick:m,onToggleView:b,title:e,showToggle:!o}):(0,zr.jsx)(Qv,{checkedDays:s,onClick:m,onToggleView:b,title:e,showToggle:!o}),c&&(0,zr.jsx)(dc,{message:c})]})})})};var Mc=O(fe());var Ee=O(fe()),Ed=e=>{if(e==null)return 0;if(typeof e=="number")return Number.isFinite(e)?Math.max(0,Math.floor(e)):0;if(typeof e!="string")return 0;let t=Number(e);return Number.isFinite(t)?Math.max(0,Math.floor(t)):0},v2=e=>{let t=Number.isFinite(e)?Math.max(0,Math.floor(e)):0,n=Math.floor(t/60),i=t%60;return`${n.toString().padStart(2,"0")}:${i.toString().padStart(2,"0")}`},w2=e=>{let t=Number.isFinite(e)?Math.max(0,Math.floor(e)):0,n=Math.floor(t/1e3),i=Math.floor(n/3600),o=Math.floor(n%3600/60),a=n%60,r=Math.floor(t%1e3);return`${i.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}.${r.toString().padStart(3,"0")}`},T2=e=>{if(e==null)return{mode:"infinite"};let n=(typeof e=="string"?e:String(e)).trim().toLowerCase();if(n===""||n==="true")return{mode:"infinite"};if(n==="false")return{mode:"none"};let i=Number(n);if(!Number.isFinite(i))return{mode:"infinite"};let o=Math.floor(i);return o<=0?{mode:"none"}:{mode:"finite",total:o}},S2=(e,t)=>{let n=typeof e=="string"?e.trim():"";return n||t},k2=e=>{if(!Array.isArray(e))return[];let t=[];return e.forEach((n,i)=>{var l,c,u,f;if(!n||typeof n!="object")return;let o=n,a=Ed((l=o.duration)!=null?l:o.time);if(a<=0)return;let r=Ed((u=(c=o.pause)!=null?c:o.rest)!=null?u:0),s=S2((f=o.title)!=null?f:o.name,`step ${i+1}`);t.push({title:s,durationSeconds:a,pauseSeconds:r})}),t},E2=()=>{var t;if(typeof window=="undefined")return;let e=window;return(t=window.AudioContext)!=null?t:e.webkitAudioContext},aN=e=>e==="vibration"||e==="both",C2=e=>e==="audio"||e==="both",Jv=(e,t)=>{if(!C2(e))return;let n=E2();if(n)try{let i=new n,o=()=>{try{t(i)}catch(a){i.close().catch(()=>{})}};typeof i.resume=="function"&&i.state==="suspended"?i.resume().then(o).catch(o):o()}catch(i){}},Wv=(e,t)=>{aN(t)&&(typeof navigator=="undefined"||typeof navigator.vibrate!="function"||navigator.vibrate(e))},M2=e=>{Wv(180,e),Jv(e,t=>{let n=t.createOscillator(),i=t.createGain(),o=t.currentTime,a=.18;n.type="sine",n.frequency.setValueAtTime(880,o),i.gain.setValueAtTime(.18,o),n.connect(i),i.connect(t.destination);let r=o+a;n.start(o),i.gain.exponentialRampToValueAtTime(1e-4,r),n.stop(r),typeof n.addEventListener=="function"?n.addEventListener("ended",()=>t.close().catch(()=>{})):n.onended=()=>{t.close().catch(()=>{})}})},x2=e=>{Wv([140,80,200],e),Jv(e,t=>{let n=t.createOscillator(),i=t.createGain(),o=t.currentTime;n.type="sine",n.frequency.setValueAtTime(880,o),i.gain.setValueAtTime(.18,o),n.connect(i),i.connect(t.destination);let r=o+.5;n.start(o),i.gain.exponentialRampToValueAtTime(1e-4,r),n.stop(r),typeof n.addEventListener=="function"?n.addEventListener("ended",()=>t.close().catch(()=>{})):n.onended=()=>{t.close().catch(()=>{})}})},N2=e=>{Wv([250,100,250],e),Jv(e,t=>{let n=t.createOscillator(),i=t.createGain(),o=t.currentTime;n.type="sine",n.frequency.setValueAtTime(660,o),i.gain.setValueAtTime(.2,o),n.connect(i),i.connect(t.destination);let r=o+.5;n.start(o),i.gain.exponentialRampToValueAtTime(1e-4,r),n.stop(r),typeof n.addEventListener=="function"?n.addEventListener("ended",()=>t.close().catch(()=>{})):n.onended=()=>{t.close().catch(()=>{})}})},A2=e=>{aN(e)&&(typeof navigator=="undefined"||typeof navigator.vibrate!="function"||navigator.vibrate(0))},rN=e=>{var Xe,ot;let t=(0,Ee.useMemo)(()=>Ed(e.duration),[e.duration]),n=(0,Ee.useMemo)(()=>{var Ge,De;let ee=(De=(Ge=e.rest)!=null?Ge:e.pause)!=null?De:e.interval;return Ed(ee)},[e.rest,e.pause,e.interval]),i=(0,Ee.useMemo)(()=>T2(e.loop),[e.loop]),o=(0,Ee.useMemo)(()=>{let ee=typeof e.heptic=="string"?e.heptic.trim().toLowerCase():"";return ee==="sound"?"audio":ee==="none"?"none":ee==="audio"||ee==="vibration"||ee==="both"?ee:"none"},[e.heptic]),a=(0,Ee.useMemo)(()=>{let ee=e.step;if(ee==null||typeof ee=="string"&&ee.trim()==="")return 0;let Ge=Ed(ee);return Ge>0?Ge:(typeof ee=="string"&&ee.trim()==="0"||typeof ee=="number"&&ee===0,0)},[e.step]),r=(0,Ee.useMemo)(()=>k2(e.steps),[e.steps]),s=r.length>0,l=s?r[0].durationSeconds:0,c=e.duration==null&&e.rest==null&&e.pause==null&&e.interval==null&&e.steps==null&&e.loop==null,u=(0,Ee.useMemo)(()=>s?l:c?25*60:t,[s,l,c,t]),f=(0,Ee.useMemo)(()=>s?0:c?5*60:n,[s,c,n]),p=(0,Ee.useMemo)(()=>c?{mode:"none"}:i,[c,i]),d=p.mode==="finite",h=d?p.total:0,m=(0,Ee.useMemo)(()=>{let ee=typeof e.title=="string"?e.title.trim():"";return ee||(s?"time plan":"work")},[e.title,s]),[b,y]=(0,Ee.useState)(!1),[g,v]=(0,Ee.useState)("work"),[w,T]=(0,Ee.useState)(0),[k,E]=(0,Ee.useState)(0),[C,L]=(0,Ee.useState)(s?l:u),[F,N]=(0,Ee.useState)(0),[_,A]=(0,Ee.useState)(1),x=(0,Ee.useRef)(Math.max((s?l:u)||1,1)),S=(0,Ee.useRef)(null),D=(0,Ee.useRef)(null),M=(0,Ee.useRef)(null),B=(0,Ee.useRef)(0),G=(0,Ee.useRef)(0),$=(0,Ee.useRef)(0),te=s?Math.min(Math.max(w,0),r.length-1):0,j=s?r[te]:void 0,me=s&&te+1<r.length?r[te+1]:void 0,W=s?(Xe=j==null?void 0:j.durationSeconds)!=null?Xe:0:u,ae=s?(ot=j==null?void 0:j.pauseSeconds)!=null?ot:0:f,Q=(0,Ee.useCallback)(()=>typeof performance!="undefined"&&typeof performance.now=="function"?performance.now():Date.now(),[]),R=(0,Ee.useCallback)(()=>{G.current=Q()},[Q]),I=(0,Ee.useCallback)(()=>{M2(o),R()},[o,R]),z=(0,Ee.useCallback)(()=>{x2(o),R()},[o,R]),U=(0,Ee.useCallback)(()=>{N2(o),R()},[o,R]),X=(0,Ee.useCallback)(()=>A2(o),[o]);(0,Ee.useEffect)(()=>{if(!s){T(0);return}T(ee=>Math.min(Math.max(ee,0),r.length-1))},[s,r.length]),(0,Ee.useEffect)(()=>{b||($.current=0,N(0),E(0))},[b]),(0,Ee.useEffect)(()=>{b||(v("work"),L(W),A(1),S.current=null)},[W,b]);let H=(0,Ee.useCallback)(async()=>{if(M.current)try{let ee=M.current;M.current=null,await ee.release()}catch(ee){M.current=null}},[]),Y=(0,Ee.useCallback)(async()=>{var Ge;if(typeof navigator=="undefined")return;let ee=navigator;if((Ge=ee.wakeLock)!=null&&Ge.request&&!M.current)try{let De=await ee.wakeLock.request("screen"),ue=()=>{M.current=null,De.removeEventListener&&De.removeEventListener("release",ue),typeof document!="undefined"&&document.visibilityState==="visible"&&b&&Y()};M.current=De,De.addEventListener&&De.addEventListener("release",ue)}catch(De){M.current=null}},[b]),le=s?l>0:u>0,re=(0,Ee.useCallback)(()=>{let ee=s?l:u;ee<=0||(B.current=0,X(),z(),v("work"),T(0),L(ee),A(1),$.current=0,N(0),E(1),S.current=null,y(!0),Y())},[t,s,l,z,Y,X]),ie=(0,Ee.useCallback)(()=>{y(!1),v("work"),T(0),L(s?l:u),A(1),S.current=null,B.current=0,X(),H()},[u,s,l,H,X]);(0,Ee.useEffect)(()=>{var ee;if(b){if(C===0){if(g==="work"&&($.current+=Math.max(W,0)*1e3,N($.current)),s){if(g==="work"){if(((ee=j==null?void 0:j.pauseSeconds)!=null?ee:0)>0){U(),v("rest"),A(1),S.current=null,L(j.pauseSeconds);return}let Re=te+1;if(Re<r.length){z(),T(Re),v("work"),A(1),S.current=null,L(r[Re].durationSeconds);return}if(!(i.mode!=="none"&&(!d||k<h))){z(),ie();return}z(),T(0),v("work"),A(1),S.current=null,L(r[0].durationSeconds),E(vt=>d?Math.min(vt+1,h):vt+1);return}let De=te+1;if(De<r.length){z(),T(De),v("work"),A(1),S.current=null,L(r[De].durationSeconds);return}if(!(i.mode!=="none"&&(!d||k<h))){z(),ie();return}z(),T(0),v("work"),A(1),S.current=null,L(r[0].durationSeconds),E(Re=>d?Math.min(Re+1,h):Re+1);return}if(g==="work"){if(ae>0){U(),v("rest"),L(ae),A(1),S.current=null;return}if(!(i.mode!=="none"&&(!d||k<h))){z(),ie();return}z(),v("work"),L(W),A(1),S.current=null,E(ue=>d?Math.min(ue+1,h):ue+1);return}if(!(i.mode!=="none"&&(!d||k<h))){z(),ie();return}z(),v("work"),L(W),A(1),S.current=null,E(De=>d?Math.min(De+1,h):De+1);return}C>0&&C<=3&&I()}},[b,C,g,W,ae,s,j==null?void 0:j.pauseSeconds,r,te,i,d,k,h,z,U,I,ie]);let ke=(0,Ee.useMemo)(()=>g==="rest"&&ae>0?ae:W||1,[W,ae,g]);(0,Ee.useEffect)(()=>{if(x.current=Math.max(ke,1),b){S.current=Q(),A(1);return}S.current=null,A(1)},[ke,Q,b,g]),(0,Ee.useEffect)(()=>{B.current=0},[ke,g,a]),(0,Ee.useEffect)(()=>{if(!b||a<=0||C<=0||C<=3)return;let Ge=Math.max(ke,1)-C;if(Ge<=0)return;let De=Math.floor(Ge/a);if(!(De<=0)&&De>B.current){let ue=Q()-G.current;B.current=De,ue>400&&I()}},[ke,Q,b,I,C,a]);let Ce=(0,Ee.useCallback)(()=>{var nn;if(!b)return;let ee=Math.max(x.current*1e3,1),Ge=Q(),De=(nn=S.current)!=null?nn:Ge;S.current===null&&(S.current=De);let ue=Ge-De,Re=Math.max(ee-ue,0),bt=Math.max(0,Math.min(1,Re/ee)),vt=Math.ceil(Re/1e3),nt=Math.floor($.current+(g==="work"?Math.min(ue,ee):0));A(bt),L(Ht=>Number.isFinite(vt)?vt:Ht),N(Ht=>Ht===nt?Ht:nt)},[Q,b,g]);(0,Ee.useEffect)(()=>{if(!b){D.current!==null&&(window.cancelAnimationFrame(D.current),D.current=null);return}let ee=!1,Ge=()=>{ee||(Ce(),D.current=window.requestAnimationFrame(Ge))};return D.current=window.requestAnimationFrame(Ge),()=>{ee=!0,D.current!==null&&(window.cancelAnimationFrame(D.current),D.current=null)}},[b,Ce]),(0,Ee.useEffect)(()=>{if(!b)return;let ee=window.setInterval(()=>Ce(),1e3);return()=>window.clearInterval(ee)},[b,Ce]),(0,Ee.useEffect)(()=>{if(!b){H();return}if(Y(),typeof document=="undefined")return;let ee=()=>{document.visibilityState==="visible"&&(Y(),Ce())};return document.addEventListener("visibilitychange",ee),()=>document.removeEventListener("visibilitychange",ee)},[b,Ce,H,Y]),(0,Ee.useEffect)(()=>()=>{H()},[H]);let we=(0,Ee.useMemo)(()=>v2(b?C:W),[W,b,C]),Ne=(0,Ee.useMemo)(()=>{var ee;return s?g==="rest"?"rest":(ee=j==null?void 0:j.title)!=null?ee:m:b&&g==="rest"?"rest":"go"},[j==null?void 0:j.title,s,b,g,m]),Ve=(0,Ee.useMemo)(()=>{if(s&&g==="rest")return me==null?void 0:me.title},[s,me,g]);return{canStart:le,currentLoop:k,currentLabel:Ne,displayTitle:m,durationSeconds:W,formattedElapsed:w2(F),formattedRemaining:we,hasFiniteLoops:d,pauseSeconds:ae,isResting:g==="rest",isRunning:b,nextLabel:Ve,progress:_,remainingSeconds:b?C:W,totalLoops:h,start:re,stop:ie}};var rt=O(P()),Zv=54,sN=2*Math.PI*Zv,D2=({controller:e,accentStyle:t})=>{let{canStart:n,currentLoop:i,currentLabel:o,displayTitle:a,durationSeconds:r,formattedElapsed:s,formattedRemaining:l,hasFiniteLoops:c,pauseSeconds:u,isResting:f,isRunning:p,nextLabel:d,progress:h,totalLoops:m,start:b,stop:y}=e,g=(0,Mc.useMemo)(()=>{let E=["mondo-timer-block__button"];return E.push(f?"mondo-timer-block__button--rest":"mondo-timer-block__button--go"),E.join(" ")},[f]),v=(0,Mc.useMemo)(()=>{let E=["mondo-timer-block__status"];return E.push(f?"mondo-timer-block__status--rest":"mondo-timer-block__status--work"),E.join(" ")},[f]),w=(0,Mc.useMemo)(()=>{let C=(1-Math.min(Math.max(h,0),1))*sN;return{strokeDasharray:`${sN}`,strokeDashoffset:`${C}`}},[h]),T=()=>{p?y():b()},k=(0,Mc.useMemo)(()=>p?(0,rt.jsxs)("svg",{className:"mondo-timer-block__button-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,rt.jsx)("rect",{x:"6",y:"5",width:"5",height:"14",rx:"1.5"}),(0,rt.jsx)("rect",{x:"13",y:"5",width:"5",height:"14",rx:"1.5"})]}):(0,rt.jsx)("svg",{className:"mondo-timer-block__button-icon",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:(0,rt.jsx)("path",{d:"M8 5.5v13l10-6.5Z"})}),[p]);return(0,rt.jsxs)("div",{className:`mondo-timer-block ${f?"mondo-timer-block--resting":""}`.trim(),style:t,children:[(0,rt.jsxs)("div",{className:"mondo-timer-block__heading",children:[(0,rt.jsx)("div",{className:"mondo-timer-block__title",children:a}),(0,rt.jsx)("div",{className:"mondo-timer-block__status-container",children:(0,rt.jsxs)("div",{className:"mondo-timer-block__status-row",children:[(0,rt.jsx)("div",{className:v,children:o}),d&&(0,rt.jsxs)("div",{className:"mondo-timer-block__status-next",children:[(0,rt.jsx)("span",{className:"mondo-timer-block__status-next-label",children:"next up"}),(0,rt.jsx)("span",{className:"mondo-timer-block__status-next-value",children:d})]})]})})]}),(0,rt.jsxs)("button",{type:"button",className:g,onClick:T,disabled:!n&&!p,"aria-pressed":p,"aria-label":p?`Stop ${a} timer`:`Start ${a} timer`,children:[(0,rt.jsxs)("svg",{className:"mondo-timer-block__progress",viewBox:"0 0 120 120",xmlns:"http://www.w3.org/2000/svg","aria-hidden":!0,children:[(0,rt.jsx)("circle",{className:"mondo-timer-block__progress-track",cx:"60",cy:"60",r:Zv}),(0,rt.jsx)("circle",{className:"mondo-timer-block__progress-indicator",cx:"60",cy:"60",r:Zv,style:w})]}),(0,rt.jsxs)("span",{className:"mondo-timer-block__button-content",children:[k,(0,rt.jsx)("span",{className:"mondo-timer-block__countdown",children:l}),c?(0,rt.jsx)("span",{className:"mondo-timer-block__loop",children:`(${i}/${m})`}):null]})]}),(0,rt.jsx)("div",{className:"mondo-timer-block__meta",children:p?(0,rt.jsx)("span",{className:"mondo-timer-block__meta-value",children:s}):(0,rt.jsxs)(rt.Fragment,{children:[(0,rt.jsx)("span",{className:"mondo-timer-block__meta-duration",children:`${r}s`}),(0,rt.jsx)("span",{className:"mondo-timer-block__meta-separator",children:"/"}),(0,rt.jsx)("span",{className:"mondo-timer-block__meta-interval",children:`${u}s`})]})})]})},Ym=e=>{let t=rN(e),n=(0,Mc.useMemo)(()=>{let i=e.color,o=typeof i=="string"?i.trim():"";if(o)return{["--mondo-timer-accent"]:o}},[e.color]);return(0,rt.jsx)(D2,{controller:t,accentStyle:n})};var ew=O(P()),L2={"journal-nav":Gv,habits:jm,timer:Ym,"time-plan":Ym},R2=e=>{let t=new URLSearchParams(e),n={};return t.forEach((i,o)=>{o&&(n[o]=i)}),n},lN=e=>!e||typeof e!="object"||Array.isArray(e)?{}:e,O2=e=>{let t=e.split(/\r?\n/).map(p=>p.trimEnd()).filter(p=>p.trim().length>0);if(t.length===0)return{blockKey:"",props:{}};let[n,...i]=t,o=n.indexOf("?"),a=o!==-1?n.slice(0,o).trim():n,r=o!==-1?n.slice(o+1):"",s=r?R2(r):{};if(i.length===0)return{blockKey:a,props:s};let l=i.map(p=>{let d=p.trim();if(!d.includes(":")&&d.includes("=")){let h=d.indexOf("="),m=d.slice(0,h).trim(),b=d.slice(h+1).trim();return m.length===0?d:`${m}: ${b}`}return p}),c=l.findIndex(p=>p.trim().startsWith("-")),u=c>0&&l.slice(0,c).some(p=>p.includes(":"));if(c>0&&u){let p=l.slice(0,c),d=l.slice(c);try{let h=lN(Hm.parse(p.join(`
`))),m=Hm.parse(d.join(`
`));return{blockKey:a,props:{...s,...h,...Array.isArray(m)&&m.length>0?{steps:m}:{}}}}catch(h){}}let f=l.join(`
`);try{let p=Hm.parse(f);if(Array.isArray(p))return{blockKey:a,props:{...s,steps:p}};let d=lN(p);return d===s?{blockKey:a,props:s}:{blockKey:a,props:{...s,...d}}}catch(p){let d=i.reduce((h,m)=>{let b=m.indexOf(":"),y=m.indexOf("="),g=b!==-1?b:y;if(g===-1)return h;let v=m.slice(0,g).trim(),w=m.slice(g+1).trim();return v.length===0||(h[v]=w),h},{...s});return{blockKey:a,props:d}}},cN=({source:e,sourcePath:t})=>{let{blockKey:n,props:i}=O2(e),o=n?L2[n]:void 0;if(!o)return(0,ew.jsx)(dc,{message:`block not found: ${n||"(empty)"}`});let{key:a,...r}=i,s=a!==void 0?{...r,blockKey:a,inlineKey:a}:r,l=n==="habits"?{...s,notePath:t}:s;return(0,ew.jsx)(o,{...l})};var tw=O(P()),qm=class{constructor(t,n,i,o){let a=(0,uN.createRoot)(i);a.render((0,tw.jsx)(Fn,{app:t,children:(0,tw.jsx)(cN,{source:n,sourcePath:o.sourcePath})}));let r=new MutationObserver(()=>{document.body.contains(i)||(a.unmount(),r.disconnect())});r.observe(document.body,{childList:!0,subtree:!0})}};var To=require("obsidian");var F2="YYYY-MM-DD",_2="HH:mm",B2=" ",Pa={template:"YYYY-MM-DD HH:mm",appendNewLine:!0},nw=(e,t,n)=>{if(typeof e!="string")return t;let i=e.trim();return i.length===0?t:n!=null&&n.preserveWhitespace?e:i},I2=(e,t)=>{if(!/\{\{\s*(date|time|separator)\s*\}\}/i.test(e))return e;let i=nw(t.dateFormat,F2),o=nw(t.timeFormat,_2),a=typeof t.separator=="string"?t.separator:B2;return e.replace(/\{\{\s*date\s*\}\}/gi,i).replace(/\{\{\s*time\s*\}\}/gi,o).replace(/\{\{\s*separator\s*\}\}/gi,a)},Go=e=>{let t=e!=null?e:{},n=I2(nw(t.template,Pa.template,{preserveWhitespace:!0}),t),i=typeof t.appendNewLine=="boolean"?t.appendNewLine:Pa.appendNewLine;return{template:n,appendNewLine:i}},Gm=e=>{var r;let{moment:t,settings:n}=e,i=(r=e.includeTrailingNewLine)!=null?r:!1,o=n.template.replace(/\[/g,"[[]").replace(/\]/g,"[]]"),a=t.format(o);return i&&n.appendNewLine?`${a}
`:a};var li=require("obsidian");var fN=require("obsidian");var P2=e=>JSON.parse(JSON.stringify(e)),za=e=>!!e&&typeof e=="object"&&!Array.isArray(e);var dN=(e,t)=>{if(!Array.isArray(e))return[...t];let a=[...e.filter(r=>typeof r=="string").filter((r,s,l)=>l.indexOf(r)===s).filter(r=>t.includes(r))];for(let r of t)a.includes(r)||a.push(r);return a},z2=(e,t)=>{if(!Array.isArray(e))return[];let n=new Set(t.map(o=>String(o||"").trim().toLowerCase())),i=[];for(let o of e){if(typeof o!="string")continue;let a=o.trim().toLowerCase();!a||!n.has(a)||i.includes(a)||i.push(a)}return i},Km=e=>{let t=[];if(!za(e))return t.push({path:"root",message:"Configuration file must define a JSON object."}),{ok:!1,issues:t};let n=za(e.mondoConfig)?e.mondoConfig:e;if(!za(n))return t.push({path:"mondoConfig",message:"The `mondoConfig` property must be an object when present."}),{ok:!1,issues:t};let i=n.entities;if(!za(i))return t.push({path:"entities",message:"`entities` must be an object containing the known entity definitions."}),{ok:!1,issues:t};let o=Object.keys(i);o.length===0&&t.push({path:"entities",message:"`entities` must include at least one definition."});let a;if("quickSearch"in n){let f=n.quickSearch;f!==void 0&&(za(f)?"entities"in f&&!Array.isArray(f.entities)?t.push({path:"quickSearch.entities",message:"`quickSearch.entities` must be an array when provided."}):a=f.entities:t.push({path:"quickSearch",message:"`quickSearch` must be an object when provided."}))}for(let[f,p]of Object.entries(i)){if(!za(p)){t.push({path:`entities.${f}`,message:"Each entity configuration must be an object."});continue}(typeof p.name!="string"||p.name.trim().length===0)&&t.push({path:`entities.${f}.name`,message:"Entity `name` must be a non-empty string."}),"links"in p&&!Array.isArray(p.links)&&t.push({path:`entities.${f}.links`,message:"`links` must be an array when present."})}if(t.length>0)return{ok:!1,issues:t};let r=P2(i);for(let[f,p]of Object.entries(r))if(p&&typeof p=="object"){let d=p;typeof d.name=="string"&&(d.name=d.name.trim()),(typeof d.icon!="string"||d.icon.trim().length===0)&&(d.icon="tag")}let s=za(n.titles)?n.titles.order:void 0,l=za(n.relevantNotes)&&za(n.relevantNotes.filter)?n.relevantNotes.filter.order:void 0,c=z2(a,o);return{ok:!0,config:{titles:{order:dN(s,o)},relevantNotes:{filter:{order:dN(l,o)}},quickSearch:{entities:c},entities:r}}};var pN=require("obsidian"),si=(e,t,n)=>{let i=()=>new pN.Setting(e),o=i();return o.setName(t),n&&o.setDesc(n),o.setHeading(),{element:e,createSetting:i}};var iw=class extends li.AbstractInputSuggest{constructor(n,i,o){super(n,i);this.onPick=o}getSuggestions(n){let i=this.app.vault.getMarkdownFiles();if(!n)return i.slice(0,50);let o=n.toLowerCase();return i.filter(a=>a.path.toLowerCase().includes(o))}renderSuggestion(n,i){i.setText(n.path)}selectSuggestion(n){if(this.onPick)try{this.onPick(n)}catch(i){}else{let i=this.inputEl;i&&(i.value=n.path,i.dispatchEvent(new Event("input",{bubbles:!0})),i.dispatchEvent(new Event("change",{bubbles:!0})))}try{this.close()}catch(i){}}},ow=class extends li.FuzzySuggestModal{constructor(n,i){super(n);this.onSelect=i,this.setPlaceholder("Select a template note")}getItems(){return this.app.vault.getMarkdownFiles()}getItemText(n){return n.path}onChooseItem(n,i){try{this.onSelect(n)}catch(o){}}},aw=class extends li.Modal{constructor(n,i,o){super(n);this.title=i,this.contentNodes=o}onOpen(){let{contentEl:n,titleEl:i}=this;i.setText(this.title),n.empty(),this.contentNodes.forEach(r=>{if(typeof r=="string"){let s=n.createEl("p",{text:r});s.style.whiteSpace="pre-wrap"}else n.appendChild(r)}),n.createDiv({cls:"modal-button-container"}).createEl("button",{text:"Close"}).addEventListener("click",()=>this.close())}},mN=(e,t,n)=>{let i=document.createElement("ul");i.style.paddingLeft="1.2em",n.forEach(a=>{let r=document.createElement("li");r.textContent=a,i.appendChild(r)}),new aw(e,t,[i]).open()},H2=async e=>await new Promise(t=>{class n extends li.Modal{onOpen(){let{contentEl:o,titleEl:a}=this;a.setText("Reset configuration?"),o.empty(),o.createEl("p",{text:"This will clear the custom JSON and restore the built-in defaults."});let r=o.createDiv({cls:"modal-button-container"}),s=r.createEl("button",{text:"Cancel"}),l=r.createEl("button",{text:"Reset"});l.addClass("mod-warning"),s.addEventListener("click",()=>{this.close(),t(!1)}),l.addEventListener("click",()=>{this.close(),t(!0)})}}new n(e).open()});var hN=async e=>{var T,k,E,C;let{app:t,plugin:n,containerEl:i,addFolderSetting:o,showRestartPrompt:a}=e,r=async()=>{var L,F;if(await a()){try{(F=(L=t==null?void 0:t.commands)==null?void 0:L.executeCommandById)==null||F.call(L,"app:reload")}catch(N){}try{window.location.reload()}catch(N){}}},s=i.createDiv(),l=si(s,"Mondo Entities",`Paste JSON here to override the built-in Mondo Entities configuration.
Leave empty to use defaults.`),c=new Map($u.map(L=>[L.key,L])),u=typeof((T=n.settings)==null?void 0:T.mondoConfigPresetKey)=="string"?n.settings.mondoConfigPresetKey.trim():"",f=u&&c.has(u)?u:"";u!==f&&(n.settings.mondoConfigPresetKey=f,(k=n.saveSettings)==null||k.call(n)),new li.Setting(s).setName("Preset").setDesc("Select a built-in IMS configuration. Custom JSON overrides the selected preset.").addDropdown(L=>{L.addOption("","None (use built-in default)"),$u.forEach(N=>{L.addOption(N.key,N.description)}),L.setValue(f);let F=f;L.onChange(async N=>{let _=N&&c.has(N)?N:"";_!==N&&L.setValue(_),_!==F&&(F=_,n.settings.mondoConfigPresetKey=_,await n.saveSettings(),await n.applyMondoConfigFromSettings(),await r())})});let d=new li.Setting(s);try{d.infoEl.style.display="none"}catch(L){}let h=d.controlEl.createDiv();h.style.width="100%";let m=new li.Setting(h).setName("Custom IMS").setDesc("create your own IMS/ERP structure from scratch!").setHeading();try{m.settingEl.style.paddingLeft="0",m.settingEl.style.paddingRight="0",m.settingEl.style.marginLeft="0",m.settingEl.style.textAlign="left"}catch(L){}let b=document.createElement("textarea");b.rows=14,b.style.width="100%",b.style.minHeight="220px",b.style.fontFamily="var(--font-monospace)",b.placeholder=`{
  "entities": { ... }
}`,b.value=(C=(E=n.settings)==null?void 0:E.mondoConfigJson)!=null?C:"",b.addEventListener("change",async()=>{n.settings.mondoConfigJson=b.value,await n.saveSettings()}),h.appendChild(b);let y=document.createElement("div");y.style.display="flex",y.style.justifyContent="flex-end",y.style.gap="8px",y.style.marginTop="10px",h.appendChild(y);let g=y.createEl("button",{text:"Validate & Apply"});g.addClass("mod-cta"),g.addEventListener("click",async()=>{var _,A,x;let L=((_=b.value)!=null?_:"").trim();if(!L){await n.applyMondoConfigFromSettings(),await((A=n.saveSettings)==null?void 0:A.call(n)),await r();return}let F;try{F=JSON.parse(L)}catch(S){let D=S instanceof Error?S.message:String(S);mN(t,"Invalid JSON",[D]);return}let N=Km(F);if(!N.ok){let S=N.issues.map(D=>`${D.path}: ${D.message}`);mN(t,"Configuration issues",S);return}await n.applyMondoConfigFromSettings(),await((x=n.saveSettings)==null?void 0:x.call(n)),await r()}),y.createEl("button",{text:"Use defaults"}).addEventListener("click",async()=>{await H2(t)&&(n.settings.mondoConfigJson="",await n.saveSettings(),await n.applyMondoConfigFromSettings(),b.value="",await r())}),new li.Setting(s).setName("Hide IMS Header on unknown notes").setDesc("when checked, note with types not known to the IMS will not show the standard header").addToggle(L=>{var N;let F=!!((N=n.settings)!=null&&N.hideIMSHeaderOnUnknownNotes);L.setValue(F),L.onChange(async _=>{n.settings.hideIMSHeaderOnUnknownNotes=!!_,await n.saveSettings();try{window.dispatchEvent(new CustomEvent("mondo:settings-updated"))}catch(A){}})});let w=br.map(L=>{var F;return{type:L.type,label:(F=L.name)!=null?F:L.type}});if(w.length>0){let F=i.createDiv("mondo-settings-entities-toggle").createEl("a",{text:"Show entities options"});F.addClass("mondo-settings-entities-toggle-link"),F.setAttribute("href","#");let N=i.createDiv("mondo-settings-entities"),_="mondo-settings-entities-content";N.setAttribute("id",_),F.setAttribute("aria-controls",_),F.setAttribute("aria-expanded","false");let A=!1,x=D=>{A=D,N.toggleClass("is-hidden",!D),N.setAttribute("aria-hidden",D?"false":"true"),F.setText(D?"Hide entities options":"Show entities options"),F.setAttribute("aria-expanded",D?"true":"false")};x(!1),F.addEventListener("click",D=>{D.preventDefault(),x(!A)});for(let{label:D,type:M}of w){let B=N.createDiv("mondo-settings-entity");new li.Setting(B).setName(D).setHeading(),o(B,"Documents Store","Pick a folder in which to store all the documents for this entity",()=>n.settings.rootPaths[M],async W=>{n.settings.rootPaths[M]=W||"/",await n.saveSettings()});let G=()=>{var W,ae;return(ae=(W=n.settings.templates)==null?void 0:W[M])!=null?ae:""},$=async W=>{var R,I;n.settings.templates=n.settings.templates||{};let ae=W.includes(`
`)||W.includes("{{")||W.includes("---")?W:W.trim();((I=(R=n.settings.templates)==null?void 0:R[M])!=null?I:"")!==ae&&(n.settings.templates[M]=ae,await n.saveSettings())},te=!1,j=null,me=async W=>{await $(W),j&&j(W)};new li.Setting(B).setName("Custom Template").setDesc("Pick a note to copy over whenever creating a new entity").addSearch(W=>{let ae=()=>{new ow(t,async I=>{await me(I.path)}).open()};W.setPlaceholder("Select a template note\u2026").setValue(G()).onChange(async R=>{te||await $(R)}),j=R=>{te=!0;try{W.setValue(R)}catch(I){W.inputEl.value=R,W.inputEl.dispatchEvent(new Event("input",{bubbles:!0})),W.inputEl.dispatchEvent(new Event("change",{bubbles:!0}))}finally{te=!1}};let Q=W.buttonEl;Q&&(Q.setAttribute("aria-label","Browse template notes"),Q.addEventListener("click",R=>{R.preventDefault(),R.stopPropagation(),ae()}));try{let R=new iw(t,W.inputEl,async I=>{await me(I.path)});e._suggesters=e._suggesters||[],e._suggesters.push(R)}catch(R){}})}let S=N.createEl("hr");S.style.margin="24px 0",S.style.opacity="0.5"}};var Is=require("obsidian");var rw=e=>e.vault.getMarkdownFiles().map(n=>{let i=e.metadataCache.getFileCache(n),o=i==null?void 0:i.frontmatter;if((typeof(o==null?void 0:o.type)=="string"?o.type.trim().toLowerCase():"")!=="person")return null;let r=typeof(o==null?void 0:o.show)=="string"?o.show.trim():"",s=typeof(o==null?void 0:o.name)=="string"?o.name.trim():"",l=r||s||n.basename,c=n.path;return{path:c,label:l,search:`${l.toLowerCase()} ${c.toLowerCase()}`}}).filter(n=>Boolean(n)).sort((n,i)=>n.label.localeCompare(i.label,void 0,{sensitivity:"base"})),V2=(e,t)=>{var r;let n=t.trim();if(!n)return null;let i=rw(e),o=n.endsWith(".md")?n:`${n}.md`,a=o.replace(/\.md$/iu,"");return(r=i.find(s=>{let l=s.path.replace(/\.md$/iu,"");return s.path===n||s.path===o||l===n||l===a}))!=null?r:null},gN=(e,t)=>{t.empty(),t.createEl("div",{text:e.label,cls:"mondo-settings-person-label"}),e.path!==e.label&&t.createEl("div",{text:e.path,cls:"mondo-settings-person-path"})},sw=class extends Is.AbstractInputSuggest{constructor(n,i,o,a){super(n,i);this.getEntries=o,this.handleSelect=a}getSuggestions(n){let i=this.getEntries(),o=n.trim().toLowerCase();return o?i.filter(a=>a.search.includes(o)):i}renderSuggestion(n,i){gN(n,i)}selectSuggestion(n){if(this.handleSelect)try{this.handleSelect(n)}catch(i){}this.close()}},lw=class extends Is.FuzzySuggestModal{constructor(n,i,o){super(n);this.getEntries=i,this.onSelect=o,this.setPlaceholder("Select a person note")}getItems(){return this.getEntries()}getItemText(n){return n.label}renderSuggestion(n,i){gN(n.item,i)}onChooseItem(n,i){try{this.onSelect(n)}catch(o){}}},yN=e=>{var l,c,u,f;let{app:t,plugin:n,containerEl:i}=e,o=i.createDiv(),a=si(o,"General","General settings for the Mondo"),r=((f=(u=(c=(l=n.settings)==null?void 0:l.selfPersonPath)==null?void 0:c.toString)==null?void 0:u.call(c))!=null?f:"").trim();new Is.Setting(a.element).setName("Who's me?").setDesc('Pick a person that will be used to mean "myself" in the Mondo.').addSearch(p=>{let d=g=>{try{p.setValue(g)}catch(v){p.inputEl.value=g,p.inputEl.dispatchEvent(new Event("input",{bubbles:!0})),p.inputEl.dispatchEvent(new Event("change",{bubbles:!0}))}},h=async g=>{let v=g.trim();n.settings.selfPersonPath!==v&&(n.settings.selfPersonPath=v,await n.saveSettings())},m=async g=>{p.inputEl.value!==g.path&&d(g.path),await h(g.path)},b=async()=>{n.settings.selfPersonPath&&(n.settings.selfPersonPath="",await n.saveSettings())};p.setPlaceholder("Select a person note\u2026").setValue(r).onChange(async g=>{let v=g.trim();if(!v){await b();return}let w=V2(t,v);w&&await m(w)});let y=p.buttonEl;y&&(y.setAttribute("aria-label","Select a person note"),y.setAttribute("title","Select a person note"),y.onclick=g=>(g.preventDefault(),g.stopPropagation(),new lw(t,()=>rw(t),async w=>{await m(w)}).open(),!1));try{let g=new sw(t,p.inputEl,()=>rw(t),async v=>{await m(v)});e._suggesters=e._suggesters||[],e._suggesters.push(g)}catch(g){}try{let g=p.clearButtonEl;g&&(g.onclick=async v=>(v.preventDefault(),v.stopPropagation(),p.setValue(""),await b(),!1))}catch(g){}}),new Is.Setting(a.element).setName("Include Frontmatter in - Send to ChatGPT").setDesc("When enabled, the Send to ChatGPT command will include the note frontmatter when no text is selected.").addToggle(p=>{var d;p.setValue(((d=n.settings)==null?void 0:d.includeFrontmatterInChatGPT)===!0).onChange(async h=>{n.settings.includeFrontmatterInChatGPT=h,await n.saveSettings()})})};var bN=require("obsidian");var vN=e=>{var f;let{plugin:t,containerEl:n}=e,i=si(n,"Timestamps","Customize how the Add Timestamp command formats new entries."),o=document.createElement("div"),a=document.createElement("code");a.style.whiteSpace="pre-wrap",o.appendChild(document.createTextNode("Example output: ")),o.appendChild(a);let r=()=>{let p=Go(t.settings.timestamp);t.settings.timestamp=p;let h=Gm({moment:(0,bN.moment)(),settings:p,includeTrailingNewLine:!0});a.textContent=h},s=async p=>{let d=Go(t.settings.timestamp),h=Go({...d,...p});return t.settings.timestamp=h,await t.saveSettings(),r(),h},l=(f=t.settings.timestamp)!=null?f:Pa;i.createSetting().setName("Template").setDesc("Moment-style format string (e.g. YYYY/MM/DD hh:mm or [YY-MM-DD hh.mm]).").addText(p=>{p.setPlaceholder(Pa.template).setValue(l.template).onChange(async d=>{let h=await s({template:d});h.template!==d&&p.setValue(h.template)})}),i.createSetting().setName("Add newline after timestamp").setDesc("When enabled, an empty line is added immediately after the timestamp.").addToggle(p=>{p.setValue(l.appendNewLine).onChange(async d=>{await s({appendNewLine:d})})});let c=i.createSetting();c.setName("Preview");let u=document.createDocumentFragment();u.appendChild(o),c.setDesc(u),r()};var wN=e=>{let{plugin:t,containerEl:n}=e;si(n,"Audio Transcription","Configure AI transcription for embedded audio.").createSetting().setName("OpenAI Whisper API key").setDesc("Used to transcribe embedded audio with OpenAI Whisper-compatible models.").addText(o=>{var a,r,s;o.setPlaceholder("sk-...").setValue((s=(r=(a=t.settings.openAIWhisperApiKey)==null?void 0:a.toString)==null?void 0:r.call(a))!=null?s:"").onChange(async l=>{t.settings.openAIWhisperApiKey=l.trim(),await t.saveSettings()});try{o.inputEl.type="password"}catch(l){}})};var TN=e=>{var r;let{plugin:t,containerEl:n,addFolderSetting:i}=e,o=si(n,"Daily Logs","Settings for Daily Logs");i(o.createSetting,"Daily root",`Where do you want to store your Daily Logs?
(Default: Daily)`,()=>{var s,l;return(l=(s=t.settings.daily)==null?void 0:s.root)!=null?l:"Daily"},async s=>{t.settings.daily=t.settings.daily||{},t.settings.daily.root=s||"Daily",await t.saveSettings()}),o.createSetting().setName("Entry format").setDesc("Filename format for daily entries (default: YYYY-MM-DD)").addText(s=>{var l,c;s.setPlaceholder("YYYY-MM-DD").setValue((c=(l=t.settings.daily)==null?void 0:l.entry)!=null?c:"YYYY-MM-DD").onChange(async u=>{t.settings.daily=t.settings.daily||{},t.settings.daily.entry=u||"YYYY-MM-DD",await t.saveSettings()});try{s.inputEl.style.textAlign="right"}catch(u){}}),o.createSetting().setName("Section Level").setDesc("Heading level used for daily notes (default: h2)").addDropdown(s=>{var u,f;let l={h1:"H1",h2:"H2",h3:"H3",h4:"H4",h5:"H5",h6:"H6"},c=(f=(u=t.settings.daily)==null?void 0:u.section)!=null?f:"h2";s.addOptions(l).setValue(c).onChange(async p=>{t.settings.daily=t.settings.daily||{},t.settings.daily.section=p,await t.saveSettings()})}),o.createSetting().setName("Section Title").setDesc("Time format for notes inside daily logs (default: HH:MM)").addText(s=>{var l,c;s.setPlaceholder("HH:MM").setValue((c=(l=t.settings.daily)==null?void 0:l.note)!=null?c:"HH:MM").onChange(async u=>{t.settings.daily=t.settings.daily||{},t.settings.daily.note=u||"HH:MM",await t.saveSettings()});try{s.inputEl.style.textAlign="right"}catch(u){}});let a=(r=t.settings.daily)==null?void 0:r.useBullets;o.createSetting().setName("Use bullets for entries").setDesc("If enabled, new daily entries will be prefixed with a bullet ('- ').").addToggle(s=>{s.setValue(a!=null?a:!0).onChange(async l=>{t.settings.daily=t.settings.daily||{},t.settings.daily.useBullets=l,await t.saveSettings()})})};var SN=e=>{var s,l;let{plugin:t,containerEl:n,addFolderSetting:i,onDisplayUpdate:o}=e,a=si(n,"Journal","Settings for the Journal feature");i(a.createSetting,"Journal root",`Where do you want to store your Journaling notes?
(Default: Journal)`,()=>{var c,u;return(u=(c=t.settings.journal)==null?void 0:c.root)!=null?u:"Journal"},async c=>{t.settings.journal=t.settings.journal||{},t.settings.journal.root=c||"Journal",await t.saveSettings()}),a.createSetting().setName("Entry format").setDesc("Filename format for journal entries (default: YYYY-MM-DD)").addText(c=>{var u,f;c.setPlaceholder("YYYY-MM-DD").setValue((f=(u=t.settings.journal)==null?void 0:u.entry)!=null?f:"YYYY-MM-DD").onChange(async p=>{t.settings.journal=t.settings.journal||{},t.settings.journal.entry=p||"YYYY-MM-DD",await t.saveSettings()});try{c.inputEl.style.textAlign="right"}catch(p){}});let r=(l=(s=t.settings.journal)==null?void 0:s.useSections)!=null?l:!1;a.createSetting().setName("Enable Sections").setDesc("Organize your journal by time entries").addToggle(c=>{c.setValue(r).onChange(async u=>{t.settings.journal=t.settings.journal||{},t.settings.journal.useSections=u,await t.saveSettings(),await o()})}),r&&(a.createSetting().setName("Section Level").setDesc("Heading level used for journal notes (default: h3)").addDropdown(c=>{var p,d;let u={inline:"Inline",h1:"H1",h2:"H2",h3:"H3",h4:"H4",h5:"H5",h6:"H6"},f=(d=(p=t.settings.journal)==null?void 0:p.section)!=null?d:"h3";c.addOptions(u).setValue(f).onChange(async h=>{t.settings.journal=t.settings.journal||{},t.settings.journal.section=h,await t.saveSettings()})}),a.createSetting().setName("Section Title").setDesc("Time format for notes inside journal entries (default: HH:MM)").addText(c=>{var u,f;c.setPlaceholder("HH:MM").setValue((f=(u=t.settings.journal)==null?void 0:u.note)!=null?f:"HH:MM").onChange(async p=>{t.settings.journal=t.settings.journal||{},t.settings.journal.note=p||"HH:MM",await t.saveSettings()});try{c.inputEl.style.textAlign="right"}catch(p){}}))};var Cd=require("obsidian");var U2=e=>e.split(",").map(t=>t.trim()).filter(t=>t.length>0),$2=e=>Array.isArray(e)?e.map(t=>typeof t=="string"?t:"").filter(t=>t.length>0):typeof e=="string"?U2(e):[],Ha=(e,t)=>{let n=$2(e).map(a=>a.trim()).filter(a=>a.length>0);if(!t||t.length===0){let a=new Set,r=[];for(let s of n){let l=s.toLowerCase();a.has(l)||(a.add(l),r.push(l))}return r}let i=new Map(t.map(a=>[a.toLowerCase(),a])),o=[];for(let a of n){let r=a.toLowerCase(),s=i.get(r);!s||o.includes(s)||o.push(s)}return o};var kN=e=>{var t,n;return e.settings=(t=e.settings)!=null?t:{},e.settings.dashboard=(n=e.settings.dashboard)!=null?n:{},e.settings.dashboard},Ps=async(e,t,n)=>{let i=kN(e),o={...i,[t]:n};e.settings.dashboard=o,Object.assign(i,o),await e.saveSettings();try{window.dispatchEvent(new CustomEvent("mondo:settings-updated"))}catch(a){}},EN=e=>{var t,n;return e.settings=(t=e.settings)!=null?t:{},e.settings.ribbonIcons=(n=e.settings.ribbonIcons)!=null?n:{},e.settings.ribbonIcons},j2=async(e,t,n)=>{let i=EN(e);if(i[t]===n){e.refreshRibbonIcons();return}i[t]=n,await e.saveSettings(),e.refreshRibbonIcons()},CN=e=>{let{plugin:t,containerEl:n}=e,i=kN(t),o=EN(t),a=br.map(m=>{let b=typeof m.name=="string"?m.name:m.type;return{type:m.type,label:`${b} (${m.type})`}}),r=Ha(i.quickSearchEntities,$t),s=Ha(i.entityTiles,$t),l=si(n,"Dashboard","Configure how the dashboard behaves and which panels are visible.");l.createSetting().setName("Open dashboard at boot").setDesc("Automatically open the Mondo dashboard when Obsidian starts.").addToggle(m=>{m.setValue(Boolean(i.openAtBoot)).onChange(async b=>{await Ps(t,"openAtBoot",b)})}),l.createSetting().setName("Force dashboard tab").setDesc("Reopen the dashboard automatically when all other tabs are closed.").addToggle(m=>{m.setValue(Boolean(i.forceTab)).onChange(async b=>{await Ps(t,"forceTab",b)})}),l.createSetting().setName("Enable Quick Tasks").setDesc("Show the Quick Tasks list on the dashboard.").addToggle(m=>{let b=i.enableQuickTasks!==!1;m.setValue(b).onChange(async y=>{await Ps(t,"enableQuickTasks",y)})}),l.createSetting().setName("Enable Relevant Notes").setDesc("Show Relevant Notes on the dashboard.").addToggle(m=>{let b=i.enableRelevantNotes!==!1;m.setValue(b).onChange(async y=>{await Ps(t,"enableRelevantNotes",y)})}),l.createSetting().setName("Disable Stats Block").setDesc("Hide the stats block on the dashboard.").addToggle(m=>{let b=i.disableStats!==!1;m.setValue(b).onChange(async y=>{await Ps(t,"disableStats",y)})});let c=m=>{let{setting:b,initialState:y,persist:g,addButtonAriaLabel:v,removeButtonAriaLabel:w}=m;b.settingEl.addClass("mondo-settings-entity-list-setting");let T=b.controlEl;T.empty();let k=T.createDiv({cls:"mondo-settings-entity-tags"}),E=k.createEl("button",{cls:"mondo-settings-entity-tags__add-button",text:"Add Entity",attr:{type:"button","aria-label":v,"aria-haspopup":"menu"}}),C=[...y],L=async x=>{C=x,await g(x)},F=()=>a.filter(x=>!C.includes(x.type)),N=()=>{let x=F().length>0;E.disabled=!x,E.setAttr("aria-disabled",x?"false":"true")},_=()=>{k.querySelectorAll(".mondo-settings-entity-tags__chip").forEach(S=>{S.remove()}),C.forEach((S,D)=>{let M=k.createSpan({cls:"mondo-settings-entity-tags__chip",attr:{draggable:"true","data-index":`${D}`,role:"listitem"}});M.createSpan({cls:"mondo-settings-entity-tags__chip-label"}).setText(S);let G=M.createSpan({cls:"mondo-settings-entity-tags__chip-remove",attr:{role:"button",tabindex:"0","aria-label":w(S)}});(0,Cd.setIcon)(G,"x");let $=async()=>{let te=C.filter((j,me)=>me!==D);await L(te),_(),E.focus()};G.addEventListener("click",()=>{$()}),G.addEventListener("keydown",te=>{(te.key==="Enter"||te.key===" ")&&(te.preventDefault(),$())}),M.addEventListener("dragstart",te=>{let j=te.dataTransfer;j&&(j.setData("text/plain",`${D}`),j.effectAllowed="move"),M.classList.add("is-dragging")}),M.addEventListener("dragend",()=>{M.classList.remove("is-dragging"),M.classList.remove("is-dragover")}),M.addEventListener("dragover",te=>{te.preventDefault(),M.classList.add("is-dragover");let j=te.dataTransfer;j&&(j.dropEffect="move")}),M.addEventListener("dragleave",()=>{M.classList.remove("is-dragover")}),M.addEventListener("drop",te=>{var R,I;te.preventDefault(),M.classList.remove("is-dragover");let j=(R=te.dataTransfer)==null?void 0:R.getData("text/plain"),me=Number.parseInt(j!=null?j:"",10);if(Number.isNaN(me))return;let W=Number.parseInt((I=M.dataset.index)!=null?I:"",10);if(Number.isNaN(W)||me===W)return;let ae=[...C],[Q]=ae.splice(me,1);Q&&(W>=ae.length?ae.push(Q):ae.splice(Math.max(W,0),0,Q),L(ae).then(()=>{_()}))}),k.insertBefore(M,E)}),k.classList.toggle("is-empty",C.length===0),N()};k.addEventListener("dragover",x=>{x.preventDefault();let S=x.dataTransfer;S&&(S.dropEffect="move")}),k.addEventListener("drop",x=>{var G;if(x.preventDefault(),x.target.closest(".mondo-settings-entity-tags__chip"))return;let S=(G=x.dataTransfer)==null?void 0:G.getData("text/plain"),D=Number.parseInt(S!=null?S:"",10);if(Number.isNaN(D))return;let M=[...C],[B]=M.splice(D,1);B&&(M.push(B),L(M).then(()=>{_()}))});let A=x=>{if(x.preventDefault(),E.disabled)return;let S=F().sort((M,B)=>M.label.localeCompare(B.label,void 0,{sensitivity:"base"}));if(S.length===0){N();return}let D=new Cd.Menu;if(S.forEach(M=>{D.addItem(B=>{B.setTitle(M.label).onClick(()=>{let G=[...C,M.type];L(G).then(()=>{_(),E.focus()})})})}),x instanceof MouseEvent&&(x.clientX!==0||x.clientY!==0))D.showAtMouseEvent(x);else{let M=E.getBoundingClientRect();D.showAtPosition({x:M.left,y:M.bottom})}};E.addEventListener("click",x=>{A(x)}),_()},u=l.createSetting().setName("IMS Quick Search Entities").setDesc("Choose which entities appear in the Quick Search list.");c({setting:u,initialState:r,persist:async m=>{await Ps(t,"quickSearchEntities",m)},addButtonAriaLabel:"Add quick search entity",removeButtonAriaLabel:m=>`Remove ${m} from quick search`});let p=l.createSetting().setName("IMS Entities").setDesc("Choose which entities appear in the IMS Entities grid.");c({setting:p,initialState:s,persist:async m=>{await Ps(t,"entityTiles",m)},addButtonAriaLabel:"Add IMS entity",removeButtonAriaLabel:m=>`Remove ${m} from IMS Entities`}),l.createSetting().setName("Ribbon Shortcuts").setDesc("Choose which stats shortcuts appear in the left ribbon.").setHeading();let h=m=>{let b=o[m.key]!==!1,y=l.createSetting().setName(m.name).setDesc(m.description),v=y.controlEl.createSpan({cls:"mondo-settings-ribbon-toggle-icon",attr:{"aria-hidden":"true"}}).createSpan();(0,Cd.setIcon)(v,m.icon),y.addToggle(w=>{w.setValue(b).onChange(async T=>{o[m.key]=T,await j2(t,m.key,T)})})};h({key:"dashboard",name:"Show Dashboard Ribbon Icon",description:"Toggle the dashboard shortcut in Obsidian's left ribbon.",icon:nd}),h({key:"audioLogs",name:"Show Audio Notes Ribbon Icon",description:"Toggle the audio notes shortcut in Obsidian's left ribbon.",icon:td}),h({key:"vaultImages",name:"Show Images Ribbon Icon",description:"Toggle the images stats shortcut in Obsidian's left ribbon.",icon:Ns}),h({key:"vaultFiles",name:"Show Files Ribbon Icon",description:"Toggle the files stats shortcut in Obsidian's left ribbon.",icon:As}),h({key:"vaultNotes",name:"Show Notes Ribbon Icon",description:"Toggle the notes stats shortcut in Obsidian's left ribbon.",icon:Ds})};var Qm=class extends To.PluginSettingTab{constructor(n,i){super(n,i);this.plugin=i}async display(){var w,T,k,E,C,L,F,N,_;let{containerEl:n}=this;n.empty(),this.plugin.settings=(w=this.plugin.settings)!=null?w:{rootPaths:Object.fromEntries(br.map(A=>[String(A.type),"/"]))},this.plugin.settings.inbox=(T=this.plugin.settings.inbox)!=null?T:"Inbox",this.plugin.settings.journal=(k=this.plugin.settings.journal)!=null?k:{root:"Journal",entry:"YYYY-MM-DD"},this.plugin.settings.daily=(E=this.plugin.settings.daily)!=null?E:{root:"Daily",entry:"YYYY-MM-DD",note:"HH:MM"},this.plugin.settings.templates=(C=this.plugin.settings.templates)!=null?C:Object.fromEntries(br.map(A=>[String(A.type),""])),this.plugin.settings.openAITranscriptionPolishEnabled=typeof this.plugin.settings.openAITranscriptionPolishEnabled=="boolean"?this.plugin.settings.openAITranscriptionPolishEnabled:!0,this.plugin.settings.timestamp=Go((L=this.plugin.settings.timestamp)!=null?L:Pa);let i=(F=this.plugin.settings.dashboard)!=null?F:{},o=i.disableStats,a=i.enableStats,r=i.quickSearchEntities,s=i.entityTiles,l=o===!0?!0:o===!1?!1:a!==!0,c=Ha(r,$t),u=Ha(s,$t);this.plugin.settings.dashboard={openAtBoot:i.openAtBoot===!0,forceTab:i.forceTab===!0,enableQuickTasks:i.enableQuickTasks!==!1,enableRelevantNotes:i.enableRelevantNotes!==!1,disableStats:l,quickSearchEntities:c,entityTiles:u};let f=(N=this.plugin.settings.ribbonIcons)!=null?N:{};this.plugin.settings.ribbonIcons={dashboard:f.dashboard!==!1,audioLogs:f.audioLogs!==!1,vaultImages:f.vaultImages!==!1,vaultFiles:f.vaultFiles!==!1,vaultNotes:f.vaultNotes!==!1};let p=(_=this.plugin.settings.vaultImages)!=null?_:{};this.plugin.settings.vaultImages={viewMode:p.viewMode==="grid"?"grid":"wall"};let d=(A,x=[])=>{x.push(A.path===""?"/":A.path);for(let S of A.children)S instanceof To.TFolder&&d(S,x);return x},h=d(this.app.vault.getRoot());class m extends To.AbstractInputSuggest{constructor(S,D,M){super(S,D);this._onPick=M}getSuggestions(S){let D=S.toLowerCase();return h.filter(M=>M.toLowerCase().includes(D))}renderSuggestion(S,D){D.setText(S)}selectSuggestion(S){if(this._onPick)try{this._onPick(S)}catch(D){}else{let D=this.inputEl;D&&(D.value=S,D.dispatchEvent(new Event("input",{bubbles:!0})),D.dispatchEvent(new Event("change",{bubbles:!0})))}try{this.close()}catch(D){}}}let b=(A,x,S,D,M)=>{let G=(A instanceof HTMLElement?()=>new To.Setting(A):A)().setName(x).setDesc(S);return G.addSearch($=>{var te;$.setPlaceholder("/").setValue((te=D())!=null?te:"/").onChange(async j=>{await M(j||"/")});try{let j=new m(this.app,$.inputEl,async me=>{try{$.setValue(me)}catch(W){$.inputEl.value=me,$.inputEl.dispatchEvent(new Event("input",{bubbles:!0})),$.inputEl.dispatchEvent(new Event("change",{bubbles:!0}))}try{await M(me||"/")}catch(W){}});this._suggesters=this._suggesters||[],this._suggesters.push(j)}catch(j){}}),G};class y extends To.Modal{constructor(S,D,M){super(S);this.title=D,this.contentNodes=M}onOpen(){let{contentEl:S,titleEl:D}=this;D.setText(this.title),S.empty(),this.contentNodes.forEach(G=>{if(typeof G=="string"){let $=S.createEl("p",{text:G});$.style.whiteSpace="pre-wrap"}else S.appendChild(G)}),S.createDiv({cls:"modal-button-container"}).createEl("button",{text:"Close"}).addEventListener("click",()=>this.close())}}let g=(A,x)=>{let S=document.createElement("ul");S.style.paddingLeft="1.2em",x.forEach(M=>{let B=document.createElement("li");B.textContent=M,S.appendChild(B)}),new y(this.app,A,[S]).open()},v=async()=>await new Promise(A=>{class x extends To.Modal{onOpen(){let{contentEl:D,titleEl:M}=this;M.setText("Restart required"),D.empty(),D.createEl("p",{text:"Your vault needs to be restarted for these changes to take effect. Restart now?"});let B=D.createDiv({cls:"modal-button-container"}),G=B.createEl("button",{text:"I'll do it later"}),$=B.createEl("button",{text:"Yes"});$.addClass("mod-cta"),G.addEventListener("click",()=>{this.close(),A(!1)}),$.addEventListener("click",()=>{this.close(),A(!0)})}}new x(this.app).open()});yN({app:this.app,plugin:this.plugin,containerEl:n}),CN({plugin:this.plugin,containerEl:n}),vN({plugin:this.plugin,containerEl:n}),wN({plugin:this.plugin,containerEl:n}),TN({plugin:this.plugin,containerEl:n,addFolderSetting:b}),SN({plugin:this.plugin,containerEl:n,addFolderSetting:b,onDisplayUpdate:()=>this.display()}),await hN({app:this.app,plugin:this.plugin,containerEl:n,folderPaths:h,addFolderSetting:b,showErrorModal:g,showRestartPrompt:v})}};var Dn=require("obsidian"),Y2="gpt-4o-mini-tts",Md=["alloy","ash","coral","ember","lumen","pearl","sage","sol"],q2="/voiceover",MN="audio/mpeg",G2="Hello from Obsidian Mondo. This is a quick voice preview.",K2=()=>{let e=new Date;return[e.getFullYear().toString(),String(e.getMonth()+1).padStart(2,"0"),String(e.getDate()).padStart(2,"0"),String(e.getHours()).padStart(2,"0"),String(e.getMinutes()).padStart(2,"0")].join("")},Q2=e=>Array.from(new Uint8Array(e)).map(t=>t.toString(16).padStart(2,"0")).join(""),X2=e=>{let t=5381;for(let n=0;n<e.length;n+=1)t=t*33^e.charCodeAt(n);return(t>>>0).toString(16).padStart(8,"0")},J2=async e=>{let t=globalThis.crypto;if(t!=null&&t.subtle)try{let n=new TextEncoder,i=await t.subtle.digest("SHA-256",n.encode(e));return Q2(i)}catch(n){console.warn("Mondo: failed to hash content via Web Crypto",n)}return X2(e)},W2=e=>{var n,i,o;if(!e)return null;if(typeof e=="string")return e.trim()||null;if(typeof e!="object")return null;let t=(o=(i=(n=e.id)!=null?n:e.name)!=null?i:e.voice)!=null?o:e.value;return typeof t=="string"&&t.trim()?t.trim():null},cw=class extends Dn.Modal{constructor(n,i){super(n);this.audioEl=null;this.cancelHandler=null;this.setStatus=n=>{this.statusEl.setText(n),this.clearButtons(),this.clearAudio()};this.showGenerating=n=>{this.titleEl.setText("Generating voiceover"),this.statusEl.setText("Generating audio\u2026"),this.clearAudio(),this.cancelHandler=n,this.renderButtons([{text:"Cancel",action:()=>{var i;(i=this.cancelHandler)==null||i.call(this)},variant:"neutral"}])};this.showPlayer=n=>{this.titleEl.setText(`playing: ${this.noteTitle}`),this.statusEl.setText("Voiceover ready to play."),this.clearAudio(),this.cancelHandler=null;let i=this.app.vault.getResourcePath(n);this.audioEl=this.audioContainerEl.createEl("audio",{attr:{controls:"true"}}),this.audioEl.src=i,this.audioEl.play().catch(o=>{console.warn("Mondo: unable to autoplay voiceover",o)}),this.renderButtons([{text:"Close",action:()=>this.close(),variant:"accent"}])};this.showError=n=>{this.titleEl.setText("Voiceover error"),this.statusEl.setText(n),this.clearAudio(),this.cancelHandler=null,this.renderButtons([{text:"Close",action:()=>this.close(),variant:"accent"}])};this.clearAudio=()=>{var n;(n=this.audioEl)==null||n.pause(),this.audioContainerEl.empty(),this.audioEl=null};this.renderButtons=n=>{this.clearButtons(),n.forEach(i=>{let o=this.buttonsEl.createEl("button",{cls:"mondo-voiceover-button",text:i.text});i.variant==="accent"&&o.addClass("mondo-voiceover-button--accent"),i.variant==="neutral"&&o.addClass("mondo-voiceover-button--neutral"),o.addEventListener("click",()=>{i.action()})})};this.clearButtons=()=>{this.buttonsEl.empty()};this.noteTitle=i}onOpen(){this.modalEl.addClass("mondo-voiceover-modal"),this.titleEl.setText("Voiceover"),this.statusEl=this.contentEl.createEl("p",{cls:"mondo-voiceover-status"}),this.audioContainerEl=this.contentEl.createDiv({cls:"mondo-voiceover-audio"}),this.buttonsEl=this.contentEl.createDiv({cls:"mondo-voiceover-buttons"}),this.setStatus("Preparing voiceover\u2026")}onClose(){var n;(n=this.audioEl)==null||n.pause(),this.audioEl=null,this.cancelHandler=null,this.contentEl.empty()}},Xm=class{constructor(t){this.activeNotes=new Map;this.previewAudio=null;this.previewUrl=null;this.previewController=null;this.initialize=()=>{};this.dispose=()=>{var t;this.cachedVoices=void 0,this.activeNotes.clear(),(t=this.previewController)==null||t.abort(),this.previewController=null,this.stopPreview()};this.getAvailableVoices=async()=>{var i,o,a;if(this.cachedVoices)return this.cachedVoices;let t=this.getApiKey();if(!t)return[];try{let r=await fetch("https://api.openai.com/v1/audio/voices",{method:"GET",headers:{Authorization:`Bearer ${t}`}});if(!r.ok)throw await this.resolveError(r);let s=await r.json(),c=((o=(i=Array.isArray(s.voices)?s.voices:null)!=null?i:Array.isArray(s.data)?s.data:null)!=null?o:[]).map(u=>W2(u)).filter(u=>typeof u=="string");if(c.length===0)this.cachedVoices=[...Md];else{let u=Array.from(new Set(c));this.cachedVoices=u.length?u:[...Md]}}catch(r){console.error("Mondo: failed to load OpenAI voices",r),this.cachedVoices=[...Md]}let n=(a=this.cachedVoices)!=null?a:[...Md];return this.cachedVoices=n,n};this.generateVoiceover=async(t,n,i,o)=>{var c,u,f,p,d;let a=(c=o==null?void 0:o.scope)!=null?c:"selection",r=i.trim();if(!r){new Dn.Notice("Provide some text before generating a voiceover.");return}let s=this.getApiKey();if(!s){new Dn.Notice("Set your OpenAI Whisper API key in the Mondo settings before generating a voiceover.");return}if(this.activeNotes.has(t.path)){new Dn.Notice("A voiceover is already being generated for this note.");return}let l=new cw(this.plugin.app,t.basename||t.name);l.open(),l.setStatus("Checking for existing voiceover\u2026");try{let h=this.resolveVoiceoverDirectory(),m=(d=(p=(f=(u=this.plugin.settings)==null?void 0:u.openAIVoice)==null?void 0:f.trim)==null?void 0:p.call(f))!=null?d:"";m||(m=(await this.resolveVoice()).trim());let b=await J2(`${m}::${r}`),y=await this.findExistingVoiceover(h,b);if(y){l.showPlayer(y),a==="note"&&await this.associateVoiceoverWithNote(t,y);return}let g=new AbortController;this.activeNotes.set(t.path,g),l.showGenerating(()=>{g.abort(),l.setStatus("Cancelling voiceover\u2026")});let v=await this.requestVoiceover(r,m,s,g.signal),w=await this.saveAudioFile(t,v,h,b);l.showPlayer(w),a==="note"&&await this.associateVoiceoverWithNote(t,w),new Dn.Notice(`Voiceover saved to ${w.path}`)}catch(h){if(h instanceof Error&&h.name==="AbortError")console.info("Mondo: voiceover generation cancelled"),l.showError("Voiceover generation cancelled.");else{console.error("Mondo: failed to generate voiceover",h);let b=h instanceof Error?h.message:"Unknown voiceover error.";l.showError(`Voiceover failed: ${b}`),new Dn.Notice(`Voiceover failed: ${b}`)}}finally{let h=this.activeNotes.get(t.path);h!=null&&h.signal.aborted,this.activeNotes.delete(t.path)}};this.resolveVoice=async()=>{var o,a,r;let t=(r=(a=(o=this.plugin.settings)==null?void 0:o.openAIVoice)==null?void 0:a.trim)==null?void 0:r.call(a);if(t)return t;let n=await this.getAvailableVoices();if(n.length===0)return Md[0];let i=n[0];return this.plugin.settings.openAIVoice=i,await this.plugin.saveSettings(),i};this.getApiKey=()=>{var t,n,i,o;return(o=(i=(n=(t=this.plugin.settings)==null?void 0:t.openAIWhisperApiKey)==null?void 0:n.trim)==null?void 0:i.call(n))!=null?o:""};this.previewVoice=async t=>{var a,r;let n=(a=t==null?void 0:t.trim)==null?void 0:a.call(t);if(!n)throw new Error("Select a voice to preview.");let i=this.getApiKey();if(!i)throw new Error("Set your OpenAI Whisper API key in the Mondo settings before previewing voices.");(r=this.previewController)==null||r.abort(),this.previewController=null,this.stopPreview();let o=new AbortController;this.previewController=o;try{let s=await this.requestVoiceover(G2,n,i,o.signal);if(o.signal.aborted)return;this.stopPreview();let l=new Blob([s],{type:MN}),c=URL.createObjectURL(l),u=new Audio(c);this.previewAudio=u,this.previewUrl=c,u.addEventListener("ended",this.stopPreview),u.addEventListener("error",this.stopPreview),await u.play()}catch(s){if(o.signal.aborted)return;throw console.error("Mondo: failed to preview voice",s),s instanceof Error?s:new Error("Failed to preview voice.")}finally{this.previewController===o&&(this.previewController=null)}};this.requestVoiceover=async(t,n,i,o)=>{let a=await fetch("https://api.openai.com/v1/audio/speech",{method:"POST",headers:{Authorization:`Bearer ${i}`,"Content-Type":"application/json",Accept:MN},body:JSON.stringify({model:Y2,voice:n,input:t}),signal:o});if(!a.ok)throw await this.resolveError(a);return a.arrayBuffer()};this.stopPreview=()=>{let t=this.previewAudio;t&&(t.pause(),t.removeEventListener("ended",this.stopPreview),t.removeEventListener("error",this.stopPreview),t.src=""),this.previewUrl&&URL.revokeObjectURL(this.previewUrl),this.previewAudio=null,this.previewUrl=null};this.resolveError=async t=>{var n,i,o;try{let a=await t.json(),r=(o=(i=(n=a==null?void 0:a.error)==null?void 0:n.message)!=null?i:a==null?void 0:a.message)!=null?o:t.statusText;return new Error(r||"Request failed")}catch(a){return console.warn("Mondo: unable to parse OpenAI error response",a),new Error(t.statusText||"Request failed")}};this.saveAudioFile=async(t,n,i,o)=>{let a=(0,Dn.normalizePath)(i);await this.ensureFolder(a);let r=this.plugin.app.vault,s=`Voiceover ${K2()} ${o}.mp3`,l=(0,Dn.normalizePath)(`${a}/${s}`);return await r.createBinary(l,n)};this.associateVoiceoverWithNote=async(t,n)=>{try{await this.plugin.app.fileManager.processFrontMatter(t,i=>{let o=typeof i.voiceover=="string"?i.voiceover.trim():"",l=`[[${this.plugin.app.metadataCache.fileToLinktext(n,t.path).trim()||n.path}]]`;o!==l&&(i.voiceover=l)})}catch(i){console.error("Mondo: failed to associate voiceover with note",i)}};this.ensureFolder=async t=>{let n=this.plugin.app.vault,i=n.adapter,o=(0,Dn.normalizePath)(t);if(!await i.exists(o))try{await n.createFolder(o)}catch(r){if(r instanceof Error&&r.message.includes("exist"))return;throw r}};this.resolveVoiceoverDirectory=()=>{var o;let t=(o=this.plugin.settings)==null?void 0:o.voiceoverCachePath,i=(typeof t=="string"?t.trim():"")||q2;return(0,Dn.normalizePath)(i)};this.findExistingVoiceover=async(t,n)=>{let i=this.plugin.app.vault.adapter,o=(0,Dn.normalizePath)(t);if(!await i.exists(o))return null;try{let s=(await i.list(o)).files.find(c=>c.endsWith(`${n}.mp3`));if(!s)return null;let l=this.plugin.app.vault.getAbstractFileByPath((0,Dn.normalizePath)(s));return l instanceof Dn.TFile?l:null}catch(r){return console.error("Mondo: failed to list voiceover cache folder",r),null}};this.plugin=t}};var NN=O(fe()),AN=O(Fo()),pn=require("obsidian");var So=O(fe()),xN=require("obsidian");var Va=O(P());Sr();var Z2=(e,t)=>t?e.status==="recording"?"Stop voice capture":e.status==="processing"?"Processing voice capture":e.status==="success"?"Voice capture inserted":e.status==="error"?"Retry voice capture":"Start voice capture":"",e_=e=>e.status==="recording"?"Recording\u2026":e.status==="processing"?"Processing\u2026":e.status==="success"?"Inserted":e.status==="error"?"Retry":"Record",t_=e=>e.status==="recording"?"waveform":e.status==="processing"?"loader-2":e.status==="success"?"check":e.status==="error"?"alert-circle":Ho,Jm=({controller:e,visible:t,disabled:n,tooltip:i})=>{var y;let[o,a]=(0,So.useState)(()=>e.getState()),[r,s]=(0,So.useState)(null),[l,c]=(0,So.useState)(null);(0,So.useEffect)(()=>e.subscribe(g=>{a(g),g.status!=="error"&&s(null)}),[e]),(0,So.useEffect)(()=>{t||e.reset()},[e,t]),(0,So.useEffect)(()=>{if(!l)return;let g=t_(o);(0,xN.setIcon)(l,g),o.status==="processing"?l.classList.add("mondo-voice-fab-icon--spin"):l.classList.remove("mondo-voice-fab-icon--spin")},[l,o]);let u=(0,So.useMemo)(()=>Z2(o,t),[o,t]),f=(0,So.useMemo)(()=>e_(o),[o]),p=(y=o.errorMessage)!=null?y:r,d=o.status==="processing",h=o.status==="recording",m=t&&!n&&!d,b=()=>{if(t){if(h){e.stop();return}if(!m){i&&s(i);return}s(null),e.start()}};return(0,Va.jsxs)("div",{className:`mondo-voice-fab mondo-voice-fab--desktop ${t?"mondo-voice-fab--visible":""}`.trim(),children:[(0,Va.jsxs)("button",{className:`mondo-voice-fab__button mondo-voice-fab__button--${o.status}`,type:"button","aria-label":u,"aria-pressed":h,disabled:!t||d,onClick:b,title:i!=null?i:"Record voice note",children:[(0,Va.jsx)("span",{className:"mondo-voice-fab__visualizer","aria-hidden":!0,children:o.levels.map((g,v)=>(0,Va.jsx)("span",{className:"mondo-voice-fab__bar",style:{transform:`scaleY(${.2+g*.8})`}},v))}),(0,Va.jsx)("span",{className:"mondo-voice-fab__icon","aria-hidden":!0,ref:c})]}),t?(0,Va.jsx)("div",{className:"mondo-voice-fab__status","aria-live":"polite",children:f}):null,p&&t?(0,Va.jsx)("div",{className:"mondo-voice-fab__message",role:"status",children:p}):null]})};var uw=O(P()),n_=5e3,i_=.3,o_=5,Wm=class{constructor(t){this.container=null;this.root=null;this.recordingContext=null;this.processingNotice=null;this.controller=null;this.unsubscribeController=null;this.toolbarButton=null;this.toolbarIcon=null;this.toolbarLabel=null;this.toolbarVisible=!1;this.toolbarDisabled=!1;this.toolbarRetryTimeout=null;this.transcriptionOverlay=null;this.overlayContainer=null;this.overlayRecordingTimer=null;this.overlayProcessingTimer=null;this.overlayRecordingStartedAt=null;this.overlayProcessingStartedAt=null;this.overlayRecordingElapsedEl=null;this.overlayProcessingEstimateEl=null;this.processingEstimateSeconds=null;this.lastRecordingDurationMs=null;this.transcriptionAbortController=null;this.lastDictationStatus="idle";this.cancellationNotice=null;this.initialize=()=>{if(this.container)return;let t=document.createElement("div");t.className="mondo-voice-fab-container",document.body.appendChild(t),this.container=t,this.root=(0,AN.createRoot)(t),this.render(),this.plugin.registerEvent(this.plugin.app.workspace.on("active-leaf-change",()=>{this.render()})),this.plugin.registerEvent(this.plugin.app.workspace.on("layout-change",()=>{this.render()})),this.plugin.registerEvent(this.plugin.app.workspace.on("file-open",()=>{this.render()}))};this.dispose=()=>{var t,n,i,o,a,r;(t=this.processingNotice)==null||t.hide(),this.processingNotice=null,(n=this.unsubscribeController)==null||n.call(this),this.unsubscribeController=null,(i=this.controller)==null||i.reset(),this.controller=null,this.root&&(this.root.unmount(),this.root=null),(o=this.container)!=null&&o.parentElement&&this.container.parentElement.removeChild(this.container),this.container=null,this.destroyToolbarButton(),this.recordingContext=null,(a=this.cancellationNotice)==null||a.hide(),this.cancellationNotice=null,(r=this.transcriptionAbortController)==null||r.abort(),this.transcriptionAbortController=null,this.teardownTranscriptionOverlay(),this.transcriptionOverlay=null};this.ensureController=()=>(this.controller||(this.controller=new Op({onStart:this.handleStart,onAbort:this.handleAbort,onSubmit:this.handleSubmit}),this.unsubscribeController=this.controller.subscribe(t=>{this.updateToolbarState(t),this.updateTranscriptionOverlay(t)})),this.controller);this.getActiveMarkdownView=()=>{var t;return(t=this.plugin.app.workspace.getActiveViewOfType(pn.MarkdownView))!=null?t:null};this.getApiKey=()=>this.transcriptionService.getApiKey();this.render=()=>{if(!this.root||!this.container)return;let t=this.ensureController(),n=this.getActiveMarkdownView(),i=Boolean(n),o=this.getApiKey(),a=o?void 0:"Set your OpenAI API key in the Mondo settings.";this.container.style.display=i?"block":"none",this.root.render((0,uw.jsx)(NN.default.StrictMode,{children:(0,uw.jsx)(Jm,{controller:t,visible:i,disabled:!o,tooltip:a})})),this.toolbarVisible=i,this.toolbarDisabled=!o,this.toolbarTooltip=a,this.updateToolbarButton()};this.handleStart=async()=>{let t=this.getActiveMarkdownView();if(!t)throw new Error("Open a markdown note to record a voice snippet.");let n=t.editor,i=t.file;if(!n||!i)throw new Error("Unable to access the active note editor.");this.recordingContext={editor:n,file:i,view:t,cursor:n.getCursor()}};this.handleAbort=()=>{this.recordingContext=null,this.teardownTranscriptionOverlay()};this.handleSubmit=async t=>{var a,r,s;let n=this.recordingContext,i=this.getApiKey();if(!n)throw new DOMException("Transcription canceled.","AbortError");if(!i)throw new Error("Set your OpenAI API key in the Mondo settings.");(a=this.processingNotice)==null||a.hide(),this.processingNotice=new pn.Notice("Processing voice note\u2026",n_);let o=new AbortController;this.transcriptionAbortController=o;try{let l=await this.transcriptionService.process(t,{signal:o.signal});this.insertText(l,n),new pn.Notice("Voice note inserted into the document.")}catch(l){let c=l instanceof Error?l:new Error("Failed to process voice note.");if(c.name==="AbortError"||l instanceof DOMException&&l.name==="AbortError")throw console.info("Mondo: voice transcription aborted by user."),new Error("Transcription canceled.");let f=((r=c.message)==null?void 0:r.trim())||"Failed to process voice note.";throw console.error("Mondo: failed to process voice note",l),new pn.Notice(`Voice note failed: ${f}`),new Error(f)}finally{(s=this.processingNotice)==null||s.hide(),this.processingNotice=null,this.recordingContext=null,this.transcriptionAbortController=null}};this.handleToolbarClick=()=>{this.toggleRecording({showDisabledNotice:!1})};this.resolveController=t=>{this.render();let n=this.ensureController();return this.toolbarVisible?this.toolbarDisabled?(t&&this.toolbarTooltip&&new pn.Notice(this.toolbarTooltip),null):n:(t&&new pn.Notice("Open a markdown note to record a voice snippet."),null)};this.startWithController=async(t,n)=>{let i=t.getState();return i.status==="recording"?(n&&new pn.Notice("Dictation already in progress."),"recording"):i.status==="processing"?(n&&new pn.Notice("Please wait for the current dictation to finish processing."),"processing"):(await t.start(),"started")};this.startDictation=async({showDisabledNotice:t=!0}={})=>{let n=this.resolveController(t);return n?this.startWithController(n,t):"unavailable"};this.stopDictation=({showDisabledNotice:t=!0}={})=>{let n=this.resolveController(t);if(!n)return"unavailable";let i=n.getState();return i.status==="recording"?(n.stop(),"stopped"):(t&&(i.status==="processing"?new pn.Notice("Please wait for the current dictation to finish processing."):i.status==="idle"&&new pn.Notice("No active dictation to stop.")),i.status)};this.getDictationStatus=()=>{var t,n;return(n=(t=this.controller)==null?void 0:t.getState().status)!=null?n:"idle"};this.toggleRecording=async({showDisabledNotice:t=!0}={})=>{let n=this.resolveController(t);return n?n.getState().status==="recording"?(n.stop(),"stopped"):this.startWithController(n,t):"unavailable"};this.updateToolbarButton=()=>{if(!pn.Platform.isMobileApp||!this.toolbarVisible){this.destroyToolbarButton();return}let t=this.findToolbarContainer();if(!t){this.scheduleToolbarRetry();return}(!this.toolbarButton||!this.toolbarButton.isConnected)&&this.createToolbarButton(t),this.controller&&this.updateToolbarState(this.controller.getState())};this.scheduleToolbarRetry=()=>{this.toolbarRetryTimeout===null&&(this.toolbarRetryTimeout=window.setTimeout(()=>{this.toolbarRetryTimeout=null,this.updateToolbarButton()},250))};this.createToolbarButton=t=>{this.destroyToolbarButton();let n=document.createElement("button");n.type="button",n.className="mondo-mobile-toolbar-button mondo-dictation-toolbar-button",n.addEventListener("click",this.handleToolbarClick);let i=document.createElement("span");i.className="mondo-mobile-toolbar-button__icon",n.appendChild(i),(0,pn.setIcon)(i,Ho);let o=document.createElement("span");o.className="mondo-mobile-toolbar-button__label",o.textContent="Start dictation",n.appendChild(o),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),this.toolbarButton=n,this.toolbarIcon=i,this.toolbarLabel=o,this.controller&&this.updateToolbarState(this.controller.getState())};this.destroyToolbarButton=()=>{this.toolbarRetryTimeout!==null&&(window.clearTimeout(this.toolbarRetryTimeout),this.toolbarRetryTimeout=null),this.toolbarButton&&(this.toolbarButton.removeEventListener("click",this.handleToolbarClick),this.toolbarButton.remove(),this.toolbarButton=null),this.toolbarIcon=null,this.toolbarLabel=null};this.findToolbarContainer=()=>{let t=[".mod-mobile .mobile-toolbar-options",".mod-mobile .mobile-toolbar",".mod-mobile .cm-mobile-toolbar"];for(let n of t){let i=document.body.querySelector(n);if(i instanceof HTMLElement)return i}return null};this.updateToolbarState=t=>{let n=this.toolbarButton;if(!n)return;let i=t.status==="processing",o=t.status==="recording",a=t.status==="error",r=t.status==="success";n.classList.toggle("mondo-dictation-toolbar-button--recording",o),n.classList.toggle("mondo-dictation-toolbar-button--processing",i),n.classList.toggle("mondo-dictation-toolbar-button--error",a),n.classList.toggle("mondo-dictation-toolbar-button--success",r),n.setAttribute("aria-pressed",o?"true":"false"),n.disabled=this.toolbarDisabled||i;let s=this.toolbarIcon;if(s){let l=this.resolveIconName(t.status);(0,pn.setIcon)(s,l),i?s.classList.add("mondo-voice-fab-icon--spin"):s.classList.remove("mondo-voice-fab-icon--spin")}this.applyToolbarLabels(t)};this.applyToolbarLabels=t=>{let n=this.toolbarButton;if(!n)return;let i=this.toolbarTooltip,o=this.getToolbarAccessibleLabel(t),a=i!=null?i:o;n.setAttribute("aria-label",o),n.setAttribute("title",a),this.toolbarLabel&&(this.toolbarLabel.textContent=this.getToolbarActionLabel(t))};this.resolveIconName=t=>t==="recording"?"waveform":t==="processing"?"loader-2":t==="success"?"check":t==="error"?"alert-circle":Ho;this.activateMobileToolbar=()=>{pn.Platform.isMobileApp&&this.render()};this.getToolbarAccessibleLabel=t=>this.toolbarDisabled&&this.toolbarTooltip?"Start dictation":t.status==="recording"?"Stop dictation":t.status==="processing"?"Processing dictation":t.status==="success"?"Dictation inserted":t.status==="error"?"Retry dictation":"Start dictation";this.getToolbarActionLabel=t=>t.status==="recording"?"Stop":t.status==="processing"?"Processing":t.status==="success"?"Done":t.status==="error"?"Retry":"Start dictation";this.ensureOverlay=()=>(this.transcriptionOverlay||(this.transcriptionOverlay=new jp),this.transcriptionOverlay);this.mountOverlayContainer=()=>{let n=this.ensureOverlay().ensureContainer({className:"mondo-transcription-stage"});return n.replaceChildren(),this.overlayContainer=n,n};this.clearRecordingTimer=()=>{this.overlayRecordingTimer!==null&&(window.clearInterval(this.overlayRecordingTimer),this.overlayRecordingTimer=null)};this.clearProcessingTimer=()=>{this.overlayProcessingTimer!==null&&(window.clearInterval(this.overlayProcessingTimer),this.overlayProcessingTimer=null)};this.formatElapsedDuration=t=>{let n=Math.max(0,Math.floor(t/1e3)),i=Math.floor(n/3600),o=Math.floor(n%3600/60),a=n%60;return i>0?`${i}:${o.toString().padStart(2,"0")}:${a.toString().padStart(2,"0")}`:o>0?`${o}:${a.toString().padStart(2,"0")}`:`${a}s`};this.formatDuration=t=>{let n=Math.max(0,Math.round(t)),i=Math.floor(n/3600),o=Math.floor(n%3600/60),a=n%60,r=[];return i>0&&r.push(`${i}h`),o>0&&r.push(`${o}m`),i===0&&(o===0||a>0)&&r.push(`${a}s`),r.length===0?"0s":r.join(" ")};this.refreshRecordingTimer=()=>{if(!this.overlayRecordingElapsedEl||!this.overlayRecordingStartedAt)return;let t=Date.now()-this.overlayRecordingStartedAt;this.overlayRecordingElapsedEl.setText(this.formatElapsedDuration(t))};this.estimateProcessingSeconds=()=>{if(this.lastRecordingDurationMs==null)return null;let t=Math.max(1,Math.round(this.lastRecordingDurationMs/1e3));return Math.max(o_,Math.round(t*i_))};this.refreshProcessingEstimate=()=>{if(!this.overlayProcessingEstimateEl)return;let t=this.processingEstimateSeconds;if(t==null){this.overlayProcessingEstimateEl.setText("Estimating remaining time\u2026");return}this.overlayProcessingStartedAt||(this.overlayProcessingStartedAt=Date.now());let n=Math.max(0,Math.floor((Date.now()-this.overlayProcessingStartedAt)/1e3)),i=Math.max(0,t-n);if(i>0){this.overlayProcessingEstimateEl.setText(`\u2248${this.formatDuration(i)} remaining`);return}this.overlayProcessingEstimateEl.setText("Finalizing transcription\u2026")};this.beginRecordingOverlay=()=>{this.clearProcessingTimer(),this.processingEstimateSeconds=null,this.overlayProcessingEstimateEl=null,this.overlayProcessingStartedAt=null;let n=this.mountOverlayContainer().createDiv({cls:"mondo-transcription-stage__card"});n.createDiv({cls:"mondo-transcription-stage__message",text:"Speak naturally"});let i=n.createDiv({cls:"mondo-transcription-stage__timer",text:this.formatElapsedDuration(0)});this.overlayRecordingElapsedEl=i,n.createDiv({cls:"mondo-transcription-stage__hint",text:"Tap when you\u2019re ready to transcribe."});let o=n.createDiv({cls:"mondo-transcription-stage__actions"}),a=o.createEl("button",{cls:"mondo-transcription-stage__button mondo-transcription-stage__button--primary mod-cta",text:"Start Transcription"});a.type="button",a.addEventListener("click",()=>{a.disabled||(a.disabled=!0,a.classList.add("mondo-transcription-stage__button--pending"),a.textContent="Starting\u2026",this.startTranscriptionFromOverlay())});let r=o.createEl("button",{cls:"mondo-transcription-stage__button mondo-transcription-stage__button--secondary",text:"Cancel"});r.type="button",r.addEventListener("click",this.cancelDictationFlow);let s=this.ensureOverlay();s.setDismissHandler(()=>{this.cancelDictationFlow()}),s.acquireWakeLock(),this.clearRecordingTimer(),this.overlayRecordingTimer=window.setInterval(this.refreshRecordingTimer,1e3),this.refreshRecordingTimer()};this.beginProcessingOverlay=()=>{this.clearRecordingTimer(),this.overlayRecordingElapsedEl=null;let n=this.mountOverlayContainer().createDiv({cls:"mondo-transcription-stage__card mondo-transcription-stage__card--processing"});n.createDiv({cls:"mondo-transcription-stage__message",text:"Transcribing your note\u2026"});let i=n.createDiv({cls:"mondo-transcription-stage__estimate"});this.overlayProcessingEstimateEl=i;let a=n.createDiv({cls:"mondo-transcription-stage__actions mondo-transcription-stage__actions--inline"}).createEl("button",{cls:"mondo-transcription-stage__button mondo-transcription-stage__button--secondary",text:"Cancel"});a.type="button",a.addEventListener("click",this.cancelDictationFlow);let r=this.ensureOverlay();r.setDismissHandler(()=>{this.cancelDictationFlow()}),r.acquireWakeLock(),this.processingEstimateSeconds=this.estimateProcessingSeconds(),this.overlayProcessingStartedAt=Date.now(),this.refreshProcessingEstimate(),this.clearProcessingTimer(),this.overlayProcessingTimer=window.setInterval(this.refreshProcessingEstimate,1e3)};this.startTranscriptionFromOverlay=()=>{let t=this.controller;!t||t.getState().status!=="recording"||t.stop()};this.cancelDictationFlow=()=>{var i,o;let t=this.controller;if(!t){this.teardownTranscriptionOverlay();return}t.getState().status==="processing"&&((i=this.transcriptionAbortController)==null||i.abort(),(o=this.cancellationNotice)==null||o.hide(),this.cancellationNotice=new pn.Notice("Transcription canceled.")),t.reset(),this.teardownTranscriptionOverlay()};this.updateTranscriptionOverlay=t=>{var i;let n=t.status;n==="recording"?(this.lastDictationStatus!=="recording"&&(this.overlayRecordingStartedAt=Date.now(),this.lastRecordingDurationMs=null,this.beginRecordingOverlay()),this.refreshRecordingTimer()):n==="processing"?(this.lastDictationStatus==="recording"&&this.overlayRecordingStartedAt&&(this.lastRecordingDurationMs=Date.now()-this.overlayRecordingStartedAt),this.lastDictationStatus!=="processing"&&this.beginProcessingOverlay(),this.refreshProcessingEstimate()):(n==="success"&&((i=this.cancellationNotice)==null||i.hide(),this.cancellationNotice=null),this.teardownTranscriptionOverlay()),this.lastDictationStatus=n};this.teardownTranscriptionOverlay=()=>{this.clearRecordingTimer(),this.clearProcessingTimer(),this.overlayRecordingElapsedEl=null,this.overlayProcessingEstimateEl=null,this.overlayRecordingStartedAt=null,this.overlayProcessingStartedAt=null,this.processingEstimateSeconds=null,this.lastRecordingDurationMs=null,this.overlayContainer=null;let t=this.transcriptionOverlay;t&&(t.setDismissHandler(null),t.clear(),t.releaseWakeLock(),t.destroy())};this.insertText=(t,n)=>{var d;let{editor:i,cursor:o,view:a,file:r}=n;if(!i||!a||!r)throw new Error("Unable to insert text into the active editor.");let s=t.replace(/\s+$/,""),l=s.endsWith(`
`)?s:`${s}
`;i.replaceRange(l,o,o);let c=l.split(`
`),u=c.length-1,f=(d=c[c.length-1])!=null?d:"",p={line:o.line+u,ch:u===0?o.ch+f.length:f.length};i.setCursor(p);try{a.leaf&&this.plugin.app.workspace.setActiveLeaf(a.leaf,{focus:!0})}catch(h){console.error("Mondo: failed to focus active leaf",h)}};this.plugin=t,this.transcriptionService=new Fp(t),Sr()}};var xd={root:"Journal",entry:"YYYY-MM-DD"},DN={root:"Daily",entry:"YYYY-MM-DD",note:"HH:MM",section:"h2",useBullets:!0};var LN=e=>String(e).padStart(2,"0"),a_=(e,t)=>e.split("YYYY").join(String(t.getFullYear())).split("MM").join(LN(t.getMonth()+1)).split("DD").join(LN(t.getDate())),RN=async(e,t)=>{let i=(t.settings||{}).daily||{root:"Daily",entry:"YYYY-MM-DD"},o=i.root||"Daily",a=i.entry||"YYYY-MM-DD",r=o==="/"?"":o.replace(/^\/+|\/+$/g,"");try{r!==""&&(e.vault.getAbstractFileByPath(r)||await e.vault.createFolder(r))}catch(m){throw m}let s=new Date,l=a_(a,s),c=l.endsWith(".md")?l:`${l}.md`,u=r?`${r}/${c}`:c,f=e.vault.getAbstractFileByPath(u);f||(f=await e.vault.create(u,""));let d=e.workspace.getLeavesOfType("markdown").find(m=>{var b;try{let y=(b=m.view)==null?void 0:b.file;return(y==null?void 0:y.path)===u}catch(y){return!1}}),h=d!=null?d:e.workspace.getLeaf(!0);d?e.workspace.revealLeaf(d):await h.openFile(f)};function Nd(e){return String(e).padStart(2,"0")}function ON(e,t){return e.split("YYYY").join(String(t.getFullYear())).split("MM").join(Nd(t.getMonth()+1)).split("DD").join(Nd(t.getDate()))}function FN(e,t){return e.split("HH").join(Nd(t.getHours())).split("mm").join(Nd(t.getMinutes())).split("MM").join(Nd(t.getMinutes()))}async function Ad(e,t){var F,N,_,A,x,S,D;let i=(t.settings||{}).daily||{root:"Daily",entry:"YYYY-MM-DD",note:"HH:MM"},o=i.root||"Daily",a=i.entry||"YYYY-MM-DD",r=i.note||"HH:MM",s=typeof i.useBullets=="boolean"?i.useBullets:!0,l=o==="/"?"":o.replace(/^\/+|\/+$/g,"");try{l!==""&&(e.vault.getAbstractFileByPath(l)||await e.vault.createFolder(l))}catch(M){throw M}let c=new Date,f=ON(a,c);f.endsWith(".md")||(f=`${f}.md`);let p=l?`${l}/${f}`:f,d=e.vault.getAbstractFileByPath(p),h=`${String(c.getFullYear())}-${String(c.getMonth()+1).padStart(2,"0")}-${String(c.getDate()).padStart(2,"0")}`,m=M=>`---
type: ${_n}
date: ${M}
---
`;if(!d)d=await e.vault.create(p,m(h));else try{let M=await e.vault.read(d),B=/^\s*---\n([\s\S]*?)\n---\r?\n?/,G=M.match(B);if(G){let $=G[1]||"",te=new RegExp(`(^|\\n)\\s*type\\s*:\\s*${_n}(\\s|$)`,"i").test($),j=new RegExp(`(^|\\n)\\s*type\\s*:\\s*${Ea}(\\s|$)`,"i").test($),me=/(^|\n)\s*date\s*:\s*\d{4}-\d{2}-\d{2}(\s|$)/i.test($),W=new RegExp(`(^|\\n)\\s*date\\s*:\\s*${h}(\\s|$)`,"i").test($);if(j&&!te&&W){let ae=$.replace(new RegExp(`(^|\\n)(\\s*type\\s*:\\s*)${Ea}(\\s|$)`,"i"),`$1$2${_n}$3`),Q=M.replace(B,"").replace(/^\r?\n+/,""),R=`---
${ae}
---
`+Q;await e.vault.modify(d,R)}else if(!te||!me||!W){let ae=M.replace(B,"").replace(/^\r?\n+/,""),Q=m(h)+ae;await e.vault.modify(d,Q)}}else{let $=M.replace(/^\r?\n+/,""),te=m(h)+$;await e.vault.modify(d,te)}}catch(M){}let b=FN(r,c),g=(i.section||"h2").toLowerCase().match(/^h([1-6])$/),v=g?Math.max(1,Math.min(6,Number(g[1]))):2,T=`${"#".repeat(v)} ${b}`,k=s?"- ":"",C=e.workspace.getLeavesOfType("markdown").find(M=>{var B;try{let G=(B=M.view)==null?void 0:B.file;return(G==null?void 0:G.path)===p}catch(G){return!1}}),L=C!=null?C:e.workspace.getLeaf(!0);C?e.workspace.revealLeaf(C):await L.openFile(d);try{let M=L.view;if(!M||!M.editor)return null;let B=M.editor,$=B.getValue().split(/\r?\n/),te=-1;for(let I=0;I<$.length;I++)if($[I].trim()===T){te=I;break}let j=I=>{for(let z=I+1;z<$.length;z++)if(/^#\s+/.test($[z]))return z-1;return $.length-1};if(te>=0){let I=j(te),z=I+1,U=(F=$[z])!=null?F:null;if(U===null&&I>=0&&((N=$[I])==null?void 0:N.trim())===""&&(z=I,U=(_=$[z])!=null?_:null),U===""){let X=s?"- ":"";B.replaceRange(X,{line:z,ch:0},{line:z,ch:U.length}),B.setCursor({line:z,ch:X.length})}else{let X=`
${s?"- ":""}`;B.replaceRange(X,{line:z,ch:0}),B.setCursor({line:z+1,ch:s?2:0})}B.focus();try{if(typeof B.scrollIntoView=="function")B.scrollIntoView({line:z+1,ch:0},!0);else if(M.containerEl){let X=B.cursorCoords?B.cursorCoords(!0):null,H=(x=(A=M.containerEl).querySelector)==null?void 0:x.call(A,".cm-scroller, .CodeMirror-scroll");if(X&&H){let Y=H,le=Y.clientHeight/2;Y.scrollTop=Math.max(0,X.top-le+10)}}}catch(X){}return{file:d,view:M,editor:B,headingLine:T}}let me=-1;for(let I=0;I<$.length;I++)/^#\s+/.test($[I])&&(me=I);let W=me>=0?j(me)+1:$.length,ae=W!==0,Q=`${ae?`
`:""}${T}
${k}`;B.replaceRange(Q,{line:W,ch:0});let R=W+(ae?2:1);B.setCursor({line:R,ch:k.length}),B.focus();try{if(typeof B.scrollIntoView=="function")B.scrollIntoView({line:R,ch:0},!0);else if(M.containerEl){let I=B.cursorCoords?B.cursorCoords(!0):null,z=(D=(S=M.containerEl).querySelector)==null?void 0:D.call(S,".cm-scroller, .CodeMirror-scroll");if(I&&z){let U=z,X=U.clientHeight/2;U.scrollTop=Math.max(0,I.top-X+10)}}}catch(I){}return{file:d,view:M,editor:B,headingLine:T}}catch(M){return null}}async function _N(e,t,n={}){let o=(t.settings||{}).daily||{root:"Daily",entry:"YYYY-MM-DD",note:"HH:MM"},a=o.root||"Daily",r=o.entry||"YYYY-MM-DD",s=o.note||"HH:MM",l=typeof o.useBullets=="boolean"?o.useBullets:!0,c=typeof n.text=="string"?n.text.trim():"",u=c.length>0,f=n.mode==="task"?"task":"default",p=a==="/"?"":a.replace(/^\/+|\/+$/g,"");try{p!==""&&(e.vault.getAbstractFileByPath(p)||await e.vault.createFolder(p))}catch(N){throw N}let d=new Date,m=ON(r,d);m.endsWith(".md")||(m=`${m}.md`);let b=p?`${p}/${m}`:m,y=e.vault.getAbstractFileByPath(b),g=`${String(d.getFullYear())}-${String(d.getMonth()+1).padStart(2,"0")}-${String(d.getDate()).padStart(2,"0")}`,v=N=>`---
type: ${_n}
date: ${N}
---
`;if(!y)y=await e.vault.create(b,v(g));else try{let N=await e.vault.read(y),_=/^\s*---\n([\s\S]*?)\n---\r?\n?/,A=N.match(_);if(A){let x=A[1]||"",S=new RegExp(`(^|\\n)\\s*type\\s*:\\s*${_n}(\\s|$)`,"i").test(x),D=new RegExp(`(^|\\n)\\s*type\\s*:\\s*${Ea}(\\s|$)`,"i").test(x),M=/(^|\n)\s*date\s*:\s*\d{4}-\d{2}-\d{2}(\s|$)/i.test(x),B=new RegExp(`(^|\\n)\\s*date\\s*:\\s*${g}(\\s|$)`,"i").test(x);if(D&&!S&&B){let G=x.replace(new RegExp(`(^|\\n)(\\s*type\\s*:\\s*)${Ea}(\\s|$)`,"i"),`$1$2${_n}$3`),$=N.replace(_,"").replace(/^\r?\n+/,""),te=`---
${G}
---
`+$;await e.vault.modify(y,te)}else if(!S||!M||!B){let G=N.replace(_,"").replace(/^\r?\n+/,""),$=v(g)+G;await e.vault.modify(y,$)}}else{let x=N.replace(/^\r?\n+/,""),S=v(g)+x;await e.vault.modify(y,S)}}catch(N){}let w=FN(s,d),k=(o.section||"h2").toLowerCase().match(/^h([1-6])$/),E=k?Math.max(1,Math.min(6,Number(k[1]))):2,L=`${"#".repeat(E)} ${w}`,F=l?"- ":"";if(u){await r_(e,y,{headingLine:L,bulletPrefix:F,text:c,useBullets:l,mode:f});return}await Ad(e,t)}async function r_(e,t,n){let{headingLine:i,bulletPrefix:o,text:a,useBullets:r,mode:s}=n,l=s_(a,o,r,s);if(l.length===0)return;let c=await e.vault.read(t),u=c.includes(`\r
`)?`\r
`:`
`,f=c.split(/\r?\n/),d=l_(f,i,l).join(u);d.endsWith(u)||(d+=u),d!==c&&await e.vault.modify(t,d)}function s_(e,t,n,i){let o=e.trim();if(!o)return[];let a=o.split(/\r?\n/),r=[];for(let s=0;s<a.length;s++){let l=a[s].trim();if(l)if(n)if(s===0){let c=i==="task"?`${t}[ ] ${l}`:`${t}${l}`;r.push(c)}else r.push(`  ${l}`);else if(s===0){let c=i==="task"?"[ ] ":"";r.push(`${c}${l}`)}else r.push(l)}return r}function l_(e,t,n){var f;let i=[...e],o=t.trim(),a=p=>/^#\s+/.test(p.trim()),r=p=>{let d=p;for(let h=p+1;h<i.length;h++){if(a(i[h]))return h-1;d=h}return d},s=i.findIndex(p=>p.trim()===o);if(s>=0){let p=(()=>{for(let v=s+1;v<i.length;v++)if(a(i[v]))return v;return-1})(),d=r(s),h=d;for(;h>s&&i[h].trim()==="";)h--;let m=d-h;m>0&&i.splice(h+1,m);let b=h+1;i.splice(b,0,...n);let y=b+n.length;return p!==-1&&((f=i[y])==null?void 0:f.trim())!==""&&i.splice(y,0,""),i}let l=-1;for(let p=0;p<i.length;p++)a(i[p])&&(l=p);let c=l>=0?r(l)+1:i.length,u=c!==0?["",t]:[t];return u.push(...n),i.splice(c,0,...u),i}var zs=require("obsidian");var BN=async(e,t)=>{try{if(!await Ad(e,t)){new zs.Notice("Failed to set up daily note.");return}}catch(a){console.error("Mondo: Failed to append to daily note",a),new zs.Notice("Failed to append to daily note.");return}let n=t.noteDictationManager;if(!n){new zs.Notice("Dictation is not available.");return}if(n.getDictationStatus()==="recording"){new zs.Notice("Dictation already in progress.");return}let o=await n.startDictation();o==="started"?new zs.Notice("Dictation started. Tap again to stop."):o==="recording"&&new zs.Notice("Dictation already in progress.")};var Hr=require("obsidian");var c_="audio/webm",u_=()=>{let e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0"),o=String(e.getHours()).padStart(2,"0"),a=String(e.getMinutes()).padStart(2,"0"),r=String(e.getSeconds()).padStart(2,"0");return`${t}-${n}-${i} ${o}.${a}.${r}`},IN=async(e,t)=>{var r;let n;try{if(n=await Ad(e,t),!n){new Hr.Notice("Failed to set up daily note.");return}}catch(s){console.error("Mondo: Failed to append to daily note",s),new Hr.Notice("Failed to append to daily note.");return}let{file:i,editor:o}=n;if(!((r=navigator==null?void 0:navigator.mediaDevices)!=null&&r.getUserMedia)){new Hr.Notice("Microphone access is not supported in this environment.");return}let a=o.getCursor();try{let s=await navigator.mediaDevices.getUserMedia({audio:!0}),l=MediaRecorder.isTypeSupported("audio/webm;codecs=opus")?"audio/webm;codecs=opus":c_,c=new MediaRecorder(s,{mimeType:l}),u=[];c.addEventListener("dataavailable",p=>{u.push(p.data)}),c.addEventListener("stop",async()=>{s.getTracks().forEach(h=>h.stop());let p=new Blob(u,{type:l}),d="audio";try{try{e.vault.getAbstractFileByPath(d)||await e.vault.createFolder(d)}catch(v){}let m=`Recording ${u_()}.webm`,b=`${d}/${m}`,y=await e.vault.createBinary(b,await p.arrayBuffer()),g=e.metadataCache.fileToLinktext(y,i.path).trim();o.replaceRange(`![[${g}]]
`,a),new Hr.Notice("Recording saved and embedded.")}catch(h){console.error("Mondo: Failed to save recording",h),new Hr.Notice("Failed to save recording.")}}),c.start(),new Hr.Notice("Recording started. Click anywhere in Obsidian to stop recording.");let f=()=>{c.stop(),document.removeEventListener("click",f)};document.addEventListener("click",f),setTimeout(()=>{c.state==="recording"&&(c.stop(),document.removeEventListener("click",f))},3e5)}catch(s){console.error("Mondo: Failed to start recording",s);let l=s instanceof Error?s.message:"Unable to access microphone";new Hr.Notice(`Recording failed: ${l}`)}};function d_(e){return e?e==="/"?"":e.replace(/^\/+|\/+$/g,""):""}function PN(e){let t=/^\s*---\n([\s\S]*?)\n---\r?\n?/,n=e.match(t);if(!n)return null;let o=(n[1]||"").match(/(^|\n)\s*date\s*:\s*(\d{4}-\d{2}-\d{2})/i);return o?o[2]:null}async function f_(e,t){let n=e.vault.getFiles(),i=d_(t),o=[];for(let a of n)if(!(!a.path.endsWith(".md")||!(i===""||a.path===i||a.path.startsWith(i+"/"))))try{let s=await e.vault.read(a),l=PN(s);l&&o.push({path:a.path,date:l})}catch(s){}return o}async function p_(e,t){var o;let n=e.vault.getAbstractFileByPath(t);if(!n)return!1;let i=(o=e.workspace.activeLeaf)!=null?o:e.workspace.getLeaf(!0);try{return await i.openFile(n),e.workspace.revealLeaf(i),!0}catch(a){return!1}}async function m_(e,t,n){let a=((t.settings||{}).journal||{root:"Journal",entry:"YYYY-MM-DD"}).root||"Journal",r=e.workspace.getActiveFile();if(!r){await e.commands.executeCommandById("mondo:mondo-open-journal");return}let s=null;try{let p=await e.vault.read(r);s=PN(p)}catch(p){s=null}if(!s){await e.commands.executeCommandById("mondo:mondo-open-journal");return}let l=await f_(e,a);if(l.length===0){await e.commands.executeCommandById("mondo:mondo-open-journal");return}l.sort((p,d)=>p.date<d.date?-1:p.date>d.date?1:0);let c=s,u=null;if(n==="prev"){for(let p=l.length-1;p>=0;p--)if(l[p].date<c){u=l[p];break}}else for(let p=0;p<l.length;p++)if(l[p].date>c){u=l[p];break}if(!u){if(n==="prev")return;await e.commands.executeCommandById("mondo:mondo-open-journal");return}await p_(e,u.path)||await e.commands.executeCommandById("mondo:mondo-open-journal")}function zN(e,t){return async n=>m_(e,t,n)}var Vr=require("obsidian");var Zm=(e,t,n={})=>{var c;let i=n.showFailureNotice!==!1,o=e.workspace.getActiveViewOfType(Vr.MarkdownView);if(!o||!o.editor){if(i){let u=Vr.Platform.isMobileApp?"Open a note to insert a timestamp.":"Focus a markdown editor to insert a timestamp.";new Vr.Notice(u)}return!1}let a=o.editor,r=Go((c=t.settings)==null?void 0:c.timestamp),l=Gm({moment:(0,Vr.moment)(),settings:r,includeTrailingNewLine:!0});return a.replaceSelection(l),!0};var Ur=require("obsidian"),h_=async e=>{var i;if(!e)return;if(typeof navigator!="undefined"&&((i=navigator.clipboard)!=null&&i.writeText)){await navigator.clipboard.writeText(e);return}if(typeof document=="undefined")throw new Error("Clipboard API unavailable");let t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.opacity="0",t.style.pointerEvents="none",document.body.appendChild(t),t.focus({preventScroll:!0}),t.select();let n=document.execCommand("copy");if(t.remove(),!n)throw new Error("Copy command failed")},g_=e=>{let t=/^---\s*\r?\n[\s\S]*?\r?\n---\s*\r?\n?/,n=/^(?:\s*\r?\n)*#{1,6}\s+[^\r\n]*(?:\r?\n+|$)/,i=e.replace(t,"");return n.test(i)&&(i=i.replace(n,"")),i.replace(/^(?:\s*\r?\n)*/,"")},eh=async(e,t={})=>{var l,c;let n=t.showSuccessNotice!==!1,i=t.showFailureNotice!==!1,o=(l=t.view)!=null?l:e.workspace.getActiveViewOfType(Ur.MarkdownView);if(!o)return i&&new Ur.Notice("Open a note to copy its text."),!1;let a=(c=t.editor)!=null?c:o.editor;if(!a)return i&&new Ur.Notice("Focus a markdown editor to copy note text."),!1;let r=a.getSelection(),s=r.length>0;if(!s){let u=o.file;if(!u)return i&&new Ur.Notice("Unable to determine the active note to copy."),!1;r=await e.vault.cachedRead(u),r=g_(r)}try{return await h_(r),n&&new Ur.Notice(s?"Selection copied.":"Note text copied."),!0}catch(u){return console.error("Mondo: Failed to copy note text",u),i&&new Ur.Notice("Failed to copy note text."),!1}};var Ko=require("obsidian"),y_="https://chat.openai.com",b_=e=>{let n=e.replace(/\r\n?/g,`
`).replace(/^\ufeff/,"");if(!n.startsWith("---"))return e;let i=n.split(`
`);if(i[0].trim()!=="---")return e;for(let o=1;o<i.length;o+=1){let r=i[o].trim();if(r==="---"||r==="...")return i.slice(o+1).join(`
`)}return e},th=null,v_=async()=>th||(th=(await import("child_process")).execFile,th),$r=async(e,t,n)=>{var a;let i=await v_(),o={...n!=null?n:{},encoding:(a=n==null?void 0:n.encoding)!=null?a:"utf8"};return new Promise((r,s)=>{i(e,t,o,(l,c,u)=>{if(l){s(l);return}r({stdout:typeof c=="string"?c:c.toString("utf8"),stderr:typeof u=="string"?u:u.toString("utf8")})})})},w_=e=>{let t=[],n="",i=!1;for(let o=0;o<e.length;o+=1){let a=e[o];if(a==="\\"){let r=e[o+1];if(r==='"'||r==="\\"){n+=r,o+=1;continue}}if(a==='"'){i=!i;continue}if(!i&&/\s/.test(a)){n&&(t.push(n),n="");continue}n+=a}return n&&t.push(n),t},T_=async()=>{var e,t;try{let n=process.env.HOME;if(!n)return null;let i=`${n}/Library/Preferences/com.apple.LaunchServices/com.apple.launchservices.secure`,{stdout:o}=await $r("plutil",["-convert","json","-o","-",i]),a=JSON.parse(o),r=(e=a==null?void 0:a.LSHandlers)==null?void 0:e.find(l=>l.LSHandlerURLScheme==="https");if(!r)return null;let s=(t=r.LSHandlerRoleAll)!=null?t:r.LSHandlerRoleViewer;return typeof s=="string"&&s.trim()?s.trim():null}catch(n){return console.error("Mondo: Unable to determine macOS default browser",n),null}},S_=async e=>{try{let t=await T_(),n=t?[t]:[],i=["com.apple.Safari","com.google.Chrome","company.thebrowser.Browser","com.brave.Browser","com.microsoft.edgemac"],o=["Safari","Arc","Google Chrome","Brave Browser","Microsoft Edge"];for(let a of[...n,...i])try{if(!a)continue;return await $r("open",["-b",a,e]),!0}catch(r){continue}for(let a of o)try{return await $r("open",["-a",a,e]),!0}catch(r){continue}}catch(t){console.error("Mondo: Unable to open ChatGPT in macOS browser",t)}return!1},k_=async()=>{var e,t;try{let{stdout:n}=await $r("reg",["query","HKEY_CURRENT_USER\\Software\\Microsoft\\Windows\\Shell\\Associations\\UrlAssociations\\https\\UserChoice","/v","ProgId"],{windowsHide:!0}),i=n.match(/ProgId\s+REG_SZ\s+([^\r\n]+)/i),o=i?(e=i[1])==null?void 0:e.trim():null;if(!o)return null;let a=`HKEY_CLASSES_ROOT\\${o}\\shell\\open\\command`,{stdout:r}=await $r("reg",["query",a,"/ve"],{windowsHide:!0}),s=r.match(/REG_SZ\s+([^\r\n]+)/i),l=s?(t=s[1])==null?void 0:t.trim():null;return l&&l.length>0?l:null}catch(n){return console.error("Mondo: Unable to determine Windows default browser",n),null}},E_=async e=>{try{let t=await k_();if(t){let n=w_(t);if(n.length>0){let[i,...o]=n,a=o.map(r=>r.replace(/%1|%l|%L/gi,e)).filter(r=>r.length>0);a.some(r=>r.includes(e))||a.push(e);try{return await $r(i,a,{windowsHide:!0}),!0}catch(r){console.error("Mondo: Unable to launch default Windows browser",r)}}}try{return await $r("rundll32",["url.dll,FileProtocolHandler",e],{windowsHide:!0}),!0}catch(n){console.error("Mondo: rundll32 fallback failed",n)}}catch(t){console.error("Mondo: Unable to open ChatGPT in Windows browser",t)}return!1},C_=async e=>{let t=["xdg-open","gio","gnome-open","kde-open","sensible-browser"];for(let n of t)try{return await $r(n,[e]),!0}catch(i){continue}return!1},M_=async e=>{if(Ko.Platform.isDesktopApp&&typeof process!="undefined")try{if(process.platform==="darwin"){if(await S_(e))return!0}else if(process.platform==="win32"){if(await E_(e))return!0}else if(await C_(e))return!0}catch(t){console.error("Mondo: Failed to open ChatGPT link on desktop",t)}return typeof window!="undefined"&&typeof window.open=="function"?(window.open(e,"_blank","noopener"),!0):typeof globalThis.open=="function"?(globalThis.open(e,"_blank"),!0):!1},HN=async(e,t={})=>{var u,f;let n=(u=t.view)!=null?u:e.workspace.getActiveViewOfType(Ko.MarkdownView);if(!n)return new Ko.Notice("Open a markdown note to send to ChatGPT."),!1;let i=(f=t.editor)!=null?f:n.editor;if(!i)return new Ko.Notice("Focus a markdown editor to send to ChatGPT."),!1;let a=i.getSelection(),r=t.includeFrontmatter!==!1;if(!a){let p=n.file;if(!p)return new Ko.Notice("Unable to read the note contents."),!1;a=await e.vault.cachedRead(p),r||(a=b_(a))}let s=a.replace(/\r\n?/g,`
`);if(!s.trim())return new Ko.Notice("Nothing to send to ChatGPT."),!1;let l=`${y_}?q=${encodeURIComponent(s)}`,c=await M_(l);return c||new Ko.Notice("Unable to open ChatGPT link."),c};var VN=require("obsidian");var x_=async(e,t)=>{let i=e.workspace.getLeavesOfType("markdown").find(a=>{var r;try{let s=(r=a.view)==null?void 0:r.file;return(s==null?void 0:s.path)===t.path}catch(s){return console.error("Mondo: Failed to inspect leaf file",s),!1}});if(i){e.workspace.revealLeaf(i);return}await e.workspace.getLeaf(!1).openFile(t)},N_=async e=>{let t=!1;return await new Promise(n=>{class i extends VN.Modal{onOpen(){let{titleEl:a,contentEl:r}=this;a.setText("Set up your me note"),r.empty(),r.createEl("p",{text:"Mondo couldn't find a note configured as yourself."}),r.createEl("p",{text:"To use this command, pick the note that represents yourself in the Mondo settings."}),r.createEl("p",{text:"Would you like to open the Mondo configuration now?"});let s=r.createDiv({cls:"modal-button-container"}),l=s.createEl("button",{text:"Cancel"}),c=s.createEl("button",{text:"Open Mondo settings"});c.addClass("mod-cta"),l.addEventListener("click",()=>{t=!0,this.close(),n(!1)}),c.addEventListener("click",()=>{t=!0,this.close(),n(!0)})}onClose(){t||n(!1)}}new i(e).open()})},A_=(e,t)=>{let n=e.setting;n!=null&&n.open&&(n.open(),typeof n.openTabById=="function"&&n.openTabById(t.manifest.id))},UN=async(e,t)=>{var o,a;let n=(a=(o=t==null?void 0:t.settings)==null?void 0:o.selfPersonPath)!=null?a:"",i=Ca(e,null,n);if(!i){await N_(e)&&A_(e,t);return}await x_(e,i.file)};var $N=require("obsidian"),D_=new Set(["png","jpg","jpeg","webp"]),dw=e=>e instanceof $N.TFile&&D_.has(e.extension.toLowerCase()),L_=e=>{var n;let t=e.workspace.getLeavesOfType("file-explorer");for(let i of t){let o=i.view;if(o&&typeof o.getSelectedFile=="function"){let r=o.getSelectedFile();if(dw(r))return r}let a=(n=o==null?void 0:o.file)!=null?n:null;if(dw(a))return a}return null},jN=e=>{let t=e.workspace.getActiveFile();return dw(t)?t:L_(e)};var pw=require("obsidian");var R_=e=>(e!=null?e:"").replace(/^\/+|\/+$/g,""),mw=e=>{var i,o,a,r,s;if(!e)return null;let t=e.view;return t instanceof pw.MarkdownView?(o=(i=t.file)==null?void 0:i.path)!=null?o:null:((a=t==null?void 0:t.getViewType)==null?void 0:a.call(t))==="markdown"&&(s=(r=t.file)==null?void 0:r.path)!=null?s:null},qN="mondo-focus-mode-nav-prev-btn",GN="mondo-focus-mode-nav-next-btn",YN=(e,t,n,i)=>{let o=document.getElementById(e);return o||(o=document.createElement("button"),o.id=e,o.className="mondo-focus-mode-nav-btn",o.title=t,o.type="button",o.innerHTML=n,o.addEventListener("click",a=>{try{i()}finally{a.currentTarget.blur()}}),o.addEventListener("mousedown",a=>a.preventDefault()),document.body.appendChild(o),o)},fw=()=>{[qN,GN].forEach(e=>{let t=document.getElementById(e);t&&t.parentElement&&t.parentElement.removeChild(t)})},O_=(e,t)=>{if(!((e==null?void 0:e.view)instanceof pw.MarkdownView))return;let n=`
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M15 18l-6-6 6-6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`,i=`
  <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9 6l6 6-6 6" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>`;YN(qN,"Previous journal note",n,()=>{t.app.commands.executeCommandById("mondo:journal-prev")}),YN(GN,"Next journal note",i,()=>{t.app.commands.executeCommandById("mondo:journal-next")})},KN=e=>t=>{var a,r,s;let n=mw(t);if(!t||!n){fw();return}let i=e,o=R_((s=(r=(a=i==null?void 0:i.settings)==null?void 0:a.journal)==null?void 0:r.root)!=null?s:xd.root);if(!o){fw();return}n===o||n.startsWith(o+"/")||n.startsWith(o)?O_(t,e):fw()};var r1=O(fe()),s1=O(Fo()),Ud=require("obsidian");var jr=O(fe());var JN=O(P()),QN=(0,jr.createContext)(void 0),XN=({path:e,children:t})=>(0,JN.jsx)(QN.Provider,{value:{path:e},children:t}),F_=e=>{let t=pe(),[n,i]=(0,jr.useState)(()=>{var a;return e&&(a=Gn.getInstance(t).getFileByPath(e))!=null?a:void 0});return(0,jr.useEffect)(()=>{if(!e){i(void 0);return}let o=Gn.getInstance(t),a=()=>{var s;i((s=o.getFileByPath(e))!=null?s:void 0)};a();let r=()=>a();return o.addListener(r),()=>{o.removeListener(r)}},[t,e]),n},Qo=()=>{let e=$m(),t=(0,jr.useContext)(QN),n=F_(t==null?void 0:t.path);return n?{file:n}:e};var Sh=O(fe());var zt=O(fe()),Jo=require("obsidian");var WN=O(P()),nh=({children:e,className:t,...n})=>{let i=["inline-flex","min-w-[1.5rem]","items-center","justify-center","rounded-full","bg-[var(--interactive-accent)]","px-2","py-[2px]","text-xs","font-semibold","leading-none","text-[var(--text-on-accent, var(--text-normal))]","shadow-sm"];return t&&i.push(t),(0,WN.jsx)("span",{className:i.join(" "),...n,children:e})};var hw=require("obsidian");var __=e=>{let t=String(e.getFullYear()),n=t.slice(-2),i=String(e.getMonth()+1).padStart(2,"0"),o=String(e.getDate()).padStart(2,"0"),a=String(e.getHours()).padStart(2,"0"),r=String(e.getMinutes()).padStart(2,"0");return{yyyy:t,yy:n,month:i,day:o,hour:a,minute:r}},ZN=(e,t)=>{let i=String(e).replace(/\{\s*@this\.show\s*\}/gi,()=>{var r;let a=((r=t.hostFM)!=null?r:{}).show;return typeof a=="string"&&a.trim()?a.trim():t.hostName});return i=i.replace(/\{\s*datetime\s*\}/gi,t.datetimeISO).replace(/\{\s*date\s*\}/gi,t.dateISO).replace(/\{\s*show\s*\}/gi,t.hostName).replace(/\{\s*(YYYY|yyyy)\s*\}/g,t.parts.yyyy).replace(/\{\s*(YY|yy)\s*\}/g,t.parts.yy).replace(/\{\s*(DD|dd)\s*\}/g,t.parts.day).replace(/\{\s*hh\s*\}/g,t.parts.hour).replace(/\{\s*mm\s*\}/g,t.parts.minute),i=i.replace(/\{\s*MM\s*\}/g,t.parts.month),i},B_=async({app:e,targetType:t,hostEntity:n,titleTemplate:i,attributeTemplates:o,linkProperties:a,openAfterCreate:r=!0})=>{var te,j,me,W;let s=Gu(e);if(!s)return console.error("createEntityForEntity: Mondo plugin instance not available"),null;if(!(n!=null&&n.file))return console.warn("createEntityForEntity: missing host entity file"),null;let l=s.settings,c=String(t).trim().toLowerCase();if(!Nt(c))return console.error(`createEntityForEntity: invalid target type "${t}"`),null;let u=new Date,{yyyy:f,yy:p,month:d,day:h,hour:m,minute:b}=__(u),y=`${f}-${d}-${h}`,g=u.toISOString(),v=In(n),T=ZN(i||"Untitled",{dateISO:y,datetimeISO:g,hostName:v,parts:{yyyy:f,yy:p,month:d,day:h,hour:m,minute:b},hostFM:(te=n.cache)==null?void 0:te.frontmatter}).trim()||"Untitled",k=((me=(j=l.rootPaths)==null?void 0:j[c])!=null?me:"/").trim(),E=Bo(k);E&&(e.vault.getAbstractFileByPath(E)||await e.vault.createFolder(E));let C=T,L=C.includes(".md")?C.replace(/\.md$/i,""):C,F=`${L}.md`,N=E?`${E}/${F}`:F,_=await Io(e,l.templates,c),A=Po(_,{title:C,type:c,filename:F,slug:wr(L),date:g,datetime:g}),x=e.vault.getAbstractFileByPath(N),S=Boolean(x);if(x||(x=await e.vault.create(N,A)),!(x instanceof hw.TFile))return null;let D=n.file,M=(()=>{var R,I;let ae=String(((I=(R=n.cache)==null?void 0:R.frontmatter)==null?void 0:I.type)||"").trim().toLowerCase(),Q=[];return ae&&Q.push(ae),Q})(),B=o,$=!!(B&&Object.keys(B).length>0)?[]:Array.isArray(a)&&a.length>0?Array.from(new Set(a.map(ae=>String(ae).trim()).filter(Boolean))):M;if(await e.fileManager.processFrontMatter(x,ae=>{var I,z;ae.type=c;let Q=dC({app:e,sourcePath:x.path,targetFile:D,displayName:v}),R=new Set($);if($.forEach(U=>{let X=String(U).trim();if(!X)return;let H=ae[X];if(Array.isArray(H))H.some(le=>String(le).trim()===Q)||H.push(Q);else if(H==null)ae[X]=[Q];else{let Y=String(H).trim(),le=Y?[Y]:[];le.includes(Q)||le.push(Q),ae[X]=le}}),o&&typeof o=="object"){let U=(z=(I=n.cache)==null?void 0:I.frontmatter)!=null?z:{},X=H=>{try{return JSON.parse(JSON.stringify(H))}catch(Y){return H}};Object.entries(o).forEach(([H,Y])=>{let le=ie=>{var ke;if(typeof ie=="string"){let Ce=ie.trim().match(/^\{\s*@this\s*(?:\.\s*([A-Za-z0-9_-]+)\s*)?\}$/);if(Ce){let we=(ke=Ce[1])==null?void 0:ke.trim();if(we){let Ne=U[we];return Ne!==void 0?X(Ne):void 0}return Q}return ZN(ie,{dateISO:y,datetimeISO:g,hostName:v,parts:{yyyy:f,yy:p,month:d,day:h,hour:m,minute:b},hostFM:U})}if(typeof ie=="number"||typeof ie=="boolean")return ie;if(Array.isArray(ie)){let Ce=[];for(let we of ie){let Ne=le(we);Ne!==void 0&&(Array.isArray(Ne)?Ce.push(...Ne.map(Ve=>X(Ve))):Ce.push(Ne))}return Ce}return typeof ie=="object"&&ie!==null?X(ie):ie},re=le(Y);if(re!==void 0){if(R.has(H)){let ie=ae[H];if(Array.isArray(ie)&&Array.isArray(re)){let ke=new Set(ie.map(Ce=>String(Ce)));for(let Ce of re){let we=String(Ce);ke.has(we)||ie.push(Ce)}ae[H]=ie;return}ae[H]=re;return}ae[H]=re}})}}),r&&x instanceof hw.TFile){let ae=e.workspace.getLeaf(!1);await((W=ae==null?void 0:ae.openFile)==null?void 0:W.call(ae,x)),S||window.setTimeout(()=>{try{Gl(ae)}catch(Q){}},150)}return x},ih=B_;var Xo=O(fe()),nA=O(P()),I_={collapsedPanels:[],setCollapsedPanel:()=>{}},eA=(0,Xo.createContext)(I_),tA=({children:e})=>{let[t,n]=(0,Xo.useState)(()=>new Map),i=(0,Xo.useCallback)((a,r)=>{n(s=>{let l=new Map(s);if(!r)return l.has(a)?(l.delete(a),l):s;let c=l.get(a);return c&&c.label===r.label&&c.icon===r.icon&&c.badgeLabel===r.badgeLabel&&c.order===r.order&&c.onExpand===r.onExpand&&c.panelType===r.panelType?s:(l.set(a,r),l)})},[]),o=(0,Xo.useMemo)(()=>({collapsedPanels:Array.from(t.values()).sort((r,s)=>r.order===s.order?r.label.localeCompare(s.label):r.order-s.order),setCollapsedPanel:i}),[t,i]);return(0,nA.jsx)(eA.Provider,{value:o,children:e})},oh=()=>(0,Xo.useContext)(eA);var Ln=O(P()),P_=e=>{var n;let t=xt[e];return(n=t==null?void 0:t.name)!=null?n:e},z_=["flex min-h-[5rem] items-start gap-3","rounded-md border border-[var(--background-modifier-border)]","bg-[var(--background-secondary)] px-3 py-2"].join(" "),Ri=e=>{if(typeof e!="string")return;let t=e.trim();return t.length>0?t:void 0},iA=e=>{if(!(typeof e!="object"||e===null))return e},oA=e=>{if(!(typeof e!="object"||e===null||Array.isArray(e)))return e},aA=e=>{if(!e)return;let t=e.type;if(typeof t!="string")return;let n=t.trim();if(!(!n||/^\{.+\}$/.test(n)))return n.toLowerCase()},H_=e=>{if(!e)return;let n=(Array.isArray(e)?e:[e]).map(i=>String(i).trim()).filter(i=>i.length>0);if(n.length!==0)return Array.from(new Set(n))},V_=new Set(["png","jpg","jpeg","gif","bmp","webp","svg","avif","heic","heif"]),rA=e=>{let t=/\.([^.]+)$/.exec(e.name);if(t)return t[1].toLowerCase();let n=e.type;if(typeof n=="string"&&n.startsWith("image/")){let[,i]=n.split("/");if(i)return i.toLowerCase()}return"png"},U_=e=>{if(e.type&&e.type.startsWith("image/"))return!0;let t=rA(e);return V_.has(t)},$_=e=>{let t=rA(e),n=e.name.trim();return n.length===0?`cover.${t}`:n.toLowerCase().endsWith(`.${t}`)||n.includes(".")?n:`${n}.${t}`},j_=({panel:e})=>(0,Ln.jsxs)("button",{type:"button",onClick:e.onExpand,className:"group inline-flex max-w-full items-center gap-2 rounded-full border border-[var(--background-modifier-border)] bg-[var(--background-primary)] px-3 py-1 text-xs font-medium text-[var(--text-normal)] transition-colors hover:border-[var(--background-modifier-border-hover)] hover:bg-[var(--background-modifier-hover)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[var(--interactive-accent)] focus-visible:ring-offset-0","aria-label":`Expand ${e.label} panel`,title:e.label,"data-entity-panel":e.panelType,children:[e.icon?(0,Ln.jsx)(Ze,{name:e.icon,className:"h-3.5 w-3.5 flex-shrink-0 text-[var(--text-muted)] transition-colors group-hover:text-[var(--text-normal)]"}):null,(0,Ln.jsx)("span",{className:"min-w-0 truncate text-[var(--text-normal)]",children:e.label}),e.badgeLabel?(0,Ln.jsx)(nh,{className:"flex-shrink-0",children:e.badgeLabel}):null]}),sA=({entityType:e})=>{let{file:t}=Qo(),n=pe(),i=t,o=(0,zt.useRef)(null),a=(0,zt.useRef)(null),[r,s]=(0,zt.useState)(!1),l=(0,zt.useMemo)(()=>i?In(i):"Untitled",[i]),c=(0,zt.useMemo)(()=>P_(e),[e]),u=(0,zt.useMemo)(()=>i?Mr(n,i):null,[n,i]),f=(0,zt.useMemo)(()=>u?u.kind==="vault"?u.resourcePath:u.url:null,[u]);(0,zt.useEffect)(()=>{let _=o.current,A=f!=null?f:null;_&&A&&a.current!==A&&_.focus({preventScroll:!0}),a.current=A},[f]);let p=(0,zt.useCallback)(()=>{if(u)try{u.kind==="vault"?Vo(n,u.file):typeof window!="undefined"&&window.open(u.url,"_blank","noopener,noreferrer")}catch(_){console.error("EntityHeaderMondo: failed to open cover image",_)}},[n,u]),d=(0,zt.useMemo)(()=>{var A;let _=xt[e];return(A=_==null?void 0:_.icon)!=null?A:"file-text"},[e]),h=xt[e],m=(0,zt.useMemo)(()=>{var x;let _=new Map;return((x=h==null?void 0:h.links)!=null?x:[]).forEach(S=>{let D=Ri(S==null?void 0:S.key);D&&_.set(D,S)}),_},[h==null?void 0:h.links]),b=(0,zt.useMemo)(()=>{var A;let _=(A=h==null?void 0:h.createRelated)!=null?A:[];return _.length===0?[]:_.map(x=>{var ie,ke,Ce,we,Ne,Ve,Xe,ot,ee,Ge,De,ue,Re,bt,vt,nt,nn,Ht,fi;let S=(ke=(ie=Ri(x.referenceLink))!=null?ie:Ri(x.panelKey))!=null?ke:Ri(x.key),M=S?m.get(S):void 0,B=iA(M==null?void 0:M.config),G=(Ce=x.create)!=null?Ce:{},$=iA(B==null?void 0:B.createEntity),te=oA(G.attributes),j=oA($==null?void 0:$.attributes),me=(Xe=(Ne=(we=aA(te))!=null?we:aA(j))!=null?Ne:Ri(x.targetType))!=null?Xe:Ri((Ve=B==null?void 0:B.targetType)!=null?Ve:M==null?void 0:M.targetType);if(!me)return null;let W=me.toLowerCase();if(!Nt(W))return null;let ae=(ee=(ot=Ri(x.key))!=null?ot:S)!=null?ee:W,Q=xt[W],R=Ri(B==null?void 0:B.title),I=(ue=(De=(Ge=Ri(x.label))!=null?Ge:R)!=null?De:Q==null?void 0:Q.name)!=null?ue:W,z=(bt=(Re=Ri(x.icon))!=null?Re:Ri(B==null?void 0:B.icon))!=null?bt:Q==null?void 0:Q.icon,U=(vt=Ri(G.title))!=null?vt:Ri($==null?void 0:$.title),X=(nt=Q==null?void 0:Q.name)!=null?nt:I,H=U||(X?`Untitled ${X}`:void 0),Y=te!=null?te:j,le=(fi=(Ht=(nn=G.linkProperties)!=null?nn:$==null?void 0:$.linkProperties)!=null?Ht:B==null?void 0:B.properties)!=null?fi:B==null?void 0:B.prop,re=typeof G.openAfterCreate=="boolean"?G.openAfterCreate:typeof($==null?void 0:$.openAfterCreate)=="boolean"?$.openAfterCreate:!0;return{key:ae,label:I,icon:z,targetType:W,titleTemplate:H,attributes:Y,linkProperties:le,openAfterCreate:re}}).filter(x=>x!==null)},[h==null?void 0:h.createRelated,m,e]),{collapsedPanels:y}=oh(),[g,v]=(0,zt.useState)(null),T=g!==null||r,k=(0,zt.useCallback)(async _=>{if(!i){new Jo.Notice("Unable to determine the current entity.");return}v(_.key);let A=(_.label||_.targetType).toLowerCase();try{await ih({app:n,targetType:_.targetType,hostEntity:i,titleTemplate:_.titleTemplate,attributeTemplates:_.attributes,linkProperties:H_(_.linkProperties),openAfterCreate:_.openAfterCreate})||new Jo.Notice(`Failed to create ${A} note.`)}catch(x){console.error("EntityHeaderMondo: failed to create related entity",x),new Jo.Notice(`Failed to create ${A} note.`)}finally{v(null)}},[n,i]),E=b[0],C=y.length>0,L=(0,zt.useMemo)(()=>b.map(_=>({label:_.label,icon:_.icon,disabled:T,onSelect:()=>{T||k(_)}})),[b,k,T]),F=(0,zt.useCallback)(()=>{!E||T||k(E)},[k,T,E]),N=(0,zt.useCallback)(async(_,A)=>{if(!U_(A)){new Jo.Notice("Please select an image file.");return}if(!i){new Jo.Notice("Unable to determine the current entity.");return}s(!0);try{let x=$_(A),S=await n.fileManager.getAvailablePathForAttachment(x,i.file.path),D=await A.arrayBuffer(),M=await n.vault.createBinary(S,D),B=null;if(M instanceof Jo.TFile)B=M;else{let $=n.vault.getAbstractFileByPath(S);$ instanceof Jo.TFile&&(B=$)}if(!B)throw new Error("Failed to create image attachment");let G=n.metadataCache.fileToLinktext(B,i.file.path,!1);await n.fileManager.processFrontMatter(i.file,$=>{$.cover=`[[${G}]]`})}catch(x){console.error("EntityHeaderMondo: failed to attach cover image",x),new Jo.Notice("Failed to set cover image.")}finally{s(!1)}},[n,i]);return(0,Ln.jsxs)("div",{ref:o,className:z_,tabIndex:-1,"data-entity-header":!0,children:[(0,Ln.jsx)(Hn,{src:f!=null?f:void 0,alt:"Cover thumbnail",size:80,strategy:"cover",placeholderIcon:d,placeholderIconClassName:"h-8 w-8 text-[var(--text-muted)]",isLoading:r,disabled:r,selectLabel:"Add cover image",editLabel:"Open cover image",onSelectCover:N,onEditCover:p}),(0,Ln.jsxs)("div",{className:"flex min-w-0 flex-1 flex-col gap-2",children:[(0,Ln.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,Ln.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Ln.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--text-normal)]",children:l}),(0,Ln.jsxs)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:["Mondo Note \u2022 ",c]})]}),E?(0,Ln.jsx)("div",{className:"flex-shrink-0",children:(0,Ln.jsx)(Ju,{onClick:F,secondaryActions:L,menuAriaLabel:"Select related entity to create",disabled:T,children:`+ ${E.label}`})}):null]}),C?(0,Ln.jsx)("div",{className:"flex flex-wrap gap-2","aria-label":"Collapsed entity link panels",children:y.map(_=>(0,Ln.jsx)(j_,{panel:_},_.id))}):null]})]})};var ci=O(fe()),gw=require("obsidian");var Yr=O(P()),Y_=()=>$t.map(e=>{var t,n,i;return{type:e,label:(n=(t=xt[e])==null?void 0:t.name)!=null?n:e,icon:(i=xt[e])==null?void 0:i.icon}}).sort((e,t)=>e.label.localeCompare(t.label)),q_=["flex min-h-[5rem] items-center justify-between gap-3","rounded-md border border-[var(--background-modifier-border)]","bg-[var(--background-secondary)] px-3 py-2"].join(" "),lA=()=>{let e=pe(),t=Zt("hideIMSHeaderOnUnknownNotes",!1),{file:n}=Qo(),i=n,o=(0,ci.useRef)(null),a=(0,ci.useRef)(null);if(t)return null;let r=(0,ci.useMemo)(Y_,[]),s=(0,ci.useMemo)(()=>i?In(i):"Untitled",[i]),l=(0,ci.useMemo)(()=>i?Mr(e,i):null,[e,i]),c=(0,ci.useMemo)(()=>l?l.kind==="vault"?l.resourcePath:l.url:null,[l]);(0,ci.useEffect)(()=>{let d=o.current,h=c!=null?c:null;d&&h&&a.current!==h&&d.focus({preventScroll:!0}),a.current=h},[c]);let u=(0,ci.useCallback)(()=>{if(l)try{l.kind==="vault"?Vo(e,l.file):typeof window!="undefined"&&window.open(l.url,"_blank","noopener,noreferrer")}catch(d){console.error("EntityHeaderUnknown: failed to open cover image",d)}},[e,l]),f=(0,ci.useCallback)(async d=>{if(!(i!=null&&i.file)){new gw.Notice("Unable to update note type. Please save the note and try again.");return}try{await e.fileManager.processFrontMatter(i.file,h=>{h.type=d})}catch(h){console.error("EntityHeaderUnknown: failed to assign Mondo type",h),new gw.Notice("Failed to update the note type.")}},[e,i==null?void 0:i.file]),p=(0,ci.useMemo)(()=>r.map(d=>({label:d.label,icon:d.icon,onSelect:()=>{f(d.type)}})),[f,r]);return(0,Yr.jsxs)("div",{ref:o,className:q_,tabIndex:-1,"data-entity-header":!0,children:[(0,Yr.jsx)(Hn,{src:c!=null?c:void 0,alt:"Cover thumbnail",size:80,strategy:"cover",placeholderVariant:"solid",placeholderIcon:"file-text",placeholderIconClassName:"h-8 w-8 text-[var(--text-muted)]",editLabel:"Open cover image",onEditCover:u}),(0,Yr.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,Yr.jsx)("div",{className:"truncate text-sm font-semibold text-[var(--text-normal)]",children:s}),(0,Yr.jsx)("div",{className:"text-xs font-semibold uppercase tracking-wide text-[var(--text-muted)]",children:"Assign a Mondo type to unlock entity tools"})]}),(0,Yr.jsx)(Ju,{type:"button",icon:"plus",menuAriaLabel:"Select Mondo note type",secondaryActions:p,primaryOpensMenu:!0,disabled:p.length===0,children:"Create as Mondo Note"})]})};var yw=O(P()),ah=({type:e})=>{let t=Zt("hideIMSHeaderOnUnknownNotes",!1);return $t.length===0?null:typeof e=="string"&&Nt(e)?(0,yw.jsx)(sA,{entityType:e}):t?null:(0,yw.jsx)(lA,{})};var Be=O(fe());var ui=O(fe());var K=O(fe()),Ys=O(Yh());var Yt=O(fe());function uA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Yt.useMemo)(()=>i=>{t.forEach(o=>o(i))},t)}var Dd=typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined";function Hs(e){let t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function rh(e){return"nodeType"in e}function Xn(e){var t,n;return e?Hs(e)?e:rh(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function sh(e){let{Document:t}=Xn(e);return e instanceof t}function xc(e){return Hs(e)?!1:e instanceof Xn(e).HTMLElement}function vw(e){return e instanceof Xn(e).SVGElement}function Vs(e){return e?Hs(e)?e.document:rh(e)?sh(e)?e:xc(e)||vw(e)?e.ownerDocument:document:document:document}var Wi=Dd?Yt.useLayoutEffect:Yt.useEffect;function lh(e){let t=(0,Yt.useRef)(e);return Wi(()=>{t.current=e}),(0,Yt.useCallback)(function(){for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return t.current==null?void 0:t.current(...i)},[])}function dA(){let e=(0,Yt.useRef)(null),t=(0,Yt.useCallback)((i,o)=>{e.current=setInterval(i,o)},[]),n=(0,Yt.useCallback)(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Nc(e,t){t===void 0&&(t=[e]);let n=(0,Yt.useRef)(e);return Wi(()=>{n.current!==e&&(n.current=e)},t),n}function Ac(e,t){let n=(0,Yt.useRef)();return(0,Yt.useMemo)(()=>{let i=e(n.current);return n.current=i,i},[...t])}function Ld(e){let t=lh(e),n=(0,Yt.useRef)(null),i=(0,Yt.useCallback)(o=>{o!==n.current&&(t==null||t(o,n.current)),n.current=o},[]);return[n,i]}function ch(e){let t=(0,Yt.useRef)();return(0,Yt.useEffect)(()=>{t.current=e},[e]),t.current}var bw={};function Us(e,t){return(0,Yt.useMemo)(()=>{if(t)return t;let n=bw[e]==null?0:bw[e]+1;return bw[e]=n,e+"-"+n},[e,t])}function fA(e){return function(t){for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];return i.reduce((a,r)=>{let s=Object.entries(r);for(let[l,c]of s){let u=a[l];u!=null&&(a[l]=u+e*c)}return a},{...t})}}var $s=fA(1),Dc=fA(-1);function G_(e){return"clientX"in e&&"clientY"in e}function Rd(e){if(!e)return!1;let{KeyboardEvent:t}=Xn(e.target);return t&&e instanceof t}function K_(e){if(!e)return!1;let{TouchEvent:t}=Xn(e.target);return t&&e instanceof t}function uh(e){if(K_(e)){if(e.touches&&e.touches.length){let{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){let{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return G_(e)?{x:e.clientX,y:e.clientY}:null}var qr=Object.freeze({Translate:{toString(e){if(!e)return;let{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;let{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[qr.Translate.toString(e),qr.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:i}=e;return t+" "+n+"ms "+i}}}),cA="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function pA(e){return e.matches(cA)?e:e.querySelector(cA)}var js=O(fe()),Q_={display:"none"};function mA(e){let{id:t,value:n}=e;return js.default.createElement("div",{id:t,style:Q_},n)}function hA(e){let{id:t,announcement:n,ariaLiveType:i="assertive"}=e,o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return js.default.createElement("div",{id:t,style:o,role:"status","aria-live":i,"aria-atomic":!0},n)}function gA(){let[e,t]=(0,js.useState)("");return{announce:(0,js.useCallback)(i=>{i!=null&&t(i)},[]),announcement:e}}var NA=(0,K.createContext)(null);function X_(e){let t=(0,K.useContext)(NA);(0,K.useEffect)(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function J_(){let[e]=(0,K.useState)(()=>new Set),t=(0,K.useCallback)(i=>(e.add(i),()=>e.delete(i)),[e]);return[(0,K.useCallback)(i=>{let{type:o,event:a}=i;e.forEach(r=>{var s;return(s=r[o])==null?void 0:s.call(r,a)})},[e]),t]}var W_={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Z_={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function eB(e){let{announcements:t=Z_,container:n,hiddenTextDescribedById:i,screenReaderInstructions:o=W_}=e,{announce:a,announcement:r}=gA(),s=Us("DndLiveRegion"),[l,c]=(0,K.useState)(!1);if((0,K.useEffect)(()=>{c(!0)},[]),X_((0,K.useMemo)(()=>({onDragStart(f){let{active:p}=f;a(t.onDragStart({active:p}))},onDragMove(f){let{active:p,over:d}=f;t.onDragMove&&a(t.onDragMove({active:p,over:d}))},onDragOver(f){let{active:p,over:d}=f;a(t.onDragOver({active:p,over:d}))},onDragEnd(f){let{active:p,over:d}=f;a(t.onDragEnd({active:p,over:d}))},onDragCancel(f){let{active:p,over:d}=f;a(t.onDragCancel({active:p,over:d}))}}),[a,t])),!l)return null;let u=K.default.createElement(K.default.Fragment,null,K.default.createElement(mA,{id:i,value:o.draggable}),K.default.createElement(hA,{id:s,announcement:r}));return n?(0,Ys.createPortal)(u,n):u}var mn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(mn||(mn={}));function fh(){}function xw(e,t){return(0,K.useMemo)(()=>({sensor:e,options:t!=null?t:{}}),[e,t])}function AA(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,K.useMemo)(()=>[...t].filter(i=>i!=null),[...t])}var ko=Object.freeze({x:0,y:0});function tB(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function nB(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return n-i}function iB(e,t){let{data:{value:n}}=e,{data:{value:i}}=t;return i-n}function DA(e,t){if(!e||e.length===0)return null;let[n]=e;return t?n[t]:n}function yA(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}var LA=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e,o=yA(t,t.left,t.top),a=[];for(let r of i){let{id:s}=r,l=n.get(s);if(l){let c=tB(yA(l),o);a.push({id:s,data:{droppableContainer:r,value:c}})}}return a.sort(nB)};function oB(e,t){let n=Math.max(t.top,e.top),i=Math.max(t.left,e.left),o=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),r=o-i,s=a-n;if(i<o&&n<a){let l=t.width*t.height,c=e.width*e.height,u=r*s,f=u/(l+c-u);return Number(f.toFixed(4))}return 0}var aB=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:i}=e,o=[];for(let a of i){let{id:r}=a,s=n.get(r);if(s){let l=oB(s,t);l>0&&o.push({id:r,data:{droppableContainer:a,value:l}})}}return o.sort(iB)};function rB(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function RA(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ko}function sB(e){return function(n){for(var i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];return o.reduce((r,s)=>({...r,top:r.top+e*s.y,bottom:r.bottom+e*s.y,left:r.left+e*s.x,right:r.right+e*s.x}),{...n})}}var lB=sB(1);function cB(e){if(e.startsWith("matrix3d(")){let t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){let t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function uB(e,t,n){let i=cB(t);if(!i)return e;let{scaleX:o,scaleY:a,x:r,y:s}=i,l=e.left-r-(1-o)*parseFloat(n),c=e.top-s-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),u=o?e.width/o:e.width,f=a?e.height/a:e.height;return{width:u,height:f,top:c,right:l+u,bottom:c+f,left:l}}var dB={ignoreTransform:!1};function Ks(e,t){t===void 0&&(t=dB);let n=e.getBoundingClientRect();if(t.ignoreTransform){let{transform:c,transformOrigin:u}=Xn(e).getComputedStyle(e);c&&(n=uB(n,c,u))}let{top:i,left:o,width:a,height:r,bottom:s,right:l}=n;return{top:i,left:o,width:a,height:r,bottom:s,right:l}}function bA(e){return Ks(e,{ignoreTransform:!0})}function fB(e){let t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function pB(e,t){return t===void 0&&(t=Xn(e).getComputedStyle(e)),t.position==="fixed"}function mB(e,t){t===void 0&&(t=Xn(e).getComputedStyle(e));let n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{let a=t[o];return typeof a=="string"?n.test(a):!1})}function hh(e,t){let n=[];function i(o){if(t!=null&&n.length>=t||!o)return n;if(sh(o)&&o.scrollingElement!=null&&!n.includes(o.scrollingElement))return n.push(o.scrollingElement),n;if(!xc(o)||vw(o)||n.includes(o))return n;let a=Xn(e).getComputedStyle(o);return o!==e&&mB(o,a)&&n.push(o),pB(o,a)?n:i(o.parentNode)}return e?i(e):n}function OA(e){let[t]=hh(e,1);return t!=null?t:null}function ww(e){return!Dd||!e?null:Hs(e)?e:rh(e)?sh(e)||e===Vs(e).scrollingElement?window:xc(e)?e:null:null}function FA(e){return Hs(e)?e.scrollX:e.scrollLeft}function _A(e){return Hs(e)?e.scrollY:e.scrollTop}function kw(e){return{x:FA(e),y:_A(e)}}var Tn;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Tn||(Tn={}));function BA(e){return!Dd||!e?!1:e===document.scrollingElement}function IA(e){let t={x:0,y:0},n=BA(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},i={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},o=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,r=e.scrollTop>=i.y,s=e.scrollLeft>=i.x;return{isTop:o,isLeft:a,isBottom:r,isRight:s,maxScroll:i,minScroll:t}}var hB={x:.2,y:.2};function gB(e,t,n,i,o){let{top:a,left:r,right:s,bottom:l}=n;i===void 0&&(i=10),o===void 0&&(o=hB);let{isTop:c,isBottom:u,isLeft:f,isRight:p}=IA(e),d={x:0,y:0},h={x:0,y:0},m={height:t.height*o.y,width:t.width*o.x};return!c&&a<=t.top+m.height?(d.y=Tn.Backward,h.y=i*Math.abs((t.top+m.height-a)/m.height)):!u&&l>=t.bottom-m.height&&(d.y=Tn.Forward,h.y=i*Math.abs((t.bottom-m.height-l)/m.height)),!p&&s>=t.right-m.width?(d.x=Tn.Forward,h.x=i*Math.abs((t.right-m.width-s)/m.width)):!f&&r<=t.left+m.width&&(d.x=Tn.Backward,h.x=i*Math.abs((t.left+m.width-r)/m.width)),{direction:d,speed:h}}function yB(e){if(e===document.scrollingElement){let{innerWidth:a,innerHeight:r}=window;return{top:0,left:0,right:a,bottom:r,width:a,height:r}}let{top:t,left:n,right:i,bottom:o}=e.getBoundingClientRect();return{top:t,left:n,right:i,bottom:o,width:e.clientWidth,height:e.clientHeight}}function PA(e){return e.reduce((t,n)=>$s(t,kw(n)),ko)}function bB(e){return e.reduce((t,n)=>t+FA(n),0)}function vB(e){return e.reduce((t,n)=>t+_A(n),0)}function wB(e,t){if(t===void 0&&(t=Ks),!e)return;let{top:n,left:i,bottom:o,right:a}=t(e);OA(e)&&(o<=0||a<=0||n>=window.innerHeight||i>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}var TB=[["x",["left","right"],bB],["y",["top","bottom"],vB]],Fd=class{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;let i=hh(n),o=PA(i);this.rect={...t},this.width=t.width,this.height=t.height;for(let[a,r,s]of TB)for(let l of r)Object.defineProperty(this,l,{get:()=>{let c=s(i),u=o[a]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}},qs=class{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var i;return(i=this.target)==null?void 0:i.removeEventListener(...n)})},this.target=t}add(t,n,i){var o;(o=this.target)==null||o.addEventListener(t,n,i),this.listeners.push([t,n,i])}};function SB(e){let{EventTarget:t}=Xn(e);return e instanceof t?e:Vs(e)}function Tw(e,t){let n=Math.abs(e.x),i=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+i**2)>t:"x"in t&&"y"in t?n>t.x&&i>t.y:"x"in t?n>t.x:"y"in t?i>t.y:!1}var Zi;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(Zi||(Zi={}));function vA(e){e.preventDefault()}function kB(e){e.stopPropagation()}var st;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(st||(st={}));var zA={start:[st.Space,st.Enter],cancel:[st.Esc],end:[st.Space,st.Enter,st.Tab]},EB=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case st.Right:return{...n,x:n.x+25};case st.Left:return{...n,x:n.x-25};case st.Down:return{...n,y:n.y+25};case st.Up:return{...n,y:n.y-25}}},ph=class{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;let{event:{target:n}}=t;this.props=t,this.listeners=new qs(Vs(n)),this.windowListeners=new qs(Xn(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Zi.Resize,this.handleCancel),this.windowListeners.add(Zi.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Zi.Keydown,this.handleKeyDown))}handleStart(){let{activeNode:t,onStart:n}=this.props,i=t.node.current;i&&wB(i),n(ko)}handleKeyDown(t){if(Rd(t)){let{active:n,context:i,options:o}=this.props,{keyboardCodes:a=zA,coordinateGetter:r=EB,scrollBehavior:s="smooth"}=o,{code:l}=t;if(a.end.includes(l)){this.handleEnd(t);return}if(a.cancel.includes(l)){this.handleCancel(t);return}let{collisionRect:c}=i.current,u=c?{x:c.left,y:c.top}:ko;this.referenceCoordinates||(this.referenceCoordinates=u);let f=r(t,{active:n,context:i.current,currentCoordinates:u});if(f){let p=Dc(f,u),d={x:0,y:0},{scrollableAncestors:h}=i.current;for(let m of h){let b=t.code,{isTop:y,isRight:g,isLeft:v,isBottom:w,maxScroll:T,minScroll:k}=IA(m),E=yB(m),C={x:Math.min(b===st.Right?E.right-E.width/2:E.right,Math.max(b===st.Right?E.left:E.left+E.width/2,f.x)),y:Math.min(b===st.Down?E.bottom-E.height/2:E.bottom,Math.max(b===st.Down?E.top:E.top+E.height/2,f.y))},L=b===st.Right&&!g||b===st.Left&&!v,F=b===st.Down&&!w||b===st.Up&&!y;if(L&&C.x!==f.x){let N=m.scrollLeft+p.x,_=b===st.Right&&N<=T.x||b===st.Left&&N>=k.x;if(_&&!p.y){m.scrollTo({left:N,behavior:s});return}_?d.x=m.scrollLeft-N:d.x=b===st.Right?m.scrollLeft-T.x:m.scrollLeft-k.x,d.x&&m.scrollBy({left:-d.x,behavior:s});break}else if(F&&C.y!==f.y){let N=m.scrollTop+p.y,_=b===st.Down&&N<=T.y||b===st.Up&&N>=k.y;if(_&&!p.x){m.scrollTo({top:N,behavior:s});return}_?d.y=m.scrollTop-N:d.y=b===st.Down?m.scrollTop-T.y:m.scrollTop-k.y,d.y&&m.scrollBy({top:-d.y,behavior:s});break}}this.handleMove(t,$s(Dc(f,this.referenceCoordinates),d))}}}handleMove(t,n){let{onMove:i}=this.props;t.preventDefault(),i(n)}handleEnd(t){let{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){let{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}};ph.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:i=zA,onActivation:o}=t,{active:a}=n,{code:r}=e.nativeEvent;if(i.start.includes(r)){let s=a.activatorNode.current;return s&&e.target!==s?!1:(e.preventDefault(),o==null||o({event:e.nativeEvent}),!0)}return!1}}];function wA(e){return Boolean(e&&"distance"in e)}function TA(e){return Boolean(e&&"delay"in e)}var _d=class{constructor(t,n,i){var o;i===void 0&&(i=SB(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;let{event:a}=t,{target:r}=a;this.props=t,this.events=n,this.document=Vs(r),this.documentListeners=new qs(this.document),this.listeners=new qs(i),this.windowListeners=new qs(Xn(r)),this.initialCoordinates=(o=uh(a))!=null?o:ko,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){let{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:i}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(Zi.Resize,this.handleCancel),this.windowListeners.add(Zi.DragStart,vA),this.windowListeners.add(Zi.VisibilityChange,this.handleCancel),this.windowListeners.add(Zi.ContextMenu,vA),this.documentListeners.add(Zi.Keydown,this.handleKeydown),n){if(i!=null&&i({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(TA(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(wA(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){let{active:i,onPending:o}=this.props;o(i,t,this.initialCoordinates,n)}handleStart(){let{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(Zi.Click,kB,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Zi.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;let{activated:i,initialCoordinates:o,props:a}=this,{onMove:r,options:{activationConstraint:s}}=a;if(!o)return;let l=(n=uh(t))!=null?n:ko,c=Dc(o,l);if(!i&&s){if(wA(s)){if(s.tolerance!=null&&Tw(c,s.tolerance))return this.handleCancel();if(Tw(c,s.distance))return this.handleStart()}if(TA(s)&&Tw(c,s.tolerance))return this.handleCancel();this.handlePending(s,c);return}t.cancelable&&t.preventDefault(),r(l)}handleEnd(){let{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){let{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===st.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}},CB={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}},Lc=class extends _d{constructor(t){let{event:n}=t,i=Vs(n.target);super(t,CB,i)}};Lc.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return!n.isPrimary||n.button!==0?!1:(i==null||i({event:n}),!0)}}];var MB={move:{name:"mousemove"},end:{name:"mouseup"}},Ew;(function(e){e[e.RightClick=2]="RightClick"})(Ew||(Ew={}));var Cw=class extends _d{constructor(t){super(t,MB,Vs(t.event.target))}};Cw.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t;return n.button===Ew.RightClick?!1:(i==null||i({event:n}),!0)}}];var Sw={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}},Bd=class extends _d{constructor(t){super(t,Sw)}static setup(){return window.addEventListener(Sw.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(Sw.move.name,t)};function t(){}}};Bd.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:i}=t,{touches:o}=n;return o.length>1?!1:(i==null||i({event:n}),!0)}}];var Od;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Od||(Od={}));var mh;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(mh||(mh={}));function xB(e){let{acceleration:t,activator:n=Od.Pointer,canScroll:i,draggingRect:o,enabled:a,interval:r=5,order:s=mh.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:f,threshold:p}=e,d=AB({delta:f,disabled:!a}),[h,m]=dA(),b=(0,K.useRef)({x:0,y:0}),y=(0,K.useRef)({x:0,y:0}),g=(0,K.useMemo)(()=>{switch(n){case Od.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case Od.DraggableRect:return o}},[n,o,l]),v=(0,K.useRef)(null),w=(0,K.useCallback)(()=>{let k=v.current;if(!k)return;let E=b.current.x*y.current.x,C=b.current.y*y.current.y;k.scrollBy(E,C)},[]),T=(0,K.useMemo)(()=>s===mh.TreeOrder?[...c].reverse():c,[s,c]);(0,K.useEffect)(()=>{if(!a||!c.length||!g){m();return}for(let k of T){if((i==null?void 0:i(k))===!1)continue;let E=c.indexOf(k),C=u[E];if(!C)continue;let{direction:L,speed:F}=gB(k,C,g,t,p);for(let N of["x","y"])d[N][L[N]]||(F[N]=0,L[N]=0);if(F.x>0||F.y>0){m(),v.current=k,h(w,r),b.current=F,y.current=L;return}}b.current={x:0,y:0},y.current={x:0,y:0},m()},[t,w,i,m,a,r,JSON.stringify(g),JSON.stringify(d),h,c,T,u,JSON.stringify(p)])}var NB={x:{[Tn.Backward]:!1,[Tn.Forward]:!1},y:{[Tn.Backward]:!1,[Tn.Forward]:!1}};function AB(e){let{delta:t,disabled:n}=e,i=ch(t);return Ac(o=>{if(n||!i||!o)return NB;let a={x:Math.sign(t.x-i.x),y:Math.sign(t.y-i.y)};return{x:{[Tn.Backward]:o.x[Tn.Backward]||a.x===-1,[Tn.Forward]:o.x[Tn.Forward]||a.x===1},y:{[Tn.Backward]:o.y[Tn.Backward]||a.y===-1,[Tn.Forward]:o.y[Tn.Forward]||a.y===1}}},[n,t,i])}function DB(e,t){let n=t!=null?e.get(t):void 0,i=n?n.node.current:null;return Ac(o=>{var a;return t==null?null:(a=i!=null?i:o)!=null?a:null},[i,t])}function LB(e,t){return(0,K.useMemo)(()=>e.reduce((n,i)=>{let{sensor:o}=i,a=o.activators.map(r=>({eventName:r.eventName,handler:t(r.handler,i)}));return[...n,...a]},[]),[e,t])}var Id;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Id||(Id={}));var Mw;(function(e){e.Optimized="optimized"})(Mw||(Mw={}));var SA=new Map;function RB(e,t){let{dragging:n,dependencies:i,config:o}=t,[a,r]=(0,K.useState)(null),{frequency:s,measure:l,strategy:c}=o,u=(0,K.useRef)(e),f=b(),p=Nc(f),d=(0,K.useCallback)(function(y){y===void 0&&(y=[]),!p.current&&r(g=>g===null?y:g.concat(y.filter(v=>!g.includes(v))))},[p]),h=(0,K.useRef)(null),m=Ac(y=>{if(f&&!n)return SA;if(!y||y===SA||u.current!==e||a!=null){let g=new Map;for(let v of e){if(!v)continue;if(a&&a.length>0&&!a.includes(v.id)&&v.rect.current){g.set(v.id,v.rect.current);continue}let w=v.node.current,T=w?new Fd(l(w),w):null;v.rect.current=T,T&&g.set(v.id,T)}return g}return y},[e,a,n,f,l]);return(0,K.useEffect)(()=>{u.current=e},[e]),(0,K.useEffect)(()=>{f||d()},[n,f]),(0,K.useEffect)(()=>{a&&a.length>0&&r(null)},[JSON.stringify(a)]),(0,K.useEffect)(()=>{f||typeof s!="number"||h.current!==null||(h.current=setTimeout(()=>{d(),h.current=null},s))},[s,f,d,...i]),{droppableRects:m,measureDroppableContainers:d,measuringScheduled:a!=null};function b(){switch(c){case Id.Always:return!1;case Id.BeforeDragging:return n;default:return!n}}}function HA(e,t){return Ac(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function OB(e,t){return HA(e,t)}function FB(e){let{callback:t,disabled:n}=e,i=lh(t),o=(0,K.useMemo)(()=>{if(n||typeof window=="undefined"||typeof window.MutationObserver=="undefined")return;let{MutationObserver:a}=window;return new a(i)},[i,n]);return(0,K.useEffect)(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function gh(e){let{callback:t,disabled:n}=e,i=lh(t),o=(0,K.useMemo)(()=>{if(n||typeof window=="undefined"||typeof window.ResizeObserver=="undefined")return;let{ResizeObserver:a}=window;return new a(i)},[n]);return(0,K.useEffect)(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function _B(e){return new Fd(Ks(e),e)}function kA(e,t,n){t===void 0&&(t=_B);let[i,o]=(0,K.useState)(null);function a(){o(l=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=l!=null?l:n)!=null?c:null}let u=t(e);return JSON.stringify(l)===JSON.stringify(u)?l:u})}let r=FB({callback(l){if(e)for(let c of l){let{type:u,target:f}=c;if(u==="childList"&&f instanceof HTMLElement&&f.contains(e)){a();break}}}}),s=gh({callback:a});return Wi(()=>{a(),e?(s==null||s.observe(e),r==null||r.observe(document.body,{childList:!0,subtree:!0})):(s==null||s.disconnect(),r==null||r.disconnect())},[e]),i}function BB(e){let t=HA(e);return RA(e,t)}var EA=[];function IB(e){let t=(0,K.useRef)(e),n=Ac(i=>e?i&&i!==EA&&e&&t.current&&e.parentNode===t.current.parentNode?i:hh(e):EA,[e]);return(0,K.useEffect)(()=>{t.current=e},[e]),n}function PB(e){let[t,n]=(0,K.useState)(null),i=(0,K.useRef)(e),o=(0,K.useCallback)(a=>{let r=ww(a.target);r&&n(s=>s?(s.set(r,kw(r)),new Map(s)):null)},[]);return(0,K.useEffect)(()=>{let a=i.current;if(e!==a){r(a);let s=e.map(l=>{let c=ww(l);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,kw(c)]):null}).filter(l=>l!=null);n(s.length?new Map(s):null),i.current=e}return()=>{r(e),r(a)};function r(s){s.forEach(l=>{let c=ww(l);c==null||c.removeEventListener("scroll",o)})}},[o,e]),(0,K.useMemo)(()=>e.length?t?Array.from(t.values()).reduce((a,r)=>$s(a,r),ko):PA(e):ko,[e,t])}function CA(e,t){t===void 0&&(t=[]);let n=(0,K.useRef)(null);return(0,K.useEffect)(()=>{n.current=null},t),(0,K.useEffect)(()=>{let i=e!==ko;i&&!n.current&&(n.current=e),!i&&n.current&&(n.current=null)},[e]),n.current?Dc(e,n.current):ko}function zB(e){(0,K.useEffect)(()=>{if(!Dd)return;let t=e.map(n=>{let{sensor:i}=n;return i.setup==null?void 0:i.setup()});return()=>{for(let n of t)n==null||n()}},e.map(t=>{let{sensor:n}=t;return n}))}function HB(e,t){return(0,K.useMemo)(()=>e.reduce((n,i)=>{let{eventName:o,handler:a}=i;return n[o]=r=>{a(r,t)},n},{}),[e,t])}function VA(e){return(0,K.useMemo)(()=>e?fB(e):null,[e])}var MA=[];function VB(e,t){t===void 0&&(t=Ks);let[n]=e,i=VA(n?Xn(n):null),[o,a]=(0,K.useState)(MA);function r(){a(()=>e.length?e.map(l=>BA(l)?i:new Fd(t(l),l)):MA)}let s=gh({callback:r});return Wi(()=>{s==null||s.disconnect(),r(),e.forEach(l=>s==null?void 0:s.observe(l))},[e]),o}function UB(e){if(!e)return null;if(e.children.length>1)return e;let t=e.children[0];return xc(t)?t:e}function $B(e){let{measure:t}=e,[n,i]=(0,K.useState)(null),o=(0,K.useCallback)(c=>{for(let{target:u}of c)if(xc(u)){i(f=>{let p=t(u);return f?{...f,width:p.width,height:p.height}:p});break}},[t]),a=gh({callback:o}),r=(0,K.useCallback)(c=>{let u=UB(c);a==null||a.disconnect(),u&&(a==null||a.observe(u)),i(u?t(u):null)},[t,a]),[s,l]=Ld(r);return(0,K.useMemo)(()=>({nodeRef:s,rect:n,setRef:l}),[n,s,l])}var jB=[{sensor:Lc,options:{}},{sensor:ph,options:{}}],YB={current:{}},dh={draggable:{measure:bA},droppable:{measure:bA,strategy:Id.WhileDragging,frequency:Mw.Optimized},dragOverlay:{measure:Ks}},Gs=class extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,i;return(n=(i=this.get(t))==null?void 0:i.node.current)!=null?n:void 0}},qB={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Gs,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:fh},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:dh,measureDroppableContainers:fh,windowRect:null,measuringScheduled:!1},GB={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:fh,draggableNodes:new Map,over:null,measureDroppableContainers:fh},yh=(0,K.createContext)(GB),UA=(0,K.createContext)(qB);function KB(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Gs}}}function QB(e,t){switch(t.type){case mn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case mn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case mn.DragEnd:case mn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case mn.RegisterDroppable:{let{element:n}=t,{id:i}=n,o=new Gs(e.droppable.containers);return o.set(i,n),{...e,droppable:{...e.droppable,containers:o}}}case mn.SetDroppableDisabled:{let{id:n,key:i,disabled:o}=t,a=e.droppable.containers.get(n);if(!a||i!==a.key)return e;let r=new Gs(e.droppable.containers);return r.set(n,{...a,disabled:o}),{...e,droppable:{...e.droppable,containers:r}}}case mn.UnregisterDroppable:{let{id:n,key:i}=t,o=e.droppable.containers.get(n);if(!o||i!==o.key)return e;let a=new Gs(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function XB(e){let{disabled:t}=e,{active:n,activatorEvent:i,draggableNodes:o}=(0,K.useContext)(yh),a=ch(i),r=ch(n==null?void 0:n.id);return(0,K.useEffect)(()=>{if(!t&&!i&&a&&r!=null){if(!Rd(a)||document.activeElement===a.target)return;let s=o.get(r);if(!s)return;let{activatorNode:l,node:c}=s;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(let u of[l.current,c.current]){if(!u)continue;let f=pA(u);if(f){f.focus();break}}})}},[i,t,o,r,a]),null}function JB(e,t){let{transform:n,...i}=t;return e!=null&&e.length?e.reduce((o,a)=>a({transform:o,...i}),n):n}function WB(e){return(0,K.useMemo)(()=>({draggable:{...dh.draggable,...e==null?void 0:e.draggable},droppable:{...dh.droppable,...e==null?void 0:e.droppable},dragOverlay:{...dh.dragOverlay,...e==null?void 0:e.dragOverlay}}),[e==null?void 0:e.draggable,e==null?void 0:e.droppable,e==null?void 0:e.dragOverlay])}function ZB(e){let{activeNode:t,measure:n,initialRect:i,config:o=!0}=e,a=(0,K.useRef)(!1),{x:r,y:s}=typeof o=="boolean"?{x:o,y:o}:o;Wi(()=>{if(!r&&!s||!t){a.current=!1;return}if(a.current||!i)return;let c=t==null?void 0:t.node.current;if(!c||c.isConnected===!1)return;let u=n(c),f=RA(u,i);if(r||(f.x=0),s||(f.y=0),a.current=!0,Math.abs(f.x)>0||Math.abs(f.y)>0){let p=OA(c);p&&p.scrollBy({top:f.y,left:f.x})}},[t,r,s,i,n])}var $A=(0,K.createContext)({...ko,scaleX:1,scaleY:1}),Gr;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Gr||(Gr={}));var jA=(0,K.memo)(function(t){var n,i,o,a;let{id:r,accessibility:s,autoScroll:l=!0,children:c,sensors:u=jB,collisionDetection:f=aB,measuring:p,modifiers:d,...h}=t,m=(0,K.useReducer)(QB,void 0,KB),[b,y]=m,[g,v]=J_(),[w,T]=(0,K.useState)(Gr.Uninitialized),k=w===Gr.Initialized,{draggable:{active:E,nodes:C,translate:L},droppable:{containers:F}}=b,N=E!=null?C.get(E):null,_=(0,K.useRef)({initial:null,translated:null}),A=(0,K.useMemo)(()=>{var Ft;return E!=null?{id:E,data:(Ft=N==null?void 0:N.data)!=null?Ft:YB,rect:_}:null},[E,N]),x=(0,K.useRef)(null),[S,D]=(0,K.useState)(null),[M,B]=(0,K.useState)(null),G=Nc(h,Object.values(h)),$=Us("DndDescribedBy",r),te=(0,K.useMemo)(()=>F.getEnabled(),[F]),j=WB(p),{droppableRects:me,measureDroppableContainers:W,measuringScheduled:ae}=RB(te,{dragging:k,dependencies:[L.x,L.y],config:j.droppable}),Q=DB(C,E),R=(0,K.useMemo)(()=>M?uh(M):null,[M]),I=Jr(),z=OB(Q,j.draggable.measure);ZB({activeNode:E!=null?C.get(E):null,config:I.layoutShiftCompensation,initialRect:z,measure:j.draggable.measure});let U=kA(Q,j.draggable.measure,z),X=kA(Q?Q.parentElement:null),H=(0,K.useRef)({activatorEvent:null,active:null,activeNode:Q,collisionRect:null,collisions:null,droppableRects:me,draggableNodes:C,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Y=F.getNodeFor((n=H.current.over)==null?void 0:n.id),le=$B({measure:j.dragOverlay.measure}),re=(i=le.nodeRef.current)!=null?i:Q,ie=k?(o=le.rect)!=null?o:U:null,ke=Boolean(le.nodeRef.current&&le.rect),Ce=BB(ke?null:U),we=VA(re?Xn(re):null),Ne=IB(k?Y!=null?Y:Q:null),Ve=VB(Ne),Xe=JB(d,{transform:{x:L.x-Ce.x,y:L.y-Ce.y,scaleX:1,scaleY:1},activatorEvent:M,active:A,activeNodeRect:U,containerNodeRect:X,draggingNodeRect:ie,over:H.current.over,overlayNodeRect:le.rect,scrollableAncestors:Ne,scrollableAncestorRects:Ve,windowRect:we}),ot=R?$s(R,L):null,ee=PB(Ne),Ge=CA(ee),De=CA(ee,[U]),ue=$s(Xe,Ge),Re=ie?lB(ie,Xe):null,bt=A&&Re?f({active:A,collisionRect:Re,droppableRects:me,droppableContainers:te,pointerCoordinates:ot}):null,vt=DA(bt,"id"),[nt,nn]=(0,K.useState)(null),Ht=ke?Xe:$s(Xe,De),fi=rB(Ht,(a=nt==null?void 0:nt.rect)!=null?a:null,U),pi=(0,K.useRef)(null),eo=(0,K.useCallback)((Ft,on)=>{let{sensor:an,options:Jn}=on;if(x.current==null)return;let hn=C.get(x.current);if(!hn)return;let Rn=Ft.nativeEvent,mi=new an({active:x.current,activeNode:hn,event:Rn,options:Jn,context:H,onAbort(Kt){if(!C.get(Kt))return;let{onDragAbort:Z}=G.current,J={id:Kt};Z==null||Z(J),g({type:"onDragAbort",event:J})},onPending(Kt,V,Z,J){if(!C.get(Kt))return;let{onDragPending:he}=G.current,ye={id:Kt,constraint:V,initialCoordinates:Z,offset:J};he==null||he(ye),g({type:"onDragPending",event:ye})},onStart(Kt){let V=x.current;if(V==null)return;let Z=C.get(V);if(!Z)return;let{onDragStart:J}=G.current,se={activatorEvent:Rn,active:{id:V,data:Z.data,rect:_}};(0,Ys.unstable_batchedUpdates)(()=>{J==null||J(se),T(Gr.Initializing),y({type:mn.DragStart,initialCoordinates:Kt,active:V}),g({type:"onDragStart",event:se}),D(pi.current),B(Rn)})},onMove(Kt){y({type:mn.DragMove,coordinates:Kt})},onEnd:Wo(mn.DragEnd),onCancel:Wo(mn.DragCancel)});pi.current=mi;function Wo(Kt){return async function(){let{active:Z,collisions:J,over:se,scrollAdjustedTranslate:he}=H.current,ye=null;if(Z&&he){let{cancelDrop:Te}=G.current;ye={activatorEvent:Rn,active:Z,collisions:J,delta:he,over:se},Kt===mn.DragEnd&&typeof Te=="function"&&await Promise.resolve(Te(ye))&&(Kt=mn.DragCancel)}x.current=null,(0,Ys.unstable_batchedUpdates)(()=>{y({type:Kt}),T(Gr.Uninitialized),nn(null),D(null),B(null),pi.current=null;let Te=Kt===mn.DragEnd?"onDragEnd":"onDragCancel";if(ye){let Oe=G.current[Te];Oe==null||Oe(ye),g({type:Te,event:ye})}})}}},[C]),Co=(0,K.useCallback)((Ft,on)=>(an,Jn)=>{let hn=an.nativeEvent,Rn=C.get(Jn);if(x.current!==null||!Rn||hn.dndKit||hn.defaultPrevented)return;let mi={active:Rn};Ft(an,on.options,mi)===!0&&(hn.dndKit={capturedBy:on.sensor},x.current=Jn,eo(an,on))},[C,eo]),to=LB(u,Co);zB(u),Wi(()=>{U&&w===Gr.Initializing&&T(Gr.Initialized)},[U,w]),(0,K.useEffect)(()=>{let{onDragMove:Ft}=G.current,{active:on,activatorEvent:an,collisions:Jn,over:hn}=H.current;if(!on||!an)return;let Rn={active:on,activatorEvent:an,collisions:Jn,delta:{x:ue.x,y:ue.y},over:hn};(0,Ys.unstable_batchedUpdates)(()=>{Ft==null||Ft(Rn),g({type:"onDragMove",event:Rn})})},[ue.x,ue.y]),(0,K.useEffect)(()=>{let{active:Ft,activatorEvent:on,collisions:an,droppableContainers:Jn,scrollAdjustedTranslate:hn}=H.current;if(!Ft||x.current==null||!on||!hn)return;let{onDragOver:Rn}=G.current,mi=Jn.get(vt),Wo=mi&&mi.rect.current?{id:mi.id,rect:mi.rect.current,data:mi.data,disabled:mi.disabled}:null,Kt={active:Ft,activatorEvent:on,collisions:an,delta:{x:hn.x,y:hn.y},over:Wo};(0,Ys.unstable_batchedUpdates)(()=>{nn(Wo),Rn==null||Rn(Kt),g({type:"onDragOver",event:Kt})})},[vt]),Wi(()=>{H.current={activatorEvent:M,active:A,activeNode:Q,collisionRect:Re,collisions:bt,droppableRects:me,draggableNodes:C,draggingNode:re,draggingNodeRect:ie,droppableContainers:F,over:nt,scrollableAncestors:Ne,scrollAdjustedTranslate:ue},_.current={initial:ie,translated:Re}},[A,Q,bt,Re,C,re,ie,me,F,nt,Ne,ue]),xB({...I,delta:L,draggingRect:Re,pointerCoordinates:ot,scrollableAncestors:Ne,scrollableAncestorRects:Ve});let Qr=(0,K.useMemo)(()=>({active:A,activeNode:Q,activeNodeRect:U,activatorEvent:M,collisions:bt,containerNodeRect:X,dragOverlay:le,draggableNodes:C,droppableContainers:F,droppableRects:me,over:nt,measureDroppableContainers:W,scrollableAncestors:Ne,scrollableAncestorRects:Ve,measuringConfiguration:j,measuringScheduled:ae,windowRect:we}),[A,Q,U,M,bt,X,le,C,F,me,nt,W,Ne,Ve,j,ae,we]),Xr=(0,K.useMemo)(()=>({activatorEvent:M,activators:to,active:A,activeNodeRect:U,ariaDescribedById:{draggable:$},dispatch:y,draggableNodes:C,over:nt,measureDroppableContainers:W}),[M,to,A,U,y,$,C,nt,W]);return K.default.createElement(NA.Provider,{value:v},K.default.createElement(yh.Provider,{value:Xr},K.default.createElement(UA.Provider,{value:Qr},K.default.createElement($A.Provider,{value:fi},c)),K.default.createElement(XB,{disabled:(s==null?void 0:s.restoreFocus)===!1})),K.default.createElement(eB,{...s,hiddenTextDescribedById:$}));function Jr(){let Ft=(S==null?void 0:S.autoScrollEnabled)===!1,on=typeof l=="object"?l.enabled===!1:l===!1,an=k&&!Ft&&!on;return typeof l=="object"?{...l,enabled:an}:{enabled:an}}}),eI=(0,K.createContext)(null),xA="button",tI="Draggable";function YA(e){let{id:t,data:n,disabled:i=!1,attributes:o}=e,a=Us(tI),{activators:r,activatorEvent:s,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:f,over:p}=(0,K.useContext)(yh),{role:d=xA,roleDescription:h="draggable",tabIndex:m=0}=o!=null?o:{},b=(l==null?void 0:l.id)===t,y=(0,K.useContext)(b?$A:eI),[g,v]=Ld(),[w,T]=Ld(),k=HB(r,t),E=Nc(n);Wi(()=>(f.set(t,{id:t,key:a,node:g,activatorNode:w,data:E}),()=>{let L=f.get(t);L&&L.key===a&&f.delete(t)}),[f,t]);let C=(0,K.useMemo)(()=>({role:d,tabIndex:m,"aria-disabled":i,"aria-pressed":b&&d===xA?!0:void 0,"aria-roledescription":h,"aria-describedby":u.draggable}),[i,d,m,b,h,u.draggable]);return{active:l,activatorEvent:s,activeNodeRect:c,attributes:C,isDragging:b,listeners:i?void 0:k,node:g,over:p,setNodeRef:v,setActivatorNodeRef:T,transform:y}}function qA(){return(0,K.useContext)(UA)}var nI="Droppable",iI={timeout:25};function GA(e){let{data:t,disabled:n=!1,id:i,resizeObserverConfig:o}=e,a=Us(nI),{active:r,dispatch:s,over:l,measureDroppableContainers:c}=(0,K.useContext)(yh),u=(0,K.useRef)({disabled:n}),f=(0,K.useRef)(!1),p=(0,K.useRef)(null),d=(0,K.useRef)(null),{disabled:h,updateMeasurementsFor:m,timeout:b}={...iI,...o},y=Nc(m!=null?m:i),g=(0,K.useCallback)(()=>{if(!f.current){f.current=!0;return}d.current!=null&&clearTimeout(d.current),d.current=setTimeout(()=>{c(Array.isArray(y.current)?y.current:[y.current]),d.current=null},b)},[b]),v=gh({callback:g,disabled:h||!r}),w=(0,K.useCallback)((C,L)=>{v&&(L&&(v.unobserve(L),f.current=!1),C&&v.observe(C))},[v]),[T,k]=Ld(w),E=Nc(t);return(0,K.useEffect)(()=>{!v||!T.current||(v.disconnect(),f.current=!1,v.observe(T.current))},[T,v]),(0,K.useEffect)(()=>(s({type:mn.RegisterDroppable,element:{id:i,key:a,disabled:n,node:T,rect:p,data:E}}),()=>s({type:mn.UnregisterDroppable,key:a,id:i})),[i]),(0,K.useEffect)(()=>{n!==u.current.disabled&&(s({type:mn.SetDroppableDisabled,id:i,key:a,disabled:n}),u.current.disabled=n)},[i,a,n,s]),{active:r,rect:p,isOver:(l==null?void 0:l.id)===i,node:T,over:l,setNodeRef:k}}var qt=O(fe());function wh(e,t,n){let i=e.slice();return i.splice(n<0?i.length+n:n,0,i.splice(t,1)[0]),i}function oI(e,t){return e.reduce((n,i,o)=>{let a=t.get(i);return a&&(n[o]=a),n},Array(e.length))}function bh(e){return e!==null&&e>=0}function aI(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function rI(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}var KA=e=>{let{rects:t,activeIndex:n,overIndex:i,index:o}=e,a=wh(t,i,n),r=t[o],s=a[o];return!s||!r?null:{x:s.left-r.left,y:s.top-r.top,scaleX:s.width/r.width,scaleY:s.height/r.height}};var vh={scaleX:1,scaleY:1},QA=e=>{var t;let{activeIndex:n,activeNodeRect:i,index:o,rects:a,overIndex:r}=e,s=(t=a[n])!=null?t:i;if(!s)return null;if(o===n){let c=a[r];return c?{x:0,y:n<r?c.top+c.height-(s.top+s.height):c.top-s.top,...vh}:null}let l=sI(a,o,n);return o>n&&o<=r?{x:0,y:-s.height-l,...vh}:o<n&&o>=r?{x:0,y:s.height+l,...vh}:{x:0,y:0,...vh}};function sI(e,t,n){let i=e[t],o=e[t-1],a=e[t+1];return i?n<t?o?i.top-(o.top+o.height):a?a.top-(i.top+i.height):0:a?a.top-(i.top+i.height):o?i.top-(o.top+o.height):0:0}var XA="Sortable",JA=qt.default.createContext({activeIndex:-1,containerId:XA,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:KA,disabled:{draggable:!1,droppable:!1}});function WA(e){let{children:t,id:n,items:i,strategy:o=KA,disabled:a=!1}=e,{active:r,dragOverlay:s,droppableRects:l,over:c,measureDroppableContainers:u}=qA(),f=Us(XA,n),p=Boolean(s.rect!==null),d=(0,qt.useMemo)(()=>i.map(k=>typeof k=="object"&&"id"in k?k.id:k),[i]),h=r!=null,m=r?d.indexOf(r.id):-1,b=c?d.indexOf(c.id):-1,y=(0,qt.useRef)(d),g=!aI(d,y.current),v=b!==-1&&m===-1||g,w=rI(a);Wi(()=>{g&&h&&u(d)},[g,d,h,u]),(0,qt.useEffect)(()=>{y.current=d},[d]);let T=(0,qt.useMemo)(()=>({activeIndex:m,containerId:f,disabled:w,disableTransforms:v,items:d,overIndex:b,useDragOverlay:p,sortedRects:oI(d,l),strategy:o}),[m,f,w.draggable,w.droppable,v,d,b,l,p,o]);return qt.default.createElement(JA.Provider,{value:T},t)}var lI=e=>{let{id:t,items:n,activeIndex:i,overIndex:o}=e;return wh(n,i,o).indexOf(t)},cI=e=>{let{containerId:t,isSorting:n,wasDragging:i,index:o,items:a,newIndex:r,previousItems:s,previousContainerId:l,transition:c}=e;return!c||!i||s!==a&&o===r?!1:n?!0:r!==o&&t===l},uI={duration:200,easing:"ease"},ZA="transform",dI=qr.Transition.toString({property:ZA,duration:0,easing:"linear"}),fI={roleDescription:"sortable"};function pI(e){let{disabled:t,index:n,node:i,rect:o}=e,[a,r]=(0,qt.useState)(null),s=(0,qt.useRef)(n);return Wi(()=>{if(!t&&n!==s.current&&i.current){let l=o.current;if(l){let c=Ks(i.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&r(u)}}n!==s.current&&(s.current=n)},[t,n,i,o]),(0,qt.useEffect)(()=>{a&&r(null)},[a]),a}function e1(e){let{animateLayoutChanges:t=cI,attributes:n,disabled:i,data:o,getNewIndex:a=lI,id:r,strategy:s,resizeObserverConfig:l,transition:c=uI}=e,{items:u,containerId:f,activeIndex:p,disabled:d,disableTransforms:h,sortedRects:m,overIndex:b,useDragOverlay:y,strategy:g}=(0,qt.useContext)(JA),v=mI(i,d),w=u.indexOf(r),T=(0,qt.useMemo)(()=>({sortable:{containerId:f,index:w,items:u},...o}),[f,o,w,u]),k=(0,qt.useMemo)(()=>u.slice(u.indexOf(r)),[u,r]),{rect:E,node:C,isOver:L,setNodeRef:F}=GA({id:r,data:T,disabled:v.droppable,resizeObserverConfig:{updateMeasurementsFor:k,...l}}),{active:N,activatorEvent:_,activeNodeRect:A,attributes:x,setNodeRef:S,listeners:D,isDragging:M,over:B,setActivatorNodeRef:G,transform:$}=YA({id:r,data:T,attributes:{...fI,...n},disabled:v.draggable}),te=uA(F,S),j=Boolean(N),me=j&&!h&&bh(p)&&bh(b),W=!y&&M,ae=W&&me?$:null,Q=s!=null?s:g,R=me?ae!=null?ae:Q({rects:m,activeNodeRect:A,activeIndex:p,overIndex:b,index:w}):null,I=bh(p)&&bh(b)?a({id:r,items:u,activeIndex:p,overIndex:b}):w,z=N==null?void 0:N.id,U=(0,qt.useRef)({activeId:z,items:u,newIndex:I,containerId:f}),X=u!==U.current.items,H=t({active:N,containerId:f,isDragging:M,isSorting:j,id:r,index:w,items:u,newIndex:U.current.newIndex,previousItems:U.current.items,previousContainerId:U.current.containerId,transition:c,wasDragging:U.current.activeId!=null}),Y=pI({disabled:!H,index:w,node:C,rect:E});return(0,qt.useEffect)(()=>{j&&U.current.newIndex!==I&&(U.current.newIndex=I),f!==U.current.containerId&&(U.current.containerId=f),u!==U.current.items&&(U.current.items=u)},[j,I,f,u]),(0,qt.useEffect)(()=>{if(z===U.current.activeId)return;if(z!=null&&U.current.activeId==null){U.current.activeId=z;return}let re=setTimeout(()=>{U.current.activeId=z},50);return()=>clearTimeout(re)},[z]),{active:N,activeIndex:p,attributes:x,data:T,rect:E,index:w,newIndex:I,items:u,isOver:L,isSorting:j,isDragging:M,listeners:D,node:C,overIndex:b,over:B,setNodeRef:te,setActivatorNodeRef:G,setDroppableNodeRef:F,setDraggableNodeRef:S,transform:Y!=null?Y:R,transition:le()};function le(){if(Y||X&&U.current.newIndex===w)return dI;if(!(W&&!Rd(_)||!c)&&(j||H))return qr.Transition.toString({...c,property:ZA})}}function mI(e,t){var n,i;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e==null?void 0:e.draggable)!=null?n:t.draggable,droppable:(i=e==null?void 0:e.droppable)!=null?i:t.droppable}}var KQ=[st.Down,st.Right,st.Up,st.Left];var Gt=O(P()),hI=10;var gI=e=>({transform:t,activeNodeRect:n,draggingNodeRect:i})=>{var u;let o={...t,x:0},a=e();if(!a||!n)return o;let r=a.getBoundingClientRect(),s=((u=i==null?void 0:i.height)!=null?u:n.height)||0,l=r.top-n.top,c=r.bottom-n.top-s;if(Number.isFinite(l)&&Number.isFinite(c)){let f=typeof o.y=="number"?o.y:0;o.y=Math.min(Math.max(f,l),c)}return o},t1=({items:e,renderRow:t,getKey:n,pageSize:i=hI,emptyLabel:o=(0,Gt.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:"No entries"}),sortable:a=!1,onReorder:r,getSortableId:s})=>{let l=a&&typeof r=="function",[c,u]=ui.default.useState(!1),[f,p]=ui.default.useState(null),d=ui.default.useRef(null),h=ui.default.useCallback((N,_)=>{let A=s?s(N,_):n(N,_);return typeof A=="string"||typeof A=="number"?A:String(A)},[n,s]),[m,b]=ui.default.useState(()=>l?e.length:Math.min(i,e.length));ui.default.useEffect(()=>{if(l){b(e.length);return}b(N=>e.length<=i?e.length:N<=0?i:Math.min(Math.max(i,N),e.length))},[l,e.length,i]);let y=f!=null?f:e,g=ui.default.useMemo(()=>y.slice(0,l?y.length:m),[y,l,m]),v=AA(xw(Lc,{activationConstraint:{distance:6}}),xw(Bd,{activationConstraint:{delay:150,tolerance:6}})),w=ui.default.useMemo(()=>gI(()=>d.current),[]),T=ui.default.useCallback(N=>{if(u(!1),!l||!r)return;let{active:_,over:A}=N;if(!_||!A||_.id===A.id)return;let x=e.map((B,G)=>h(B,G)),S=x.findIndex(B=>B===_.id),D=x.findIndex(B=>B===A.id);if(S===-1||D===-1)return;let M=wh(e,S,D);p(M),r(M)},[h,l,e,r]),k=ui.default.useCallback(N=>{u(!0)},[]),E=ui.default.useCallback(()=>{b(N=>Math.min(e.length,N+i))},[e.length,i]),C=!l&&e.length>m,L=ui.default.useMemo(()=>g.map((N,_)=>h(N,_)),[h,g]);ui.default.useEffect(()=>{if(!f)return;let N=D=>D.map((M,B)=>h(M,B)),_=N(f),A=N(e);_.length===A.length&&_.every((D,M)=>D===A[M])&&p(null)},[h,e,f]);let F=(0,Gt.jsx)(Kn,{className:"w-full text-sm",children:g.length>0?l?(0,Gt.jsx)(WA,{items:L,strategy:QA,children:(0,Gt.jsx)("tbody",{children:g.map((N,_)=>(0,Gt.jsx)(yI,{id:h(N,_),withHandle:!0,children:t(N,_)},n(N,_)))})}):(0,Gt.jsx)("tbody",{children:g.map((N,_)=>(0,Gt.jsx)(Kn.Row,{className:"border-b border-[var(--background-modifier-border)] last:border-0 hover:bg-[var(--background-modifier-hover)]",children:t(N,_)},n(N,_)))}):(0,Gt.jsx)("tbody",{children:(0,Gt.jsx)(Kn.Row,{children:(0,Gt.jsx)(Kn.Cell,{className:"px-2 py-2 text-xs text-[var(--text-muted)]",children:o})})})});return(0,Gt.jsxs)("div",{className:`flex w-full flex-col gap-2 ${l&&c?"overflow-y-hidden":"overflow-y-auto"}`,ref:d,children:[l?(0,Gt.jsx)(jA,{sensors:v,collisionDetection:LA,onDragStart:k,onDragEnd:T,modifiers:[w],children:F}):F,C?(0,Gt.jsxs)("div",{className:"flex w-full flex-col gap-2",children:[(0,Gt.jsx)(Es,{}),(0,Gt.jsx)(Ta,{type:"button",variant:"link",fullWidth:!0,className:"px-2 py-2 text-xs",onClick:E,children:"Load more"})]}):null]})};var yI=({id:e,children:t,withHandle:n=!1})=>{let{attributes:i,listeners:o,setNodeRef:a,transform:r,isDragging:s}=e1({id:e}),l={transform:qr.Transform.toString(r)};return(0,Gt.jsxs)(Kn.Row,{ref:a,style:l,className:`border-b border-[var(--background-modifier-border)] last:border-0 hover:bg-[var(--background-modifier-hover)] ${s?"opacity-70":""}`,...n?{}:i,...n?{}:o,children:[t,n?(0,Gt.jsx)(Kn.Cell,{className:"w-10 px-2 py-2 align-middle text-right",children:(0,Gt.jsx)("button",{type:"button",className:"ml-auto flex h-7 w-7 items-center justify-center rounded border border-transparent text-[var(--text-muted)] transition-colors touch-none cursor-grab active:cursor-grabbing hover:text-[var(--text-normal)] focus-visible:border-[var(--interactive-accent)] focus-visible:text-[var(--interactive-accent)]","aria-label":"Reorder entry",...i,...o,children:(0,Gt.jsx)(Ze,{name:"grip-vertical",className:"mr-0 h-4 w-4"})})}):null]})};var di=O(fe());var n1=e=>{var g;let{file:t,items:n,frontmatterKey:i,getItemId:o,fallbackSort:a}=e,r=pe(),s=t.file,l=(0,di.useMemo)(()=>n.filter(v=>Boolean(o(v))),[o,n]),c=(0,di.useMemo)(()=>{var T,k,E;let v=(T=t.cache)==null?void 0:T.frontmatter,w=(E=(k=v==null?void 0:v.mondoState)==null?void 0:k[i])==null?void 0:E.order;return w?Array.isArray(w)?w.map(C=>typeof C=="string"?C:"").filter(C=>C.length>0):typeof w=="string"?[w]:[]:[]},[(g=t.cache)==null?void 0:g.frontmatter,i]),u=(0,di.useMemo)(()=>typeof a=="function"?a(l):[...l],[a,l]),f=(0,di.useMemo)(()=>{if(c.length===0)return u;let v=new Map(u.map(E=>{let C=o(E);return C?[C,E]:null}).filter(E=>Boolean(E))),w=new Set,T=[];c.forEach(E=>{let C=v.get(E);C&&(T.push(C),w.add(E))});let k=u.filter(E=>{let C=o(E);return C?!w.has(C):!1});return[...T,...k]},[u,o,c]),[p,d]=(0,di.useState)(f),h=(0,di.useRef)(!1);(0,di.useEffect)(()=>{if(h.current)return;let v=C=>C.map(L=>o(L)).filter(L=>Boolean(L)),w=v(p),T=v(f);w.length===T.length&&w.every((C,L)=>C===T[L])||d(f)},[f,p,o]);let m=(0,di.useCallback)(v=>{if(!s)return;let w=v.map(T=>o(T)).filter(T=>Boolean(T));(async()=>{try{await r.fileManager.processFrontMatter(s,T=>{(typeof T.mondoState!="object"||T.mondoState===null)&&(T.mondoState={});let k=T.mondoState[i];(typeof k!="object"||k===null)&&(T.mondoState[i]={}),w.length>0?T.mondoState[i].order=w:T.mondoState[i]&&delete T.mondoState[i].order})}catch(T){console.error(`useEntityLinkOrdering: failed to persist order for panel "${i}"`,T)}finally{h.current=!1}})()},[r,i,o,s]),b=(0,di.useCallback)(v=>{h.current=!0,d(v),m(v)},[m]),y=Boolean(s)&&p.length>1;return{items:p,onReorder:y?b:void 0,sortable:y}};function i1(e,t,n){var c;let i=(c=e.cache)==null?void 0:c.frontmatter;if(!i)return!1;let o=i[t];if(o==null)return!1;let a=Array.isArray(o)?o:[o],r=n.basename,s=n.path.replace(/\.md$/i,""),l=u=>u.replace(/\\/g,"/").trim();for(let u of a){if(u==null)continue;let p=String(u);p.startsWith("[[")&&p.endsWith("]]")&&(p=p.slice(2,-2));let d=p.split("|")[0],h=l(d).replace(/\.md$/i,"");if(d===r||h===s||h.split("/").pop()===r)return!0}return!1}var Th=(e,t,n)=>t.length===0?!1:t.some(i=>i1(e,i,n));var Rc=require("obsidian");var et=O(P()),bI=[{type:"show"},{type:"date",label:"Date",align:"right"}],vI=e=>e.length>0?e.charAt(0).toUpperCase()+e.slice(1):e,wI=e=>{let t=[e];return e==="person"&&t.push("people","participants"),e==="team"&&t.push("teams"),e==="company"&&t.push("companies"),Array.from(new Set(t.map(n=>n.trim()).filter(n=>n.length>0)))},TI=(e,t)=>{if(t){let n=Array.isArray(t)?t:[t];return Array.from(new Set(n.map(i=>String(i).trim()).filter(Boolean)))}return[e].filter(Boolean)},Pd=(e,t)=>{var o,a;let i=((a=(o=e.cache)==null?void 0:o.frontmatter)!=null?a:{})[t];if(!i)return"";if(Array.isArray(i)){for(let r of i)if(typeof r=="string"&&r.trim())return r.trim();return""}return typeof i=="string"?i.trim():String(i)},SI=(e,t)=>{var s;let n=Pd(t,"cover");if(!n)return null;let i=n;if(i.startsWith("[[")&&i.endsWith("]]")){let l=i.slice(2,-2);i=((s=l.split("|")[0])==null?void 0:s.trim())||l.trim()}let o=e.vault.getAbstractFileByPath(i);if(o instanceof Rc.TFile)return e.vault.getResourcePath(o);let a=i.replace(/\.md$/i,""),r=e.metadataCache.getFirstLinkpathDest(a,"");return r instanceof Rc.TFile?e.vault.getResourcePath(r):null};var o1=({file:e,config:t,order:n,panelType:i})=>{var Co,to,Qr,Xr,Jr,Ft,on,an,Jn,hn,Rn,mi,Wo,Kt;let o=pe(),a=e.file,r=((to=(Co=e.cache)==null?void 0:Co.frontmatter)==null?void 0:to.type)||"";if(!a||!r)return(0,et.jsx)(so,{collapsible:!0,collapsed:!1,icon:"link-2",title:"Backlinks",children:(0,et.jsx)("div",{className:"px-2 py-2 text-xs text-[var(--text-muted)]",children:"Save this note to start linking related entries."})});let l=(0,Be.useMemo)(()=>{let V=t||{};return V.config&&typeof V.config=="object"?V.config:V},[t]),c=String((Qr=l.targetType)!=null?Qr:"").trim(),u=String((Xr=l.targetKey)!=null?Xr:"").trim(),f=String((Jr=l.target)!=null?Jr:"").trim(),p=String(r||"").trim().toLowerCase(),d=null,h=c.toLowerCase();if(c&&Nt(h)?d=h:f&&Nt(f.toLowerCase())?d=f.toLowerCase():Nt(p)&&(d=p),!d)return null;let m=f&&Nt(f.toLowerCase()),b=(0,Be.useMemo)(()=>l.properties||l.prop?[]:u?[u]:f&&!m?[f]:[],[l.properties,l.prop,u,f,m]),y=(0,Be.useMemo)(()=>{let V=t==null?void 0:t.key;return V?`backlinks:${V}`:`backlinks:${d}${b.length?`:${b[0]}`:""}`},[t,d,b]),{setCollapsedPanel:g}=oh(),v=((Ft=xt[d])==null?void 0:Ft.name)||vI(d)+"s",T=(l.columns&&l.columns.length>0?l.columns:bI).map(V=>{var se;let Z=V.type==="date"?"right":V.type==="entityIcon"?"center":"left",J=V;return{...J,align:(se=J.align)!=null?se:Z}}),k=(on=l.visibility)!=null?on:"always",E=typeof l.pageSize=="number"?l.pageSize:Number.POSITIVE_INFINITY,C=(0,Be.useMemo)(()=>{var V;return(V=l.sort)!=null?V:{strategy:"column",column:"date",direction:"desc"}},[l.sort]),L=(0,Be.useMemo)(()=>{var Z,J,se,he;let V=(J=(Z=e.cache)==null?void 0:Z.frontmatter)==null?void 0:J.mondoState;return((se=V==null?void 0:V[y])==null?void 0:se.collapsed)===!0?!0:((he=V==null?void 0:V[y])==null?void 0:he.collapsed)===!1?!1:l.collapsed!==!1},[(an=e.cache)==null?void 0:an.frontmatter,l.collapsed,y]),[F,N]=(0,Be.useState)(L);(0,Be.useEffect)(()=>{N(L)},[L]);let _=(0,Be.useMemo)(()=>{var J;let V=(J=l.properties)!=null?J:l.prop,Z=[];return typeof V=="string"?Z=[V]:Array.isArray(V)&&(Z=V),Z.length>0?Array.from(new Set(Z.map(se=>String(se).trim()).filter(Boolean))):b.length>0?b:wI(d)},[l.properties,l.prop,b,d]),A=(0,Be.useMemo)(()=>_.join("|"),[_]),x=(0,Be.useCallback)(V=>!V.file||V.file.path===a.path?!1:Th(V,_,a),[a,a==null?void 0:a.path,A]),S=(0,Be.useMemo)(()=>Gn.getInstance(o),[o]),[D,M]=(0,Be.useState)(0);(0,Be.useEffect)(()=>{let V=()=>M(Z=>Z+1);return S.addListener(V),()=>S.removeListener(V)},[S]);let B=(0,Be.useCallback)(V=>V?Array.isArray(V)?V:[V]:[],[]),G=(0,Be.useCallback)(V=>{var Z,J;return String(((J=(Z=V==null?void 0:V.cache)==null?void 0:Z.frontmatter)==null?void 0:J.type)||"").trim()},[]),$=(0,Be.useCallback)((V,Z)=>{var Te,Oe,xe;if(Z==null)return null;let J=String(Z).trim();if(!J)return null;if(J.startsWith("[[")&&J.endsWith("]]")){let Ue=J.slice(2,-2);J=((Te=Ue.split("|")[0])==null?void 0:Te.trim())||Ue.trim()}let se=o.vault.getAbstractFileByPath(J);if(se instanceof Rc.TFile)return se;let he=J.replace(/\.md$/i,""),ye=o.metadataCache.getFirstLinkpathDest(he,(xe=(Oe=V.file)==null?void 0:Oe.path)!=null?xe:"");return ye instanceof Rc.TFile?ye:null},[o]),te=(0,Be.useCallback)((V,Z)=>{var he,ye;let J=(ye=(he=V.cache)==null?void 0:he.frontmatter)!=null?ye:{},se=[];for(let Te of Z){let Oe=J[Te],xe=Array.isArray(Oe)?Oe:Oe!==void 0?[Oe]:[];for(let Ue of xe){let Je=$(V,Ue);Je&&se.push(Je)}}return se},[$]),j=(0,Be.useCallback)(V=>{var se;let Z=new Set,J=[];for(let he of V){let ye=(se=he.file)==null?void 0:se.path;!ye||Z.has(ye)||(Z.add(ye),J.push(he))}return J},[]),me=(0,Be.useCallback)(V=>{var J,se;let Z=e?[e]:[];for(let he of V.steps){if(he.out){let{property:ye,type:Te}=he.out,Oe=B(ye),xe=B(Te).map(Je=>String(Je).trim()),Ue=[];for(let Je of Z){let it=te(Je,Oe);for(let Ie of it){let pt=S.getFileByPath(Ie.path);pt&&(xe.length>0&&!xe.includes(G(pt))||Ue.push(pt))}}Z=j(Ue);continue}if(he.in){let{property:ye,type:Te}=he.in,Oe=B(ye),xe=B(Te).map(Ie=>String(Ie).trim()).filter(Boolean),Ue=Z.map(Ie=>Ie.file).filter(Boolean),Je=xe.length>0?xe:qn,it=[];for(let Ie of Je){let pt=S.getFiles(Ie);for(let rn of pt){if(((J=rn.file)==null?void 0:J.path)===a.path)continue;Ue.some(Zo=>Th(rn,Oe,Zo))&&it.push(rn)}}Z=j(it);continue}if(he.notIn){let{property:ye,type:Te}=he.notIn,Oe=B(ye),xe=new Set(B(Te).map(Ie=>String(Ie).trim()).filter(Boolean)),Ue=Z.map(Ie=>Ie.file).filter(Boolean),Je=qn.filter(Ie=>!xe.has(String(Ie))),it=[];for(let Ie of Je){let pt=S.getFiles(Ie);for(let rn of pt){if(((se=rn.file)==null?void 0:se.path)===a.path)continue;Ue.some(Zo=>Th(rn,Oe,Zo))&&it.push(rn)}}Z=j(it);continue}if(he.filter){let{type:ye}=he.filter,Te=B(ye);Te.length>0&&(Z=Z.filter(Oe=>Te.includes(G(Oe))));continue}if(he.dedupe||he.unique){Z=j(Z);continue}if(he.not==="host"){Z=Z.filter(ye=>{var Te;return((Te=ye.file)==null?void 0:Te.path)!==a.path});continue}}return j(Z)},[e,a.path,B,te,S,G,j]),W=(0,Be.useCallback)((V,Z)=>{var se,he;let J=(he=(se=V.cache)==null?void 0:se.frontmatter)!=null?he:{};if(Z.endsWith(".length")){let ye=Z.slice(0,-7),Te=J[ye];return Array.isArray(Te)?Te.length:Te==null?0:1}return J[Z]},[]),ae=V=>{var J;if(V==null)return"";let Z=String(V).trim();if(Z.startsWith("[[")&&Z.endsWith("]]")){let se=Z.slice(2,-2);return((J=se.split("|")[0])==null?void 0:J.trim())||se.trim()}return Z},Q=(0,Be.useCallback)((V,Z,J)=>{let se=W(V,Z),he=se!=null&&!(Array.isArray(se)&&se.length===0);if(J.exists!==void 0)return J.exists?he:!he;let ye=xe=>J.eq!==void 0?xe===J.eq:J.ne!==void 0?xe!==J.ne:typeof xe=="number"&&(J.gt!==void 0&&!(xe>J.gt)||J.gte!==void 0&&!(xe>=J.gte)||J.lt!==void 0&&!(xe<J.lt)||J.lte!==void 0&&!(xe<=J.lte))?!1:J.in&&Array.isArray(J.in)?J.in.includes(xe):J.nin&&Array.isArray(J.nin)?!J.nin.includes(xe):!0,Te=J.contains==="@this",Oe=J.notContains==="@this";if(Te||Oe){if(Array.isArray(se)){let Je=se.some(it=>{let Ie=$(V,it);return Ie?Ie.path===a.path:!1});return Te?Je:!Je}let xe=$(V,se),Ue=!!xe&&xe.path===a.path;return Te?Ue:!Ue}if(J.contains!==void 0){let xe=ae(J.contains);return Array.isArray(se)?se.map(ae).includes(xe):typeof se=="string"?ae(se)===xe:!1}if(J.notContains!==void 0){let xe=ae(J.notContains);return Array.isArray(se)?!se.map(ae).includes(xe):typeof se=="string"?ae(se)!==xe:!0}if(Array.isArray(se)){let xe=se.length;return ye(xe)}return typeof se=="number"||typeof se=="string"||typeof se=="boolean"?ye(se):!0},[W,a.path,$]),R=(0,Be.useCallback)((V,Z)=>{if(!Z)return!0;if(typeof Z=="object"&&Z!==null){let J=Z;return Array.isArray(J.all)?J.all.every(he=>R(V,he)):Array.isArray(J.any)?J.any.some(he=>R(V,he)):J.not!==void 0?!R(V,J.not):Object.entries(J).every(([se,he])=>Q(V,se,he||{}))}return!0},[Q]),I=(0,Be.useMemo)(()=>{var xe;if(!l.find||!l.find.query||l.find.query.length===0)return[];let V=l.find.query.map(Ue=>me(Ue)),Z=Ue=>new Set(Ue.map(Je=>Je.file.path)),J=new Set,se=l.find.combine||"union";if(se==="union")for(let Ue of V)for(let Je of Ue)J.add(Je.file.path);else if(se==="intersect"){if(V.length===0)return[];let Ue=Z(V[0]);for(let Je=1;Je<V.length;Je++){let it=Z(V[Je]),Ie=new Set;Ue.forEach(pt=>{it.has(pt)&&Ie.add(pt)}),Ue=Ie}J=Ue}else if(se==="subtract"){if(V.length===0)return[];let Ue=Z(V[0]),Je=new Set;for(let Ie=1;Ie<V.length;Ie++)for(let pt of V[Ie])Je.add(pt.file.path);let it=new Set;Ue.forEach(Ie=>{Je.has(Ie)||it.add(Ie)}),J=it}let he=[];J.forEach(Ue=>{let Je=S.getFileByPath(Ue);Je&&he.push(Je)});let ye=he.filter(Ue=>R(Ue,l.filter));if(!!l.find&&((xe=l.find.query)==null?void 0:xe.length)>0)return j(ye);let Oe=ye.filter(Ue=>G(Ue)===d);return j(Oe)},[l.find,l.filter,me,R,G,d,D]),z=ro(d,{filter:x}),U=(0,Be.useMemo)(()=>l.find&&l.find.query&&l.find.query.length>0?I:z,[l.find,I,z]),X=(0,Be.useCallback)(V=>{if(C.strategy!=="column")return V;let Z=C.direction==="desc"?-1:1,J=C.column,se=[...V];return se.sort((he,ye)=>{let Te="",Oe="";return J==="show"?(Te=In(he).toLowerCase(),Oe=In(ye).toLowerCase()):J==="date"&&(Te=Pd(he,"date"),Oe=Pd(ye,"date")),Te<Oe?-1*Z:Te>Oe?1*Z:0}),se},[C]),{items:H,onReorder:Y,sortable:le}=n1({file:e,items:C.strategy==="manual"?U:X(U),frontmatterKey:y,getItemId:V=>{var Z;return(Z=V.file)==null?void 0:Z.path},fallbackSort:V=>X(V)}),[re,ie]=(0,Be.useState)(null),ke=(0,Be.useMemo)(()=>({time:0}),[]),Ce=(0,Be.useMemo)(()=>({id:null}),[]),we=(0,Be.useCallback)(V=>{var Z,J;return(J=(Z=V.file)==null?void 0:Z.path)!=null?J:""},[]),Ne=(0,Be.useCallback)(V=>{ie(V),ke.time=Date.now(),Y==null||Y(V)},[Y,ke]);(0,Be.useEffect)(()=>{if(!re)return;let V=re.map(we),Z=H.map(we);if(!(V.length===Z.length&&V.every((Oe,xe)=>Oe===Z[xe])))return;let he=150,ye=Date.now()-ke.time,Te=()=>ie(null);if(ye>=he){Te();return}Ce.id&&window.clearTimeout(Ce.id),Ce.id=window.setTimeout(()=>{let Oe=(re!=null?re:[]).map(we),xe=H.map(we);Oe.length===xe.length&&Oe.every((Je,it)=>Je===xe[it])&&Te(),Ce.id=null},he-ye)},[H,re,we,ke,Ce]);let Ve=(Jn=l.badge)!=null?Jn:{},Xe=(hn=Ve.enabled)!=null?hn:!0,ot=String((Rn=Ve.content)!=null?Rn:"{count}"),ee=(0,Be.useMemo)(()=>{var ye;if(!Xe||!ot)return null;let V=(ye=re!=null?re:H)!=null?ye:[],Z=V.length,J="",se=Number.NEGATIVE_INFINITY;for(let Te of V){let Oe=Pd(Te,"date");if(!Oe)continue;let xe=Date.parse(Oe);if(!Number.isNaN(xe)){xe>se&&(se=xe,J=Oe);continue}J||(J=Oe)}let he=ot.replace(/\{count\}/g,String(Z));return he=he.replace(/\{date\}/g,J),he.trim()?he:null},[Xe,ot,re,H]),Ge=(0,Be.useCallback)(async V=>{var Z,J,se,he;if(N(V),!!a){try{if(((he=(se=(J=(Z=e.cache)==null?void 0:Z.frontmatter)==null?void 0:J.mondoState)==null?void 0:se[y])==null?void 0:he.collapsed)===V)return}catch(ye){}try{await o.fileManager.processFrontMatter(a,ye=>{(typeof ye.mondoState!="object"||ye.mondoState===null)&&(ye.mondoState={});let Te=ye.mondoState[y];(typeof Te!="object"||Te===null)&&(ye.mondoState[y]={}),ye.mondoState[y].collapsed=V})}catch(ye){console.error("BacklinksLinks: failed to persist collapse state",ye)}}},[o,a,y,(mi=e.cache)==null?void 0:mi.frontmatter]),[De,ue]=(0,Be.useState)(!1),Re=(0,Be.useMemo)(()=>ee?{key:"badge",content:(0,et.jsx)("div",{className:"flex min-w-0 flex-1 items-center justify-end",children:(0,et.jsx)(nh,{children:ee})})}:null,[ee]),bt=(0,Be.useMemo)(()=>Re?[Re]:[],[Re]),vt=(0,Be.useMemo)(()=>{var Ue,Je,it;let V=(Ue=l.createEntity)!=null?Ue:{enabled:!0},Z=V.enabled!==!1,J=[];if(Re&&J.push(Re),!Z)return J;let se=p,he=Nt(se)?xt[se]:void 0,ye=V==null?void 0:V.referenceCreate,Te=(()=>{var rn;if(!ye||!(he!=null&&he.createRelated))return;let pt=he.createRelated.find(hi=>String((hi==null?void 0:hi.key)||"").trim()===ye);if(pt)return(rn=pt.create)!=null?rn:{}})(),Oe=(it=(Je=V.title)!=null?Je:Te==null?void 0:Te.title)!=null?it:`Untitled ${v}`,xe=(()=>{var rn,hi;let Ie=(rn=Te==null?void 0:Te.attributes)!=null?rn:{},pt=(hi=V.attributes)!=null?hi:{};return Object.keys({...Ie,...pt}).length>0?{...Ie,...pt}:void 0})();return J.push({key:"create-entity",content:(0,et.jsx)(Ta,{variant:"link",icon:"plus","aria-label":`Create ${d}`,disabled:De,onClick:()=>{De||(ue(!0),(async()=>{var Ie,pt,rn;try{await ih({app:o,targetType:d,hostEntity:e,titleTemplate:Oe,attributeTemplates:xe,linkProperties:TI(r,(Ie=l.properties)!=null?Ie:l.prop),openAfterCreate:(rn=(pt=V==null?void 0:V.openAfterCreate)!=null?pt:Te==null?void 0:Te.openAfterCreate)!=null?rn:!0})}catch(hi){console.error("BacklinksLinks: failed to create entity",hi)}finally{ue(!1)}})())}})}),J},[l.createEntity,l.properties,l.prop,De,o,e,d,r,v,Re,p]),nt=l.title||v,nn=(Wo=l.subtitle)!=null?Wo:void 0,Ht=(Kt=l.icon)!=null?Kt:void 0,fi=ee!=null?ee:void 0,pi=H.length>0||k!=="notEmpty",eo=(0,Be.useCallback)(()=>{Ge(!1)},[Ge]);return(0,Be.useEffect)(()=>{if(!pi){g(y,null);return}return F?g(y,{id:y,label:nt,icon:Ht,badgeLabel:fi,onExpand:eo,order:n,panelType:i}):g(y,null),()=>{g(y,null)}},[fi,eo,F,n,Ht,y,nt,i,g,pi]),pi?(0,et.jsx)("div",{className:F?"hidden":void 0,children:(0,et.jsx)(so,{collapsible:!0,collapsed:F,collapseOnHeaderClick:!0,minimizeOnCollapsed:!0,icon:Ht,title:nt,subtitle:nn,actions:vt,actionsOnCollapsed:bt,onCollapseChange:Ge,children:(0,et.jsx)(t1,{items:re!=null?re:H,getKey:V=>V.file.path,pageSize:E,sortable:C.strategy==="manual"&&le,onReorder:C.strategy==="manual"?Ne:void 0,getSortableId:V=>V.file.path,emptyLabel:`No ${nt.toLowerCase()} yet`,renderRow:V=>{var Oe,xe,Ue,Je;let Z=V.file.path,J=In(V),se=Pd(V,"date"),ye=String((Ue=(xe=(Oe=V.cache)==null?void 0:Oe.frontmatter)==null?void 0:xe.type)!=null?Ue:"").trim().toLowerCase(),Te=Nt(ye)?(Je=xt[ye])==null?void 0:Je.icon:void 0;return(0,et.jsx)(et.Fragment,{children:T.map((it,Ie)=>{var rn,hi;let pt=it.align==="right"?"text-right":it.align==="center"?"text-center":"text-left";if(it.type==="entityIcon")return(0,et.jsx)(Kn.Cell,{className:`px-1 py-2 align-middle w-8 ${pt}`,style:{width:"2rem"},children:Te?(0,et.jsx)(Ze,{name:Te,className:"mx-auto"}):(0,et.jsx)("span",{className:"inline-block w-5 h-5"})},`c-${Ie}`);if(it.type==="cover"){let Zo=SI(o,V);return(0,et.jsx)(Kn.Cell,{className:`px-0 py-2 align-middle w-16 ${pt}`,style:{width:"4rem"},children:Zo?(0,et.jsx)("div",{className:"flex justify-center",children:(0,et.jsx)(Hn,{src:Zo,alt:J,size:64,strategy:it.mode==="contain"?"contain":"cover"})}):null},`c-${Ie}`)}if(it.type==="show")return(0,et.jsx)(Kn.Cell,{className:`px-2 py-2 align-middle break-words overflow-hidden ${pt}`,children:(0,et.jsx)(Ta,{to:Z,variant:"link",className:"break-words whitespace-normal",children:J})},`c-${Ie}`);if(it.type==="date"){let Zo=it.label?`${it.label} `:"";return(0,et.jsx)(Kn.Cell,{className:`px-2 py-2 align-middle ${pt}`,children:se?(0,et.jsxs)("span",{className:"text-xs text-[var(--text-muted)]",children:[Zo,se]}):(0,et.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:"\u2014"})},`c-${Ie}`)}if(it.type==="attribute"){let Ic=((hi=(rn=V.cache)==null?void 0:rn.frontmatter)!=null?hi:{})[it.key],x1=it.label?`${it.label}: `:"",N1=Sn=>/\[\[[^\]]+\]\]/.test(Sn.trim()),A1=Sn=>{let Un=Sn.trim().slice(2,-2),[Ws,ea]=Un.split("|");return{target:(Ws||"").trim(),alias:ea==null?void 0:ea.trim()}},D1=(Sn,Un,Ws)=>{let ea=Ws.replace(/\.md$/i,""),$d=Sn.metadataCache.getFirstLinkpathDest(ea,Un!=null?Un:"");return $d instanceof Rc.TFile?$d.path:null},Uw=(Sn,Un)=>{var Ws;if(typeof Sn=="string"&&N1(Sn)){let{target:ea,alias:$d}=A1(Sn),$w=D1(o,(Ws=V.file)==null?void 0:Ws.path,ea),jw=$d||ea;return $w?(0,et.jsx)(Ta,{to:$w,variant:"link",children:jw},`a-${Un}`):(0,et.jsx)("span",{children:jw},`a-${Un}`)}if(typeof Sn=="string"||typeof Sn=="number"||typeof Sn=="boolean")return(0,et.jsx)("span",{children:String(Sn)},`a-${Un}`);try{return(0,et.jsx)("span",{children:JSON.stringify(Sn)},`a-${Un}`)}catch(ea){return(0,et.jsx)("span",{children:String(Sn)},`a-${Un}`)}},Pc=[];return Array.isArray(Ic)?Ic.forEach((Sn,Un)=>{Un>0&&Pc.push((0,et.jsx)("span",{children:", "},`s-${Un}`)),Pc.push(Uw(Sn,Un))}):Ic!=null&&Pc.push(Uw(Ic,0)),(0,et.jsx)(Kn.Cell,{className:`px-2 py-2 align-middle ${pt}`,children:Pc.length>0?(0,et.jsxs)("span",{className:"text-xs text-[var(--text-muted)]",children:[x1,Pc]}):(0,et.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:"\u2014"})},`c-${Ie}`)}return(0,et.jsx)(Kn.Cell,{className:`px-2 py-2 align-middle ${pt}`,children:(0,et.jsx)("span",{className:"text-xs text-[var(--text-muted)]",children:"\u2014"})},`c-${Ie}`)})})}})})}):null};var Qs=O(P()),kI={backlinks:o1},Nw=(e,t)=>(0,Qs.jsx)(dc,{message:`EntityLinks: ${e}`},t),Aw=()=>{var r,s;let{file:e}=Qo();if(!e)return null;let t=(r=e.cache)==null?void 0:r.frontmatter;if(!t)return null;let n=t==null?void 0:t.type;if(!n)return Nw("current file is missing a frontmatter type");let i=String(n).trim().toLowerCase();if(!oC(i))return Nw(`unknown entity type "${i}"`);let a=(s=xt[i].links)!=null?s:[];return a.length===0?null:(0,Qs.jsxs)("div",{className:"mondo-entity-links-panels",children:[a.map((l,c)=>{let u=kI[l.type];if(!u)return Nw(`no renderer registered for link type "${l.type}"`,`${l.type}-${c}`);let{type:f,...p}=l,d=l.key,h=d?String(d):f;return(0,Qs.jsx)("div",{"data-entity-panel":h,className:"mondo-entity-links-panel",children:(0,Qs.jsx)(u,{file:e,config:p,order:c,panelType:h})},`${f}-${c}`)}),(0,Qs.jsx)("div",{className:"mondo-entity-links-panels__clearfix","aria-hidden":"true"})]})};var zd=O(fe());var Oi=O(P()),Dw=e=>({path:e.path,display:e.label,icon:e.icon}),Lw=({title:e,icon:t,entries:n})=>(0,Oi.jsx)(so,{title:e,icon:t,collapsible:!0,collapsed:!0,collapseOnHeaderClick:!0,children:n.length===0?(0,Oi.jsx)(bb,{variant:"body",className:"text-muted",children:"None"}):(0,Oi.jsx)(jt,{direction:"column",gap:2,children:n.map(i=>(0,Oi.jsxs)(jt,{direction:"row",align:"center",gap:2,className:"items-center",children:[(0,Oi.jsx)(Ze,{name:i.icon}),(0,Oi.jsx)(bs,{to:i.path,children:(0,Oi.jsx)(bb,{variant:"body",children:i.display})})]},i.path))})}),Rw=()=>{var u,f,p,d;let e=Qo(),t=pe(),n=e.file,i=(f=(u=n==null?void 0:n.file)==null?void 0:u.path)!=null?f:null;if(!n||!n.file||!i)return null;let o=(p=n.cache)==null?void 0:p.frontmatter;if(((d=o==null?void 0:o.type)!=null?d:null)!==_n)return null;let r=(0,zd.useMemo)(()=>zp(o),[o]),s=(0,zd.useMemo)(()=>{if(!o)return[];let h=new Set([i]);return Wl(r.created,t,i,h).map(Dw)},[t,r.created,o,i]),l=(0,zd.useMemo)(()=>{if(!o)return[];let h=new Set([i,...s.map(m=>m.path)]);return Wl(r.changed,t,i,h).map(Dw)},[t,s,r.changed,o,i]),c=(0,zd.useMemo)(()=>{if(!o)return[];let h=new Set;return h.add(i),Pp(r.opened,t,i,h).map(Dw)},[t,r.opened,o,i]);return(0,Oi.jsxs)(jt,{direction:"column",gap:2,children:[(0,Oi.jsx)(Lw,{title:"Created Today",icon:"sparkles",entries:s}),(0,Oi.jsx)(Lw,{title:"Changed Today",icon:"history",entries:l}),(0,Oi.jsx)(Lw,{title:"Opened Today",icon:"eye",entries:c})]})};var Xs=O(P()),EI=e=>{if(typeof e!="string")return null;let t=e.trim().toLowerCase();return t.length>0?t:null},kh=()=>{var s;let{file:e}=Qo(),t=(0,Sh.useRef)(null),{type:n,showHeader:i,showEntityLinks:o,showDailyLinks:a}=(0,Sh.useMemo)(()=>{var p,d;let l=(d=(p=e==null?void 0:e.cache)==null?void 0:p.frontmatter)!=null?d:{},c=EI(l==null?void 0:l.type);if(!c)return{type:null,showHeader:!0,showEntityLinks:!1,showDailyLinks:!1};let u=Nt(c),f=Yu(c);return{type:c,showHeader:u||!ws(c),showEntityLinks:u,showDailyLinks:f}},[(s=e==null?void 0:e.cache)==null?void 0:s.frontmatter]);return!e||!(i||o||a)?null:(0,Xs.jsx)(tA,{children:(0,Xs.jsxs)("div",{ref:t,className:"flex flex-col gap-2","data-mondo-entity-panel-root":!0,children:[i&&(0,Xs.jsx)(ah,{type:n}),o&&(0,Xs.jsx)(Aw,{}),a&&(0,Xs.jsx)(Rw,{})]})})};var Vd=O(P()),Ow=Symbol("__mondo_react_root"),CI="mondo-injected-hello",Eo=new Map,Oc=null,MI=(e,t)=>{var a;if(!e)return null;let n=t.app.vault.getAbstractFileByPath(e);if(!n||!(n instanceof Ud.TFile))return null;let i=t.app.metadataCache.getFileCache(n),o=i==null?void 0:i.frontmatter;return(a=o==null?void 0:o.type)!=null?a:null},l1=(e,t)=>{let n=t.app.vault.getAbstractFileByPath(e);if(!n||!(n instanceof Ud.TFile))return;let i=t.app.metadataCache.getFileCache(n)||void 0;return{file:n,cache:i}},xI=e=>{if(!e||!(e.view instanceof Ud.MarkdownView))return null;let t=e.view.containerEl;if(!t)return null;let n=t.querySelector(".metadata-container");return n&&n.parentElement?{parent:n.parentElement,nextSibling:n.nextSibling,metadata:n}:t.parentElement?{parent:t.parentElement,nextSibling:t.nextSibling,metadata:n!=null?n:null}:null},NI=e=>{let t=document.createElement("div");t.className=CI,t.setAttribute("data-mondo-path",e);let n=document.createElement("div");return n.className="mondo-injected-hello-root",t.appendChild(n),t},AI=e=>{var n,i;let t=(i=(n=e.leaf)==null?void 0:n.containerEl)!=null?i:null;return t&&t.isConnected?t:e.node.closest(".workspace-leaf")},c1=e=>{let t=AI(e);return t?Array.from(t.querySelectorAll(".mondo-cover-thumbnail")).filter(i=>i.dataset.coverLeaf===e.leafId):[]};var DI=e=>null,LI=e=>e.anchor,u1="mondo-inline-title-with-cover",d1="mondo-view-header-with-cover",f1=e=>{e instanceof HTMLElement&&(e.querySelector(".mondo-cover-thumbnail")||(e.classList.remove(u1),e.classList.remove(d1)))},RI=(e,t)=>{e.dataset.coverContext=t.kind,e.classList.add("mondo-cover-thumbnail"),e.classList.toggle("mondo-cover-thumbnail--inline-title",t.kind==="inline-title"),e.classList.toggle("mondo-cover-thumbnail--view-header",t.kind==="view-header"),e.classList.toggle("mondo-cover-thumbnail--metadata",t.kind==="metadata"),t.container.classList.toggle(u1,t.kind==="inline-title"),t.container.classList.toggle(d1,t.kind==="view-header")},OI=(e,t,n)=>{var s;let i=(s=n.find(l=>l.dataset.coverContext===t.kind))!=null?s:null;n.forEach(l=>{l!==i&&l.remove()}),i||(i=document.createElement("button"),i.type="button",i.setAttribute("aria-label","Open cover image"));let o=LI(t),a=i.parentElement;i.parentElement!==t.container||o&&i.nextSibling!==o?t.container.insertBefore(i,o):!o&&i.parentElement===t.container&&t.container.appendChild(i),a&&a!==i.parentElement&&f1(a),i.dataset.coverLeaf=e.leafId,RI(i,t);let r=i.querySelector("img");return r||(r=document.createElement("img"),r.decoding="async",r.loading="lazy",i.appendChild(r)),i},FI=(e,t,n,i)=>{let o=e[Ow];o||(o=(0,s1.createRoot)(e),e[Ow]=o),o.render((0,Vd.jsx)(r1.default.StrictMode,{children:(0,Vd.jsx)(Fn,{app:t.app,children:(0,Vd.jsx)(XN,{path:n,children:(0,Vd.jsx)(i,{})})})}))},_I=e=>{let t=e.metadataEl;if(t&&t.isConnected)return t;let n=e.node.previousElementSibling;for(;n;){if(n instanceof HTMLElement&&n.classList.contains("metadata-container"))return e.metadataEl=n,n;n=n.previousElementSibling}let i=e.node.parentElement;if(i){let o=i.querySelector(".metadata-container");if(o)return e.metadataEl=o,o}return e.metadataEl=null,null},Hd=e=>{let t=e.parentElement;e.remove(),f1(t)},BI=e=>{c1(e).forEach(n=>Hd(n))},Fc=e=>{var n,i,o;let t=e.node.querySelector(".mondo-injected-hello-root");if(t)try{let a=t[Ow];a==null||a.unmount()}catch(a){}(n=e.observer)==null||n.disconnect(),e.observer=null,e.observerTarget=null,e.observerScheduled=!1,(i=e.structureObserver)==null||i.disconnect(),e.structureObserver=null,e.structureObserverTarget=null,BI(e),(o=e.node.parentElement)==null||o.removeChild(e.node)},II=e=>{if(typeof e=="string")return e.trim().toLowerCase();if(Array.isArray(e)){for(let t of e)if(typeof t=="string"&&t.trim())return t.trim().toLowerCase()}return""},Fw=(e,t)=>{if(e.observerScheduled)return;e.observerScheduled=!0;let n=()=>{e.observerScheduled=!1,p1(e,t)};typeof requestAnimationFrame=="function"?requestAnimationFrame(n):setTimeout(n,0)},PI=(e,t)=>{var o;let n=_I(e);if(!n){e.observer&&(e.observer.disconnect(),e.observer=null,e.observerTarget=null,e.observerScheduled=!1);return}if(e.observer&&e.observerTarget===n)return;(o=e.observer)==null||o.disconnect(),e.observer=null,e.observerTarget=null,e.observerScheduled=!1;let i=new MutationObserver(()=>{Fw(e,t)});i.observe(n,{childList:!0,subtree:!0}),e.observer=i,e.observerTarget=n},a1=e=>e instanceof HTMLElement?!!(e.classList.contains("inline-title")||e.classList.contains("view-header-title")||e.classList.contains("view-header-title-container")||e.classList.contains("metadata-container")||e.querySelector(".inline-title")||e.querySelector(".view-header-title")||e.querySelector(".view-header-title-container")||e.querySelector(".metadata-container")):!1,zI=(e,t)=>{var o,a,r,s;let n=(a=(o=e.leaf)==null?void 0:o.containerEl)!=null?a:null;if(!n||!n.isConnected){(r=e.structureObserver)==null||r.disconnect(),e.structureObserver=null,e.structureObserverTarget=null;return}if(e.structureObserver&&e.structureObserverTarget===n)return;(s=e.structureObserver)==null||s.disconnect(),e.structureObserver=null,e.structureObserverTarget=null;let i=new MutationObserver(l=>{for(let c of l){if(c.type!=="childList")continue;let u=Array.from(c.addedNodes),f=Array.from(c.removedNodes);if(u.some(a1)||f.some(a1)){Fw(e,t);break}}});i.observe(n,{childList:!0,subtree:!0}),e.structureObserver=i,e.structureObserverTarget=n},p1=(e,t)=>{var u,f;let n=c1(e),i=l1(e.path,t);if(!i){n.forEach(p=>Hd(p));return}let o=(f=(u=i.cache)==null?void 0:u.frontmatter)!=null?f:{},a=II(o==null?void 0:o.type);if(!a||!Nt(a)){n.forEach(p=>Hd(p));return}let r=Mr(t.app,i);if(!r){n.forEach(p=>Hd(p));return}let s=DI(e);if(!s){n.forEach(p=>Hd(p));return}let l=OI(e,s,n);l.type="button",l.setAttribute("aria-label","Open cover image");let c=l.querySelector("img");if(c)if(r.kind==="vault"){let{file:p,resourcePath:d}=r;l.dataset.coverKind="vault",l.dataset.coverPath=p.path,l.title=`Open ${p.name}`,c.alt=p.name,c.src!==d&&(c.src=d);let h=async()=>{try{let m=t.app.workspace.getLeaf(!0);await m.openFile(p),t.app.workspace.revealLeaf(m)}catch(m){console.error("Mondo: failed to open cover image",m)}};l.onclick=m=>{m.preventDefault(),m.stopPropagation(),h()}}else l.dataset.coverKind="external",l.removeAttribute("data-cover-path"),l.title="Open cover image",c.alt="Cover image",c.src!==r.url&&(c.src=r.url),l.onclick=p=>{p.preventDefault(),p.stopPropagation(),window.open(r.url,"_blank","noopener,noreferrer")}},HI=(e,t,n)=>{var u,f,p,d;let i=mw(e),o=Eo.get(t);if(!i){o&&(Fc(o),Eo.delete(t));return}let a=MI(i,n);if(a&&a.trim().toLowerCase()==="journal"){o&&(Fc(o),Eo.delete(t));return}if(!l1(i,n)){o&&(Fc(o),Eo.delete(t));return}let s=xI(e);if(!s){o&&(Fc(o),Eo.delete(t));return}let l=o;if(l)l.leaf=e,(l.node.parentElement!==s.parent||l.node.nextSibling!==s.nextSibling)&&s.parent.insertBefore(l.node,s.nextSibling),l.path!==i&&(l.path=i,l.node.setAttribute("data-mondo-path",i)),l.metadataEl!==s.metadata&&((f=l.observer)==null||f.disconnect(),l.observer=null,l.observerTarget=null,l.observerScheduled=!1),l.metadataEl=(d=(p=s.metadata)!=null?p:l.metadataEl)!=null?d:null;else{let h=NI(i);s.parent.insertBefore(h,s.nextSibling),l={node:h,leaf:e,leafId:t,path:i,metadataEl:(u=s.metadata)!=null?u:null,observer:null,observerTarget:null,structureObserver:null,structureObserverTarget:null,observerScheduled:!1},Eo.set(t,l)}l.leaf=e;let c=l.node.querySelector(".mondo-injected-hello-root");c&&FI(c,n,i,kh),PI(l,n),zI(l,n),p1(l,n)},VI=e=>{for(let[t,n]of Eo)e.has(t)||(Fc(n),Eo.delete(t))},m1=e=>t=>{Oc||(Oc=Ap(()=>{for(let[,o]of Eo)Fw(o,e)}));let n=e.app.workspace.getLeavesOfType("markdown"),i=new Set;n.forEach(o=>{let a=o.id;a&&(i.add(a),HI(o,a,e))}),VI(i)},h1=()=>{for(let[,e]of Eo)Fc(e);Eo.clear(),Oc==null||Oc(),Oc=null};var _w=require("obsidian"),Eh=(e,t)=>{let n=Math.pow(10,t);return Math.round(e*n)/n},UI=()=>{if(typeof navigator=="undefined"||!navigator.geolocation)throw new Error("Geolocation is not available in this environment.");return navigator.geolocation},_c=null,$I=5*60*1e3,jI=()=>_c?Date.now()-_c.timestamp>$I?(_c=null,null):{lat:_c.lat,lon:_c.lon}:null,g1=(e,t)=>{_c={lat:e,lon:t,timestamp:Date.now()}},YI=5e3,qI=1e4,GI=async e=>{let t=UI(),n=_w.Platform.isMobileApp?qI:YI;return new Promise((i,o)=>{let a=!1,r,s=()=>{typeof r=="number"&&(typeof window!="undefined"?window.clearTimeout(r):clearTimeout(r),r=void 0)};_w.Platform.isMobileApp&&typeof window!="undefined"&&(r=window.setTimeout(()=>{a||(a=!0,o(new Error("Geolocation request timed out.")))},n));let l=c=>{a||(a=!0,s(),o(new Error(c)))};if(e){if(e.aborted){l("Geolocation request cancelled.");return}let c=()=>{l("Geolocation request cancelled.")};e.addEventListener("abort",c,{once:!0})}t.getCurrentPosition(c=>{a||(a=!0,s(),i(c))},c=>{a||(a=!0,s(),o(new Error(c.message||"Unable to retrieve geolocation.")))},{enableHighAccuracy:!1,timeout:n,maximumAge:3e5})})},KI=e=>{let{coords:t}=e;return{lat:Eh(t.latitude,6),lon:Eh(t.longitude,6)}},QI="https://ipapi.co/json/",XI=async()=>{if(typeof fetch=="undefined")throw new Error("Fallback geolocation is not available in this environment.");let e=typeof AbortController!="undefined"?new AbortController:void 0,t=typeof window!="undefined"&&e?window.setTimeout(()=>{e.abort()},1e4):void 0;try{let n=await fetch(QI,{signal:e==null?void 0:e.signal});if(!n.ok)throw new Error("Fallback geolocation service returned an error.");let i=await n.json();if(typeof i.latitude!="number"||typeof i.longitude!="number")throw new Error("Fallback geolocation service returned invalid data.");return{lat:Eh(i.latitude,6),lon:Eh(i.longitude,6)}}catch(n){throw n instanceof Error&&n.name==="AbortError"?new Error("Fallback geolocation request timed out."):n instanceof Error?n:new Error("Fallback geolocation request failed.")}finally{typeof t=="number"&&window.clearTimeout(t)}},y1=async e=>{let t=jI();if(t)return t;try{let n=await GI(e),i=KI(n);return g1(i.lat,i.lon),i}catch(n){try{let i=await XI();return g1(i.lat,i.lon),i}catch(i){let o=i instanceof Error?i.message:"Fallback geolocation failed.",a=n instanceof Error?n.message:"Unable to retrieve geolocation.";throw new Error(`${a} (fallback failed: ${o})`)}}};var JI=e=>{if(typeof e!="string")return;let t=e.trim();return t.length>0?t:void 0},Bw=e=>{if(e instanceof Date)return Number.isNaN(e.getTime())?{date:null,raw:null}:{date:e,raw:e.toISOString()};let t=JI(e);if(!t)return{date:null,raw:null};let n=new Date(t);if(!Number.isNaN(n.getTime()))return{date:n,raw:t};let i=t.includes("T")?t:`${t}T00:00`,o=new Date(i);return Number.isNaN(o.getTime())?{date:null,raw:t}:{date:o,raw:t}},b1=e=>e?e instanceof Date?e.getHours()!==0||e.getMinutes()!==0||e.getSeconds()!==0:/\d{1,2}:\d{2}/.test(e):!1,v1=(e,t)=>{let n=t?{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}:{year:"numeric",month:"long",day:"numeric"};return e.toLocaleString("en-US",n)},WI=(e,t)=>{let n=[Bw(t.date),Bw(t.published),Bw(t.created)];for(let o of n){if(o.date){let a=b1(o.date)||b1(o.raw);return`on ${v1(o.date,a)}`}if(o.raw)return`on ${o.raw}`}let i=e.stat;if(i!=null&&i.ctime){let o=new Date(i.ctime);if(!Number.isNaN(o.getTime()))return`created on ${v1(o,!0)}`}return""},Iw=(e,t,n=null)=>{var u;if(n&&n.trim())return n.trim();let i=e.match(/^---\n([\s\S]*?)\n---\n([\s\S]*)$/),o="",a=e;i&&(o=i[1],a=i[2]);let r={};if(o)try{r=ZI(o)}catch(f){console.warn("Mondo: failed to parse frontmatter",f)}let s=[],l=(u=r.show)!=null?u:t.basename;s.push(`${l}.`);let c=WI(t,r);return c&&s.push(c),a.trim()&&s.push("."),a.trim()&&s.push(a.trim()),s.join(`

`)},ZI=e=>{let t={},n=e.split(`
`),i="",o=[];for(let a of n){let r=a.match(/^(\w[\w-]*)\s*:\s*(.*)$/);r?(i&&(t[i]=w1(o.join(`
`))),i=r[1],o=[r[2]]):i&&a.match(/^\s+/)&&o.push(a)}return i&&(t[i]=w1(o.join(`
`))),t},w1=e=>{let t=e.trim();return t?t==="true"?!0:t==="false"?!1:/^-?\d+$/.test(t)?parseInt(t,10):/^-?\d+\.\d+$/.test(t)?parseFloat(t):t.startsWith('"')&&t.endsWith('"')||t.startsWith("'")&&t.endsWith("'")?t.slice(1,-1):t:null};var T1=require("obsidian"),Ua=new Set,eP=e=>{var t,n,i,o;try{(n=(t=e.workspace.leftSplit)==null?void 0:t.collapse)==null||n.call(t)}catch(a){}try{(o=(i=e.workspace.rightSplit)==null?void 0:i.collapse)==null||o.call(i)}catch(a){}},S1=e=>{var t,n;try{T1.Platform.isMobileApp||(n=(t=e.workspace.leftSplit)==null?void 0:t.expand)==null||n.call(t)}catch(i){}},tP=()=>{try{document.body.classList.add("focus-mode")}catch(e){}},Pw=()=>{try{document.body.classList.remove("focus-mode")}catch(e){}},zw=(e,t)=>{if(Ua.has(t))return;let n=Ua.size>0;Ua.add(t),!n&&(eP(e),tP())},Ch=(e,t)=>{Ua.has(t)&&(Ua.delete(t),!(Ua.size>0)&&(Pw(),S1(e)))},Hw=()=>Ua.size>0;var k1=e=>{if(!Ua.size){Pw();return}Ua.clear(),Pw(),S1(e)};var Kr=require("obsidian"),E1=(e,t)=>{var i;if(!(e instanceof Error))return!1;let n=((i=e.message)!=null?i:"").toLowerCase();return n.includes(`${t} already exists`)||n.includes("already exists")},nP=e=>!e||e==="/"?"":e.replace(/^\/+|\/+$/g,""),C1=(e,t)=>t?e===t||e.startsWith(`${t}/`):!0,iP=/(\d{4})[-/](\d{2})[-/](\d{2})/,Vw=class{constructor(t){this.dailyNoteCache=new Map;this.pendingCreatePaths=new Set;this.pendingModifyPaths=new Set;this.handleFileCreated=t=>{if(!this.isMarkdownFile(t))return;let n=t;if(this.shouldIgnorePath(n.path)||this.isDailyNoteFile(n))return;let i=this.resolveCreationDate(n);i&&this.recordCreatedNote(i,n)};this.handleFileModified=t=>{if(!this.isMarkdownFile(t))return;let n=t;if(this.pendingModifyPaths.has(n.path)||this.isDailyNoteFile(n))return;let i=this.resolveModificationDate(n);i&&this.recordChangedNote(i,n)};this.isMarkdownFile=t=>t instanceof Kr.TFile&&t.extension==="md";this.shouldIgnorePath=t=>this.pendingCreatePaths.has(t)||this.pendingModifyPaths.has(t);this.isDailyNoteFile=t=>{if(this.isKnownDailyNotePath(t.path))return!0;let n=this.getDailyRoot();if(!C1(t.path,n))return!1;let i=this.app.metadataCache.getFileCache(t),o=this.readFrontmatterType(i);if(!Yu(o))return!1;let a=this.readFrontmatterDate(i);return Boolean(a)};this.isKnownDailyNotePath=t=>{for(let n of this.dailyNoteCache.values())if(n===t)return!0;return!1};this.resolveCreationDate=t=>{var s,l;let n=this.app.metadataCache.getFileCache(t),i=this.readFrontmatterDate(n);if(i)return i;let o=(s=this.readTitle(n))!=null?s:t.basename,a=this.parseDateFromText(o);if(a)return a;let r=this.toDateSafe((l=t.stat)==null?void 0:l.ctime);return r?this.formatDateKey(r):null};this.resolveModificationDate=t=>{var i;let n=this.toDateSafe((i=t.stat)==null?void 0:i.mtime);return n?this.formatDateKey(n):null};this.toDateSafe=t=>{if(typeof t!="number"||Number.isNaN(t))return null;let n=new Date(t);return Number.isNaN(n.getTime())?null:n};this.readFrontmatterType=t=>{var i;let n=(i=t==null?void 0:t.frontmatter)==null?void 0:i.type;return typeof n=="string"&&n.trim()?n.trim().toLowerCase():null};this.readFrontmatterDate=t=>{var i;let n=(i=t==null?void 0:t.frontmatter)==null?void 0:i.date;if(typeof n=="string"&&n.trim()){let o=this.parseDateFromText(n.trim());if(o)return o}return null};this.readTitle=t=>{var o,a;let n=(o=t==null?void 0:t.frontmatter)==null?void 0:o.title;if(typeof n=="string"&&n.trim())return n.trim();let i=t==null?void 0:t.headings;if(Array.isArray(i)&&i.length>0){let r=(a=i[0])==null?void 0:a.heading;if(typeof r=="string"&&r.trim())return r.trim()}return null};this.parseDateFromText=t=>{let n=t.trim();if(!n)return null;let i=new Date(n);if(!Number.isNaN(i.getTime()))return this.formatDateKey(i);let o=n.match(iP);if(!o)return null;let a=Number(o[1]),r=Number(o[2]),s=Number(o[3]);if([a,r,s].some(c=>Number.isNaN(c)))return null;let l=new Date(a,r-1,s);return Number.isNaN(l.getTime())?null:this.formatDateKey(l)};this.formatDateKey=t=>{let n=t.getFullYear(),i=`${t.getMonth()+1}`.padStart(2,"0"),o=`${t.getDate()}`.padStart(2,"0");return`${n}-${i}-${o}`};this.getDailyRoot=()=>{var t,n,i;return nP((i=(n=(t=this.plugin.settings)==null?void 0:t.daily)==null?void 0:n.root)!=null?i:"Daily")};this.getDailyEntryFormat=()=>{var t,n,i;return(i=(n=(t=this.plugin.settings)==null?void 0:t.daily)==null?void 0:n.entry)!=null?i:"YYYY-MM-DD"};this.buildDailyNoteName=t=>{let n=this.getDailyEntryFormat(),[i,o,a]=t.split("-"),r=new Date(Number(i),Number(o)-1,Number(a)),s=c=>`${c}`.padStart(2,"0"),l=n.split("YYYY").join(`${r.getFullYear()}`).split("MM").join(s(r.getMonth()+1)).split("DD").join(s(r.getDate()));return l.endsWith(".md")?l:`${l}.md`};this.getDailyNotePath=t=>{let n=this.getDailyRoot(),i=this.buildDailyNoteName(t);return n?`${n}/${i}`:i};this.locateDailyNote=t=>{let n=this.dailyNoteCache.get(t);if(n){let a=this.app.vault.getAbstractFileByPath(n);if(a instanceof Kr.TFile)return a;this.dailyNoteCache.delete(t)}let i=this.getDailyRoot(),o=this.app.vault.getMarkdownFiles();for(let a of o){if(!C1(a.path,i))continue;let r=this.app.metadataCache.getFileCache(a),s=this.readFrontmatterType(r);if(!Yu(s))continue;if(this.readFrontmatterDate(r)===t)return this.dailyNoteCache.set(t,a.path),a}return null};this.ensureFolderExists=async t=>{if(!(!t||this.app.vault.getAbstractFileByPath(t)))try{await this.app.vault.createFolder(t)}catch(i){if(E1(i,"folder"))return;console.error("DailyNoteTracker: failed to create folder",i)}};this.buildDailyNoteFrontmatter=t=>["---",`type: ${_n}`,`date: ${t}`,"mondoState:","  created: []","  changed: []","  opened: []","---",""].join(`
`);this.getOrCreateDailyNote=async t=>{let n=this.locateDailyNote(t);if(n)return n;let i=this.getDailyNotePath(t);await this.ensureFolderExists(this.getDailyRoot());let o=this.app.vault.getAbstractFileByPath(i);if(o instanceof Kr.TFile)return this.dailyNoteCache.set(t,o.path),o;this.pendingCreatePaths.add(i);try{let a=await this.app.vault.create(i,this.buildDailyNoteFrontmatter(t));return a instanceof Kr.TFile?(this.dailyNoteCache.set(t,a.path),a):null}catch(a){if(E1(a,"file")){let r=this.app.vault.getAbstractFileByPath(i);return r instanceof Kr.TFile?(this.dailyNoteCache.set(t,r.path),r):null}return console.error("DailyNoteTracker: failed to create daily note",a),null}finally{this.pendingCreatePaths.delete(i)}};this.ensureDailyNoteMetadata=(t,n)=>{t.type=_n,t.date=n};this.isPlainObject=t=>Boolean(t)&&typeof t=="object"&&!Array.isArray(t);this.ensureDailyNoteState=t=>{var s,l,c,u,f,p,d;this.isPlainObject(t.mondoState)||(t.mondoState={});let n=t.mondoState;if(this.isPlainObject(n.dailyNote)){let h=n.dailyNote;n.created===void 0&&(n.created=(l=(s=h.created)!=null?s:h.createdToday)!=null?l:void 0),n.changed===void 0&&(n.changed=(f=(u=(c=h.changed)!=null?c:h.changedToday)!=null?u:h.modifiedToday)!=null?f:void 0),n.opened===void 0&&(n.opened=(d=(p=h.opened)!=null?p:h.openedToday)!=null?d:void 0),delete n.dailyNote}n.createdToday!==void 0&&n.created===void 0&&(n.created=n.createdToday),n.createdToday!==void 0&&delete n.createdToday;let i=t.createdToday;i!==void 0&&n.created===void 0&&(n.created=i),i!==void 0&&delete t.createdToday,n.changedToday!==void 0&&n.changed===void 0&&(n.changed=n.changedToday),n.changedToday!==void 0&&delete n.changedToday;let o=t.changedToday;o!==void 0&&n.changed===void 0&&(n.changed=o),o!==void 0&&delete t.changedToday;let a=t.modifiedToday;a!==void 0&&n.changed===void 0&&(n.changed=a),a!==void 0&&delete t.modifiedToday,n.modifiedToday!==void 0&&n.changed===void 0&&(n.changed=n.modifiedToday),n.modifiedToday!==void 0&&delete n.modifiedToday,n.openedToday!==void 0&&n.opened===void 0&&(n.opened=n.openedToday),n.openedToday!==void 0&&delete n.openedToday;let r=t.openedToday;return r!==void 0&&n.opened===void 0&&(n.opened=r),r!==void 0&&delete t.openedToday,n.created=this.normalizeLinkArray(n.created),n.changed=this.normalizeLinkArray(n.changed),n.opened=this.normalizeLinkArray(n.opened),n};this.normalizeLinkArray=t=>{if(t===void 0)return[];let n=Array.isArray(t)?t:[t],i=[];return n.forEach(o=>{var a,r;if(typeof o=="string"){let s=o.trim();s&&i.push(s);return}if(o&&typeof o=="object"){let s=o,l=(r=(a=s.link)!=null?a:s.raw)!=null?r:s.value;if(typeof l=="string"){let c=l.trim();c&&i.push(c)}}}),i};this.extractLinkRecords=(t,n,i)=>{let o=t[n],a=[];Array.isArray(o)?o.forEach(l=>{typeof l=="string"&&l.trim()&&a.push(l.trim())}):typeof o=="string"&&o.trim()&&a.push(o.trim());let r=[],s=new Set;return a.forEach(l=>{let c=this.resolveLinkCanonical(l,i);!c||s.has(c)||(s.add(c),r.push({raw:l,canonical:c}))}),{records:r,set:s}};this.extractOpenedRecords=(t,n,i)=>{let o=t[n],a=[];Array.isArray(o)?o.forEach(l=>{(typeof l=="string"||l&&typeof l=="object")&&a.push(l)}):typeof o=="string"&&a.push(o);let r=[],s=new Set;return a.forEach(l=>{var f,p;let c=null;if(typeof l=="string"){let d=l.trim();d&&(c=d)}else if(l&&typeof l=="object"){let d=l,h=(p=(f=d.link)!=null?f:d.raw)!=null?p:d.value;if(typeof h=="string"){let m=h.trim();m&&(c=m)}}if(!c)return;let u=this.resolveLinkCanonical(c,i);!u||s.has(u)||(s.add(u),r.push({raw:c,canonical:u}))}),{records:r,set:s}};this.resolveLinkCanonical=(t,n)=>{let i=t.trim();if(!i)return null;i.startsWith("[[")&&i.endsWith("]]")&&(i=i.slice(2,-2));let o=i.indexOf("|");o>=0&&(i=i.slice(0,o));let a=i.indexOf("#");a>=0&&(i=i.slice(0,a));let r=i.trim();if(!r)return null;let s=this.app.metadataCache.getFirstLinkpathDest(r,n);if(s)return s.path;let l=this.app.vault.getAbstractFileByPath(r);if(l instanceof Kr.TFile)return l.path;let c=r.endsWith(".md")?r:`${r}.md`,u=this.app.vault.getAbstractFileByPath(c);return u instanceof Kr.TFile?u.path:r};this.buildWikiLink=(t,n)=>`[[${this.app.metadataCache.fileToLinktext(t,n,!1)}]]`;this.withSuppressedModify=async(t,n)=>{this.pendingModifyPaths.add(t);try{await n()}finally{this.pendingModifyPaths.delete(t)}};this.recordCreatedNote=async(t,n)=>{try{let i=await this.getOrCreateDailyNote(t);if(!i)return;let o=i.path,a=this.buildWikiLink(n,o);await this.withSuppressedModify(o,async()=>{await this.app.fileManager.processFrontMatter(i,r=>{this.ensureDailyNoteMetadata(r,t);let s=this.ensureDailyNoteState(r),l=this.extractLinkRecords(s,"created",o),c=this.extractLinkRecords(s,"changed",o);l.set.has(n.path)||(l.records.push({raw:a,canonical:n.path}),l.set.add(n.path));let u=c.records.filter(f=>f.canonical!==n.path);s.created=l.records.map(f=>f.raw),s.changed=u.map(f=>f.raw)})})}catch(i){console.error("DailyNoteTracker: failed to record created note",i)}};this.recordChangedNote=async(t,n)=>{try{let i=await this.getOrCreateDailyNote(t);if(!i)return;let o=i.path,a=this.buildWikiLink(n,o);await this.withSuppressedModify(o,async()=>{await this.app.fileManager.processFrontMatter(i,r=>{this.ensureDailyNoteMetadata(r,t);let s=this.ensureDailyNoteState(r),l=this.extractLinkRecords(s,"created",o),c=this.extractLinkRecords(s,"changed",o);if(l.set.has(n.path)){s.created=l.records.map(u=>u.raw),s.changed=c.records.filter(u=>u.canonical!==n.path).map(u=>u.raw);return}c.set.has(n.path)||(c.records.push({raw:a,canonical:n.path}),c.set.add(n.path)),s.created=l.records.map(u=>u.raw),s.changed=c.records.map(u=>u.raw)})})}catch(i){console.error("DailyNoteTracker: failed to record changed note",i)}};this.recordOpenedNote=async(t,n)=>{try{let i=await this.getOrCreateDailyNote(t);if(!i)return;let o=i.path,a=this.buildWikiLink(n,o);await this.withSuppressedModify(o,async()=>{await this.app.fileManager.processFrontMatter(i,r=>{this.ensureDailyNoteMetadata(r,t);let s=this.ensureDailyNoteState(r),l=this.extractOpenedRecords(s,"opened",o);l.set.has(n.path)||(l.records.push({raw:a,canonical:n.path}),l.set.add(n.path)),s.opened=l.records.map(c=>c.raw)})})}catch(i){console.error("DailyNoteTracker: failed to record opened note",i)}};this.handleFileOpened=t=>{if(!t||t.extension!=="md"||this.isDailyNoteFile(t))return;let n=this.formatDateKey(new Date);this.recordOpenedNote(n,t)};this.plugin=t}get app(){return this.plugin.app}},M1=Vw;var Bc=require("obsidian");var oP=[".mod-mobile .mobile-toolbar-options",".mod-mobile .mobile-toolbar",".mod-mobile .cm-mobile-toolbar"],Mh=class{constructor(t){this.button=null;this.retryTimeout=null;this.active=!1;this.initialize=()=>{this.active||(this.active=!0,this.plugin.registerEvent(this.plugin.app.workspace.on("active-leaf-change",this.update)),this.plugin.registerEvent(this.plugin.app.workspace.on("layout-change",this.update)),this.plugin.registerEvent(this.plugin.app.workspace.on("file-open",this.update)))};this.dispose=()=>{this.destroyButton(),this.active=!1};this.activateMobileToolbar=()=>{this.update()};this.update=()=>{if(!Bc.Platform.isMobileApp){this.destroyButton();return}if(!this.plugin.app.workspace.getActiveViewOfType(Bc.MarkdownView)){this.destroyButton();return}let n=this.findToolbarContainer();if(!n){this.scheduleRetry();return}this.ensureButton(n)};this.ensureButton=t=>{if(this.button&&this.button.isConnected)return;this.destroyButton();let n=document.createElement("button");n.type="button",n.className="mondo-mobile-toolbar-button mondo-timestamp-toolbar-button",n.setAttribute("aria-label","Add timestamp"),n.setAttribute("title","Add timestamp"),n.addEventListener("click",()=>{Zm(this.plugin.app,this.plugin)});let i=document.createElement("span");i.className="mondo-mobile-toolbar-button__icon",(0,Bc.setIcon)(i,"clock"),n.appendChild(i);let o=document.createElement("span");o.className="mondo-mobile-toolbar-button__label",o.textContent="Add timestamp",n.appendChild(o),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),this.button=n};this.scheduleRetry=()=>{this.retryTimeout===null&&(this.retryTimeout=window.setTimeout(()=>{this.retryTimeout=null,this.update()},200))};this.destroyButton=()=>{this.retryTimeout!==null&&(window.clearTimeout(this.retryTimeout),this.retryTimeout=null),this.button&&(this.button.remove(),this.button=null)};this.findToolbarContainer=()=>{for(let t of oP){let n=document.body.querySelector(t);if(n instanceof HTMLElement)return n}return null};this.plugin=t}};var Js=require("obsidian");var aP=[".mod-mobile .mobile-toolbar-options",".mod-mobile .mobile-toolbar",".mod-mobile .cm-mobile-toolbar"],xh=class{constructor(t){this.button=null;this.retryTimeout=null;this.active=!1;this.initialize=()=>{this.active||(this.active=!0,this.plugin.registerEvent(this.plugin.app.workspace.on("active-leaf-change",this.update)),this.plugin.registerEvent(this.plugin.app.workspace.on("layout-change",this.update)),this.plugin.registerEvent(this.plugin.app.workspace.on("file-open",this.update)))};this.dispose=()=>{this.destroyButton(),this.active=!1};this.activateMobileToolbar=()=>{this.update()};this.update=()=>{if(!Js.Platform.isMobileApp){this.destroyButton();return}if(!this.plugin.app.workspace.getActiveViewOfType(Js.MarkdownView)){this.destroyButton();return}let n=this.findToolbarContainer();if(!n){this.scheduleRetry();return}this.ensureButton(n)};this.ensureButton=t=>{if(this.button&&this.button.isConnected)return;this.destroyButton();let n=document.createElement("button");n.type="button",n.className="mondo-mobile-toolbar-button mondo-copy-toolbar-button",n.setAttribute("aria-label","Copy note text"),n.setAttribute("title","Copy note text"),n.addEventListener("click",()=>{var r;let a=this.plugin.app.workspace.getActiveViewOfType(Js.MarkdownView);eh(this.plugin.app,{view:a!=null?a:null,editor:(r=a==null?void 0:a.editor)!=null?r:void 0})});let i=document.createElement("span");i.className="mondo-mobile-toolbar-button__icon",(0,Js.setIcon)(i,"copy"),n.appendChild(i);let o=document.createElement("span");o.className="mondo-mobile-toolbar-button__label",o.textContent="Copy",n.appendChild(o),t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),this.button=n};this.scheduleRetry=()=>{this.retryTimeout===null&&(this.retryTimeout=window.setTimeout(()=>{this.retryTimeout=null,this.update()},200))};this.destroyButton=()=>{this.retryTimeout!==null&&(window.clearTimeout(this.retryTimeout),this.retryTimeout=null),this.button&&(this.button.remove(),this.button=null)};this.findToolbarContainer=()=>{for(let t of aP){let n=document.body.querySelector(t);if(n instanceof HTMLElement)return n}return null};this.plugin=t}};var rP="anchor",Nh=class extends ut.Plugin{constructor(){super(...arguments);this.settings={rootPaths:Object.fromEntries(qn.map(n=>[String(n),"/"])),journal:xd,daily:DN,templates:Object.fromEntries(qn.map(n=>[String(n),""])),openAIWhisperApiKey:"",openAIVoice:"",openAIModel:"gpt-5-nano",openAITranscriptionPolishEnabled:!0,voiceoverCachePath:"/voiceover",selfPersonPath:"",includeFrontmatterInChatGPT:!1,mondoConfigPresetKey:"",mondoConfigJson:"",mondoConfigNotePath:"",timestamp:Pa,dashboard:{openAtBoot:!1,forceTab:!1,enableQuickTasks:!0,enableRelevantNotes:!0,disableStats:!0,quickSearchEntities:[]},ribbonIcons:{dashboard:!0,audioLogs:!0,vaultImages:!0,vaultFiles:!0,vaultNotes:!0},vaultImages:{viewMode:"wall"}};this.hasFocusedDashboardOnStartup=!1;this.audioTranscriptionManager=null;this.voiceoverManager=null;this.noteDictationManager=null;this.timestampToolbarManager=null;this.copyNoteToolbarManager=null;this.dailyNoteTracker=null;this.geolocationAbortController=null;this.mondoConfigManager=null;this.dashboardRibbonEl=null;this.audioLogsRibbonEl=null;this.vaultImagesRibbonEl=null;this.vaultFilesRibbonEl=null;this.vaultNotesRibbonEl=null;this.applyGeolocationToFile=async(n,{notify:i})=>{this.geolocationAbortController=new AbortController;let o=null;try{o=new ut.Notice("Getting your location...",0);let a=await y1(this.geolocationAbortController.signal);return await this.app.fileManager.processFrontMatter(n,r=>{r.lat=String(a.lat).replace(",","."),r.lon=String(a.lon).replace(",",".")}),i&&new ut.Notice("Geolocation saved."),!0}catch(a){if(console.error("Mondo: Failed to capture geolocation",a),i){let r=a instanceof Error&&a.message?a.message:"Unable to capture geolocation.";r!=="Geolocation request cancelled."&&new ut.Notice(`Geolocation failed: ${r}`)}return!1}finally{o==null||o.hide(),this.geolocationAbortController=null}};this.getVoiceoverManager=()=>this.voiceoverManager;this.getNoteDictationManager=()=>this.noteDictationManager}async loadSettings(){var v,w,T,k,E,C,L,F;let n=await this.loadData();this.settings=Object.assign(this.settings,n!=null?n:{}),this.settings.rootPaths=Object.assign(Object.fromEntries(qn.map(N=>[String(N),"/"])),(v=this.settings.rootPaths)!=null?v:{}),this.settings.templates=Object.assign(Object.fromEntries(qn.map(N=>[String(N),""])),(w=this.settings.templates)!=null?w:{}),this.settings.openAIWhisperApiKey=(T=this.settings.openAIWhisperApiKey)!=null?T:"",this.settings.openAIVoice=(k=this.settings.openAIVoice)!=null?k:"",this.settings.openAIModel=(E=this.settings.openAIModel)!=null?E:"gpt-5-nano",this.settings.openAITranscriptionPolishEnabled=typeof this.settings.openAITranscriptionPolishEnabled=="boolean"?this.settings.openAITranscriptionPolishEnabled:!0;let i=this.settings.voiceoverCachePath;typeof i=="string"&&i.trim()?this.settings.voiceoverCachePath=i.trim():this.settings.voiceoverCachePath="/voiceover";let o=this.settings.selfPersonPath;typeof o=="string"?this.settings.selfPersonPath=o.trim():this.settings.selfPersonPath="",this.settings.includeFrontmatterInChatGPT=this.settings.includeFrontmatterInChatGPT===!0;let a=this.settings.mondoConfigJson;this.settings.mondoConfigJson=typeof a=="string"?a:"";let r=this.settings.mondoConfigPresetKey;this.settings.mondoConfigPresetKey=typeof r=="string"?r.trim():"",typeof this.settings.mondoConfigNotePath!="string"&&(this.settings.mondoConfigNotePath=""),this.settings.timestamp=Go(this.settings.timestamp);let l=(C=this.settings.dashboard)!=null?C:{},c=l.disableStats,u=l.enableStats,f=l.quickSearchEntities,p=l.entityTiles,d=c===!0?!0:c===!1?!1:u!==!0,h=Ha(f,$t),m=Ha(p,$t);this.settings.dashboard={openAtBoot:l.openAtBoot===!0,forceTab:l.forceTab===!0,enableQuickTasks:l.enableQuickTasks!==!1,enableRelevantNotes:l.enableRelevantNotes!==!1,disableStats:d,quickSearchEntities:h,entityTiles:m};let b=(L=this.settings.ribbonIcons)!=null?L:{};this.settings.ribbonIcons={dashboard:b.dashboard!==!1,audioLogs:b.audioLogs!==!1,vaultImages:b.vaultImages!==!1,vaultFiles:b.vaultFiles!==!1,vaultNotes:b.vaultNotes!==!1};let g=((F=this.settings.vaultImages)!=null?F:{}).viewMode==="grid"?"grid":"wall";this.settings.vaultImages={viewMode:g}}syncRibbonIcon(n,i,o,a,r){return i?n&&n.isConnected?n:(n==null||n.remove(),this.addRibbonIcon(o,a,r)):(n==null||n.remove(),null)}refreshRibbonIcons(){var o,a,r,s,l,c;if(!ut.Platform.isDesktopApp){(o=this.dashboardRibbonEl)==null||o.remove(),this.dashboardRibbonEl=null,(a=this.audioLogsRibbonEl)==null||a.remove(),this.audioLogsRibbonEl=null,(r=this.vaultImagesRibbonEl)==null||r.remove(),this.vaultImagesRibbonEl=null,(s=this.vaultFilesRibbonEl)==null||s.remove(),this.vaultFilesRibbonEl=null,(l=this.vaultNotesRibbonEl)==null||l.remove(),this.vaultNotesRibbonEl=null;return}let n=(c=this.settings.ribbonIcons)!=null?c:{},i=u=>n[u]!==!1;this.dashboardRibbonEl=this.syncRibbonIcon(this.dashboardRibbonEl,i("dashboard"),nd,"Open Mondo Dashboard",()=>{this.showPanel(Da,"main")}),this.audioLogsRibbonEl=this.syncRibbonIcon(this.audioLogsRibbonEl,i("audioLogs"),td,"Open Audio Notes",()=>{this.showPanel(xs,"main")}),this.vaultImagesRibbonEl=this.syncRibbonIcon(this.vaultImagesRibbonEl,i("vaultImages"),Ns,"Open Images",()=>{this.showPanel(nc,"main")}),this.vaultFilesRibbonEl=this.syncRibbonIcon(this.vaultFilesRibbonEl,i("vaultFiles"),As,"Open Files",()=>{this.showPanel(ic,"main")}),this.vaultNotesRibbonEl=this.syncRibbonIcon(this.vaultNotesRibbonEl,i("vaultNotes"),Ds,"Open Markdown Notes",()=>{this.showPanel(oc,"main")})}async saveSettings(){await this.saveData(this.settings)}async applyMondoConfigFromSettings(){var a,r,s;let n=((a=this.settings.mondoConfigJson)!=null?a:"").trim();if(!n){let l=((r=this.settings.mondoConfigPresetKey)!=null?r:"").trim();if(l){let c=$u.find(u=>u.key===l);if(c){ju(c.config);let u=Object.keys((s=c.config.entities)!=null?s:{}).length;console.log(`Mondo: applied preset Mondo config "${l}" with ${u} entities`),this.app.workspace.trigger("mondo:config-updated",{source:`preset:${l}`,notePath:null});return}console.warn(`Mondo: unable to find preset configuration for key "${l}"`)}ju(Mp),console.log("Mondo: applied built-in Mondo config (no custom JSON)"),this.app.workspace.trigger("mondo:config-updated",{source:"default",notePath:null});return}let i;try{i=JSON.parse(n)}catch(l){new ut.Notice(`Invalid Mondo configuration JSON: ${l instanceof Error?l.message:String(l)}`);return}let o=Km(i);if(!o.ok){let l=o.issues.map(c=>`${c.path}: ${c.message}`).join(`
`);console.warn(`Mondo: invalid pasted configuration
`+l),new ut.Notice("Mondo configuration is invalid. See console for details.");return}ju(o.config),console.log(`Mondo: applied custom Mondo config from settings with ${Object.keys(o.config.entities).length} entities`),this.app.workspace.trigger("mondo:config-updated",{source:"custom",notePath:null})}async onload(){console.clear(),console.log("Mondo: Loading plugin"),this.addSettingTab(new Qm(this.app,this)),await this.loadSettings(),await this.applyMondoConfigFromSettings(),Sr(),this.audioTranscriptionManager=new Yp(this),this.audioTranscriptionManager.initialize(),this.voiceoverManager=new Xm(this),this.voiceoverManager.initialize(),this.noteDictationManager=new Wm(this),this.noteDictationManager.initialize(),this.noteDictationManager.activateMobileToolbar(),this.timestampToolbarManager=new Mh(this),this.timestampToolbarManager.initialize(),this.timestampToolbarManager.activateMobileToolbar(),this.copyNoteToolbarManager=new xh(this),this.copyNoteToolbarManager.initialize(),this.copyNoteToolbarManager.activateMobileToolbar(),this.dailyNoteTracker=new M1(this),this.app.workspace.onLayoutReady(()=>{var o,a,r;(o=this.noteDictationManager)==null||o.activateMobileToolbar(),(a=this.timestampToolbarManager)==null||a.activateMobileToolbar(),(r=this.copyNoteToolbarManager)==null||r.activateMobileToolbar()}),Gn.getInstance(this.app).initialize().catch(o=>{console.error("Mondo: Failed to initialize file manager:",o)}),this.registerEvent(this.app.vault.on("create",o=>{var a;!(o instanceof ut.TFile)||o.extension!=="md"||(a=this.dailyNoteTracker)==null||a.handleFileCreated(o)})),this.registerEvent(this.app.vault.on("modify",o=>{var a;!(o instanceof ut.TFile)||o.extension!=="md"||(a=this.dailyNoteTracker)==null||a.handleFileModified(o)})),this.addCommand({id:"open-dashboard",name:"Open Mondo dashboard",hotkeys:[{modifiers:["Mod","Shift"],key:"m"}],callback:()=>this.showPanel(Da,"main",{ensureFirstInTabGroup:!0})}),this.addCommand({id:"open-audio-notes",name:"Open Audio Notes",callback:()=>this.showPanel(xs,"main")}),this.addCommand({id:"open-vault-images",name:"Open Images",callback:()=>this.showPanel(nc,"main")}),this.addCommand({id:"open-vault-files",name:"Open Files",callback:()=>this.showPanel(ic,"main")}),this.addCommand({id:"open-vault-notes",name:"Open Markdown Notes",callback:()=>this.showPanel(oc,"main")}),this.addCommand({id:"edit-image",name:"Edit Image",checkCallback:o=>{let a=jN(this.app);return!a||!nv(a)?!1:(o||Vo(this.app,a),!0)}}),this.addCommand({id:"transcribe-audio-note",name:"Start transcription",checkCallback:o=>{var r,s;let a=this.app.workspace.getActiveFile();return!a||!((r=this.audioTranscriptionManager)!=null&&r.isAudioFile(a))?!1:(o||(s=this.audioTranscriptionManager)==null||s.transcribeAudioFile(a,a.path),!0)}}),this.addCommand({id:"mondo-start-note-dictation",name:"Start dictation",icon:"mic",editorCallback:async()=>{var r,s,l;if(((r=this.noteDictationManager)==null?void 0:r.getDictationStatus())==="recording"){((s=this.noteDictationManager)==null?void 0:s.stopDictation({showDisabledNotice:!0}))==="stopped"&&new ut.Notice("Dictation stopped. Processing\u2026");return}let a=await((l=this.noteDictationManager)==null?void 0:l.startDictation());a==="started"?new ut.Notice("Dictation started. Tap again to stop."):a==="recording"&&new ut.Notice("Dictation already in progress.")}}),this.addCommand({id:"open-journal",name:"Open Journal",callback:async()=>{try{console.log("Opening journal..."),await kd(this.app,this)}catch(o){console.error("Mondo: Failed to open journal:",o)}}}),this.addCommand({id:"focus-mode-start",name:"Start focus mode",callback:()=>{zw(this.app,"manual")}}),this.addCommand({id:"focus-mode-stop",name:"Stop focus mode",callback:()=>{Ch(this.app,"manual")}}),this.addCommand({id:"open-today",name:"Open Daily note",callback:async()=>RN(this.app,this)}),this.addCommand({id:"open-self-person",name:"Open myself",callback:()=>{UN(this.app,this)}}),this.addCommand({id:"add-log",name:"Append to Daily note",hotkeys:[{modifiers:["Mod","Shift"],key:"l"}],callback:async()=>_N(this.app,this)}),this.addCommand({id:"talk-to-daily",name:"Talk to Daily Note",callback:async()=>BN(this.app,this)}),this.addCommand({id:"record-to-daily",name:"Record to Daily Note",callback:async()=>IN(this.app,this)}),this.addCommand({id:"insert-timestamp",name:"Add timestamp",icon:"clock",editorCallback:()=>{Zm(this.app,this)}}),this.addCommand({id:"copy-note-text",name:"Copy note text",icon:"copy",editorCallback:(o,a)=>{let r=a instanceof ut.MarkdownView?a:this.app.workspace.getActiveViewOfType(ut.MarkdownView);eh(this.app,{editor:o,view:r})}}),this.addCommand({id:"send-to-chatgpt",name:"Send to ChatGPT",icon:"external-link",editorCallback:(o,a)=>{let r=a instanceof ut.MarkdownView?a:this.app.workspace.getActiveViewOfType(ut.MarkdownView);HN(this.app,{editor:o,view:r,includeFrontmatter:this.settings.includeFrontmatterInChatGPT})}}),this.addCommand({id:"add-geolocation",name:"Add Geolocation to Current Note",checkCallback:o=>{let a=this.app.workspace.getActiveFile();return!a||a.extension!=="md"?!1:(o||this.applyGeolocationToFile(a,{notify:!0}),!0)}}),this.addCommand({id:"cancel-geolocation",name:"Cancel Geolocation Request",checkCallback:o=>o?this.geolocationAbortController!==null:(this.geolocationAbortController&&(this.geolocationAbortController.abort(),this.geolocationAbortController=null),!0)}),this.addCommand({id:"start-voiceover",name:"Start Voiceover",icon:"megaphone",checkCallback:o=>{let a=this.app.workspace.getActiveFile();return!a||a.extension!=="md"?!1:(o||(async()=>{var p,d,h,m;let r=await this.app.vault.read(a),s=this.app.workspace.getActiveViewOfType(ut.MarkdownView),l=((p=s==null?void 0:s.file)==null?void 0:p.path)===a.path?s.editor:null,c=(h=(d=l==null?void 0:l.getSelection)==null?void 0:d.call(l))!=null?h:"",u=c.trim()?c:null,f=Iw(r,a,u);(m=this.voiceoverManager)==null||m.generateVoiceover(a,l!=null?l:null,f,{scope:u?"selection":"note"})})(),!0)}}),$t.forEach(o=>{var s;let a=en(o),r=(s=a==null?void 0:a.name)!=null?s:o;this.addCommand({id:`open-${o}`,name:`Open ${r}`,callback:()=>{this.openEntityPanel(o)}}),this.addCommand({id:`new-${o}`,name:`New ${r}`,callback:()=>{this.createEntityNote(o)}})});let i=zN(this.app,this);this.addCommand({id:"journal-prev",name:"Move to Previous Journal Entry",callback:()=>i("prev")}),this.addCommand({id:"journal-next",name:"Move to Next Journal Entry",callback:()=>i("next")}),this.addCommand({id:"open-mondo-settings",name:"Open Mondo settings",callback:()=>{this.app.setting.open(),this.app.setting.openTabById(this.manifest.id)}}),this.registerMarkdownCodeBlockProcessor("mondo",async(...o)=>new qm(this.app,...o)),this.registerMarkdownPostProcessor((o,a)=>{var r;(r=this.audioTranscriptionManager)==null||r.decorateMarkdown(o,a)}),this.registerEvent(this.app.workspace.on("file-menu",(o,a,r)=>{this.extendFileMenu(o,a,r)})),this.registerView(Da,o=>new Up(o,nd)),this.registerView(xs,o=>new Gp(this,o,td)),this.registerView(nc,o=>new Qp(o,Ns)),this.registerView(ic,o=>new Xp(o,As)),this.registerView(oc,o=>new Wp(o,Ds)),this.registerView(ad,o=>new nm(o,rP)),this.refreshRibbonIcons(),this.app.workspace.onLayoutReady(async()=>{await this.focusDashboardOnStartup(),await this.syncPanels()}),this.registerEvent(this.app.workspace.on("file-open",o=>{var a;(a=this.dailyNoteTracker)==null||a.handleFileOpened(o),this.syncPanels()})),this.registerEvent(this.app.workspace.on("active-leaf-change",()=>{this.syncPanels()})),this.registerEvent(this.app.workspace.on("layout-change",()=>{this.syncPanels()})),this.registerDomEvent(window,"focus",()=>{this.syncPanels()}),this.registerEvent(this.app.workspace.on("active-leaf-change",KN(this))),this.registerEvent(this.app.workspace.on("active-leaf-change",m1(this))),this.registerEvent(this.app.workspace.on("editor-menu",(o,a,r)=>{var u,f,p;if(!(r instanceof ut.MarkdownView))return;let s=r.file;if(!s)return;let l=(u=a!=null?a:r.editor)!=null?u:null;((p=(f=l==null?void 0:l.getSelection)==null?void 0:f.call(l))!=null?p:"").trim()&&o.addItem(d=>{d.setTitle("Start Voiceover"),d.setIcon("file-audio"),d.onClick(()=>{var m,b,y;let h=(b=(m=l==null?void 0:l.getSelection)==null?void 0:m.call(l))!=null?b:"";h.trim()&&((y=this.voiceoverManager)==null||y.generateVoiceover(s,l,h,{scope:"selection"}))})})}))}onunload(){var i,o,a,r,s,l,c,u,f,p;console.log("Mondo: Unloading plugin"),this.mondoConfigManager=null,k1(this.app),Gn.getInstance(this.app).cleanup(),this.app.workspace.getLeavesOfType(Da).forEach(d=>d.detach()),this.app.workspace.getLeavesOfType(ad).forEach(d=>d.detach()),this.app.workspace.getLeavesOfType(xs).forEach(d=>d.detach()),(i=this.dashboardRibbonEl)==null||i.remove(),this.dashboardRibbonEl=null,(o=this.audioLogsRibbonEl)==null||o.remove(),this.audioLogsRibbonEl=null,(a=this.vaultImagesRibbonEl)==null||a.remove(),this.vaultImagesRibbonEl=null,(r=this.vaultFilesRibbonEl)==null||r.remove(),this.vaultFilesRibbonEl=null,(s=this.vaultNotesRibbonEl)==null||s.remove(),this.vaultNotesRibbonEl=null,h1(),(l=this.audioTranscriptionManager)==null||l.dispose(),this.audioTranscriptionManager=null,(c=this.voiceoverManager)==null||c.dispose(),this.voiceoverManager=null,(u=this.noteDictationManager)==null||u.dispose(),this.noteDictationManager=null,(f=this.timestampToolbarManager)==null||f.dispose(),this.timestampToolbarManager=null,(p=this.copyNoteToolbarManager)==null||p.dispose(),this.copyNoteToolbarManager=null}getAudioTranscriptionManager(){return this.audioTranscriptionManager}extendFileMenu(n,i,o){if(!(i instanceof ut.TFile))return;if(i.extension==="md"){let r=`${this.manifest.id}:start-voiceover`,s=new Set(["view-header","more-options","inline-title","tab-header"]);n.addItem(l=>{l.setTitle("Start Voiceover"),l.setIcon("file-audio"),l.onClick(()=>{if(s.has(o!=null?o:"")){let c=this.app.commands;c!=null&&c.executeCommandById&&c.executeCommandById(r);return}(async()=>{var d,h;let c=await this.app.vault.read(i),u=this.app.workspace.getActiveViewOfType(ut.MarkdownView),f=((d=u==null?void 0:u.file)==null?void 0:d.path)===i.path?u.editor:null,p=Iw(c,i);(h=this.voiceoverManager)==null||h.generateVoiceover(i,f!=null?f:null,p,{scope:"note"})})()})})}if(!this.audioTranscriptionManager||!this.audioTranscriptionManager.isAudioFile(i))return;let a=this.audioTranscriptionManager.isTranscriptionInProgress(i);n.addItem(r=>{if(r.setTitle(a?"Transcribing audio\u2026":"Transcribe audio"),r.setIcon(a?"loader-2":"wand-2"),a){r.setDisabled(!0);return}r.onClick(()=>{var s;(s=this.audioTranscriptionManager)==null||s.transcribeAudioFile(i,o!=null?o:i.path)})}),this.audioTranscriptionManager.hasExistingTranscription(i)&&n.addItem(r=>{r.setTitle("Open transcription"),r.setIcon("file-text"),r.onClick(()=>{var s;(s=this.audioTranscriptionManager)==null||s.openTranscription(i,o!=null?o:i.path)})})}async createEntityNote(n){var r,s,l,c;let i=en(n),o=(r=i==null?void 0:i.name)!=null?r:n,a=u=>u.replace(/[<>:"/\\|?*]/g,"-").replace(/\s+/g," ").replace(/[\r\n]+/g," ").trim();try{let u=new Date,f=this.settings,p=(l=(s=f.rootPaths)==null?void 0:s[n])!=null?l:"/",d=Bo(p);d&&(this.app.vault.getAbstractFileByPath(d)||await this.app.vault.createFolder(d));let h=`Untitled ${o}`.replace(/\s+/g," ").trim()||"Untitled",m=a(h)||`untitled-${Date.now()}`,b=0,y="",g="",v=h;for(;;){let F=b===0?"":`-${b}`,N=b===0?"":` ${b+1}`;if(y=`${m}${F}.md`,g=d?`${d}/${y}`:y,v=`${h}${N}`.trim(),!this.app.vault.getAbstractFileByPath(g))break;b+=1}let w=u.toISOString(),T=await Io(this.app,(c=f.templates)!=null?c:{},n),k=wr(v)||wr(m)||`${Date.now()}`,E=Po(T,{title:v,type:String(n),filename:y,slug:k,date:w,datetime:w}),C=await this.app.vault.create(g,E),L=this.app.workspace.getLeaf(!0);return L&&(await L.openFile(C),Gl(L)),new ut.Notice(`Created new ${o} note.`),C}catch(u){return console.error(`Mondo: failed to create ${o} note`,u),new ut.Notice(`Failed to create ${o} note.`),null}}async openEntityPanel(n){let i={entityType:n};if(!en(n)){console.warn("Mondo: attempted to open panel for unknown type",n);return}await this.showPanel(ad,"main",{state:i,reuseMatching:o=>{let r=o.getViewState().state;return(r==null?void 0:r.entityType)===n}})}async showPanel(n,i,o){var c,u,f;let{workspace:a}=this.app,r=a.getLeavesOfType(n),s=null;if(o!=null&&o.reuseMatching?s=(c=r.find(o.reuseMatching))!=null?c:null:s=(u=r[0])!=null?u:null,!s)switch(i){case"main":s=a.getLeaf(!0);break;case"current":s=a.getLeaf(!1);break;case"left":s=a.getLeftLeaf(!1);break;case"right":s=(f=a.getRightLeaf(!1))!=null?f:a.getRightLeaf(!0);break}if(!s)return;let l=o!=null&&o.state?{type:n,active:!0,state:o.state}:{type:n,active:!0};await s.setViewState(l),o!=null&&o.ensureFirstInTabGroup&&this.ensureLeafIsFirstInMainTabs(s),a.revealLeaf(s)}ensureLeafIsFirstInMainTabs(n){var h,m,b,y,g,v,w,T;let{workspace:i}=this.app,o=i.rootSplit;if(!o||n.getRoot()!==o)return;let r=n.parent;if(!(r instanceof ut.WorkspaceTabs))return;let s=r,{children:l}=s;if(!Array.isArray(l))return;let c=l.indexOf(n);if(c<=0)return;l.splice(c,1),l.unshift(n);let u=s.containerEl,f=(h=n.containerEl)!=null?h:n.view.containerEl;u&&f&&u.firstElementChild!==f&&u.insertBefore(f,(m=u.firstElementChild)!=null?m:null);let p=s.tabHeaderEl,d=(v=(g=(y=(b=s.getTabInfo)==null?void 0:b.call(s,n))==null?void 0:y.tabEl)!=null?g:n.tabHeaderEl)!=null?v:null;p&&d&&p.firstElementChild!==d&&p.insertBefore(d,(w=p.firstElementChild)!=null?w:null),(T=s.selectTab)==null||T.call(s,n)}async syncPanels(){var p,d,h,m,b,y,g,v,w,T,k,E,C,L,F,N,_,A,x,S;let n=this.app.workspace,i=n.getLeavesOfType("markdown").length>0,o=Boolean((d=(p=this.settings)==null?void 0:p.dashboard)==null?void 0:d.forceTab);if(!i){if(Ch(this.app,"journal"),!o)return;n.getLeavesOfType(Da).length>0||await this.showPanel(Da,"main",{ensureFirstInTabGroup:!0}),!Hw()&&!ut.Platform.isMobileApp&&((m=(h=n.leftSplit)==null?void 0:h.expand)==null||m.call(h)),(y=(b=n.rightSplit)==null?void 0:b.collapse)==null||y.call(b);return}let a=(g=n.activeLeaf)!=null?g:null;((C=(E=(w=(v=a==null?void 0:a.view)==null?void 0:v.getViewType)==null?void 0:w.call(v))!=null?E:(k=(T=a==null?void 0:a.getViewState)==null?void 0:T.call(a))==null?void 0:k.type)!=null?C:null)==="dashboard-view"&&((F=(L=n.rightSplit)==null?void 0:L.collapse)==null||F.call(L));let s=D=>(D!=null?D:"").replace(/^\/+|\/+$/g,""),l=s((A=(_=(N=this.settings)==null?void 0:N.journal)==null?void 0:_.root)!=null?A:xd.root),c=this.app.workspace.getActiveFile(),u=s(c==null?void 0:c.path);if(u.startsWith(l)&&u.length>0){zw(this.app,"journal");return}Ch(this.app,"journal"),!Hw()&&!ut.Platform.isMobileApp&&((S=(x=n.leftSplit)==null?void 0:x.expand)==null||S.call(x))}async focusDashboardOnStartup(){var n,i;(i=(n=this.settings)==null?void 0:n.dashboard)!=null&&i.openAtBoot&&(this.hasFocusedDashboardOnStartup||(this.hasFocusedDashboardOnStartup=!0,await this.showPanel(Da,"main",{ensureFirstInTabGroup:!0})))}};
/*! Bundled license information:

scheduler/cjs/scheduler.production.js:
  (**
   * @license React
   * scheduler.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react.production.js:
  (**
   * @license React
   * react.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom.production.js:
  (**
   * @license React
   * react-dom.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react-dom/cjs/react-dom-client.production.js:
  (**
   * @license React
   * react-dom-client.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)

react/cjs/react-jsx-runtime.production.js:
  (**
   * @license React
   * react-jsx-runtime.production.js
   *
   * Copyright (c) Meta Platforms, Inc. and affiliates.
   *
   * This source code is licensed under the MIT license found in the
   * LICENSE file in the root directory of this source tree.
   *)
*/
